<div class="signup-wrapper" layout="column" layout-align="start center" ng-style="vm.style" ng-if="!vm.landingPage">
  <div class="page-title">
    <h1 class="md-display-1 text-center">
      <translate>Sign Up</translate>
    </h1>
    <!-- <h6>Subtitle if needed</h6> -->
  </div>

  <div md-whiteframe="2">
    <md-content layout="column">
      <form layout="column" name="signupForm" ng-submit="vm.signup(signupForm)" novalidate ng-hide="vm.registered">
        <div layout="column" class="role-form">
          <h4>
            <translate>1. Select your role</translate>
          </h4>
          <md-radio-group ng-model="vm.register.account_type">
            <md-radio-button value="I" ng-selected="true" class="md-primary">
              <img src="./images/icon-role-implementer.svg" alt="" class="img-role">
              <translate>Implementer or Technologist</translate>
            </md-radio-button>
            <p class="md-small">
              <translate>How can I better scale-up my implementation? Are there tips and resources that I should consider to improve my implementation? Sign up to complete the digital version of the MAPS toolkit and track the performance of your implementation.</translate>
            </p>
            <md-radio-button value="D" class="md-primary">
              <img src="./images/icon-role-investor.svg" alt="" class="img-role">
              <translate>Financial Investor</translate>
            </md-radio-button>
            <p class="md-small">
              <translate>What are the different projects within your portfolio? Sign up to access a visual dashboard displaying the performance metrics of projects within your portfolio.</translate>
            </p>
            <md-radio-button value="G" class="md-primary">
              <img src="./images/icon-role-government.svg" alt="" class="img-role">
              <translate>Government</translate>
            </md-radio-button>
            <p class="md-small">
              <translate>Who is implementing digital health interventions in your country? Sign up to access interactive maps and performance metrics on the different implementation in your country.</translate>
            </p>
          </md-radio-group>
        </div>
        <div layout="column" class="main-form">
          <h4>
            <translate>2. Fill out the form below</translate>
          </h4>
          <md-input-container class="md-block">
            <label>
              <translate>Email address</translate>
            </label>
            <input ng-model="vm.register.email" required name="email" type="email" ng-change="vm.handleCustomError(signupForm, 'email')" />
            <div ng-messages="signupForm.email.$error">
              <div ng-message="required">
                <translate>This is required</translate>
              </div>
              <div ng-message="email">
                <translate>This should be a valid email</translate>
              </div>
              <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>
            </div>
          </md-input-container>
          <md-input-container>
            <label>
              <translate>Password}</translate>
            </label>
            <input ng-model="vm.register.password1" type="password" name="password1" required ng-minlength="6" ng-change="vm.handleCustomError(signupForm, 'password1')"/>
            <div ng-messages="signupForm.password1.$error" >
              <div ng-message="required">
                <translate>This is required</translate>
              </div>
              <div ng-message="minlength">
                <translate>This need to be at least 6 chars</translate>
              </div>
              <div ng-message="custom" ng-repeat="error in signupForm.password1.customError">{{error}} </div>
            </div>
          </md-input-container>
          <md-input-container>
            <label>
              <translate>Password (Again)</translate>
            </label>
            <input ng-model="vm.register.password2" type="password" name="password2" required  match-password="password1" ng-change="vm.handleCustomError(signupForm, 'password2')" />
            <div ng-messages="signupForm.password2.$error">
              <div ng-message="required">
                <translate>This is required</translate>
              </div>
              <div ng-message="passwordMatch">
                <translate>Your passwords do not match.</translate>
              </div>
              <div ng-message="custom" ng-repeat="error in signupForm.password2.customError">{{error}} </div>
            </div>
          </md-input-container>
          <p class="global-error">
            <span ng-repeat="error in signupForm.non_field_errors"> {{error}}</span>
          </p>
          <div layout="row" layout-align="start">
            <div flex="auto" class="login-back">
              <small>
                <translate>Already signed up?</translate>
                <a ui-sref="login">
                  <translate>Login here</translate>
                </a>
              </small>
            </div>
            <div flex="grow" layout="column" layout-align="center end">
              <md-button ng-hide="vm.inProgress" class="md-raised md-primary" type="submit" ng-disabled="signupForm.$invalid">
                <translate>Sign up now</translate>
              </md-button>

              <md-progress-circular ng-show="vm.inProgress" md-mode="indeterminate"></md-progress-circular>
            </div>
          </div>
        </div>
      </form>
      <div layout="column" class="form-success" ng-show="vm.registered">
        <i class="material-icons">check_circle</i>
        <h4>
          <translate>Go to next step</translate>
        </h4>
        <p class="text-center">
          <translate>Your registration is successful, you will receive an email with the instructions to activate your account, you will be automatically logged in in 5 seconds...</translate>
        </p>
      </div>
    </md-content>
  </div>
  <disclaimer></disclaimer>
</div>


<div ng-if="vm.landingPage" class="landing-page" ng-style="vm.style" >
  <h2 class="md-display-3">
    <translate>Sign up</translate>
  </h2>
  <h5 class="md-headline" id="scroll-to-head">
    <translate>Whether you are an implementer, government, or financial investor, or technologist, sign up below.</translate>
  </h5>

  <form name="signupForm" ng-submit="vm.signup(signupForm)"  novalidate ng-hide="vm.registered" >
    <div layout="column" class="role-form" ng-class="{'hidden' : vm.hideMainForm}">
      <h4>
        <translate>1. Select your role</translate>
      </h4>
      <md-radio-group ng-model="vm.register.account_type">
        <md-radio-button value="I" ng-selected="true" class="md-primary">
          <img src="./images/icon-role-implementer.svg" alt="" class="img-role">
          <translate>Implementer or Technologist</translate>
        </md-radio-button>
        <p>
          <translate>
            How can I better scale-up my implementation? Are there tips and resources that I should consider to improve my implementation? Sign up to complete the digital version of the MAPS toolkit and track the performance of your implementation.
          </translate>
        </p>
        <md-radio-button value="D" class="md-primary">
          <img src="./images/icon-role-investor.svg" alt="" class="img-role">
          <translate>Financial Investor</translate>
        </md-radio-button>
        <p>
          <translate>
            What are the different projects within your portfolio? Sign up to access a visual dashboard displaying the performance metrics of projects within your portfolio.
          </translate>
        </p>
        <md-radio-button value="G" class="md-primary">
          <img src="./images/icon-role-government.svg" alt="" class="img-role">
          <translate>Government</translate>
        </md-radio-button>
        <p>
          <translate>
            Who is implementing digital health interventions in your country? Sign up to access interactive maps and performance metrics on the different implementation in your country.
          </translate>
        </p>
      </md-radio-group>

      <div class="form-actions" layout=row layout-align=end>
        <md-button class="md-raised md-primary" type="submit" ng-click="vm.nextStep()">
          <translate>Go to next step</translate>
          <md-icon class="material-icons">arrow_forward</md-icon>
        </md-button>
      </div>
    </div>
    <div layout="column" class="main-form next-step" ng-class="{'hidden' : !vm.hideMainForm}">
      <h4>
        <translate>
          Go to next step
        </translate>
      </h4>
      <md-input-container class="md-block">
        <label>
          <translate>Email address</translate>
        </label>
        <input ng-model="vm.register.email" required name="email" type="email" ng-change="vm.handleCustomError(signupForm, 'email')" />
        <div ng-messages="signupForm.email.$error">
          <div ng-message="required">
            <translate>This is required</translate>
          </div>
          <div ng-message="email">
            <translate>This should be a valid email</translate>
          </div>
          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>
        </div>
      </md-input-container>
      <md-input-container>
        <label>
          <translate>Password}</translate>
        </label>
        <input ng-model="vm.register.password1" type="password" name="password1" required ng-minlength="6" ng-change="vm.handleCustomError(signupForm, 'password1')"/>
        <div ng-messages="signupForm.password1.$error" >
          <div ng-message="required">
            <translate>This is required</translate>
          </div>
          <div ng-message="minlength">
            <translate>This need to be at least 6 chars</translate>
          </div>
          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>
        </div>
      </md-input-container>
      <md-input-container>
        <label>
          <translate>Password (Again)</translate>
        </label>
        <input ng-model="vm.register.password2" type="password" name="password2" required  match-password="password1" ng-change="vm.handleCustomError(signupForm, 'password2')" />
        <div ng-messages="signupForm.password2.$error">
          <div ng-message="required">
            <translate>This is required</translate>
          </div>
          <div ng-message="passwordMatch">
            <translate>Your passwords do not match.</translate>
          </div>
          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>
        </div>
      </md-input-container>
      <div class="form-actions" layout=row layout-align=end>
        <md-button ng-hide="vm.inProgress" class="md-raised md-primary" type="submit" ng-disabled="signupForm.$invalid">
          <translate>Sign up now</translate>
        </md-button>
        <md-progress-circular ng-show="vm.inProgress" md-mode="indeterminate"></md-progress-circular>
      </div>
    </div>
  </form>

  <div layout="column" class="form-success md-whiteframe-2dp" ng-show="vm.registered">
    <i class="material-icons">check_circle</i>
    <h4>
      <translate>Congratulations</translate>
    </h4>
    <p class="text-center">
      <translate>Your registration is successful, you will receive an email with the instructions to activate your account, you will be automatically logged in in 5 seconds...</translate>
    </p>
  </div>
</div>
