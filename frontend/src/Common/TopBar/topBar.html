<md-toolbar class="main-toolbar toolbar-global">
  <div class="md-toolbar-tools">

    <md-button
      ui-sref="landing"
      aria-label="Digital Health Atlas"
      class="app-title" md-no-ink>
      <span>
      {{vm.translate('TOP_BAR.DIGITAL_HEALTH_ATLAS')}}
      </span>
    </md-button>

    <md-button aria-label="Country Level View"
               title="Country Level View"
               class="view-selector"
               ui-sref="country"
               ng-show="vm.showCountryLevelViewButton()"
               md-no-ink>
      <md-icon class="material-icons">public</md-icon>
      {{vm.translate('TOP_BAR.COUNTRY_MAP_BUTTON')}}
    </md-button>

    <md-button aria-label="My Projects"
               title="My Projects"
               class="view-selector"
               ui-sref="my-projects"
               ng-show="vm.hasProfile()"
               md-no-ink>
      <md-icon class="material-icons ">toc</md-icon>
      {{vm.translate('TOP_BAR.MY_PROJECTS_BUTTON')}}
    </md-button>

    <md-button aria-label="Planning and Guidance"
               title="Planning and Guidance"
               class="view-selector"
               ui-sref="cms"
               ng-show="vm.showPlanningAndGuidanceButton()"
               md-no-ink>
      <md-icon class="material-icons ">import_contacts</md-icon>
      {{vm.translate('TOP_BAR.PLANNING_AND_GUIDANCE_BUTTON')}}
    </md-button>

    <thematic
      axis="vm.axis"
      domain="vm.domain"
      ng-show="vm.showThematic()"
      buttontitle="{{vm.translate('TOP_BAR.THEMATIC_GUIDANCE_TITLE')}}"
      buttonclass="md-primary"
      buttonicon="help_outline"
      buttontext="{{vm.translate('TOP_BAR.THEMATIC_GUIDANCE_BUTTON')}}">
    </thematic>

    <span flex></span>

    <!-- TODO -->
    <!-- Add flags dynamically -->
    <div class="language-badge">
      <div class="country-flag" style="background-image: url('/static/flags/af.png')">
      </div>
    </div>

    <searchbar compact-mode="true" ng-if="vm.showSearch()"></searchbar>

    <md-button class="landing-link"
               ui-sref-active="active"
               ui-sref="login"
               aria-label="Login"
               ng-show="vm.showLogin()"
               md-no-ink>
      {{vm.translate('TOP_BAR.LOGIN')}}
    </md-button>

    <md-button class="landing-link"
               ui-sref-active="active"
               ui-sref="signup"
               aria-label="Singup"
               ng-show="vm.showSignUp()"
               md-no-ink >
      {{vm.translate('TOP_BAR.SIGN_UP')}}
    </md-button>

    <md-menu md-position-mode="target-right target" ng-if="vm.showPersonaMenu()">
      <md-button class="md-icon-button" aria-label="User" ng-click="vm.openMenu($mdOpenMenu, $event)" md-no-ink>
        <md-icon md-menu-origin class="material-icons ">person</md-icon>
      </md-button>

      <md-menu-content class="user-menu" width="4">
        <md-menu-item>
          <div class="user-name">
            <md-icon class="material-icons" md-menu-align-target>account_circle</md-icon>
            <span ng-hide ="vm.userModel.profile.name">{{vm.userModel.username}} </span>
            <span ng-show ="vm.userModel.profile.name">{{vm.userModel.profile.name}} </span>
          </div>
        </md-menu-item>
        <md-menu-item>
          <div class="user-role">
            <md-icon class="material-icons" md-menu-align-target>verified_user</md-icon>
            <span>{{vm.translate('TOP_BAR.PERSONA_MENU.ROLE_LINE', {role_name : vm.writeUserRole()})}}</span>
          </div>
        </md-menu-item>
        <md-menu-divider></md-menu-divider>
        <md-menu-item>
          <md-button ui-sref="editProfile">
            <md-icon class="material-icons"><i class="material-icons">settings</i></md-icon>
            {{vm.translate('TOP_BAR.PERSONA_MENU.EDIT_MY_PROFILE')}}
          </md-button>
        </md-menu-item>
        <md-menu-item>
          <md-button ng-click="vm.logout()">
            <md-icon class="material-icons">exit_to_app</md-icon>
            {{vm.translate('TOP_BAR.PERSONA_MENU.LOGOUT')}}
          </md-button>
        </md-menu-item>
        <md-menu-divider></md-menu-divider>
        <!-- TODO -->
        <span class="label">
          {{vm.translate('TOP_BAR.PERSONA_MENU.COUNTRY_SUB_TITLE')}}
        </span>
        <md-menu-item>
          <div class="user-lang" layout="row" layout-align="start center">
            <span class="country-flag">
                <img ng-src="/static/flags/af.png" alt="Afghanistan" src="/static/flags/af.png">
            </span>
            <span class="country-label">Countryname</span>
          </div>
        </md-menu-item>
        <span class="label">
          {{vm.translate('TOP_BAR.PERSONA_MENU.SITE_LANGUAGE_SUB_TITLE')}}
        </span>
        <md-menu-item>
          <div class="user-lang" layout="row" layout-align="start center">
            <span class="country-flag">
                <img ng-src="/static/flags/af.png" alt="Afghanistan" src="/static/flags/af.png">
            </span>
            <span class="country-label">Sitelanguage</span>
          </div>
        </md-menu-item>
        <!-- -->
      </md-menu-content>
    </md-menu>

    <md-button class="add-new-project" ui-sref="newProject"
               aria-label="Add new project"
               ng-show="vm.showNewProjectButton()"
               md-no-ink>
      <md-icon class="material-icons">add</md-icon>
      {{vm.translate('TOP_BAR.NEW_PROJECT_BUTTON')}}
    </md-button>

  </div>
</md-toolbar>
