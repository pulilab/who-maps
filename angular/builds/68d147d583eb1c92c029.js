(window.webpackJsonp=window.webpackJsonp||[]).push([[29,4,13,16,17,18,30,37,157,158,159],{"./node_modules/babel-runtime/core-js/object/create.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-prototype-of.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/object/get-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/inherits.js":function(e,t,n){"use strict";t.__esModule=!0;var r=s(n("./node_modules/babel-runtime/core-js/object/set-prototype-of.js")),o=s(n("./node_modules/babel-runtime/core-js/object/create.js")),a=s(n("./node_modules/babel-runtime/helpers/typeof.js"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(e,t,n){"use strict";t.__esModule=!0;var r,o=n("./node_modules/babel-runtime/helpers/typeof.js"),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},"./node_modules/core-js/library/fn/object/create.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.object.create.js");var r=n("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return r.create(e,t)}},"./node_modules/core-js/library/fn/object/get-prototype-of.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.object.get-prototype-of.js"),e.exports=n("./node_modules/core-js/library/modules/_core.js").Object.getPrototypeOf},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),e.exports=n("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/modules/_set-proto.js":function(e,t,n){var r=n("./node_modules/core-js/library/modules/_is-object.js"),o=n("./node_modules/core-js/library/modules/_an-object.js"),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n("./node_modules/core-js/library/modules/_ctx.js")(Function.call,n("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},"./node_modules/core-js/library/modules/es6.object.create.js":function(e,t,n){var r=n("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{create:n("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.get-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/library/modules/_to-object.js"),o=n("./node_modules/core-js/library/modules/_object-gpo.js");n("./node_modules/core-js/library/modules/_object-sap.js")("getPrototypeOf",function(){return function(e){return o(r(e))}})},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{setPrototypeOf:n("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/lodash/_basePullAt.js":function(e,t,n){var r=n("./node_modules/lodash/_baseUnset.js"),o=n("./node_modules/lodash/_isIndex.js"),a=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,s=n-1;n--;){var l=t[n];if(n==s||l!==i){var i=l;o(l)?a.call(e,l,1):r(e,l)}}return e}},"./node_modules/lodash/_baseSlice.js":function(e,t){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a}},"./node_modules/lodash/_baseUnset.js":function(e,t,n){var r=n("./node_modules/lodash/_castPath.js"),o=n("./node_modules/lodash/last.js"),a=n("./node_modules/lodash/_parent.js"),s=n("./node_modules/lodash/_toKey.js");e.exports=function(e,t){return t=r(t,e),null==(e=a(e,t))||delete e[s(o(t))]}},"./node_modules/lodash/_parent.js":function(e,t,n){var r=n("./node_modules/lodash/_baseGet.js"),o=n("./node_modules/lodash/_baseSlice.js");e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},"./node_modules/lodash/remove.js":function(e,t,n){var r=n("./node_modules/lodash/_baseIteratee.js"),o=n("./node_modules/lodash/_basePullAt.js");e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,s=[],l=e.length;for(t=r(t,3);++a<l;){var i=e[a];t(i,a,e)&&(n.push(i),s.push(a))}return o(e,s),n}},"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mn":"./node_modules/moment/locale/mn.js","./mn.js":"./node_modules/moment/locale/mn.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"},"./src/Project/CollapsibleSet.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=d(n("./node_modules/babel-runtime/helpers/createClass.js")),a=d(n("./node_modules/angular/index.js")),s=d(n("./node_modules/lodash/remove.js")),l=d(n("./node_modules/moment/moment.js")),i=d(n("./node_modules/lodash/debounce.js")),u=n("./src/Utilities.js"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./src/store/modules/projects.js"));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(t,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments[5];(0,r.default)(this,e),this.EE=window.EE,this.element=t,this.scope=n,this.$ngRedux=l,this.toggleClass="collapsed",this.activateClass="active",this.collectionName=o,this.resetDefaultList=a,this.emptyCheckableArray=s,this.dispatchChange=(0,i.default)(this.dispatchChange.bind(this),300)}return(0,o.default)(e,[{key:"defaultOnInit",value:function(){var e=this;this.bindElementClick(),this.elementId=this.element[0].getAttribute("id"),this.elementMainSection=this.element[0].getElementsByClassName("project-section")[0],this.EE.on("activateFieldSet",this.activateFieldSet,this),setTimeout(function(){e.EE.emit("componentLoaded",e.elementId)}),this.defaultWatchers(),this.fixUrl=u.fixUrl}},{key:"defaultWatchers",value:function(){var e=this;this.resetDefaultList&&this.resetDefaultList.length>0&&this.resetDefaultList.forEach(function(t){e.scope.$watch(function(e){return e.vm[t.toWatch]},e.emptyCustom.bind(e,t.field))}),this.emptyCheckableArray&&this.emptyCheckableArray.length>0&&this.emptyCheckableArray.forEach(function(t){e.project[t.toWatch].forEach(function(n,r){e.scope.$watch(function(e){return e.vm.project[t.toWatch][r]},e.emptyCheckable.bind(e,t.check,t.field),!0)})})}},{key:"dispatchChange",value:function(e,t){var n={};n[e]=a.default.copy(t),this.$ngRedux.dispatch(c.updateEditedProject(n))}},{key:"emptyCustom",value:function(e,t){!1===t&&(this.project[e].custom=void 0)}},{key:"emptyCheckable",value:function(e,t,n){n[e]||(n[t]=void 0)}},{key:"defaultOnDestroy",value:function(){this.EE.removeListener("projectScrollTo",this.activateFieldSet)}},{key:"bindElementClick",value:function(){var e=this,t=this;this.element[0].addEventListener("click",function(){t.EE.emit("activateFieldSet",e.elementId)})}},{key:"activateFieldSet",value:function(e){e===this.elementId?this.elementMainSection.classList.add(this.activateClass):this.elementMainSection.classList.remove(this.activateClass)}},{key:"addChild",value:function(e){var t=this[this.collectionName][e],n="string"==typeof t[0]?"":{};t.push(n)}},{key:"removeChild",value:function(e,t){var n=this[this.collectionName][t].splice(e,1);return this.dispatchChange(t,this[this.collectionName][t]),n}},{key:"showAddMore",value:function(e,t){return e===t.length-1}},{key:"showRemove",value:function(e,t){return t.length>1}},{key:"collapse",value:function(){this.elementMainSection.classList.toggle(this.toggleClass)}},{key:"findField",value:function(e){var t=this[this.collectionName][e];return t&&t.standard?t.standard:t}},{key:"checkboxToggle",value:function(e,t){if(e&&t){var n=this.findField(t);this.checkboxChecked(e,t)?(0,s.default)(n,function(t){return t===e.id}):n.push(e.id),this.dispatchChange(t,n)}}},{key:"checkboxChecked",value:function(e,t){if(!e||!t)return!1;var n=this.findField(t);return!(!n||!n.length)&&n.some(function(t){return t===e.id})}},{key:"printDate",value:function(e){return e?(0,l.default)(e).format("DD-MM-YYYY"):""}},{key:"setAvailableOptions",value:function(e,t,n){if(e&&e.length>0){var r=e.map(function(e){return e[n]}).filter(function(e){return e});e.forEach(function(e){var o=t.filter(function(e){return-1===r.indexOf(e)});e[n]&&o.push(e[n]),o.sort(function(e,t){return e.localeCompare(t)}),e.available=o})}}},{key:"setAvailableDictOptions",value:function(e,t,n){if(e&&e.length>0){n=n||"id";var r=e.filter(function(e){return e[n]});e.forEach(function(e){var o=t.filter(function(t){return e[n]===t.id||r.every(function(e){return e[n]!==t.id})});o.sort(function(e,t){return e.name.localeCompare(t.name)}),e.available=o})}}},{key:"handleCustomError",value:function(e){this.form[e]&&(this.form[e].$setValidity("custom",!0),this.form[e].customError=[])}},{key:"setCustomError",value:function(e,t){e=e.trim();var n=this.form[e];if(n){var r=n.customError||[];-1===r.indexOf(t)&&r.push(t),n.$setValidity("custom",!1),n.customError=r}else console.warn("trying to set an error on an unexisting form element: ",e)}}]),e}();t.default=m},"./src/Project/ImplementationOverview/ImplementationOverview.html":function(e,t){e.exports='<div class="project-section section-strategy" md-whiteframe="2">\n  <div class="section-title md-title">\n    <translate>2. Implementation overview</translate>\n    <span class="toggler" ng-click="vm.collapse()"><i class="material-icons">keyboard_arrow_down</i></span>\n  </div>\n\n  <div class="section-wrapper">\n    <h6 class="first required">\n      <translate>Add one or more Software and related Digital Health Interventions (DHI):</translate>\n    </h6>\n\n    <div class="software-dhi input-group" ng-repeat="platform in vm.project.platforms">\n      <div layout="row">\n        <md-input-container flex="33">\n          <label>\n            <translate>Software (select from list)</translate>\n          </label>\n          <md-select ng-model="platform.id" name="{{\'platforms_\'+ $index + \'.id\' }}" ng-required="vm.activateValidation" >\n            <md-option ng-value="plat.id" ng-repeat="plat in platform.available">\n              {{plat.name}}\n            </md-option>\n          </md-select>\n          <div ng-messages="vm.form[\'platforms_\' + $index + \'.id\'].$error">\n            <div ng-message="required">\n              <translate>This is required.</translate>\n            </div>\n            <div ng-message="custom">\n              <div ng-repeat="message in vm.form[\'platforms_\' + $index + \'.id\'].customError">\n                {{message}}\n              </div>\n            </div>\n          </div>\n        </md-input-container>\n\n        <div class="add-more-item" flex="33">\n          <div layout="row" layout-align="start end">\n            <md-button class="md-primary" aria-label="Add more"\n                       ng-show="vm.showAddMore($index, vm.project.platforms)"\n                       ng-click="vm.addChild(\'platforms\')">\n              <md-icon><i class="material-icons">&#xE145;</i></md-icon>\n              <translate>Add more</translate>\n            </md-button>\n            <md-button class="md-warn" aria-label="Remove"\n                       ng-show="vm.showRemove($index, vm.project.platforms)"\n                       ng-click="vm.removeChild($index, \'platforms\')">\n              <md-icon><i class="material-icons">&#xE15B;</i></md-icon>\n              <translate>Remove</translate>\n            </md-button>\n          </div>\n        </div>\n      </div>\n\n      <dialog-multi-selector\n        ng-show="platform.id"\n        selection="platform.strategies"\n        button-name="{{\'Digital Health Interventions\' | translate }}"\n        is-required="vm.activateValidation"\n        show-title="true"\n        elements="vm.structure.strategies"\n        collection-name="strategies"\n        name="\'platforms_\'+ $index + \'.strategies\'"\n        form-element="vm.form[\'platforms_\'+ $index + \'.strategies\']"\n        dialog-name="platform.name">\n      </dialog-multi-selector>\n    </div>\n  </div>\n\n  <div class="section-wrapper">\n\n    <div class="essential md-block">\n      <h6>\n        <translate>Health focus area(s) - select all that apply:</translate>\n      </h6>\n      <dialog-multi-selector\n        selection="vm.project.health_focus_areas"\n        button-name="{{\'Health focus area\' | translate }}"\n        elements="vm.health_focus_areas"\n        name="\'health_focus_areas\'"\n        on-close="vm.dispatchChange"\n        form-element="vm.form.health_focus_areas"\n        collection-name="health_focus_areas">\n      </dialog-multi-selector>\n    </div>\n\n    <div class="md-block extra-margin-double">\n      <md-input-container class="md-block">\n        <label>\n          <translate>What are the Health System Challenges (HSC) your project addresses?</translate>\n        </label>\n        <md-select ng-model="vm.project.hsc_challenges" md-on-close="vm.dispatchChange(\'hsc_challenges\', vm.project.hsc_challenges)"\n        md-select-separator="empty" name="hsc_challenges" ng-required="vm.activateValidation" multiple>\n          <md-optgroup label="{{hsc.name}}" ng-repeat="hsc in vm.structure.hsc_challenges">\n            <md-option value="{{challenge.id}}" ng-repeat="challenge in hsc.challenges">\n              {{challenge.challenge}}\n            </md-option>\n          </md-optgroup>\n        </md-select>\n        <div ng-messages="vm.form.hsc.$error">\n          <div ng-message="required">\n            <translate>This is required.</translate>\n          </div>\n        </div>\n      </md-input-container>\n    </div>\n\n    <div class="md-block first extra-margin-double">\n      <md-input-container class="md-block">\n        <label>\n          <translate>What part(s) of the Health Information System (HIS) does this project support?</translate>\n        </label>\n        <md-select ng-model="vm.project.his_bucket" md-on-close="vm.dispatchChange(\'his_bucket\', vm.project.his_bucket)"\n        md-select-separator="empty" name="his_bucket" ng-required="vm.activateValidation" multiple>\n          <md-option value="{{his.id}}" ng-repeat="his in vm.structure.his_bucket">\n            {{his.name}}\n          </md-option>\n        </md-select>\n        <div ng-messages="vm.form.his.$error">\n          <div ng-message="required">\n            <translate>This is required.</translate>\n          </div>\n        </div>\n      </md-input-container>\n    </div>\n\n    <h6 class="extra-margin required">\n      <translate>What kind of coverage does your project have?</translate>\n      </h6>\n\n    <div class="md-block extra-margin">\n      <div layout="column">\n        <md-radio-group ng-model="vm.project.coverageType"\n        ng-change="vm.dispatchChange(\'coverageType\', vm.project.coverageType)"\n        name="coverageType" md-no-ink ng-required="vm.activateValidation" class="md-primary" layout="row">\n          <md-radio-button ng-value="1" aria-label="coverage-type-yes">\n            <translate>Sub-national</translate>\n          </md-radio-button>\n          <md-radio-button ng-value="2" aria-label="coverage-type-no">\n            <translate>National</translate>\n          </md-radio-button>\n        </md-radio-group>\n        <div class="radio-error-messages">\n          <div ng-messages="vm.form.coverageType.$error">\n            <div ng-message="required">\n              <translate>This is required.</translate>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div ng-show="vm.project.coverageType === 1" class="md-block extra-margin-double">\n      <h6 class="subtitle"><i class="material-icons">&#xE567;</i>\n        <translate>{{vm.subLevelNames[0]}} level deployment</translate>\n      </h6>\n\n      <div class="input-group" ng-repeat="cov in vm.project.coverage">\n        <div layout="column">\n          <div layout="row">\n            <md-input-container class="district" flex="45">\n              <label class="text-capitalize">\n                {{vm.subLevelNames[0]}}\n              </label>\n              <md-select ng-model="cov.district"\n                         aria-label="{{\'coverage_\' + $index + \'.district\'}}"\n                         name="{{\'coverage_\' + $index + \'.district\'}}"\n                         ng-required="vm.isSubLevelCoverageDistrictRequired(cov)">\n                <md-option value="{{district.id}}" ng-repeat="district in cov.available">\n                  {{district.name}}\n                </md-option>\n                <md-option md-option-empty ng-hide="vm.districtList.length">\n                  <translate>Select a country </translate>\n                </md-option>\n              </md-select>\n              <div ng-messages="vm.form[\'coverage_\' + $index + \'.district\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_\' + $index + \'.district\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n          </div>\n\n          <div layout="row" ng-if="vm.facilities.length > 0" class="no-float">\n            <md-chips ng-model="cov.facilities_list" md-autocomplete-snap\n                      md-on-add="vm.updateFacilityNumber(cov)"\n                      md-on-remove="vm.updateFacilityNumber(cov)"\n                      md-require-match="true">\n              <md-autocomplete\n                md-no-cache\n                md-search-text="cov.facilitySearch"\n                md-items="item in vm.searchFacility(cov.facilitySearch, cov.facilities_list)"\n                md-item-text="item"\n                placeholder="{{\'Search Facilities\' | translate}}">\n                <span md-highlight-text="ctrl.searchText">{{item}}</span>\n              </md-autocomplete>\n              <md-chip-template>\n                <span>\n                  {{$chip}}\n                </span>\n              </md-chip-template>\n            </md-chips>\n          </div>\n\n          <div layout="row">\n            <md-input-container class="number" flex="20">\n              <label>\n                <translate># Health Workers</translate>\n              </label>\n              <input ng-required="vm.isSubLevelCoverageRequired()"\n                     name="{{\'coverage_\' + $index}}.health_workers"\n                     type="number"\n                     min="0"\n                     ng-model="cov.health_workers" >\n              <div ng-messages="vm.form[\'coverage_\' + $index + \'.health_workers\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_\' + $index + \'.health_workers\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <md-input-container class="number" flex="20" ng-show="vm.facilities.length === 0">\n              <label>\n                <translate># Facilities</translate>\n              </label>\n              <input ng-required="vm.isSubLevelCoverageRequired()"\n                     name="{{\'coverage_\' + $index}}.facilities"\n                     type="number"\n                     min="0"\n                     ng-model="cov.facilities">\n              <div ng-messages="vm.form[\'coverage_\' + $index + \'.facilities\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_\' + $index + \'.facilities\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <md-input-container class="number" flex="20">\n              <label>\n                <translate># Clients</translate>\n              </label>\n              <input ng-required="vm.isSubLevelCoverageRequired()"\n                     name="{{\'coverage_\' + $index}}.clients"\n                     type="number"\n                     min="0"\n                     ng-model="cov.clients">\n              <div ng-messages="vm.form[\'coverage_\' + $index + \'.clients\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_\' + $index + \'.clients\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <div class="add-more-item" flex="40">\n              <md-button class="md-warn" aria-label="Remove"\n                         ng-show="vm.showRemove($index, vm.project.coverage)"\n                         ng-click="vm.removeChild($index, \'coverage\')">\n                <md-icon><i class="material-icons">&#xE15B;</i></md-icon>\n                <translate>Remove</translate>\n              </md-button>\n              <md-button class="md-primary" aria-label="Add more"\n                         ng-show="vm.showAddMore($index, vm.project.coverage)"\n                         ng-click="vm.addChild(\'coverage\')">\n                <md-icon><i class="material-icons">&#xE145;</i></md-icon>\n                <translate>Add more</translate>\n              </md-button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      \x3c!--NEW COVERAGE LAYER--\x3e\n\n      <h6 class="subtitle" ng-if-start="vm.subLevelNames[1]">\n        <i class="material-icons">&#xE567;</i>\n        <translate>{{vm.subLevelNames[1]}} level deployment</translate>\n      </h6>\n\n      <div class="input-group" ng-repeat="cov in vm.project.coverage_second_level" ng-if-end>\n        <div layout="column">\n          <div layout="row">\n            <md-input-container class="district" flex="45">\n              <label class="text-capitalize">\n                {{vm.subLevelNames[1]}}\n              </label>\n              <md-select ng-model="cov.district"\n                         aria-label="{{\'coverage_second_level_\' + $index + \'.district\'}}"\n                         name="{{\'coverage_second_level_\' + $index + \'.district\'}}"\n                         ng-required="vm.isSubLevelCoverageDistrictRequired(cov)">\n                <md-option value="{{district.id}}" ng-repeat="district in cov.available">\n                  {{district.name}}\n                </md-option>\n                <md-option md-option-empty ng-hide="vm.secondSubLevelList.length">\n                  <translate>Select a country </translate>\n                </md-option>\n              </md-select>\n              <div ng-messages="vm.form[\'coverage_second_level_\' + $index + \'.district\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_second_level_\' + $index + \'.district\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n          </div>\n          <div layout="row" ng-if="vm.facilities.length > 0" class="no-float">\n            <md-chips ng-model="cov.facilities_list" md-autocomplete-snap\n                      md-on-add="vm.updateFacilityNumber(cov)"\n                      md-on-remove="vm.updateFacilityNumber(cov)"\n                      md-require-match="true">\n              <md-autocomplete\n                md-no-cache\n                md-search-text="cov.facilitySearch"\n                md-items="item in vm.searchFacility(cov.facilitySearch, cov.facilities_list)"\n                md-item-text="item"\n                placeholder="{{\'Search Facilities\' | translate}}">\n                <span md-highlight-text="ctrl.searchText">{{item}}</span>\n              </md-autocomplete>\n              <md-chip-template>\n                <span>\n                  {{$chip}}\n                </span>\n              </md-chip-template>\n            </md-chips>\n\n          </div>\n          <div layout="row">\n            <md-input-container class="number" flex="20">\n              <label>\n                <translate># Health Workers</translate>\n              </label>\n              <input\n                name="{{\'coverage_second_level_\' + $index}}.health_workers"\n                type="number"\n                min="0"\n                ng-model="cov.health_workers" >\n              <div ng-messages="vm.form[\'coverage_second_level_\' + $index + \'.health_workers\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_second_level_\' + $index + \'.health_workers\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <md-input-container class="number" flex="20" ng-show="vm.facilities.length === 0">\n              <label>\n                <translate># Facilities</translate>\n              </label>\n              <input\n                name="{{\'coverage_second_level_\' + $index}}.facilities"\n                type="number"\n                min="0"\n                ng-model="cov.facilities">\n              <div ng-messages="vm.form[\'coverage_second_level_\' + $index + \'.facilities\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_second_level_\' + $index + \'.facilities\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <md-input-container class="number" flex="20">\n              <label>\n                <translate># Clients</translate>\n              </label>\n              <input\n                name="{{\'coverage_second_level_\' + $index}}.clients"\n                type="number"\n                min="0"\n                ng-model="cov.clients">\n              <div ng-messages="vm.form[\'coverage_second_level_\' + $index + \'.clients\'].$error">\n                <div ng-message="required">\n                  <translate>This is required.</translate>\n                </div>\n                <div ng-message="custom">\n                  <div ng-repeat="message in vm.form[\'coverage_second_level_\' + $index + \'.clients\'].customError">\n                    {{message}}\n                  </div>\n                </div>\n              </div>\n            </md-input-container>\n            <div class="add-more-item" flex="40">\n              <md-button class="md-warn" aria-label="Remove"\n                         ng-show="vm.showRemove($index, vm.project.coverage_second_level)"\n                         ng-click="vm.removeChild($index, \'coverage_second_level\')">\n                <md-icon><i class="material-icons">&#xE15B;</i></md-icon>\n                <translate>Remove</translate>\n              </md-button>\n              <md-button class="md-primary" aria-label="Add more"\n                         ng-show="vm.showAddMore($index, vm.project.coverage_second_level)"\n                         ng-click="vm.addChild(\'coverage_second_level\')">\n                <md-icon><i class="material-icons">&#xE145;</i></md-icon>\n                <translate>Add more</translate>\n              </md-button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n\n    <div ng-show="vm.project.coverageType === 2" class="md-block extra-margin-double">\n      <h6 class="subtitle first"><i class="material-icons">&#xE153;</i>\n        <translate>National level deployment</translate>\n      </h6>\n\n      <div class="input-group">\n        <div layout="row">\n          <md-input-container class="number" flex="20">\n            <label>\n              <translate># Health Workers</translate>\n            </label>\n            <input type="number"\n                   min="0"\n                   name="national_level_deployment.health_workers"\n                   ng-change="vm.dispatchChange(\'national_level_deployment\', vm.project.national_level_deployment)"\n                   ng-required="vm.isNationalLevelCoverageRequired()"\n                   ng-model="vm.project.national_level_deployment.health_workers">\n            <div ng-messages="vm.form[\'national_level_deployment.health_workers\'].$error">\n              <div ng-message="required">\n                <translate>This is required.</translate>\n              </div>\n              <div ng-message="custom">\n                <div ng-repeat="message in vm.form[\'national_level_deployment.health_workers\'].customError">\n                  {{message}}\n                </div>\n              </div>\n            </div>\n          </md-input-container>\n          <md-input-container class="number" flex="20">\n            <label>\n              <translate># Facilities</translate>\n            </label>\n            <input type="number"\n                   min="0"\n                   name="national_level_deployment.facilities"\n                   ng-required="vm.isNationalLevelCoverageRequired()"\n                   ng-change="vm.dispatchChange(\'national_level_deployment\', vm.project.national_level_deployment)"\n                   ng-model="vm.project.national_level_deployment.facilities">\n            <div ng-messages="vm.form[\'national_level_deployment.facilities\'].$error">\n              <div ng-message="required">\n                <translate>This is required.</translate>\n              </div>\n              <div ng-message="custom">\n                <div ng-repeat="message in vm.form[\'national_level_deployment.facilities\'].customError">\n                  {{message}}\n                </div>\n              </div>\n            </div>\n          </md-input-container>\n          <md-input-container class="number" flex="20">\n            <label>\n              <translate># Clients</translate>\n            </label>\n            <input type="number"\n                   min="0"\n                   name="national_level_deployment.clients"\n                   ng-required="vm.isNationalLevelCoverageRequired()"\n                   ng-change="vm.dispatchChange(\'national_level_deployment\', vm.project.national_level_deployment)"\n                   ng-model="vm.project.national_level_deployment.clients">\n            <div ng-messages="vm.form[\'national_level_deployment.clients\'].$error">\n              <div ng-message="required">\n                <translate>This is required.</translate>\n              </div>\n              <div ng-message="custom">\n                <div ng-repeat="message in vm.form[\'national_level_deployment.clients\'].customError">\n                  {{message}}\n                </div>\n              </div>\n            </div>\n          </md-input-container>\n          <div flex="40"></div>\n        </div>\n      </div>\n    </div>\n\n\n    <h6 class="required extra-margin">\n      <translate>Has the government financially invested in the project?</translate>\n    </h6>\n\n    <div class="md-block extra-margin">\n      <div layout="column">\n        <md-radio-group ng-model="vm.project.government_investor"\n        ng-change="vm.dispatchChange(\'government_investor\', vm.project.government_investor)"\n        name="government_investor" md-no-ink ng-required="vm.activateValidation" class="md-primary" layout="column">\n          <md-radio-button ng-value="0" aria-label="government-investor-no">\n            <translate>No, they have not yet contributed</translate>\n          </md-radio-button>\n          <md-radio-button ng-value="1" aria-label="government-investor-yes-1">\n            <translate>Yes, they are contributing in-kind people or time</translate>\n          </md-radio-button>\n          <md-radio-button ng-value="2" aria-label="government-investor-yes-2">\n            <translate>Yes, there is a financial contribution through MOH budget</translate>\n          </md-radio-button>\n        </md-radio-group>\n        <div class="radio-error-messages">\n          <div ng-messages="vm.form.government_investor.$error">\n            <div ng-message="required">\n              <translate>This is required.</translate>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <h6>\n      <translate>Implementing partners</translate>\n    </h6>\n\n    <md-input-container class="error-placeholder">\n      <input  name="implementing_partners" ng-model="vm.hiddenFields" aria-label="hidden">\n      <div ng-messages="vm.form.implementing_partners.$error">\n        <div ng-message="custom">\n          <div ng-repeat="message in vm.form.implementing_partners.customError">\n            {{message}}\n          </div>\n        </div>\n      </div>\n    </md-input-container>\n\n    <div layout="row" ng-repeat="partner in vm.project.implementing_partners" ng-class="{last: $last}" class="no-float">\n      <md-input-container md-no-float flex="50">\n        <input ng-model="partner.value"\n               ng-change="vm.dispatchChange(\'implementing_partners\', vm.project.implementing_partners)"\n               placeholder="{{\'Partner\\\'s name\' | translate }}"\n               md-maxlength="64">\n      </md-input-container>\n      <div class="add-more-item">\n        <md-button class="md-warn" aria-label="Remove"\n                   ng-show="vm.showRemove($index, vm.project.implementing_partners)"\n                   ng-click="vm.removeChild($index, \'implementing_partners\')">\n          <md-icon><i class="material-icons">&#xE15B;</i></md-icon>\n          <translate>Remove</translate>\n        </md-button>\n        <md-button class="md-primary" aria-label="Add more"\n                   ng-show="vm.showAddMore($index, vm.project.implementing_partners)"\n                   ng-click="vm.addChild(\'implementing_partners\')">\n          <md-icon><i class="material-icons">&#xE145;</i></md-icon>\n          <translate>Add more</translate>\n        </md-button>\n      </div>\n    </div>\n\n    <h6 class="required">\n      <translate>Donors (Add one at least)</translate>\n    </h6>\n\n    <md-input-container class="error-placeholder">\n      <input  name="donors" ng-model="vm.hiddenFields" aria-label="hidden">\n      <div ng-messages="vm.form.donors.$error">\n        <div ng-message="custom">\n          <div ng-repeat="message in vm.form.donors.customError">\n            {{message}}\n          </div>\n        </div>\n      </div>\n    </md-input-container>\n\n    <div layout="row" ng-repeat="donor in vm.project.donors" ng-class="{last: $last}" class="no-float">\n      <md-input-container md-no-float flex="50">\n        <input ng-model="donor.value"\n               ng-change="vm.dispatchChange(\'donors\', vm.project.donors)"\n               placeholder="{{\'Donor\\\'s name\' | translate }}"\n               md-maxlength="64" ng-required="vm.activateValidation" name="{{\'donor_\' + $index}}">\n        <div ng-messages="vm.form[\'donor_\' + $index].$error">\n          <div ng-message="required">\n            <translate>This is required.</translate>\n          </div>\n          <div ng-message="md-maxlength">\n            <translate>This field has to be less than 64 characters long.</translate>\n          </div>\n        </div>\n      </md-input-container>\n\n      <div class="add-more-item">\n        <md-button class="md-warn" aria-label="Remove"\n                   ng-show="vm.showRemove($index, vm.project.donors)"\n                   ng-click="vm.removeChild($index, \'donors\')">\n          <md-icon><i class="material-icons">&#xE15B;</i></md-icon>\n          <translate>Remove</translate>\n        </md-button>\n        <md-button class="md-primary" aria-label="Add more"\n                   ng-show="vm.showAddMore($index, vm.project.donors)"\n                   ng-click="vm.addChild(\'donors\')">\n          <md-icon><i class="material-icons">&#xE145;</i></md-icon>\n          <translate>Add more</translate>\n        </md-button>\n      </div>\n    </div>\n  </div>\n</div>\n'},"./src/Project/ImplementationOverview/ImplementationOverview.scss":function(e,t,n){},"./src/Project/ImplementationOverview/ImplementationOverviewController.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n("./node_modules/babel-runtime/regenerator/index.js")),o=p(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),a=p(n("./node_modules/babel-runtime/core-js/get-iterator.js")),s=p(n("./node_modules/babel-runtime/helpers/slicedToArray.js")),l=p(n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),i=p(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),u=p(n("./node_modules/babel-runtime/helpers/createClass.js")),c=p(n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),d=p(n("./node_modules/babel-runtime/helpers/inherits.js")),m=p(n("./node_modules/lodash/isNil.js")),f=p(n("./src/Project/CollapsibleSet.js")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./src/store/modules/countries.js"));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e,n,r){(0,i.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,n,e,"project",[],[],r));return o.$onInit=o.onInit.bind(o),o.$onDestroy=o.onDestroy.bind(o),o.setAvailableOptions=o.setAvailableOptions.bind(o),o.mapHealthFocusAreas=o.mapHealthFocusAreas.bind(o),o}return(0,d.default)(t,e),(0,u.default)(t,[{key:"mapData",value:function(e){var t=v.getCurrentCountrySubLevelNames(e),n=v.getCurrentCountryFacilityList(e);return{districtList:v.getCurrentCountryFirstSubLevel(e),secondSubLevelList:v.getCurrentCountrySecondSubLevel(e),subLevelNames:t,facilities:n}}},{key:"onInit",value:function(){this.districtList=[],this.defaultOnInit(),this.unsubscribe=this.$ngRedux.connect(this.mapData,v)(this),this.watchers(),this.health_focus_areas=this.mapHealthFocusAreas(this.structure.health_focus_areas),this.optionValue||(this.optionValue=this.optionLabel)}},{key:"onDestroy",value:function(){this.defaultOnDestroy(),this.unsubscribe()}},{key:"watchers",value:function(){var e=this;this.scope.$watch(function(){return e.project.platforms},function(t){e.setAvailableDictOptions(t,e.structure.technology_platforms),e.dispatchChange("platforms",t)},!0),this.scope.$watch(function(){return e.project.coverage},function(t){e.observeCoverage={},e.clearDistrict(t),e.dispatchChange("coverage",t)},!0),this.scope.$watch(function(){return e.project.coverage_second_level},function(t){e.observeCoverageSecondLevel={},e.clearDistrict(t),e.dispatchChange("coverage_second_level",t)},!0),this.scope.$watchGroup([function(){return e.observeCoverage},function(){return e.districtList}],function(t){var n=(0,s.default)(t,2)[1];e.setAvailableDictOptions(e.project.coverage,n,"district"),e.initializeFacilityList(e.project.coverage),e.addClearOption(e.project.coverage)}),this.scope.$watchGroup([function(){return e.observeCoverageSecondLevel},function(){return e.secondSubLevelList}],function(t){var n=(0,s.default)(t,2)[1];e.setAvailableDictOptions(e.project.coverage_second_level,n,"district"),e.initializeFacilityList(e.project.coverage_second_level),e.addClearOption(e.project.coverage_second_level)}),this.scope.$watch(function(e){return e.vm.districtList},this.removeUnavailableDistricts.bind(this))}},{key:"initializeFacilityList",value:function(e){e.forEach(function(e){e.facilities_list=e.facilities_list||[]})}},{key:"updateFacilityNumber",value:function(e){e.facilities=e.facilities_list.length}},{key:"addClearOption",value:function(e){e&&e.length>0&&e.forEach(function(e){-1===e.available.indexOf("Clear selection")&&void 0!==e.district&&e.available.unshift("Clear selection")})}},{key:"clearDistrict",value:function(e){if(e&&e.length>0){var t=!0,n=!1,r=void 0;try{for(var o,s=(0,a.default)(e);!(t=(o=s.next()).done);t=!0){var l=o.value;"Clear selection"===l.district&&(l.district=void 0,l.health_workers=void 0,l.facilities=void 0,l.clients=void 0)}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}}}},{key:"removeUnavailableDistricts",value:function(e){this.project.coverage&&this.project.coverage.length>0&&e&&e.length>0&&this.project.coverage.forEach(function(t){-1===e.map(function(e){return e.id}).indexOf(t.district)&&t.district&&(console.warn("The selected location: "+t.district+" is not available anymore"),t.district=void 0)})}},{key:"mapHealthFocusAreas",value:function(e){var t={name:"",subGroups:[]},n=0,r=!0,o=!1,s=void 0;try{for(var l,i=(0,a.default)(e);!(r=(l=i.next()).done);r=!0){var u=l.value;n+=1,u.class="group-"+n,t.subGroups.push(u)}}catch(e){o=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw s}}return[t]}},{key:"searchFacility",value:function(){var e=(0,o.default)(r.default.mark(function e(t,n){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.facilities.filter(function(e){return e.includes(t)&&!n.includes(e)}).slice(0,100));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"isSubLevelCoverageDistrictRequired",value:function(e){return!(0,m.default)(e.health_workers)||!(0,m.default)(e.clients)||!(0,m.default)(e.facilities)}},{key:"isSubLevelCoverageRequired",value:function(){return 1===this.project.coverageType&&this.activateValidation}},{key:"isNationalLevelCoverageRequired",value:function(){return 2===this.project.coverageType&&this.activateValidation}}],[{key:"factory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Project/ImplementationOverview/ImplementationOverview.scss"),e.$inject=["$scope","$element","$ngRedux"],e}}]),t}(f.default);t.default=g},"./src/Project/ImplementationOverview/ReadOnlyImplementationOverview.html":function(e,t){e.exports='<div class="project-section section-strategy read-only" md-whiteframe="2">\n  <div class="section-title md-title">\n    <translate>2. Implementation overview</translate>\n    <span class="toggler" ng-click="vm.collapse()"><i class="material-icons">keyboard_arrow_down</i></span>\n  </div>\n\n  <div class="section-wrapper">\n    <h6>\n      <translate>Add one or more Software and related Digital Health Interventions (DHI):</translate>\n    </h6>\n\n    <div class="input-group" ng-repeat="platform in vm.project.platforms">\n      <div class="extra-margin">\n        <h6>\n          <translate>Software</translate>\n        </h6>\n        <p>{{platform.name}}</p>\n      </div>\n      <div>\n        <h6>\n          <translate>Digital Health Interventions</translate>\n        </h6>\n        <div layout="row">\n          <ul>\n            <li ng-repeat="s in platform.strategies">{{s.name}}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="section-wrapper">\n\n    <h6>\n      <translate>Health focus area(s)</translate>\n    </h6>\n\n    <div>\n      <ul>\n        <li ng-repeat="hf in vm.project.health_focus_areas">{{hf.name}}</li>\n      </ul>\n    </div>\n\n    <h6>\n      <translate>What are the Health System Challenges (HSC) your project addresses?</translate>\n    </h6>\n\n    <div>\n      <ul>\n        <li ng-repeat="hsc in vm.project.hsc_challenges">{{hsc.challenge}}</li>\n      </ul>\n    </div>\n\n    <h6>\n      <translate>What part(s) of the Health Information System (HIS) does this project support?</translate>\n    </h6>\n\n    <div>\n      <ul>\n        <li ng-repeat="his in vm.project.his_bucket">{{his.name}}</li>\n      </ul>\n    </div>\n\n    <h6>\n      <translate>What kind of coverage does your project have?</translate>\n    </h6>\n\n    <div>\n      <div layout="column">\n        <span ng-show="vm.project.coverageType === 1">\n          <translate>Sub-national</translate>\n        </span>\n        <span ng-show="vm.project.coverageType === 2">\n          <translate>National</translate>\n        </span>\n      </div>\n    </div>\n\n    <div ng-show="vm.project.coverageType === 1">\n      <h6 class="subtitle"><i class="material-icons">&#xE567;</i>\n        <translate> {{vm.subLevelNames[0]}} level deployment</translate>\n      </h6>\n\n      <div class="input-group" ng-repeat="cov in vm.project.coverage">\n        <div layout="column">\n          <div layout="row">\n            <div class="district" flex="50">\n              <h6 class="text-capitalize">\n                {{vm.subLevelNames[0]}}\n              </h6>\n              <p>{{cov.district}}</p>\n            </div>\n            <div flex="50"></div>\n          </div>\n          <div layout="row">\n            <div class="number" flex="20">\n              <h6>\n                <translate># Health Workers</translate>\n              </h6>\n              <p>{{cov.health_workers}}</p>\n            </div>\n            <div class="number" flex="20">\n              <h6>\n                <translate># Facilities</translate>\n              </h6>\n              <p>{{cov.facilities}}</p>\n            </div>\n            <div class="number" flex="20">\n              <h6>\n                <translate># Clients</translate>\n              </h6>\n              <p>{{cov.clients}}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <h6 class="subtitle" ng-show="vm.project.coverage_second_level && vm.project.coverage_second_level.length > 0">\n        <i class="material-icons">&#xE567;</i>\n        <translate> {{vm.subLevelNames[1]}} level deployment</translate>\n      </h6>\n      <div class="input-group" ng-repeat="cov in vm.project.coverage_second_level">\n        <div layout="column">\n          <div layout="row">\n            <div class="district" flex="50">\n              <h6 class="text-capitalize">\n                {{vm.subLevelNames[1]}}\n              </h6>\n              <p>{{cov.district}}</p>\n            </div>\n            <div flex="50"></div>\n          </div>\n          <div layout="row">\n            <div class="number" flex="20">\n              <h6>\n                <translate># Health Workers</translate>\n              </h6>\n              <p>{{cov.health_workers}}</p>\n            </div>\n            <div class="number" flex="20">\n              <h6>\n                <translate># Facilities</translate>\n              </h6>\n              <p>{{cov.facilities}}</p>\n            </div>\n            <div class="number" flex="20">\n              <h6>\n                <translate># Clients</translate>\n              </h6>\n              <p>{{cov.clients}}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div ng-show="vm.project.coverageType === 2">\n      <h6 class="subtitle"><i class="material-icons">&#xE153;</i>\n        <translate>National level deployment</translate>\n      </h6>\n\n      <div class="input-group">\n        <div layout="row">\n          <div class="number" flex="20">\n            <h6>\n              <translate># Health Workers</translate>\n            </h6>\n            <p>{{vm.project.national_level_deployment.health_workers}}</p>\n          </div>\n          <div class="number" flex="20">\n            <h6>\n              <translate># Facilities</translate>\n            </h6>\n            <p>{{vm.project.national_level_deployment.facilities}}</p>\n          </div>\n          <div class="number" flex="20">\n            <h6>\n              <translate># Clients</translate>\n            </h6>\n            <p>{{vm.project.national_level_deployment.clients}}</p>\n          </div>\n          <div flex="40"></div>\n        </div>\n      </div>\n    </div>\n\n    <h6>\n      <translate>Has the government financially invested in the project?</translate>\n    </h6>\n\n    <div>\n      <p ng-show="vm.project.government_investor === 0">\n        <translate>No, they have not yet contributed</translate>\n      </p>\n      <p ng-show="vm.project.government_investor === 1">\n        <translate>Yes, they are contributing in-kind people or time</translate>\n      </p>\n      <p ng-show="vm.project.government_investor === 2">\n        <translate>Yes, there is a financial contribution through MOH budget</translate>\n      </p>\n    </div>\n\n    <h6>\n      <translate>Implementing partners</translate>\n    </h6>\n\n    <div>\n      <ul>\n        <li ng-repeat="partner in vm.project.implementing_partners">{{partner}}</li>\n      </ul>\n    </div>\n\n    <h6>\n      <translate>Donors</translate>\n    </h6>\n\n    <div>\n      <ul>\n        <li ng-repeat="donor in vm.project.donors">{{donor}}</li>\n      </ul>\n    </div>\n\n  </div>\n</div>\n'},"./src/Project/ImplementationOverview/implementationOverviewComponent.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readOnlyImplementationOverview=void 0;var r=l(n("./node_modules/babel-runtime/helpers/extends.js")),o=l(n("./src/Project/ImplementationOverview/ImplementationOverviewController.js")),a=l(n("./src/Project/ImplementationOverview/ImplementationOverview.html")),s=l(n("./src/Project/ImplementationOverview/ReadOnlyImplementationOverview.html"));function l(e){return e&&e.__esModule?e:{default:e}}var i={template:a.default,controller:o.default.factory(),controllerAs:"vm",name:"implementationOverview",bindings:{form:"<",project:"<",structure:"<",activateValidation:"<"}};t.default=i;t.readOnlyImplementationOverview=(0,r.default)({},i,{name:"readOnlyImplementationOverview",template:s.default})},"./src/Storage.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("./node_modules/babel-runtime/core-js/json/stringify.js")),o=s(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=s(n("./node_modules/babel-runtime/helpers/createClass.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,o.default)(this,e),this.storage=window.localStorage}return(0,a.default)(e,[{key:"set",value:function(e,t){if("string"!=typeof e)throw new TypeError("this.storage key should be a string!");var n="string"==typeof t?t:(0,r.default)(t);this.storage.setItem(e,n)}},{key:"get",value:function(e){try{return JSON.parse(this.storage.getItem(e))}catch(t){return this.storage.getItem(e)}}},{key:"remove",value:function(e){this.storage.removeItem(e)}},{key:"clear",value:function(){this.storage.clear()}},{key:"check",value:function(){console.log("this.storage contains:\n");var e={};for(var t in this.storage)console.log(t+": "+this.storage.getItem(t)),e[t]=this.storage.getItem(t);return e}}]),e}();t.default=l},"./src/plugins/axios.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./node_modules/babel-runtime/core-js/promise.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n("./node_modules/axios/index.js")).default.create();a.setAuthToken=function(e){a.defaults.headers.common.Authorization="Token "+e},a.unSetAuthToken=function(){a.defaults.headers.common.Authorization=null},a.setLanguageHeader=function(e){a.defaults.headers.common["Accept-Language"]=e},a.setShowPopUp=function(e){a.popUpFunction=e},a.setHandleAuthProblem=function(e){a.authProblemFunction=e},a.interceptors.request.use(function(e){return e},function(e){return console.error(e),a.popUpFunction(),r.default.reject(e)}),a.interceptors.response.use(function(e){return e},function(e){return e&&e.response&&(401===e.response.status||403===e.response.status?a.authProblemFunction():a.popUpFunction()),r.default.reject(e)}),t.default=a},"./src/plugins/language.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentLanguage=t.setLanguage=t.getLanguage=t.configureDates=t.setDateLocaleProvider=t.setScope=t.setCatalog=t.config=void 0;var r=l(n("./node_modules/babel-runtime/regenerator/index.js")),o=l(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),a=l(n("./src/plugins/axios.js")),s=l(n("./node_modules/moment/moment.js"));function l(e){return e&&e.__esModule?e:{default:e}}n("./node_modules/moment/locale/fr.js"),n("./node_modules/moment/locale/pt.js"),n("./node_modules/moment/locale/es.js");var i,u,c=window.navigator,d=c.languages&&c.languages[0]||c.language||c.userLanguage,m=t.config={gettextCatalog:{},language:d,scope:{},mdDateLocaleProvider:{}};t.setCatalog=function(e){m.gettextCatalog=e},t.setScope=function(e){m.scope=e},t.setDateLocaleProvider=function(e){m.mdDateLocaleProvider=e},t.configureDates=(i=(0,o.default)(r.default.mark(function e(t){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.default.locale(t),n=(0,s.default)(),m.mdDateLocaleProvider.months=n.localeData().months(),m.mdDateLocaleProvider.shortMonths=n.localeData().monthsShort(),m.mdDateLocaleProvider.days=n.localeData().weekdays(),m.mdDateLocaleProvider.shortDays=n.localeData().weekdaysShort(),window.moment=n;case 7:case"end":return e.stop()}},e,void 0)})),function(e){return i.apply(this,arguments)}),t.getLanguage=(u=(0,o.default)(r.default.mark(function e(){var n,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.setLanguageHeader(m.language),e.next=3,a.default.get("/translation/json/");case 3:n=e.sent,o=n.data,m.gettextCatalog.setCurrentLanguage(m.language),m.gettextCatalog.setStrings(m.language,o.catalog),t.configureDates(m.language),m.scope.$digest();case 9:case"end":return e.stop()}},e,void 0)})),function(){return u.apply(this,arguments)}),t.setLanguage=function(e){return m.language=e,t.getLanguage()},t.getCurrentLanguage=function(){return m.language}},"./src/store/modules/countries.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.csvExport=t.getCurrentCountryProjects=t.getCurrentCountryDistrictProjects=t.getCurrentCountryMapData=t.getCurrentCountryFacilityList=t.getCurrentCountrySecondSubLevel=t.getCurrentCountryFirstSubLevel=t.getCurrentCountrySubLevelNames=t.getCountriesLib=t.getCountryCoverPicture=t.getCountryCoverPage=t.getCurrentCountry=t.getCountryFields=t.getCountriesList=t.getCountry=t.mapData=void 0;var r,o=g(n("./node_modules/babel-runtime/core-js/promise.js")),a=g(n("./node_modules/babel-runtime/core-js/object/freeze.js")),s=g(n("./node_modules/babel-runtime/regenerator/index.js")),l=g(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=g(n("./node_modules/babel-runtime/helpers/extends.js"));t.csvExport=(r=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.post("/api/projects/csv-export/",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});t.loadCountries=function(){var e=this;return t=(0,l.default)(s.default.mark(function t(n,r){var o,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r().countries.list.length){e.next=8;break}return e.next=4,u.default.get("/api/countries/");case 4:o=e.sent,(a=o.data).sort(function(e,t){return e.name.localeCompare(t.name)}),n({type:"SET_COUNTRIES_LIST",countries:a});case 8:case"end":return e.stop()}},t,e)})),function(e,n){return t.apply(this,arguments)};var t},t.loadCountryFields=function(e){var t=this;return n=(0,l.default)(s.default.mark(function n(r,o){var a,l,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=o().countries.countryFields.filter(function(t){return t.country===e}))&&0!==a.length){t.next=8;break}return t.next=4,u.default.get("/api/country-fields/"+e+"/");case 4:l=t.sent,(i=l.data).sort(function(e,t){return e.id-t.id}),r({type:"UPDATE_COUNTRY_FIELDS_LIST",fields:i});case 8:case"end":return t.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)};var n},t.loadCountryMapData=function(){var e=this;return n=(0,l.default)(s.default.mark(function n(r,o){var l,i,c,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o(),!(i=t.getCurrentCountry(l))||!i.code){e.next=10;break}if(h[i.code]){e.next=10;break}return e.next=7,u.default.get("/static/country-geodata/"+i.code+".json");case 7:c=e.sent,d=c.data,h[i.code]=(0,a.default)(d);case 10:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.loadCountryLandingPageInfo=function(){var e=this;return n=(0,l.default)(s.default.mark(function n(r,o){var a,l,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.getCurrentCountry(o()))||!a.code){e.next=7;break}return e.next=4,u.default.get("/api/landing/"+a.code.toUpperCase()+"/");case 4:l=e.sent,i=l.data,r({type:"SET_COUNTRY_COVER_DATA",cover:i});case 7:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.loadCurrentCountryDistrictsProject=function(){var e=this;return n=(0,l.default)(s.default.mark(function n(r,o){var a,l,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.getCurrentCountry(o()))||!a.id){e.next=7;break}return e.next=4,u.default.get("/api/projects/by-view/map/"+a.id+"/");case 4:l=e.sent,i=l.data,r({type:"SET_CURRENT_COUNTRY_DISTRICT_PROJECTS",projects:i});case 7:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.loadCountryProjectsOrAll=function(e){var t=this;return n=(0,l.default)(s.default.mark(function n(r){var o,a,l;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=["/api/projects/by-view/list/"],e&&o.push(e+"/"),t.next=4,u.default.get(o.join(""));case 4:a=t.sent,l=a.data,r({type:"SET_CURRENT_COUNTRY_PROJECTS",projects:l});case 7:case"end":return t.stop()}},n,t)})),function(e){return n.apply(this,arguments)};var n},t.loadCurrentCountryProjects=function(){var e=this;return n=(0,l.default)(s.default.mark(function n(r,o){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.getCurrentCountry(o()))&&r(t.loadCountryProjectsOrAll(a.id));case 2:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.setCurrentCountry=function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a=(0,l.default)(s.default.mark(function a(l,i){var u,c;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=i().countries.currentCountry,!e||e===u){n.next=9;break}return l({type:"SET_CURRENT_COUNTRY",country:e}),(c={}).countryFields=l(t.loadCountryFields(e)),c.mapData=l(t.loadCountryMapData()),c.landingPage=l(t.loadCountryLandingPageInfo()),c.districts=l(t.loadCurrentCountryDistrictsProject()),n.abrupt("return",o.default.all(r.map(function(e){return c[e]})));case 9:return n.abrupt("return",o.default.resolve());case 10:case"end":return n.stop()}},a,n)})),function(e,t){return a.apply(this,arguments)};var a},t.setCurrentCountryFromCode=function(e){var n=this;return r=(0,l.default)(s.default.mark(function r(o,a){var l;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(l=a().countries.list.find(function(t){return t.code.toLocaleLowerCase()===e.toLocaleLowerCase()}))&&l.id?o(t.setCurrentCountry(l.id,["landingPage"])):o({type:"UNSET_CURRENT_COUNTRY"});case 2:case"end":return n.stop()}},r,n)})),function(e,t){return r.apply(this,arguments)};var r},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case"SET_COUNTRIES_LIST":return(0,i.default)({},e,{list:t.countries});case"SET_CURRENT_COUNTRY":return(0,i.default)({},e,{currentCountry:t.country});case"UNSET_CURRENT_COUNTRY":return(0,i.default)({},e,{currentCountry:null,currentCountryCoverPage:{}});case"SET_COUNTRY_COVER_DATA":return(0,i.default)({},e,{currentCountryCoverPage:t.cover});case"UPDATE_COUNTRY_FIELDS_LIST":return(0,i.default)({},e,{countryFields:(0,c.default)(t.fields,e.countryFields,"id")});case"SET_CURRENT_COUNTRY_PROJECTS":return(0,i.default)({},e,{currentCountryProjects:t.projects});case"SET_CURRENT_COUNTRY_DISTRICT_PROJECTS":return(0,i.default)({},e,{currentCountryDistrictsProjects:t.projects});default:return e}};var u=g(n("./src/plugins/axios.js")),c=g(n("./node_modules/lodash/unionBy.js")),d=g(n("./node_modules/lodash/forEach.js")),m=n("./node_modules/reselect/lib/index.js"),f=n("./src/store/modules/projects.js"),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./src/store/modules/system.js")),p=n("./src/plugins/language.js");function g(e){return e&&e.__esModule?e:{default:e}}var _={list:[],countryFields:[],currentCountryDistricts:[],currentCountry:null,currentCountryCoverPage:{},currentCountryProjects:[],currentCountryDistrictsProjects:[]},h=t.mapData={},j=(t.getCountry=function(e,t){return e.countries.list.find(function(e){return e.id===t})},t.getCountriesList=(0,m.createSelector)(function(e){return e.countries.list},function(e){return e?e.map(function(e){var t=e.code.toLocaleLowerCase();return(0,i.default)({},e,{code:t,flag:"/static/flags/"+t+".png",prettyName:e.name.split("-").join(" ")})}):[]}));t.getCountryFields=function(e){return e.countries.countryFields.filter(function(t){return t.country===e.countries.currentCountry}).map(function(e){return(0,i.default)({},e)})},t.getCurrentCountry=function(e){return(0,i.default)({},j(e).find(function(t){return t.id===e.countries.currentCountry}))},t.getCountryCoverPage=function(e){var t=(0,i.default)({},e.countries.currentCountryCoverPage),n=v.getLandingPageDefaults(e);return(0,d.default)(n,function(e,n){var r=t[n];null!==r&&void 0!==r&&""!==r||(t[n]=e)}),t.partners=t.default_partners.concat(t.partner_logos),t},t.getCountryCoverPicture=function(e){var n=t.getCountryCoverPage(e);return n.cover?{background:"url("+n.cover+") 0 0","background-size":"cover","background-repeat":"no-repeat"}:null},t.getCountriesLib=function(e){var t={};return e.countries.list&&e.countries.list.forEach(function(e){t[e.id]=e.name}),t},t.getCurrentCountrySubLevelNames=function(e){var n=t.getCurrentCountry(e),r=v.getSubLevelTypes(e);try{var o=r.find(function(e){return e.name===n.map_data.first_sub_level.name}),a=r.find(function(e){return e.name===n.map_data.second_sub_level.name});return[o=o?o.displayName:n.map_data.first_sub_level.name,a=a?a.displayName:n.map_data.second_sub_level.name]}catch(e){return["",""]}},t.getCurrentCountryFirstSubLevel=function(e){var n=(0,p.getCurrentLanguage)(),r=t.getCurrentCountry(e);return r&&r.map_data&&r.map_data.first_sub_level?r.map_data.first_sub_level.elements.map(function(e){return{id:e.name,name:e["name:"+n]||e["name:en"]||e.name}}):[]},t.getCurrentCountrySecondSubLevel=function(e){var n=(0,p.getCurrentLanguage)(),r=t.getCurrentCountry(e);return r&&r.map_data&&r.map_data.second_sub_level?r.map_data.second_sub_level.elements.map(function(e){return{id:e.name,name:e["name:"+n]||e["name:en"]||e.name}}):[]},t.getCurrentCountryFacilityList=function(e){var n=t.getCurrentCountry(e);return n&&n.map_data&&n.map_data.facilities?n.map_data.facilities:[]},t.getCurrentCountryMapData=function(e){var n=t.getCurrentCountry(e);return n.mapData=h[n.code],n.districts=t.getCurrentCountryFirstSubLevel(e),n},t.getCurrentCountryDistrictProjects=function(e){var t={},n=e.countries.currentCountryDistrictsProjects;for(var r in n)t[r]=n[r].map(function(t){return t=(0,i.default)({},t,(0,f.isMemberOrViewer)(e,t))});return t},t.getCurrentCountryProjects=function(e){return e.countries.currentCountryProjects.map(function(t){return t=(0,i.default)({},t,(0,f.isMemberOrViewer)(e,t))})}},"./src/store/modules/projects.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchProjects=t.postProjectSaveActions=t.saveCountryFields=t.saveTeamViewers=t.checkCurrentProjectValidity=t.getSimilarProject=t.getCoverageData=t.getMapsDomainData=t.getMapsAxisData=t.getCurrentVersionDate=t.getCurrentVersion=t.getCoverageVersion=t.getToolkitVersion=t.getViewers=t.getTeam=t.getNewProjectForEditing=t.getCurrentDraftProjectForEditing=t.getCurrentEdits=t.getCurrentPublishedProjectForEditing=t.getCurrentProjectForEditing=t.getProjectCountryFields=t.getStoredCountryFields=t.getCurrentDraftInViewMode=t.getCurrentDraft=t.getCurrentPublished=t.parseProjectForViewMode=t.convertCountryFieldsAnswer=t.getCurrentPublicProjectDetails=t.getCurrentPublicProject=t.getCurrentProject=t.getCurrentProjectIfExist=t.getVanillaProject=t.getEmptyProject=t.getUserDefaultProject=t.getUserProjects=t.getProjectStructure=t.getFlatProjectStructure=t.getDraftedProjects=t.getPublishedProjects=t.getSavedProjectList=t.getCurrentProjectId=t.isMemberOrViewer=void 0;var r,o,a,s,l=S(n("./node_modules/babel-runtime/core-js/object/keys.js")),i=S(n("./node_modules/babel-runtime/core-js/json/stringify.js")),u=S(n("./node_modules/babel-runtime/helpers/slicedToArray.js")),c=S(n("./node_modules/babel-runtime/regenerator/index.js")),d=S(n("./node_modules/babel-runtime/core-js/promise.js")),m=S(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),f=S(n("./node_modules/babel-runtime/core-js/object/assign.js")),v=S(n("./node_modules/babel-runtime/helpers/typeof.js")),p=S(n("./node_modules/babel-runtime/helpers/toConsumableArray.js")),g=S(n("./node_modules/babel-runtime/helpers/extends.js"));t.saveTeamViewers=(r=(0,m.default)(c.default.mark(function e(t){var n,r=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={team:o.map(function(e){return e.id}),viewers:a.map(function(e){return e.id})},e.next=3,_.default.put("/api/projects/"+r+"/groups/",n);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),t.saveCountryFields=(o=(0,m.default)(c.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments[1],a=arguments[2],s=arguments[3];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.map(function(e){var t=e.country,n=e.question,r=e.type;return{country:t,answer:e.answer,type:r,question:n,project:a}}),s="published"===s?"publish":"draft",e.prev=2,e.next=5,_.default.post("/api/country-fields/"+o+"/"+a+"/"+s+"/",{fields:r});case 5:return t=e.sent,n=t.data,e.abrupt("return",n.fields);case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[2,10]])})),function(){return o.apply(this,arguments)}),t.postProjectSaveActions=(a=(0,m.default)(c.default.mark(function e(n,r,o,a,s,l){var i,m,f,v,p,g,_,h,j,y,b;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.getProfile(s).id,m=t.getStoredCountryFields(s)(!0),f=t.saveCountryFields(m,n.draft.country,n.id,l),v=t.saveTeamViewers(n,r,o),e.next=6,d.default.all([v,f]);case 6:if(p=e.sent,g=(0,u.default)(p,2),_=g[0],h=g[1],j=_.team.some(function(e){return e===i})?[n.id]:[],y=_.viewers.some(function(e){return e===i})?[n.id]:[],!1!==h){e.next=16;break}return(b=new Error).response={custom:!0,message:"Failed to save country fields"},e.abrupt("return",d.default.reject(b));case 16:return"published"===l&&(n.published.fields=h),n.draft.fields=h,a({type:"UPDATE_SAVE_PROJECT",project:n}),a({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:_}),a(w.updateTeamViewers(j,y)),a(C.loadCurrentCountryProjects()),a(C.loadCurrentCountryDistrictsProject()),e.abrupt("return",d.default.resolve(n));case 24:case"end":return e.stop()}},e,this)})),function(e,t,n,r,o,s){return a.apply(this,arguments)}),t.searchProjects=(s=(0,m.default)(c.default.mark(function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.post("/api/search/projects/",{health_topic:o,location:a,organisation:s,project_name:l,query:t,technology_platform:i});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)});t.loadUserProjects=function(){var e=this;return n=(0,m.default)(c.default.mark(function n(r,o){var a,s,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=o()).user.profile||t.getSavedProjectList(a)){e.next=9;break}return e.next=5,_.default.get("/api/projects/member-of/");case 5:s=e.sent,(l=s.data).sort(function(e,t){return t.id-e.id}),r({type:"SET_PROJECT_LIST",projects:l});case 9:return e.abrupt("return",d.default.resolve());case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",d.default.reject(e.t0));case 16:case"end":return e.stop()}},n,e,[[0,12]])})),function(e,t){return n.apply(this,arguments)};var n},t.loadProjectDetails=function(){var e=this;return t=(0,m.default)(c.default.mark(function t(n,r){var o,a,s,l,i,m,f,v,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(o=r().projects.currentProject)||-1===o){e.next=15;break}return a=_.default.get("/api/projects/"+o+"/toolkit/versions/"),s=_.default.get("/api/projects/"+o+"/coverage/versions/"),l=_.default.get("/api/projects/"+o+"/groups/"),e.next=8,d.default.all([a,s,l]);case 8:i=e.sent,m=(0,u.default)(i,3),f=m[0],v=m[1],p=m[2],n({type:"SET_PROJECT_INFO",info:{toolkitVersions:f.data,coverageVersions:v.data}}),n({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:p.data});case 15:return e.abrupt("return",d.default.resolve());case 18:return e.prev=18,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",d.default.reject(e.t0));case 22:case"end":return e.stop()}},t,e,[[0,18]])})),function(e,n){return t.apply(this,arguments)};var t},t.setCurrentProject=function(e){var n=this;return r=(0,m.default)(c.default.mark(function r(o,a){var s,l,i,u,m,f,v,p;return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e=parseInt(e,10))||-1===e||e===a().projects.currentProject){n.next=22;break}if(o({type:"SET_CURRENT_PROJECT",id:e}),!(s=t.getCurrentProjectIfExist(a()))){n.next=9;break}return l=o(C.setCurrentCountry(s.country,["mapData"])),i=o(t.loadProjectDetails()),u=o(x.loadToolkitData()),n.abrupt("return",d.default.all([l,i,u]));case 9:return n.next=11,_.default.get("/api/projects/"+e+"/");case 11:if(m=n.sent,f=m.data,!w.getProfile(a())){n.next=19;break}return n.next=17,_.default.get("/api/projects/"+e+"/groups/");case 17:v=n.sent,o({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:v.data});case 19:o({type:"SET_CURRENT_PUBLIC_PROJECT_DETAIL",project:f}),n.next=23;break;case 22:-1===e&&(o({type:"SET_CURRENT_PROJECT",id:e}),p={id:-1,draft:{fields:[]},public:{}},o({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:{team:[],viewers:[]}}),o({type:"UPDATE_SAVE_PROJECT",project:p}));case 23:return n.abrupt("return",d.default.resolve());case 24:case"end":return n.stop()}},r,n)})),function(e,t){return r.apply(this,arguments)};var r},t.snapShotProject=function(){var e=this;return n=(0,m.default)(c.default.mark(function n(r,o){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o().projects.currentProject,e.next=3,_.default.post("/api/projects/"+a+"/version/");case 3:return e.next=5,r(t.loadProjectDetails());case 5:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.loadProjectStructure=function(e){var n=this;return r=(0,m.default)(c.default.mark(function r(o,a){var s,l,i,u;return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),l=t.getProjectStructure(s),!(0,j.default)(l)&&!e){n.next=9;break}return n.next=5,_.default.get("/api/projects/structure/");case 5:return i=n.sent,u=i.data,n.next=9,o({type:"SET_PROJECT_STRUCTURE",structure:u});case 9:case"end":return n.stop()}},r,n)})),function(e,t){return r.apply(this,arguments)};var r},t.processForm=function(e){var t=e.organisation?e.organisation.name:"",n=e.organisation?e.organisation.id:null;return e=(0,g.default)({},e,(0,T.retainNationalOrDistrictCoverage)(e)),e=(0,g.default)({},e,{organisation_name:t,organisation:n},(0,T.createDateFields)(e),(0,T.convertObjectArrayToStringArray)(e),(0,T.parseOutInteroperabilityLinks)(e),{coverageType:void 0,platforms:(0,T.parsePlatformCollection)(e)},(0,T.extractIdFromObjects)(e),(0,T.handleNationalLevelCoverage)(e),{coverage:(0,T.handleCoverage)(e.coverage),coverage_second_level:(0,T.handleCoverage)(e.coverage_second_level)}),e=(0,g.default)({},e,(0,T.retainOnlyIds)(e)),e=(0,g.default)({},e,(0,T.removeEmptyChildObjects)(e)),(0,T.removeKeysWithoutValues)(e)},t.saveDraft=function(e,n,r){var o=this;return a=(0,m.default)(c.default.mark(function a(s,l){var i,u,m,f;return c.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.processForm(e),i=e.id?"put":"post",u=e.id?"/api/projects/draft/"+e.id+"/":"/api/projects/draft/",o.prev=3,o.next=6,_.default[i](u,e);case 6:return m=o.sent,f=m.data,o.abrupt("return",t.postProjectSaveActions(f,n,r,s,l(),"draft"));case 11:return o.prev=11,o.t0=o.catch(3),console.log(o.t0),o.abrupt("return",d.default.reject(o.t0));case 15:case"end":return o.stop()}},a,o,[[3,11]])})),function(e,t){return a.apply(this,arguments)};var a},t.discardDraft=function(){var e=this;return n=(0,m.default)(c.default.mark(function n(r,o){var a,s,l,i,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getCurrentPublishedProjectForEditing(o()),s=t.processForm(a),l=t.getStoredCountryFields(o())(!1),e.next=5,_.default.put("/api/projects/draft/"+a.id+"/",s);case 5:return i=e.sent,u=i.data,e.next=9,t.saveCountryFields(l,u.draft.country,u.id,"published");case 9:return u.draft.fields=e.sent,r({type:"UPDATE_SAVE_PROJECT",project:u}),e.abrupt("return",d.default.resolve(u));case 12:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.publish=function(e,n,r){var o=this;return a=(0,m.default)(c.default.mark(function a(s,l){var i,u;return c.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.processForm(e),o.prev=1,o.next=4,_.default.put("/api/projects/publish/"+e.id+"/",e);case 4:return i=o.sent,u=i.data,o.abrupt("return",t.postProjectSaveActions(u,n,r,s,l(),"published"));case 9:return o.prev=9,o.t0=o.catch(1),console.log(o.t0),o.abrupt("return",d.default.reject(o.t0));case 13:case"end":return o.stop()}},a,o,[[1,9]])})),function(e,t){return a.apply(this,arguments)};var a},t.searchDuplicateProjectName=function(e){var n=this;return r=(0,m.default)(c.default.mark(function r(o){var a;return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.searchProjects(e);case 2:a=n.sent,o({type:"SET_SIMILAR_NAME_LIST",list:a});case 4:case"end":return n.stop()}},r,n)})),function(e){return r.apply(this,arguments)};var r},t.clearSimilarNameList=function(){var e=this;return t=(0,m.default)(c.default.mark(function t(n){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"SET_SIMILAR_NAME_LIST",list:[]});case 1:case"end":return e.stop()}},t,e)})),function(e){return t.apply(this,arguments)};var t},t.updateProjectCountryFields=function(e){var n=e.id,r=e.answer,o=e.question,a=e.type,s=e.country,l=e.schema_id;return function(e,u){var c=t.getCurrentProjectId(u());switch(a){case 3:r=!0===r?"true":"false";break;case 5:r=(0,i.default)(r)}var d={id:n,answer:r,question:o,type:a,country:s,schema_id:l=l||n};e({type:"UPDATE_COUNTRY_FIELD_ANSWER",projectId:c,countryField:d})}},t.updateEditedProject=function(e){return function(t,n){var r={},o=n().projects.editedProject;(0,l.default)(e).forEach(function(t){var n=(0,y.default)(o[t],e[t]);n||(r[t]=e[t])}),(0,l.default)(r).length>0&&t({type:"EDITED_PROJECT_UPDATE",update:r})}},t.resetEditedProject=function(){return function(e){e({type:"EDITED_PROJECT_RESET"})}},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editedProject:{}},t=arguments[1];switch(t.type){case"SET_PROJECT_LIST":var n=t.projects.slice();return(0,g.default)({},e,{list:n});case"SET_SIMILAR_NAME_LIST":var r=t.list.slice();return(0,g.default)({},e,{similarProjectNames:r});case"UPDATE_SAVE_PROJECT":var o=[].concat((0,p.default)(e.list)),a=o.findIndex(function(e){return e.id===t.project.id});return-1!==a?o.splice(a,1,(0,g.default)({},t.project)):o.push((0,g.default)({},t.project)),(0,g.default)({},e,{list:o});case"UPDATE_COUNTRY_FIELD_ANSWER":var s=[].concat((0,p.default)(e.list)),l=s.findIndex(function(e){return e.id===t.projectId}),i=[].concat((0,p.default)(s[l].draft.fields)),u=i.findIndex(function(e){return e.schema_id===t.countryField.schema_id});return-1!==u?i.splice(u,1,(0,g.default)({},t.countryField)):i.push((0,g.default)({},t.countryField)),s[l].draft.fields=i,(0,g.default)({},e,{list:s});case"SET_CURRENT_PROJECT":var c=t.id;return(0,g.default)({},e,{currentProject:c});case"SET_CURRENT_PUBLIC_PROJECT_DETAIL":var d=t.project;return(0,g.default)({},e,{currentPublicProject:d});case"SET_PROJECT_STRUCTURE":var m=t.structure;return(0,g.default)({},e,{structure:m});case"SET_PROJECT_INFO":var f=t.info.toolkitVersions,v=t.info.coverageVersions,_=t.info.teamViewers;return(0,g.default)({},e,{toolkitVersions:f,coverageVersions:v,teamViewers:_});case"SET_PROJECT_TEAM_VIEWERS":var h=t.teamViewers;return(0,g.default)({},e,{teamViewers:h});case"CLEAR_USER_PROJECTS":return{structure:e.structure};case"EDITED_PROJECT_UPDATE":return(0,g.default)({},e,{editedProject:(0,g.default)({},e.editedProject,t.update)});case"EDITED_PROJECT_RESET":return(0,g.default)({},e,{editedProject:{}});default:return e}};var _=S(n("./src/plugins/axios.js")),h=S(n("./node_modules/lodash/forOwn.js")),j=S(n("./node_modules/lodash/isEmpty.js")),y=S(n("./node_modules/lodash/isEqual.js")),b=n("./src/store/static_data/project_definition.js"),C=P(n("./src/store/modules/countries.js")),w=P(n("./src/store/modules/user.js")),x=P(n("./src/store/modules/toolkit.js")),E=n("./node_modules/reselect/lib/index.js"),T=n("./src/store/project_utils.js"),k=P(n("./src/store/modules/system.js"));function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}t.isMemberOrViewer=function(e,t){var n=w.getProfile(e);if(n&&n.member&&n.viewer){var r=n.member.indexOf(t.id)>-1,o=!r&&n.viewer.indexOf(t.id)>-1;return{isMember:r,isViewer:o,isTeam:r||o}}return{isMember:!1,isViewer:!1,isTeam:!1}},t.getCurrentProjectId=function(e){return e.projects.currentProject},t.getSavedProjectList=(0,E.createSelector)(function(e){return e.projects.list},function(e){return t.getVanillaProject(e)},function(e,t){if(e)return e.filter(function(e){return-1!==e.id}).map(function(e){return(0,g.default)({},e,{draft:(0,g.default)({},t,{donors:[],implementing_partners:[]},e.draft)})})}),t.getPublishedProjects=function(e){return e.projects.list?t.getSavedProjectList(e).map(function(n){return n=(0,g.default)({},n.published,t.isMemberOrViewer(e,n))}):[]},t.getDraftedProjects=function(e){return e.projects.list?t.getSavedProjectList(e).map(function(n){return n=(0,g.default)({},n.draft,t.isMemberOrViewer(e,n))}):[]},t.getFlatProjectStructure=function(e){var t=e.projects.structure;if(t){var n=[];t.strategies.forEach(function(e){e.subGroups.forEach(function(e){n=[].concat((0,p.default)(n),(0,p.default)(e.strategies.map(function(e){return(0,g.default)({},e)})))})});var r=[];t.health_focus_areas.forEach(function(e){r=[].concat((0,p.default)(r),(0,p.default)(e.health_focus_areas))});var o=[];return t.hsc_challenges.forEach(function(e){o=[].concat((0,p.default)(o),(0,p.default)(e.challenges))}),(0,g.default)({},t,{strategies:n,health_focus_areas:r,hsc_challenges:o})}return{}},t.getProjectStructure=(0,E.createSelector)(function(e){return e.projects.structure},function(e){return(0,g.default)({},e)}),t.getUserProjects=function(e){var n=t.getFlatProjectStructure(e);return e.projects.list?t.getSavedProjectList(e).map(function(r){var o=r.public_id,a=!!o;r=a?(0,g.default)({},r.published):(0,g.default)({},r.draft);var s=C.getCountry(e,r.country);return r=(0,g.default)({},r,t.isMemberOrViewer(e,r),{isPublished:a,public_id:o,country_name:s?s.name:""},(0,T.convertIdArrayToObjectArray)(r,n,T.dashFieldConvertToObject))}):[]},t.getUserDefaultProject=function(e){var t=e&&e.projects?e.projects.list:null;return t&&t[0]&&-1!==t[0].id?""+t[0].id:null},t.getEmptyProject=function(){return(0,g.default)({},b.project_definition)},t.getVanillaProject=function(e){var n=t.getEmptyProject(),r=t.getProjectStructure(e),o=w.getProfile(e);return o&&(n.country=o.country?o.country.id:null,n.organisation=o.organisation?o.organisation:null),r&&(n.interoperability_links=r.interoperability_links),(0,g.default)({},n)},t.getCurrentProjectIfExist=function(e){return t.getUserProjects(e).find(function(t){return t.id===e.projects.currentProject})},t.getCurrentProject=function(e){var n=t.getCurrentProjectIfExist(e);return n||(n=t.getCurrentPublicProject(e))||(n=t.getVanillaProject(e)),(0,g.default)({},n)},t.getCurrentPublicProject=function(e){var t=e.projects.currentPublicProject?e.projects.currentPublicProject:{};if(t&&t.id&&(t=t.published&&t.published.name?t.published:t.draft),null===t)return null;var n=t.country?C.getCountry(e,t.country):void 0;return(0,g.default)({},t,{country_name:n?n.name:t.country_name,isPublic:!0})},t.getCurrentPublicProjectDetails=function(e,n){var r=n?t.getCurrentDraft(e):t.getCurrentPublished(e),o=n?"draft":"published";return r||((r=e.projects.currentPublicProject?e.projects.currentPublicProject[o]:void 0)?(r.hasPublishedVersion=!(!e.projects.currentPublicProject.published||!e.projects.currentPublicProject.published.name),r.disableDraft=!e.projects.currentPublicProject.draft,t.parseProjectForViewMode(e,r)):(0,g.default)({},t.getVanillaProject(e)))},t.convertCountryFieldsAnswer=function(e){return e.map(function(e){switch((e=(0,g.default)({},e)).type){case 2:e.answer=parseInt(e.answer,10);break;case 3:e.answer="true"===e.answer;break;case 5:e.answer=JSON.parse(e.answer)}return e})},t.parseProjectForViewMode=function(e,n){var r=t.getEmptyProject(),o=t.getFlatProjectStructure(e),a=C.getCountry(e,n.country);return n=(0,g.default)({},r,n),n=(0,g.default)({},n,{country_name:a?a.name:""},(0,T.convertIdArrayToObjectArray)(n,o,T.dashFieldConvertToObject),{coverageType:(0,T.setCoverageType)(n.coverage,n.national_level_deployment),coverage_second_level:n.coverage_second_level?n.coverage_second_level:[{}],coverage:n.coverage?n.coverage:[{}]}),(0,g.default)({},n,(0,T.convertIdArrayToObjectArray)(n,o,[{key:"platforms.strategies",structure_key:"strategies"}]),{hasPublishedVersion:void 0===n.hasPublishedVersion||n.hasPublishedVersion})},t.getCurrentPublished=function(e){var n=t.getPublishedProjects(e).find(function(t){return t.id===e.projects.currentProject});if(n)return t.parseProjectForViewMode(e,n)},t.getCurrentDraft=function(e){var n=t.getDraftedProjects(e).find(function(t){return t.id===e.projects.currentProject});if(n)return(0,g.default)({},n,{hasPublishedVersion:!!t.getPublishedProjects(e).find(function(t){return t.id===e.projects.currentProject})})},t.getCurrentDraftInViewMode=function(e){var n=t.getCurrentDraft(e);if(n)return t.parseProjectForViewMode(e,n)},t.getStoredCountryFields=function(e){return function(n){var r=n?t.getCurrentDraft(e):t.getCurrentPublished(e);if(void 0===r){var o=e.projects.list.find(function(e){return-1===e.id});o&&(r=o.draft)}return r?r.fields:[]}},t.getProjectCountryFields=function(e){return function(n){var r=C.getCountryFields(e),o=t.convertCountryFieldsAnswer(t.getStoredCountryFields(e)(n)),a=r.map(function(e){var t=o.find(function(t){return t.schema_id===e.id});return(0,g.default)({},e,{answer:t?t.answer:e.answer})});return[].concat((0,p.default)(a))}},t.getCurrentProjectForEditing=function(e,n){var r=t.getFlatProjectStructure(e);return n||(n=t.getVanillaProject(e)),n.start_date=(0,T.convertDate)(n.start_date),n.implementation_dates=(0,T.convertDate)(n.implementation_dates),n.end_date=(0,T.convertDate)(n.end_date),n=(0,T.convertStringArrayToObjectArray)(n),n=(0,T.fillEmptyCollectionsWithDefault)(n),"object"!==(0,v.default)(n.organisation)&&(n.organisation={id:n.organisation,name:n.organisation_name}),(n=(0,g.default)({},n,t.isMemberOrViewer(e,n),(0,T.convertIdArrayToObjectArray)(n,r,T.fieldToConvertToObject),(0,T.handleInteroperabilityLinks)(n,r))).forceSetCoverage?n.forceSetCoverage=void 0:n.coverageType=(0,T.setCoverageType)(n.coverage,n.national_level_deployment),(0,g.default)({},b.project_definition,n)},t.getCurrentPublishedProjectForEditing=function(e){var n=t.getPublishedProjects(e).find(function(t){return t.id===e.projects.currentProject});if(n)return t.getCurrentProjectForEditing(e,n)},t.getCurrentEdits=function(e){var t=e.projects.editedProject;return(0,g.default)({},t,{forceSetCoverage:!!t.coverageType})},t.getCurrentDraftProjectForEditing=function(e){var n=(0,g.default)({},t.getCurrentDraft(e),t.getCurrentEdits(e));return t.getCurrentProjectForEditing(e,n)},t.getNewProjectForEditing=function(e){var n=t.getVanillaProject(e);return(0,g.default)({},n,t.getCurrentEdits(e))},t.getTeam=function(e){return e.projects.teamViewers?e.projects.teamViewers.team.map(function(t){return e.system.profiles.find(function(e){return e.id===t})}):[]},t.getViewers=function(e){return e.projects.teamViewers?e.projects.teamViewers.viewers.map(function(t){return e.system.profiles.find(function(e){return e.id===t})}):[]},t.getToolkitVersion=function(e){var t=e.projects.toolkitVersions;return t?t.slice():[]},t.getCoverageVersion=function(e){var t=e.projects.coverageVersions;return t?t.slice():[]},t.getCurrentVersion=function(e){return t.getToolkitVersion(e).length},t.getCurrentVersionDate=function(e){var n=t.getToolkitVersion(e).slice(-1)[0];return n?n.modified:null},t.getMapsAxisData=function(e){var n={labels:k.getAxis(e).map(function(e){return e.name}),data:[]},r=t.getToolkitVersion(e),o=x.getToolkitData(e),a=(0,T.getTodayString)();if(r.length>0&&(n.data=r.map(function(e){return{date:e.modified.split("T")[0],axis1:e.data[0].axis_score/100,axis2:e.data[1].axis_score/100,axis3:e.data[2].axis_score/100,axis4:e.data[3].axis_score/100,axis5:e.data[4].axis_score/100,axis6:e.data[5].axis_score/100}})),6===o.length){var s={axis1:o[0].axis_score/100,axis2:o[1].axis_score/100,axis3:o[2].axis_score/100,axis4:o[3].axis_score/100,axis5:o[4].axis_score/100,axis6:o[5].axis_score/100,date:a};n.data.push(s)}return n},t.getMapsDomainData=function(e){var n=k.getDomains(e),r=k.getAxis(e),o={labels:r.map(function(e){return e.name})},a=t.getToolkitVersion(e),s=x.getToolkitData(e),l=(0,T.getTodayString)();return r.forEach(function(e,t){if(o[e.name]={labels:n.filter(function(t){return t.axis===e.id}).map(function(e){return e.name}),data:[]},a.length>0&&(o[e.name].data=a.map(function(e){var n={};return n.date=e.modified.split("T")[0],e.data[t].domains.forEach(function(e,t){n["axis"+(t+1)]=e.domain_percentage/100}),n})),s.length>0){var r={date:l};s[t].domains.forEach(function(e,t){r["axis"+(t+1)]=e.domain_percentage/100}),o[e.name].data.push(r)}}),o},t.getCoverageData=function(e){var n=t.getCoverageVersion(e),r=t.getCurrentProject(e),o=r.coverage?r.coverage.slice():[];o.push((0,f.default)({},r.national_level_deployment)),n.push({data:o});var a=(0,T.getTodayString)();return n.reduce(function(e,t,n){return e.data[n]={},e.data[n].date=t.modified?t.modified.split("T")[0]:a,t.data.forEach(function(t){(0,h.default)(t,function(t,r){var o=["clients","facilities","health_workers"].indexOf(r);if(o>-1){var a="axis"+(o+1);e.data[n][a]=(e.data[n][a]||0)+t}})}),e},{labels:[],data:[]})},t.getSimilarProject=function(e){var n=t.getPublishedProjects(e);return e.projects.similarProjectNames?e.projects.similarProjectNames.map(function(e){return(e=(0,f.default)({},e)).isOwn=n.some(function(t){return t.id===e.id}),e}):[]},t.checkCurrentProjectValidity=function(e){var t=e.projects.currentPublicProject;return t&&""===t.public_id&&null===t.draft?{isValid:!1,id:t.id}:{isValid:!0}}},"./src/store/modules/system.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addOrganisation=t.searchOrganisation=t.getSubLevelTypes=t.getDomainsForThematic=t.getThematicOverview=t.getQuestions=t.getDomains=t.getAxis=t.getLandingPageDefaults=t.getSearchFilters=t.getLanguages=t.getSearchResult=t.getUserProfiles=void 0;var r,o,a=f(n("./node_modules/babel-runtime/regenerator/index.js")),s=f(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),l=f(n("./node_modules/babel-runtime/helpers/toConsumableArray.js")),i=f(n("./node_modules/babel-runtime/helpers/extends.js"));t.searchOrganisation=(r=(0,s.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.get("/api/organisations/?name="+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),t.addOrganisation=(o=(0,s.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.post("/api/organisations/",{name:t});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)});t.loadUserProfiles=function(){var e=this;return t=(0,s.default)(a.default.mark(function t(n){var r,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.get("/api/userprofiles/");case 2:r=e.sent,o=r.data,n({type:"SET_USER_PROFILES",profiles:o});case 5:case"end":return e.stop()}},t,e)})),function(e){return t.apply(this,arguments)};var t},t.loadStaticData=function(){var e=this;return t=(0,s.default)(a.default.mark(function t(n){var r,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.get("/api/static-data/");case 2:r=e.sent,o=r.data,n({type:"SET_AXIS",axis:o.axis}),n({type:"SET_DOMAINS",domains:o.domains}),n({type:"SET_LANDING_PAGE_DEFAULTS",landing_page_defaults:o.landing_page_defaults}),n({type:"SET_LANGUAGES",languages:o.languages}),n({type:"SET_SEARCH_FILTERS",search_filters:o.search_filters}),n({type:"SET_THEMATIC_OVERVIEW",thematic_overview:o.thematic_overview}),n({type:"SET_TOOLKIT_QUESTIONS",toolkit_questions:o.toolkit_questions}),n({type:"SET_SUB_LEVEL_TYPES",sub_level_types:o.sub_level_types});case 12:case"end":return e.stop()}},t,e)})),function(e){return t.apply(this,arguments)};var t},t.searchProjects=function(e,t){var n=this;return r=(0,s.default)(a.default.mark(function r(o){var s,l,i,c,d;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(l in s={query:e},t)i=t[l],s[i.name]=i.value;return n.next=4,u.default.post("/api/search/projects/",s);case 4:c=n.sent,d=c.data,o({type:"SET_PROJECT_SEARCH_RESULT",projects:d});case 7:case"end":return n.stop()}},r,n)})),function(e){return r.apply(this,arguments)};var r},t.unsetSearchedProjects=function(){return function(e){e({type:"UNSET_PROJECT_SEARCH_RESULT"})}},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1];switch(t.type){case"SET_USER_PROFILES":return(0,i.default)({},e,{profiles:t.profiles});case"SET_PROJECT_SEARCH_RESULT":return(0,i.default)({},e,{projectSearch:t.projects});case"UNSET_PROJECT_SEARCH_RESULT":return(0,i.default)({},e,{projectSearch:[]});case"SET_AXIS":return(0,i.default)({},e,{axis:t.axis});case"SET_DOMAINS":return(0,i.default)({},e,{domains:t.domains});case"SET_LANDING_PAGE_DEFAULTS":return(0,i.default)({},e,{landing_page_defaults:t.landing_page_defaults});case"SET_LANGUAGES":return(0,i.default)({},e,{languages:t.languages});case"SET_SEARCH_FILTERS":return(0,i.default)({},e,{search_filters:t.search_filters});case"SET_THEMATIC_OVERVIEW":return(0,i.default)({},e,{thematic_overview:t.thematic_overview});case"SET_TOOLKIT_QUESTIONS":return(0,i.default)({},e,{toolkit_questions:t.toolkit_questions});case"SET_SUB_LEVEL_TYPES":return(0,i.default)({},e,{sub_level_types:t.sub_level_types});default:return e}};var u=f(n("./src/plugins/axios.js")),c=m(n("./src/store/modules/projects.js")),d=m(n("./src/store/modules/countries.js"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var v={profiles:[],search_filters:[],languages:[],projectSearch:[],thematic_overview:[],axis:[],domains:[],landing_page_defaults:{},toolkit_questions:[],sub_level_types:[]};t.getUserProfiles=function(e){return e.system.profiles?e.system.profiles.slice():[]},t.getSearchResult=function(e){return(e.system.projectSearch?e.system.projectSearch:[]).map(function(t){var n=d.getCountry(e,t.country);return(0,i.default)({},t,c.isMemberOrViewer(e,t),{country_name:n?n.name:""})})},t.getLanguages=function(e){return e.system.languages.map(function(e){return(0,i.default)({},e,{flag:"/static/flags/"+e.flag})})},t.getSearchFilters=function(e){return[].concat((0,l.default)(e.system.search_filters))},t.getLandingPageDefaults=function(e){return(0,i.default)({},e.system.landing_page_defaults)},t.getAxis=function(e){return[].concat((0,l.default)(e.system.axis))},t.getDomains=function(e){return[].concat((0,l.default)(e.system.domains))},t.getQuestions=function(e){return[].concat((0,l.default)(e.system.toolkit_questions))},t.getThematicOverview=function(e){var t=e.system.thematic_overview;return t.categories.map(function(e){return(0,i.default)({},e,{domains:t.sub_categories.filter(function(t){return t.category===e.id})})})},t.getDomainsForThematic=function(e){var n=t.getAxis(e),r=t.getDomains(e),o=t.getThematicOverview(e);return[].concat((0,l.default)(o.map(function(e){return{name:e.name,domains:e.domains}})),(0,l.default)(n.map(function(e){return{name:e.name,domains:r.filter(function(t){return t.axis===e.id}).map(function(e){return{name:e.name}})}})))},t.getSubLevelTypes=function(e){return[].concat((0,l.default)(e.system.sub_level_types.map(function(e){return(0,i.default)({},e)})))}},"./src/store/modules/toolkit.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAxisDetail=t.getDomainStructure=t.getStructure=t.getToolkitData=void 0;var r=c(n("./node_modules/babel-runtime/regenerator/index.js")),o=c(n("./node_modules/babel-runtime/core-js/promise.js")),a=c(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),s=c(n("./node_modules/babel-runtime/helpers/extends.js"));t.loadToolkitData=m,t.saveAnswer=function(e){var t=this;return n=(0,a.default)(r.default.mark(function n(a,s){var l,u,c;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(l=s().projects.currentProject)){t.next=9;break}return t.next=5,i.default.post("/api/projects/"+l+"/toolkit/score/",e);case 5:u=t.sent,c=u.data,a({type:"UPDATE_TOOLKIT_DATA",data:c}),a(m());case 9:return t.abrupt("return",o.default.resolve());case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",o.default.reject(t.t0));case 16:case"end":return t.stop()}},n,t,[[0,12]])})),function(e,t){return n.apply(this,arguments)};var n},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case"SET_TOOLKIT_DATA":return(0,s.default)({},e,{toolkitData:t.data});case"UPDATE_TOOLKIT_DATA":var n=t.data,r=(0,l.default)(e.toolkitData);return r[n.axis].domains[n.domain].questions[n.question].answers[n.answer]=n.value,(0,s.default)({},e,{toolkitData:r});case"CLEAR_TOOLKIT_DATA":return(0,s.default)({},d);default:return e}};var l=c(n("./node_modules/lodash/cloneDeep.js")),i=c(n("./src/plugins/axios.js")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./src/store/modules/system.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d={toolkitData:[]};t.getToolkitData=function(e){var t=e.toolkit.toolkitData;return t?(0,l.default)(t):[]},t.getStructure=function(e){var t=u.getAxis(e),n=u.getDomains(e),r=u.getQuestions(e);return t.map(function(e){return(0,s.default)({},e,{domains:n.filter(function(t){return t.axis===e.id}).map(function(e){return(0,s.default)({},e,{questions:r.filter(function(t){return t.domain===e.id}).map(function(e){return(0,s.default)({},e,{id:e.domain+"-"+e.question_id})})})})})})},t.getDomainStructure=function(e,n,r){var o=t.getStructure(e);return o&&o[n]&&o[n].domains[r]?o[n].domains[r]:{}},t.getAxisDetail=function(e,n){var r=u.getAxis(e).find(function(e){return e.id===n}),o=u.getDomains(e),a=t.getToolkitData(e).find(function(e){return e.id===n}),l=a?a.domains.map(function(e,t){return(0,s.default)({},e,o.find(function(t){return t.id===e.id}),{index:t})}):[];return(0,s.default)({},r,a,{domains:l})};function m(){var e,t=this;return e=(0,a.default)(r.default.mark(function e(n,a){var s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=a().projects.currentProject)){e.next=8;break}return e.next=5,i.default.get("/api/projects/"+s+"/toolkit/data/");case 5:l=e.sent,u=l.data,n({type:"SET_TOOLKIT_DATA",data:u});case 8:return e.abrupt("return",o.default.resolve());case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",o.default.reject(e.t0));case 14:case"end":return e.stop()}},e,t,[[0,11]])})),function(t,n){return e.apply(this,arguments)}}},"./src/store/modules/user.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetPassword=t.verifyEmail=t.handleProfile=t.storeData=t.isSuperUser=t.getUserLanguage=t.getProfile=void 0;var r,o,a=h(n("./node_modules/babel-runtime/core-js/object/assign.js")),s=h(n("./node_modules/babel-runtime/core-js/promise.js")),l=h(n("./node_modules/babel-runtime/regenerator/index.js")),i=h(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),u=h(n("./node_modules/babel-runtime/helpers/extends.js"));t.verifyEmail=(r=(0,i.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.post("/api/rest-auth/registration/verify-email/",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),t.resetPassword=(o=(0,i.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.post("/api/rest-auth/password/reset/",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)});t.loadProfile=function(){var e=this;return n=(0,i.default)(l.default.mark(function n(r,o){var a,s,i,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o(),!j.get("login")||a.user.profile){e.next=10;break}return s=a.user.user_profile_id||j.get("user_profile_id"),e.next=5,c.default.get("/api/userprofiles/"+s+"/");case 5:i=e.sent,u=i.data,u=t.handleProfile(u),(0,g.setLanguage)(u.language),r({type:"SET_PROFILE",profile:u});case 10:case"end":return e.stop()}},n,e)})),function(e,t){return n.apply(this,arguments)};var n},t.doSignup=function(e){var n=this,r=e.account_type,o=e.password1,a=e.password2,u=e.email;return d=(0,i.default)(l.default.mark(function e(i){var d,m,f;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.post("/api/rest-auth/registration/",{account_type:r,password1:o,password2:a,email:u});case 3:return d=e.sent,(m=d.data).token=m.key,m.is_superuser=!1,t.storeData(m,u),i({type:"SET_USER",user:m}),e.next=11,i(t.loadProfile());case 11:return e.abrupt("return",s.default.resolve());case 14:return e.prev=14,e.t0=e.catch(0),f=e.t0.response,e.abrupt("return",s.default.reject(f.data));case 18:case"end":return e.stop()}},e,n,[[0,14]])})),function(e){return d.apply(this,arguments)};var d},t.doLogin=function(e){var n=this,r=e.username,o=e.password;return a=(0,i.default)(l.default.mark(function e(a){var i,u,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.post("/api/api-token-auth/",{username:r,password:o});case 3:return i=e.sent,u=i.data,t.storeData(u,r),a({type:"SET_USER",user:u}),e.next=9,a(t.loadProfile());case 9:return e.next=11,a(f.loadUserProjects());case 11:return e.abrupt("return",s.default.resolve());case 14:return e.prev=14,e.t0=e.catch(0),d=e.t0.response,e.abrupt("return",s.default.reject(d.data));case 18:case"end":return e.stop()}},e,n,[[0,14]])})),function(e){return a.apply(this,arguments)};var a},t.saveProfile=function(e){var n=this;return r=(0,i.default)(l.default.mark(function r(o,s){var i,u,d,m,p,_,h;return l.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=s(),u=i.user.user_profile_id||j.get("user_profile_id"),d=u?"/api/userprofiles/"+u+"/":"/api/userprofiles/",m=u?"put":"post",(p=(0,a.default)({},e)).organisation=p.organisation.id,p.country=p.country.id,n.next=9,c.default[m](d,p);case 9:_=n.sent,h=_.data,h=t.handleProfile(h),(0,g.setLanguage)(h.language),o({type:"SET_PROFILE",profile:h}),o(v.loadStaticData()),o(f.loadProjectStructure(!0));case 16:case"end":return n.stop()}},r,n)})),function(e,t){return r.apply(this,arguments)};var r},t.doLogout=function(){return function(e){j.clear(),c.default.unSetAuthToken();try{e({type:"CLEAR_USER_PROJECTS"}),e({type:"CLEAR_TOOLKIT_DATA"}),e({type:"CLEAR_CMS_DATA"})}catch(e){console.warn(e)}try{e({type:"UNSET_USER"})}catch(e){console.warn(e)}}},t.updateTeamViewers=function(e,t){return function(n,r){var o=r().user.profile.member,a=r().user.profile.viewer,s=(0,d.default)(o,e),l=(0,d.default)(a,t);s.length===o.length&&l.length===a.length||n({type:"UPDATE_TEAM_VIEWER",member:s,viewer:l})}},t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SET_USER":return(0,u.default)({},e,t.user);case"SET_PROFILE":var n=e.profile?(0,u.default)({},e.profile,t.profile):(0,u.default)({},t.profile);return(0,u.default)({},e,{profile:n});case"UPDATE_TEAM_VIEWER":var r=e.profile||{};return r.member=t.member,r.viewer=t.viewer,(0,u.default)({},e,{profile:r});case"UNSET_USER":return{};default:return e}};var c=h(n("./src/plugins/axios.js")),d=h(n("./node_modules/lodash/union.js")),m=h(n("./src/Storage.js")),f=_(n("./src/store/modules/projects.js")),v=_(n("./src/store/modules/system.js")),p=_(n("./src/store/modules/countries.js")),g=n("./src/plugins/language.js");function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var j=new m.default;t.getProfile=function(e){if(e.user.profile){var t=p.getCountriesList(e),n=void 0;return t&&t.length>0&&(n=(0,u.default)({},t.find(function(t){return t.id===e.user.profile.country}))),(0,u.default)({},e.user.profile,{country:n})}},t.getUserLanguage=function(e){var t=v.getLanguages(e),n=e&&e.user&&e.user.profile?e.user.profile.language:void 0;return t.find(function(e){return e.code===n})},t.isSuperUser=function(e){return e.user.profile.is_superuser},t.storeData=function(e,t){j.set("token",e.token),j.set("user_profile_id",e.user_profile_id),j.set("is_superuser",e.is_superuser),j.set("email",t),j.set("login",!0),c.default.setAuthToken(e.token)},t.handleProfile=function(e){return e.email=j.get("email"),e.is_superuser=j.get("is_superuser"),e.organisation?(e.organisation_id=e.organisation,e.organisation={name:e.organisation_name||"",id:e.organisation_id}):e.organisation=null,e}},"./src/store/project_utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTodayString=t.dashFieldConvertToObject=t.fieldToConvertToObject=t.fieldToForceToInt=t.fieldsToMapWithId=t.fieldsToConvertToObjectArray=t.fieldsWithCustomValue=void 0;var r=v(n("./node_modules/babel-runtime/core-js/number/is-nan.js")),o=v(n("./node_modules/babel-runtime/core-js/object/keys.js")),a=v(n("./node_modules/babel-runtime/core-js/object/assign.js")),s=v(n("./node_modules/babel-runtime/helpers/extends.js"));t.concatCustom=j,t.mergeCustomAndDefault=function(e){var t={};return p.forEach(function(n){t[n]=j(e[n])}),(0,s.default)({},t)},t.parsePlatformCollection=function(e){return e.platforms.map(function(e){var t=e.id,n=e.strategies&&e.strategies.length>0?e.strategies:[];return e={},t&&(e.id=t),n&&(e.strategies=n.map(function(e){return e.id}).filter(function(e){return e})),t?e:void 0})},t.convertDate=function(e){if(e)return(0,f.default)(e,"YYYY-MM-DDTHH:mm:ss.SSSZ").toDate();return},t.convertStringArrayToObjectArray=function(e){return g.forEach(function(t){e[t]&&(e[t]=e[t].map(function(e){return"string"==typeof e?{value:e}:e}),0===e[t].length&&e[t].push({}))}),(0,a.default)({},e)},t.convertObjectArrayToStringArray=function(e){var t={};return g.forEach(function(n){e[n]&&(t[n]=e[n].map(function(e){return e.value}).filter(function(e){return e}))}),(0,s.default)({},t)},t.fillEmptyCollectionsWithDefault=function(e){return e.coverage=(0,c.default)(e.coverage)?[{}]:e.coverage,e.coverage_second_level=(0,c.default)(e.coverage_second_level)?[{}]:e.coverage_second_level,e.platforms=(0,c.default)(e.platforms)?[{}]:e.platforms,(0,s.default)({},e)},t.setCoverageType=function(e,t){var n=null;t&&(t.clients||t.facilities||t.health_workers)?n=2:e&&e.length>1?n=1:e&&Array.isArray(e)&&e[0]&&e[0].district&&(n=1);return n},t.createDateFields=function(e){var t=e.start_date?(0,f.default)(e.start_date).toJSON():null,n=e.end_date?(0,f.default)(e.end_date).toJSON():null,r=e.implementation_dates?(0,f.default)(e.implementation_dates).toJSON():null;return{start_date:t,end_date:n,implementation_dates:r}},t.deleteUndefinedAndDoubleDollarKeys=y,t.removeEmptyChildObjects=function(e){var t={};return["coverage","platforms","his_bucket","hsc_challenges","publications","links","reports"].forEach(function(n){e[n]&&(t[n]=e[n].filter(function(e){return"number"==typeof e||((e=y(e=(0,s.default)({},e))).hasOwnProperty("available")&&delete e.available,(0,o.default)(e).length>0)}))}),(0,s.default)({},t)},t.removeKeysWithoutValues=function(e){var t={};for(var n in e){var r=e[n];(null!==r&&void 0!==r&&""!==r||(0,i.default)(r)&&(0,m.default)(r).some(function(e){return!(0,u.default)(e)}))&&(t[n]=r)}return t},t.retainNationalOrDistrictCoverage=function(e){var t=null,n=null;1===e.coverageType?n=e.coverage.map(function(e){return(0,s.default)({},e)}):t=(0,s.default)({},e.national_level_deployment);return{national_level_deployment:t,coverage:n}},t.extractIdFromObjects=function(e){var t={};return _.forEach(function(n){t[n]=e[n].map(function(e){return e.id}).filter(function(e){return e})}),t},t.parseOutInteroperabilityLinks=function(e){return{interoperability_links:e.interoperability_links.filter(function(e){return e&&e.id}).map(function(e){return{id:e.id,link:e.link,selected:e.selected}})}},t.convertIdArrayToObjectArray=function(e,t,n){var r={};return n.forEach(function(n){var o=n.structure_key;if(2===(n=n.key.split(".")).length){var a=n[0];n=n[1],r[a]=e[a].map(function(e){return(e=(0,s.default)({},e))[n]&&(e[n]=b(e[n],t,n,o)),e})}else 1===n.length&&(n=n[0],r[n]=b(e[n],t,n,o))}),r},t.handleInteroperabilityLinks=function(e,t){return{interoperability_links:t.interoperability_links.map(function(t){var n=e.interoperability_links.find(function(e){return e.id===t.id}),r=n||{},o=r.selected,a=r.link;return(0,s.default)({},t,{selected:o,link:a})})}},t.retainOnlyIds=function(e){var t={};return h.forEach(function(n){t[n]=e[n].filter(function(e){return!(0,r.default)(parseInt(e,10))})}),t},t.handleNationalLevelCoverage=function(e){var t=e.national_level_deployment;return{national_level_deployment:C((0,s.default)({},t))}},t.handleCoverage=function(e){return(e=e||[]).map(function(e){return C(e)}).filter(function(e){return e})};var l=v(n("./node_modules/lodash/concat.js")),i=v(n("./node_modules/lodash/isPlainObject.js")),u=v(n("./node_modules/lodash/isNull.js")),c=v(n("./node_modules/lodash/isEmpty.js")),d=v(n("./node_modules/lodash/isNil.js")),m=v(n("./node_modules/lodash/values.js")),f=v(n("./node_modules/moment/moment.js"));function v(e){return e&&e.__esModule?e:{default:e}}var p=t.fieldsWithCustomValue=["interoperability_standards","licenses"],g=t.fieldsToConvertToObjectArray=["donors","implementing_partners"],_=t.fieldsToMapWithId=["health_focus_areas"],h=t.fieldToForceToInt=["his_bucket","hsc_challenges"];t.fieldToConvertToObject=[{key:"platforms.strategies",structure_key:"strategies"},{key:"health_focus_areas",structure_key:"health_focus_areas"}],t.dashFieldConvertToObject=[{key:"health_focus_areas",structure_key:"health_focus_areas"},{key:"platforms",structure_key:"technology_platforms"},{key:"licenses",structure_key:"licenses"},{key:"hsc_challenges",structure_key:"hsc_challenges"},{key:"his_bucket",structure_key:"his_bucket"},{key:"interoperability_standards",structure_key:"interoperability_standards"}],t.getTodayString=function(){var e=new Date;return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")};function j(e){return(0,l.default)(e.custom,e.standard).filter(function(e){return!(0,d.default)(e)&&!(0,c.default)(e)})}function y(e){var t={};return(0,o.default)(e).forEach(function(n){void 0!==e[n]&&"$$hashKey"!==n&&(t[n]=e[n])}),t}function b(e,t,n,o){return e.map(function(e){return!(0,r.default)(parseInt(e,10))?t[o].find(function(t){return t.id===e}):(0,s.default)({},e,t[o].find(function(t){return t.id===e.id}))}).filter(function(e){return e})}function C(e){if(e={district:e.district,clients:e.clients,health_workers:e.health_workers,facilities:e.facilities,facilities_list:e.facilities_list},!((0,d.default)(e.clients)&&(0,d.default)(e.health_workers)&&(0,d.default)(e.facilities)))return e.clients=(0,d.default)(e.clients)?0:e.clients,e.health_workers=(0,d.default)(e.health_workers)?0:e.health_workers,e.facilities=(0,d.default)(e.facilities)?0:e.facilities,e}},"./src/store/static_data/project_definition.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.project_definition={name:null,organisation:{id:void 0,name:""},country:null,countryName:null,coverage:[{}],coverage_second_level:[{}],coverageType:1,start_date:void 0,end_date:void 0,platforms:[{name:null,strategies:[]}],licenses:[],fields:[],donors:[{}],application:[],reports:[{}],publications:[{}],links:[{}],contact_name:null,contact_email:null,implementation_overview:null,implementation_dates:null,geographic_scope:null,interoperability_links:[],interoperability_standards:[],wiki:"",repository:"",mobile_application:"",implementing_partners:[{}],data_exchanges:[],his_bucket:[],hsc_challenges:[],health_focus_areas:[],government_investor:void 0}}}]);