(window.webpackJsonp=window.webpackJsonp||[]).push([[10,4,5,6,7,8,13,16,17,18,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,98,99,102,103,173,174,175,176,177,178,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,404,405,406,407,408,409,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,486,487,488,489,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,518,521,522,523,524,525,526,527,528,529,530,531,532,537,538],{"./node_modules/babel-runtime/core-js/object/create.js":function(t,e,n){t.exports={default:n("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-prototype-of.js":function(t,e,n){t.exports={default:n("./node_modules/core-js/library/fn/object/get-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(t,e,n){t.exports={default:n("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/inherits.js":function(t,e,n){"use strict";e.__esModule=!0;var r=a(n("./node_modules/babel-runtime/core-js/object/set-prototype-of.js")),o=a(n("./node_modules/babel-runtime/core-js/object/create.js")),i=a(n("./node_modules/babel-runtime/helpers/typeof.js"));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,i.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(t,e,n){"use strict";e.__esModule=!0;var r,o=n("./node_modules/babel-runtime/helpers/typeof.js"),i=(r=o)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},"./node_modules/clipboard/lib/clipboard-action.js":function(t,e,n){var r,o,i;o=[t,n("./node_modules/select/src/select.js")],void 0===(i="function"==typeof(r=function(t,e){"use strict";var n,r=(n=e)&&n.__esModule?n:{default:n},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})?r.apply(e,o):r)||(t.exports=i)},"./node_modules/clipboard/lib/clipboard.js":function(t,e,n){var r,o,i;o=[t,n("./node_modules/clipboard/lib/clipboard-action.js"),n("./node_modules/tiny-emitter/index.js"),n("./node_modules/good-listener/src/listen.js")],void 0===(i="function"==typeof(r=function(t,e,n,r){"use strict";var o=s(e),i=s(n),a=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,a.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(i.default);function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=u})?r.apply(e,o):r)||(t.exports=i)},"./node_modules/core-js/library/fn/object/create.js":function(t,e,n){n("./node_modules/core-js/library/modules/es6.object.create.js");var r=n("./node_modules/core-js/library/modules/_core.js").Object;t.exports=function(t,e){return r.create(t,e)}},"./node_modules/core-js/library/fn/object/get-prototype-of.js":function(t,e,n){n("./node_modules/core-js/library/modules/es6.object.get-prototype-of.js"),t.exports=n("./node_modules/core-js/library/modules/_core.js").Object.getPrototypeOf},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(t,e,n){n("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),t.exports=n("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/modules/_set-proto.js":function(t,e,n){var r=n("./node_modules/core-js/library/modules/_is-object.js"),o=n("./node_modules/core-js/library/modules/_an-object.js"),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n("./node_modules/core-js/library/modules/_ctx.js")(Function.call,n("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},"./node_modules/core-js/library/modules/es6.object.create.js":function(t,e,n){var r=n("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{create:n("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.get-prototype-of.js":function(t,e,n){var r=n("./node_modules/core-js/library/modules/_to-object.js"),o=n("./node_modules/core-js/library/modules/_object-gpo.js");n("./node_modules/core-js/library/modules/_object-sap.js")("getPrototypeOf",function(){return function(t){return o(r(t))}})},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(t,e,n){var r=n("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{setPrototypeOf:n("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/d3/d3.js":function(t,e,n){var r,o;!function(){var i={version:"3.5.17"},a=[].slice,s=function(t){return a.call(t)},l=this.document;function c(t){return t&&(t.ownerDocument||t.document||t).documentElement}function u(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var d=this.Element.prototype,h=d.setAttribute,p=d.setAttributeNS,m=this.CSSStyleDeclaration.prototype,f=m.setProperty;d.setAttribute=function(t,e){h.call(this,t,e+"")},d.setAttributeNS=function(t,e,n){p.call(this,t,e,n+"")},m.setProperty=function(t,e,n){f.call(this,t,e+"",n)}}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return null===t?NaN:+t}function y(t){return!isNaN(t)}function b(t){return{left:function(e,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)<0?r=i+1:o=i}return r},right:function(e,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)>0?o=i:r=i+1}return r}}}i.ascending=g,i.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},i.min=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=t[o])&&n>r&&(n=r)}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&n>r&&(n=r)}return n},i.max=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=t[o])&&r>n&&(n=r)}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&r>n&&(n=r)}return n},i.extent=function(t,e){var n,r,o,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=o=r;break}for(;++i<a;)null!=(r=t[i])&&(n>r&&(n=r),o<r&&(o=r))}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=o=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&(n>r&&(n=r),o<r&&(o=r))}return[n,o]},i.sum=function(t,e){var n,r=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)y(n=+t[i])&&(r+=n);else for(;++i<o;)y(n=+e.call(t,t[i],i))&&(r+=n);return r},i.mean=function(t,e){var n,r=0,o=t.length,i=-1,a=o;if(1===arguments.length)for(;++i<o;)y(n=v(t[i]))?r+=n:--a;else for(;++i<o;)y(n=v(e.call(t,t[i],i)))?r+=n:--a;if(a)return r/a},i.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),o=+t[r-1],i=n-r;return i?o+i*(t[r]-o):o},i.median=function(t,e){var n,r=[],o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)y(n=v(t[a]))&&r.push(n);else for(;++a<o;)y(n=v(e.call(t,t[a],a)))&&r.push(n);if(r.length)return i.quantile(r.sort(g),.5)},i.variance=function(t,e){var n,r,o=t.length,i=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<o;)y(n=v(t[s]))&&(a+=(r=n-i)*(n-(i+=r/++l)));else for(;++s<o;)y(n=v(e.call(t,t[s],s)))&&(a+=(r=n-i)*(n-(i+=r/++l)));if(l>1)return a/(l-1)},i.deviation=function(){var t=i.variance.apply(this,arguments);return t?Math.sqrt(t):t};var w=b(g);function x(t){return t.length}i.bisectLeft=w.left,i.bisect=i.bisectRight=w.right,i.bisector=function(t){return b(1===t.length?function(e,n){return g(t(e),n)}:t)},i.shuffle=function(t,e,n){(i=arguments.length)<3&&(n=t.length,i<2&&(e=0));for(var r,o,i=n-e;i;)o=Math.random()*i--|0,r=t[i+e],t[i+e]=t[o+e],t[o+e]=r;return t},i.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},i.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],o=new Array(n<0?0:n);e<n;)o[e]=[r,r=t[++e]];return o},i.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=i.min(t,x),r=new Array(n);++e<n;)for(var o,a=-1,s=r[e]=new Array(o);++a<o;)s[a]=t[a][e];return r},i.zip=function(){return i.transpose(arguments)},i.keys=function(t){var e=[];for(var n in t)e.push(n);return e},i.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},i.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},i.merge=function(t){for(var e,n,r,o=t.length,i=-1,a=0;++i<o;)a+=t[i].length;for(n=new Array(a);--o>=0;)for(e=(r=t[o]).length;--e>=0;)n[--a]=r[e];return n};var _=Math.abs;function C(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function k(){this._=Object.create(null)}i.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,o=[],i=function(t){var e=1;for(;t*e%1;)e*=10;return e}(_(n)),a=-1;if(t*=i,e*=i,(n*=i)<0)for(;(r=t+n*++a)>e;)o.push(r/i);else for(;(r=t+n*++a)<e;)o.push(r/i);return o},i.map=function(t,e){var n=new k;if(t instanceof k)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,o=-1,i=t.length;if(1===arguments.length)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e.call(t,r=t[o],o),r)}else for(var a in t)n.set(a,t[a]);return n};var T="__proto__",A="\0";function j(t){return(t+="")===T||t[0]===A?A+t:t}function M(t){return(t+="")[0]===A?t.slice(1):t}function E(t){return j(t)in this._}function S(t){return(t=j(t))in this._&&delete this._[t]}function R(){var t=[];for(var e in this._)t.push(M(e));return t}function P(){var t=0;for(var e in this._)++t;return t}function D(){for(var t in this._)return!1;return!0}function O(){this._=Object.create(null)}function I(t){return t}function N(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function L(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=F.length;n<r;++n){var o=F[n]+e;if(o in t)return o}}C(k,{has:E,get:function(t){return this._[j(t)]},set:function(t,e){return this._[j(t)]=e},remove:S,keys:R,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:M(e),value:this._[e]});return t},size:P,empty:D,forEach:function(t){for(var e in this._)t.call(this,M(e),this._[e])}}),i.nest=function(){var t,e,n={},r=[],o=[];function a(o,i,s){if(s>=r.length)return e?e.call(n,i):t?i.sort(t):i;for(var l,c,u,d,h=-1,p=i.length,m=r[s++],f=new k;++h<p;)(d=f.get(l=m(c=i[h])))?d.push(c):f.set(l,[c]);return o?(c=o(),u=function(t,e){c.set(t,a(o,e,s))}):(c={},u=function(t,e){c[t]=a(o,e,s)}),f.forEach(u),c}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=r.length)return e;var i=[],a=o[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),a?i.sort(function(t,e){return a(t.key,e.key)}):i}(a(i.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return o[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},i.set=function(t){var e=new O;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},C(O,{has:E,add:function(t){return this._[j(t+="")]=!0,t},remove:S,values:R,size:P,empty:D,forEach:function(t){for(var e in this._)t.call(this,M(e))}}),i.behavior={},i.rebind=function(t,e){for(var n,r=1,o=arguments.length;++r<o;)t[n=arguments[r]]=N(t,e,e[n]);return t};var F=["webkit","ms","moz","Moz","o","O"];function H(){}function B(){}function U(t){var e=[],n=new k;function r(){for(var n,r=e,o=-1,i=r.length;++o<i;)(n=r[o].on)&&n.apply(this,arguments);return t}return r.on=function(r,o){var i,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),n.remove(r)),o&&e.push(n.set(r,{on:o})),t)},r}function z(){i.event.preventDefault()}function q(){for(var t,e=i.event;t=e.sourceEvent;)e=t;return e}function W(t){for(var e=new B,n=0,r=arguments.length;++n<r;)e[arguments[n]]=U(e);return e.of=function(n,r){return function(o){try{var a=o.sourceEvent=i.event;o.target=t,i.event=o,e[o.type].apply(n,r)}finally{i.event=a}}},e}i.dispatch=function(){for(var t=new B,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=U(t);return t},B.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},i.event=null,i.requote=function(t){return t.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function G(t){return $(t,K),t}var Y=function(t,e){return e.querySelector(t)},Z=function(t,e){return e.querySelectorAll(t)},J=function(t,e){var n=t.matches||t[L(t,"matchesSelector")];return(J=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Y=function(t,e){return Sizzle(t,e)[0]||null},Z=Sizzle,J=Sizzle.matchesSelector),i.selection=function(){return i.select(l.documentElement)};var K=i.selection.prototype=[];function X(t){return"function"==typeof t?t:function(){return Y(t,this)}}function Q(t){return"function"==typeof t?t:function(){return Z(t,this)}}K.select=function(t){var e,n,r,o,i=[];t=X(t);for(var a=-1,s=this.length;++a<s;){i.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(o=r[l])?(e.push(n=t.call(o,o.__data__,l,a)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return G(i)},K.selectAll=function(t){var e,n,r=[];t=Q(t);for(var o=-1,i=this.length;++o<i;)for(var a=this[o],l=-1,c=a.length;++l<c;)(n=a[l])&&(r.push(e=s(t.call(n,n.__data__,l,o))),e.parentNode=n);return G(r)};var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t,e){return t=i.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function rt(t){return t.trim().replace(/\s+/g," ")}function ot(t){return new RegExp("(?:^|\\s+)"+i.requote(t)+"(?:\\s+|$)","g")}function it(t){return(t+"").trim().split(/^|\s+/)}function at(t,e){var n=(t=it(t).map(st)).length;return"function"==typeof e?function(){for(var r=-1,o=e.apply(this,arguments);++r<n;)t[r](this,o)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function st(t){var e=ot(t);return function(n,r){if(o=n.classList)return r?o.add(t):o.remove(t);var o=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(o)||n.setAttribute("class",rt(o+" "+t))):n.setAttribute("class",rt(o.replace(e," ")))}}function lt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function ct(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ut(t){return"function"==typeof t?t:(t=i.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function dt(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t){return{__data__:t}}function pt(t){return function(){return J(this,t)}}function mt(t,e){for(var n=0,r=t.length;n<r;n++)for(var o,i=t[n],a=0,s=i.length;a<s;a++)(o=i[a])&&e(o,a,n);return t}function ft(t){return $(t,gt),t}i.ns={prefix:et,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),et.hasOwnProperty(n)?{space:et[n],local:t}:t}},K.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=i.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},K.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=it(t)).length,o=-1;if(e=n.classList){for(;++o<r;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");++o<r;)if(!ot(t[o]).test(e))return!1;return!0}for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},K.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(lt(n,t[n],e));return this}if(r<2){var o=this.node();return u(o).getComputedStyle(o,null).getPropertyValue(t)}n=""}return this.each(lt(t,e,n))},K.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ct(e,t[e]));return this}return this.each(ct(t,e))},K.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},K.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},K.append=function(t){return t=ut(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},K.insert=function(t,e){return t=ut(t),e=X(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},K.remove=function(){return this.each(dt)},K.data=function(t,e){var n,r,o=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(n=this[0]).length);++o<i;)(r=n[o])&&(t[o]=r.__data__);return t}function a(t,n){var r,o,i,a=t.length,u=n.length,d=Math.min(a,u),h=new Array(u),p=new Array(u),m=new Array(a);if(e){var f,g=new k,v=new Array(a);for(r=-1;++r<a;)(o=t[r])&&(g.has(f=e.call(o,o.__data__,r))?m[r]=o:g.set(f,o),v[r]=f);for(r=-1;++r<u;)(o=g.get(f=e.call(n,i=n[r],r)))?!0!==o&&(h[r]=o,o.__data__=i):p[r]=ht(i),g.set(f,!0);for(r=-1;++r<a;)r in v&&!0!==g.get(v[r])&&(m[r]=t[r])}else{for(r=-1;++r<d;)o=t[r],i=n[r],o?(o.__data__=i,h[r]=o):p[r]=ht(i);for(;r<u;++r)p[r]=ht(n[r]);for(;r<a;++r)m[r]=t[r]}p.update=h,p.parentNode=h.parentNode=m.parentNode=t.parentNode,s.push(p),l.push(h),c.push(m)}var s=ft([]),l=G([]),c=G([]);if("function"==typeof t)for(;++o<i;)a(n=this[o],t.call(n,n.parentNode.__data__,o));else for(;++o<i;)a(n=this[o],t);return l.enter=function(){return s},l.exit=function(){return c},l},K.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},K.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=pt(t));for(var i=0,a=this.length;i<a;i++){o.push(e=[]),e.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,i)&&e.push(r)}return G(o)},K.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],o=r.length-1,i=r[o];--o>=0;)(n=r[o])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},K.sort=function(t){t=function(t){arguments.length||(t=g);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},K.each=function(t){return mt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},K.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},K.empty=function(){return!this.node()},K.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,o=n.length;r<o;r++){var i=n[r];if(i)return i}return null},K.size=function(){var t=0;return mt(this,function(){++t}),t};var gt=[];function vt(t,e,n){var r="__on"+t,o=t.indexOf("."),a=bt;o>0&&(t=t.slice(0,o));var l=yt.get(t);function c(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}return l&&(t=l,a=wt),o?e?function(){var o=a(e,s(arguments));c.call(this),this.addEventListener(t,this[r]=o,o.$=n),o._=e}:c:e?H:function(){var e,n=new RegExp("^__on([^.]+)"+i.requote(t)+"$");for(var r in this)if(e=r.match(n)){var o=this[r];this.removeEventListener(e[1],o,o.$),delete this[r]}}}i.selection.enter=ft,i.selection.enter.prototype=gt,gt.append=K.append,gt.empty=K.empty,gt.node=K.node,gt.call=K.call,gt.size=K.size,gt.select=function(t){for(var e,n,r,o,i,a=[],s=-1,l=this.length;++s<l;){r=(o=this[s]).update,a.push(e=[]),e.parentNode=o.parentNode;for(var c=-1,u=o.length;++c<u;)(i=o[c])?(e.push(r[c]=n=t.call(o.parentNode,i.__data__,c,s)),n.__data__=i.__data__):e.push(null)}return G(a)},gt.insert=function(t,e){var n,r,o;return arguments.length<2&&(n=this,e=function(t,e,i){var a,s=n[i].update,l=s.length;for(i!=o&&(o=i,r=0),e>=r&&(r=e+1);!(a=s[r])&&++r<l;);return a}),K.insert.call(this,t,e)},i.select=function(t){var e;return"string"==typeof t?(e=[Y(t,l)]).parentNode=l.documentElement:(e=[t]).parentNode=c(t),G([e])},i.selectAll=function(t){var e;return"string"==typeof t?(e=s(Z(t,l))).parentNode=l.documentElement:(e=s(t)).parentNode=null,G([e])},K.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(vt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(vt(t,e,n))};var yt=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function bt(t,e){return function(n){var r=i.event;i.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{i.event=r}}}function wt(t,e){var n=bt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}l&&yt.forEach(function(t){"on"+t in l&&yt.remove(t)});var xt,_t=0;function Ct(t){var e=".dragsuppress-"+ ++_t,n="click"+e,r=i.select(u(t)).on("touchmove"+e,z).on("dragstart"+e,z).on("selectstart"+e,z);if(null==xt&&(xt=!("onselectstart"in t)&&L(t.style,"userSelect")),xt){var o=c(t).style,a=o[xt];o[xt]="none"}return function(t){if(r.on(e,null),xt&&(o[xt]=a),t){var i=function(){r.on(n,null)};r.on(n,function(){z(),i()},!0),setTimeout(i,0)}}}i.mouse=function(t){return Tt(t,q())};var kt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Tt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(kt<0){var o=u(t);if(o.scrollX||o.scrollY){var a=(n=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();kt=!(a.f||a.e),n.remove()}}return kt?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function At(){return i.event.changedTouches[0].identifier}i.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=q().changedTouches),e)for(var r,o=0,i=e.length;o<i;++o)if((r=e[o]).identifier===n)return Tt(t,r)},i.behavior.drag=function(){var t=W(o,"drag","dragstart","dragend"),e=null,n=a(H,i.mouse,u,"mousemove","mouseup"),r=a(At,i.touch,I,"touchmove","touchend");function o(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,o,a,s){return function(){var l,c=i.event.target.correspondingElement||i.event.target,u=this.parentNode,d=t.of(this,arguments),h=0,p=n(),m=".drag"+(null==p?"":"-"+p),f=i.select(o(c)).on(a+m,function(){var t,e,n=r(u,p);if(!n)return;t=n[0]-v[0],e=n[1]-v[1],h|=t|e,v=n,d({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e})}).on(s+m,function(){if(!r(u,p))return;f.on(a+m,null).on(s+m,null),g(h),d({type:"dragend"})}),g=Ct(c),v=r(u,p);l=e?[(l=e.apply(this,arguments)).x-v[0],l.y-v[1]]:[0,0],d({type:"dragstart"})}}return o.origin=function(t){return arguments.length?(e=t,o):e},i.rebind(o,t,"on")},i.touches=function(t,e){return arguments.length<2&&(e=q().touches),e?s(e).map(function(e){var n=Tt(t,e);return n.identifier=e.identifier,n}):[]};var jt=1e-6,Mt=jt*jt,Et=Math.PI,St=2*Et,Rt=St-jt,Pt=Et/2,Dt=Et/180,Ot=180/Et;function It(t){return t>0?1:t<0?-1:0}function Nt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Lt(t){return t>1?0:t<-1?Et:Math.acos(t)}function Ft(t){return t>1?Pt:t<-1?-Pt:Math.asin(t)}function Ht(t){return((t=Math.exp(t))+1/t)/2}function Bt(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2;i.interpolateZoom=function(t,e){var n,r,o=t[0],i=t[1],a=t[2],s=e[0],l=e[1],c=e[2],u=s-o,d=l-i,h=u*u+d*d;if(h<Mt)r=Math.log(c/a)/Ut,n=function(t){return[o+t*u,i+t*d,a*Math.exp(Ut*t*r)]};else{var p=Math.sqrt(h),m=(c*c-a*a+4*h)/(2*a*2*p),f=(c*c-a*a-4*h)/(2*c*2*p),g=Math.log(Math.sqrt(m*m+1)-m),v=Math.log(Math.sqrt(f*f+1)-f);r=(v-g)/Ut,n=function(t){var e,n=t*r,s=Ht(g),l=a/(2*p)*(s*(e=Ut*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[o+l*u,i+l*d,a*s/Ht(Ut*n+g)]}}return n.duration=1e3*r,n},i.behavior.zoom=function(){var t,e,n,r,o,a,s,c,d,h={x:0,y:0,k:1},p=[960,500],m=Wt,f=250,g=0,v="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",w="touchstart.zoom",x=W(_,"zoomstart","zoom","zoomend");function _(t){t.on(v,R).on(qt+".zoom",D).on("dblclick.zoom",O).on(w,P)}function C(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function k(t){h.k=Math.max(m[0],Math.min(m[1],t))}function T(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function A(t,n,r,o){t.__chart__={x:h.x,y:h.y,k:h.k},k(Math.pow(2,o)),T(e=n,r),t=i.select(t),f>0&&(t=t.transition().duration(f)),t.call(_.event)}function j(){s&&s.domain(a.range().map(function(t){return(t-h.x)/h.k}).map(a.invert)),d&&d.domain(c.range().map(function(t){return(t-h.y)/h.k}).map(c.invert))}function M(t){g++||t({type:"zoomstart"})}function E(t){j(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function S(t){--g||(t({type:"zoomend"}),e=null)}function R(){var t=this,e=x.of(t,arguments),n=0,r=i.select(u(t)).on(y,function(){n=1,T(i.mouse(t),o),E(e)}).on(b,function(){r.on(y,null).on(b,null),a(n),S(e)}),o=C(i.mouse(t)),a=Ct(t);ds.call(t),M(e)}function P(){var t,e=this,n=x.of(e,arguments),r={},a=0,s=".zoom-"+i.event.changedTouches[0].identifier,l="touchmove"+s,c="touchend"+s,u=[],d=i.select(e),p=Ct(e);function m(){var n=i.touches(e);return t=h.k,n.forEach(function(t){t.identifier in r&&(r[t.identifier]=C(t))}),n}function f(){var t=i.event.target;i.select(t).on(l,g).on(c,y),u.push(t);for(var n=i.event.changedTouches,s=0,d=n.length;s<d;++s)r[n[s].identifier]=null;var p=m(),f=Date.now();if(1===p.length){if(f-o<500){var v=p[0];A(e,v,r[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),z()}o=f}else if(p.length>1){v=p[0];var b=p[1],w=v[0]-b[0],x=v[1]-b[1];a=w*w+x*x}}function g(){var s,l,c,u,d=i.touches(e);ds.call(e);for(var h=0,p=d.length;h<p;++h,u=null)if(c=d[h],u=r[c.identifier]){if(l)break;s=c,l=u}if(u){var m=(m=c[0]-s[0])*m+(m=c[1]-s[1])*m,f=a&&Math.sqrt(m/a);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],k(f*t)}o=null,T(s,l),E(n)}function y(){if(i.event.touches.length){for(var t=i.event.changedTouches,e=0,o=t.length;e<o;++e)delete r[t[e].identifier];for(var a in r)return void m()}i.selectAll(u).on(s,null),d.on(v,R).on(w,P),p(),S(n)}f(),M(n),d.on(v,null).on(w,f)}function D(){var o=x.of(this,arguments);r?clearTimeout(r):(ds.call(this),t=C(e=n||i.mouse(this)),M(o)),r=setTimeout(function(){r=null,S(o)},50),z(),k(Math.pow(2,.002*zt())*h.k),T(e,t),E(o)}function O(){var t=i.mouse(this),e=Math.log(h.k)/Math.LN2;A(this,t,C(t),i.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return qt||(qt="onwheel"in l?(zt=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(zt=function(){return i.event.wheelDelta},"mousewheel"):(zt=function(){return-i.event.detail},"MozMousePixelScroll")),_.event=function(t){t.each(function(){var t=x.of(this,arguments),n=h;ms?i.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},M(t)}).tween("zoom:zoom",function(){var r=p[0],o=p[1],a=e?e[0]:r/2,s=e?e[1]:o/2,l=i.interpolateZoom([(a-h.x)/h.k,(s-h.y)/h.k,r/h.k],[(a-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(e){var n=l(e),o=r/n[2];this.__chart__=h={x:a-n[0]*o,y:s-n[1]*o,k:o},E(t)}}).each("interrupt.zoom",function(){S(t)}).each("end.zoom",function(){S(t)}):(this.__chart__=h,M(t),E(t),S(t))})},_.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},j(),_):[h.x,h.y]},_.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},k(+t),j(),_):h.k},_.scaleExtent=function(t){return arguments.length?(m=null==t?Wt:[+t[0],+t[1]],_):m},_.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],_):n},_.size=function(t){return arguments.length?(p=t&&[+t[0],+t[1]],_):p},_.duration=function(t){return arguments.length?(f=+t,_):f},_.x=function(t){return arguments.length?(s=t,a=t.copy(),h={x:0,y:0,k:1},_):s},_.y=function(t){return arguments.length?(d=t,c=t.copy(),h={x:0,y:0,k:1},_):d},i.rebind(_,x,"on")};var zt,qt,Wt=[0,1/0];function Vt(){}function $t(t,e,n){return this instanceof $t?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof $t?new $t(t.h,t.s,t.l):me(""+t,fe,$t):new $t(t,e,n)}i.color=Vt,Vt.prototype.toString=function(){return this.rgb()+""},i.hsl=$t;var Gt=$t.prototype=new Vt;function Yt(t,e,n){var r,o;function i(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(o-r)*t/60:t<180?o:t<240?r+(o-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(o=n<=.5?n*(1+e):n+e-n*e),new ce(i(t+120),i(t),i(t-120))}function Zt(t,e,n){return this instanceof Zt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Zt?new Zt(t.h,t.c,t.l):ie(t instanceof Xt?t.l:(t=ge((t=i.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Zt(t,e,n)}Gt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new $t(this.h,this.s,this.l/t)},Gt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new $t(this.h,this.s,t*this.l)},Gt.rgb=function(){return Yt(this.h,this.s,this.l)},i.hcl=Zt;var Jt=Zt.prototype=new Vt;function Kt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Xt(n,Math.cos(t*=Dt)*e,Math.sin(t)*e)}function Xt(t,e,n){return this instanceof Xt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Xt?new Xt(t.l,t.a,t.b):t instanceof Zt?Kt(t.h,t.c,t.l):ge((t=ce(t)).r,t.g,t.b):new Xt(t,e,n)}Jt.brighter=function(t){return new Zt(this.h,this.c,Math.min(100,this.l+Qt*(arguments.length?t:1)))},Jt.darker=function(t){return new Zt(this.h,this.c,Math.max(0,this.l-Qt*(arguments.length?t:1)))},Jt.rgb=function(){return Kt(this.h,this.c,this.l).rgb()},i.lab=Xt;var Qt=18,te=.95047,ee=1,ne=1.08883,re=Xt.prototype=new Vt;function oe(t,e,n){var r=(t+16)/116,o=r+e/500,i=r-n/200;return new ce(le(3.2404542*(o=ae(o)*te)-1.5371385*(r=ae(r)*ee)-.4985314*(i=ae(i)*ne)),le(-.969266*o+1.8760108*r+.041556*i),le(.0556434*o-.2040259*r+1.0572252*i))}function ie(t,e,n){return t>0?new Zt(Math.atan2(n,e)*Ot,Math.sqrt(e*e+n*n),t):new Zt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ce(t,e,n){return this instanceof ce?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ce?new ce(t.r,t.g,t.b):me(""+t,ce,Yt):new ce(t,e,n)}function ue(t){return new ce(t>>16,t>>8&255,255&t)}function de(t){return ue(t)+""}re.brighter=function(t){return new Xt(Math.min(100,this.l+Qt*(arguments.length?t:1)),this.a,this.b)},re.darker=function(t){return new Xt(Math.max(0,this.l-Qt*(arguments.length?t:1)),this.a,this.b)},re.rgb=function(){return oe(this.l,this.a,this.b)},i.rgb=ce;var he=ce.prototype=new Vt;function pe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function me(t,e,n){var r,o,i,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=r[2].split(","),r[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(ye(o[0]),ye(o[1]),ye(o[2]))}return(i=be.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&i)>>4,a|=a>>4,s=240&i,s|=s>>4,l=15&i,l|=l<<4):7===t.length&&(a=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),e(a,s,l))}function fe(t,e,n){var r,o,i=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-i,l=(a+i)/2;return s?(o=l<.5?s/(a+i):s/(2-a-i),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,o=l>0&&l<1?0:r),new $t(r,o,l)}function ge(t,e,n){var r=se((.4124564*(t=ve(t))+.3575761*(e=ve(e))+.1804375*(n=ve(n)))/te),o=se((.2126729*t+.7151522*e+.072175*n)/ee);return Xt(116*o-16,500*(r-o),200*(o-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ve(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ye(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}he.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,o=30;return e||n||r?(e&&e<o&&(e=o),n&&n<o&&(n=o),r&&r<o&&(r=o),new ce(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ce(o,o,o)},he.darker=function(t){return new ce((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},he.hsl=function(){return fe(this.r,this.g,this.b)},he.toString=function(){return"#"+pe(this.r)+pe(this.g)+pe(this.b)};var be=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function we(t){return"function"==typeof t?t:function(){return t}}function xe(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),_e(e,n,t,r)}}function _e(t,e,n,r){var o={},a=i.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=n.call(o,c)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(t){var e=i.event;i.event=t;try{a.progress.call(o,c)}finally{i.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(s(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),c.setRequestHeader)for(var s in l)c.setRequestHeader(s,l[s]);return null!=e&&c.overrideMimeType&&c.overrideMimeType(e),null!=u&&(c.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,c),c.send(null==r?null:r),o},o.abort=function(){return c.abort(),o},i.rebind(o,a,"on"),null==r?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}be.forEach(function(t,e){be.set(t,ue(e))}),i.functor=we,i.xhr=xe(I),i.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function o(t,n,r){arguments.length<3&&(r=n,n=null);var o=_e(t,e,null==n?i:a(n),r);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:a(t)):n},o}function i(t){return o.parse(t.responseText)}function a(t){return function(e){return o.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return o.parse=function(t,e){var n;return o.parseRows(t,function(t,r){if(n)return n(t,r-1);var o=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(o(t),n)}:o})},o.parseRows=function(t,e){var n,o,i={},a={},s=[],l=t.length,c=0,u=0;function d(){if(c>=l)return a;if(o)return o=!1,i;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(o=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(o=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))o=!0;else if(13===s)o=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(n=d())!==a;){for(var h=[];n!==i&&n!==a;)h.push(n),n=d();e&&null==(h=e(h,u++))||s.push(h)}return s},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new O,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(l).join(t)].concat(e.map(function(e){return r.map(function(t){return l(e[t])}).join(t)})).join("\n")},o.formatRows=function(t){return t.map(s).join("\n")},o},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("\t","text/tab-separated-values");var Ce,ke,Te,Ae,je=this[L(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Me(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var o={c:t,t:n+e,n:null};return ke?ke.n=o:Ce=o,ke=o,Te||(Ae=clearTimeout(Ae),Te=1,je(Ee)),o}function Ee(){var t=Se(),e=Re()-t;e>24?(isFinite(e)&&(clearTimeout(Ae),Ae=setTimeout(Ee,e)),Te=0):(Te=1,je(Ee))}function Se(){for(var t=Date.now(),e=Ce;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Re(){for(var t,e=Ce,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Ce=e.n;return ke=t,n}function Pe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}i.timer=function(){Me.apply(this,arguments)},i.timer.flush=function(){Se(),Re()},i.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var De=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*_(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});i.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=i.round(t,Pe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),De[8+n/3]};var Oe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ie=i.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=i.round(t,Pe(t,e))).toFixed(Math.max(0,Math.min(20,Pe(t*(1+1e-15),e))))}});function Ne(t){return t+""}var Le=i.time={},Fe=Date;function He(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}He.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Be.setUTCDate.apply(this._,arguments)},setDay:function(){Be.setUTCDay.apply(this._,arguments)},setFullYear:function(){Be.setUTCFullYear.apply(this._,arguments)},setHours:function(){Be.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Be.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Be.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Be.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Be.setUTCSeconds.apply(this._,arguments)},setTime:function(){Be.setTime.apply(this._,arguments)}};var Be=Date.prototype;function Ue(t,e,n){function r(e){var n=t(e),r=i(n,1);return e-n<r-e?n:r}function o(n){return e(n=t(new Fe(n-1)),1),n}function i(t,n){return e(t=new Fe(+t),n),t}function a(t,r,i){var a=o(t),s=[];if(i>1)for(;a<r;)n(a)%i||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=o,t.offset=i,t.range=a;var s=t.utc=ze(t);return s.floor=s,s.round=ze(r),s.ceil=ze(o),s.offset=ze(i),s.range=function(t,e,n){try{Fe=He;var r=new He;return r._=t,a(r,e,n)}finally{Fe=Date}},t}function ze(t){return function(e,n){try{Fe=He;var r=new He;return r._=e,t(r,n)._}finally{Fe=Date}}}Le.year=Ue(function(t){return(t=Le.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Le.years=Le.year.range,Le.years.utc=Le.year.utc.range,Le.day=Ue(function(t){var e=new Fe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Le.days=Le.day.range,Le.days.utc=Le.day.utc.range,Le.dayOfYear=function(t){var e=Le.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Le[t]=Ue(function(t){return(t=Le.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Le[t+"s"]=n.range,Le[t+"s"].utc=n.utc.range,Le[t+"OfYear"]=function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)}}),Le.week=Le.sunday,Le.weeks=Le.sunday.range,Le.weeks.utc=Le.sunday.utc.range,Le.weekOfYear=Le.sundayOfYear;var qe={"-":"",_:" ",0:"0"},We=/^\s*\d+/,Ve=/^%/;function $e(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function Ge(t){return new RegExp("^(?:"+t.map(i.requote).join("|")+")","i")}function Ye(t){for(var e=new k,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ze(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Je(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ke(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xe(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qe(t,e,n){We.lastIndex=0;var r,o=We.exec(e.slice(n,n+2));return o?(t.y=(r=+o[0])+(r>68?1900:2e3),n+o[0].length):-1}function tn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function en(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function on(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function an(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ln(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function cn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=_(e)/60|0,o=_(e)%60;return n+$e(r,"0",2)+$e(o,"0",2)}function un(t,e,n){Ve.lastIndex=0;var r=Ve.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function dn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}i.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,r=t.grouping,o=t.currency,a=r&&n?function(t,e){for(var o=t.length,i=[],a=0,s=r[0],l=0;o>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),i.push(t.substring(o-=s,o+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return i.reverse().join(n)}:I;return function(t){var n=Oe.exec(t),r=n[1]||" ",s=n[2]||">",l=n[3]||"-",c=n[4]||"",u=n[5],d=+n[6],h=n[7],p=n[8],m=n[9],f=1,g="",v="",y=!1,b=!0;switch(p&&(p=+p.substring(1)),(u||"0"===r&&"="===s)&&(u=r="0",s="="),m){case"n":h=!0,m="g";break;case"%":f=100,v="%",m="f";break;case"p":f=100,v="%",m="r";break;case"b":case"o":case"x":case"X":"#"===c&&(g="0"+m.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":f=-1,m="r"}"$"===c&&(g=o[0],v=o[1]),"r"!=m||p||(m="g"),null!=p&&("g"==m?p=Math.max(1,Math.min(21,p)):"e"!=m&&"f"!=m||(p=Math.max(0,Math.min(20,p)))),m=Ie.get(m)||Ne;var w=u&&h;return function(t){var n=v;if(y&&t%1)return"";var o=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(f<0){var c=i.formatPrefix(t,p);t=c.scale(t),n=c.symbol+v}else t*=f;var x,_,C=(t=m(t,p)).lastIndexOf(".");if(C<0){var k=b?t.lastIndexOf("e"):-1;k<0?(x=t,_=""):(x=t.substring(0,k),_=t.substring(k))}else x=t.substring(0,C),_=e+t.substring(C+1);!u&&h&&(x=a(x,1/0));var T=g.length+x.length+_.length+(w?0:o.length),A=T<d?new Array(T=d-T+1).join(r):"";return w&&(x=a(A+x,A.length?d-_.length:1/0)),o+=g,t=x+_,("<"===s?o+t+A:">"===s?A+o+t:"^"===s?A.substring(0,T>>=1)+o+t+A.substring(T):o+(w?t:A+t))+n}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,a=t.days,s=t.shortDays,l=t.months,c=t.shortMonths;function u(t){var e=t.length;function n(n){for(var r,o,i,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(o=qe[r=t.charAt(++s)])&&(r=t.charAt(++s)),(i=x[r])&&(r=i(n,null==o?"e"===r?" ":"0":o)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Fe!==He,o=new(r?He:Fe);return"j"in n?o.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),o.setFullYear(n.y,0,1),o.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(o.getDay()+5)%7:n.w+7*n.U-(o.getDay()+6)%7)):o.setFullYear(n.y,n.m,n.d),o.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?o._:o},n.toString=function(){return t},n}function d(t,e,n,r){for(var o,i,a,s=0,l=e.length,c=n.length;s<l;){if(r>=c)return-1;if(37===(o=e.charCodeAt(s++))){if(a=e.charAt(s++),!(i=_[a in qe?e.charAt(s++):a])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}u.utc=function(t){var e=u(t);function n(t){try{var n=new(Fe=He);return n._=t,e(n)}finally{Fe=Date}}return n.parse=function(t){try{Fe=He;var n=e.parse(t);return n&&n._}finally{Fe=Date}},n.toString=e.toString,n},u.multi=u.utc.multi=dn;var h=i.map(),p=Ge(a),m=Ye(a),f=Ge(s),g=Ye(s),v=Ge(l),y=Ye(l),b=Ge(c),w=Ye(c);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:u(e),d:function(t,e){return $e(t.getDate(),e,2)},e:function(t,e){return $e(t.getDate(),e,2)},H:function(t,e){return $e(t.getHours(),e,2)},I:function(t,e){return $e(t.getHours()%12||12,e,2)},j:function(t,e){return $e(1+Le.dayOfYear(t),e,3)},L:function(t,e){return $e(t.getMilliseconds(),e,3)},m:function(t,e){return $e(t.getMonth()+1,e,2)},M:function(t,e){return $e(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return $e(t.getSeconds(),e,2)},U:function(t,e){return $e(Le.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return $e(Le.mondayOfYear(t),e,2)},x:u(n),X:u(r),y:function(t,e){return $e(t.getFullYear()%100,e,2)},Y:function(t,e){return $e(t.getFullYear()%1e4,e,4)},Z:cn,"%":function(){return"%"}},_={a:function(t,e,n){f.lastIndex=0;var r=f.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=w.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return d(t,x.c.toString(),e,n)},d:nn,e:nn,H:on,I:on,j:rn,L:ln,m:en,M:an,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:sn,U:Je,w:Ze,W:Ke,x:function(t,e,n){return d(t,x.x.toString(),e,n)},X:function(t,e,n){return d(t,x.X.toString(),e,n)},y:Qe,Y:Xe,Z:tn,"%":un};return u}(t)}};var hn=i.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pn(){}i.format=hn.numberFormat,i.geo={},pn.prototype={s:0,t:0,add:function(t){fn(t,this.t,mn),fn(mn.s,this.s,this),this.s?this.t+=mn.t:this.s=mn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mn=new pn;function fn(t,e,n){var r=n.s=t+e,o=r-t,i=r-o;n.t=t-i+(e-o)}function gn(t,e){t&&yn.hasOwnProperty(t.type)&&yn[t.type](t,e)}i.geo.stream=function(t,e){t&&vn.hasOwnProperty(t.type)?vn[t.type](t,e):gn(t,e)};var vn={Feature:function(t,e){gn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)gn(n[r].geometry,e)}},yn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){bn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)bn(n[r],e,0)},Polygon:function(t,e){wn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)wn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)gn(n[r],e)}};function bn(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function wn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)bn(t[n],e,1);e.polygonEnd()}i.geo.area=function(t){return xn=0,i.geo.stream(t,On),xn};var xn,_n,Cn,kn,Tn,An,jn,Mn,En,Sn,Rn,Pn,Dn=new pn,On={sphere:function(){xn+=4*Et},point:H,lineStart:H,lineEnd:H,polygonStart:function(){Dn.reset(),On.lineStart=In},polygonEnd:function(){var t=2*Dn;xn+=t<0?4*Et+t:t,On.lineStart=On.lineEnd=On.point=H}};function In(){var t,e,n,r,o;function i(t,e){e=e*Dt/2+Et/4;var i=(t*=Dt)-n,a=i>=0?1:-1,s=a*i,l=Math.cos(e),c=Math.sin(e),u=o*c,d=r*l+u*Math.cos(s),h=u*a*Math.sin(s);Dn.add(Math.atan2(h,d)),n=t,r=l,o=c}On.point=function(a,s){On.point=i,n=(t=a)*Dt,r=Math.cos(s=(e=s)*Dt/2+Et/4),o=Math.sin(s)},On.lineEnd=function(){i(t,e)}}function Nn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Hn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Un(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zn(t){return[Math.atan2(t[1],t[0]),Ft(t[2])]}function qn(t,e){return _(t[0]-e[0])<jt&&_(t[1]-e[1])<jt}i.geo.bounds=function(){var t,e,n,r,o,a,s,l,c,u,d,h={point:p,lineStart:f,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,c=0,On.polygonStart()},polygonEnd:function(){On.polygonEnd(),h.point=p,h.lineStart=f,h.lineEnd=g,Dn<0?(t=-(n=180),e=-(r=90)):c>jt?r=90:c<-jt&&(e=-90),d[0]=t,d[1]=n}};function p(o,i){u.push(d=[t=o,n=o]),i<e&&(e=i),i>r&&(r=i)}function m(i,a){var s=Nn([i*Dt,a*Dt]);if(l){var c=Fn(l,s),u=Fn([c[1],-c[0],0],c);Un(u),u=zn(u);var d=i-o,h=d>0?1:-1,m=u[0]*Ot*h,f=_(d)>180;if(f^(h*o<m&&m<h*i))(g=u[1]*Ot)>r&&(r=g);else if(f^(h*o<(m=(m+360)%360-180)&&m<h*i)){var g;(g=-u[1]*Ot)<e&&(e=g)}else a<e&&(e=a),a>r&&(r=a);f?i<o?w(t,i)>w(t,n)&&(n=i):w(i,n)>w(t,n)&&(t=i):n>=t?(i<t&&(t=i),i>n&&(n=i)):i>o?w(t,i)>w(t,n)&&(n=i):w(i,n)>w(t,n)&&(t=i)}else p(i,a);l=s,o=i}function f(){h.point=m}function g(){d[0]=t,d[1]=n,h.point=p,l=null}function v(t,e){if(l){var n=t-o;c+=_(n)>180?n+(n>0?360:-360):n}else a=t,s=e;On.point(t,e),m(t,e)}function y(){On.lineStart()}function b(){v(a,s),On.lineEnd(),_(c)>jt&&(t=-(n=180)),d[0]=t,d[1]=n,l=null}function w(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function C(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(r=n=-(t=e=1/0),u=[],i.geo.stream(o,h),c=u.length){u.sort(x);for(var a=1,s=[f=u[0]];a<c;++a)C((p=u[a])[0],f)||C(p[1],f)?(w(f[0],p[1])>w(f[0],f[1])&&(f[1]=p[1]),w(p[0],f[1])>w(f[0],f[1])&&(f[0]=p[0])):s.push(f=p);for(var l,c,p,m=-1/0,f=(a=0,s[c=s.length-1]);a<=c;f=p,++a)p=s[a],(l=w(f[1],p[0]))>m&&(m=l,t=p[0],n=f[1])}return u=d=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),i.geo.centroid=function(t){_n=Cn=kn=Tn=An=jn=Mn=En=Sn=Rn=Pn=0,i.geo.stream(t,Wn);var e=Sn,n=Rn,r=Pn,o=e*e+n*n+r*r;return o<Mt&&(e=jn,n=Mn,r=En,Cn<jt&&(e=kn,n=Tn,r=An),(o=e*e+n*n+r*r)<Mt)?[NaN,NaN]:[Math.atan2(n,e)*Ot,Ft(r/Math.sqrt(o))*Ot]};var Wn={sphere:H,point:Vn,lineStart:Gn,lineEnd:Yn,polygonStart:function(){Wn.lineStart=Zn},polygonEnd:function(){Wn.lineStart=Gn}};function Vn(t,e){t*=Dt;var n=Math.cos(e*=Dt);$n(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function $n(t,e,n){kn+=(t-kn)/++_n,Tn+=(e-Tn)/_n,An+=(n-An)/_n}function Gn(){var t,e,n;function r(r,o){r*=Dt;var i=Math.cos(o*=Dt),a=i*Math.cos(r),s=i*Math.sin(r),l=Math.sin(o),c=Math.atan2(Math.sqrt((c=e*l-n*s)*c+(c=n*a-t*l)*c+(c=t*s-e*a)*c),t*a+e*s+n*l);Cn+=c,jn+=c*(t+(t=a)),Mn+=c*(e+(e=s)),En+=c*(n+(n=l)),$n(t,e,n)}Wn.point=function(o,i){o*=Dt;var a=Math.cos(i*=Dt);t=a*Math.cos(o),e=a*Math.sin(o),n=Math.sin(i),Wn.point=r,$n(t,e,n)}}function Yn(){Wn.point=Vn}function Zn(){var t,e,n,r,o;function i(t,e){t*=Dt;var i=Math.cos(e*=Dt),a=i*Math.cos(t),s=i*Math.sin(t),l=Math.sin(e),c=r*l-o*s,u=o*a-n*l,d=n*s-r*a,h=Math.sqrt(c*c+u*u+d*d),p=n*a+r*s+o*l,m=h&&-Lt(p)/h,f=Math.atan2(h,p);Sn+=m*c,Rn+=m*u,Pn+=m*d,Cn+=f,jn+=f*(n+(n=a)),Mn+=f*(r+(r=s)),En+=f*(o+(o=l)),$n(n,r,o)}Wn.point=function(a,s){t=a,e=s,Wn.point=i,a*=Dt;var l=Math.cos(s*=Dt);n=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),$n(n,r,o)},Wn.lineEnd=function(){i(t,e),Wn.lineEnd=Yn,Wn.point=Vn}}function Jn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Kn(){return!0}function Xn(t,e,n,r,o){var i=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(qn(n,r)){o.lineStart();for(var s=0;s<e;++s)o.point((n=t[s])[0],n[1]);o.lineEnd()}else{var l=new tr(n,t,null,!0),c=new tr(n,null,l,!1);l.o=c,i.push(l),a.push(c),c=new tr(r,null,l=new tr(r,t,null,!1),!0),l.o=c,i.push(l),a.push(c)}}}),a.sort(e),Qn(i),Qn(a),i.length){for(var s=0,l=n,c=a.length;s<c;++s)a[s].e=l=!l;for(var u,d,h=i[0];;){for(var p=h,m=!0;p.v;)if((p=p.n)===h)return;u=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(s=0,c=u.length;s<c;++s)o.point((d=u[s])[0],d[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(m)for(s=(u=p.p.z).length-1;s>=0;--s)o.point((d=u[s])[0],d[1]);else r(p.x,p.p.x,-1,o);p=p.p}u=(p=p.o).z,m=!m}while(!p.v);o.lineEnd()}}}function Qn(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function tr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function er(t,e,n,r){return function(o,a){var s,l=e(a),c=o.invert(r[0],r[1]),u={point:d,lineStart:p,lineEnd:m,polygonStart:function(){u.point=w,u.lineStart=x,u.lineEnd=_,s=[],f=[]},polygonEnd:function(){u.point=d,u.lineStart=p,u.lineEnd=m,s=i.merge(s);var t=function(t,e){var n=t[0],r=t[1],o=[Math.sin(n),-Math.cos(n),0],i=0,a=0;Dn.reset();for(var s=0,l=e.length;s<l;++s){var c=e[s],u=c.length;if(u)for(var d=c[0],h=d[0],p=d[1]/2+Et/4,m=Math.sin(p),f=Math.cos(p),g=1;;){g===u&&(g=0);var v=(t=c[g])[0],y=t[1]/2+Et/4,b=Math.sin(y),w=Math.cos(y),x=v-h,_=x>=0?1:-1,C=_*x,k=C>Et,T=m*b;if(Dn.add(Math.atan2(T*_*Math.sin(C),f*w+T*Math.cos(C))),i+=k?x+_*St:x,k^h>=n^v>=n){var A=Fn(Nn(d),Nn(t));Un(A);var j=Fn(o,A);Un(j);var M=(k^x>=0?-1:1)*Ft(j[2]);(r>M||r===M&&(A[0]||A[1]))&&(a+=k^x>=0?1:-1)}if(!g++)break;h=v,m=b,f=w,d=t}}return(i<-jt||i<jt&&Dn<-jt)^1&a}(c,f);s.length?(b||(a.polygonStart(),b=!0),Xn(s,or,t,n,a)):t&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),s=f=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function h(t,e){var n=o(t,e);l.point(n[0],n[1])}function p(){u.point=h,l.lineStart()}function m(){u.point=d,l.lineEnd()}var f,g,v=rr(),y=e(v),b=!1;function w(t,e){g.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function x(){y.lineStart(),g=[]}function _(){w(g[0][0],g[0][1]),y.lineEnd();var t,e=y.clean(),n=v.buffer(),r=n.length;if(g.pop(),f.push(g),g=null,r)if(1&e){var o,i=-1;if((r=(t=n[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart();++i<r;)a.point((o=t[i])[0],o[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(nr))}return u}}function nr(t){return t.length>1}function rr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:H,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function or(t,e){return((t=t.x)[0]<0?t[1]-Pt-jt:Pt-t[1])-((e=e.x)[0]<0?e[1]-Pt-jt:Pt-e[1])}var ir=er(Kn,function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var s=i>0?Et:-Et,l=_(i-n);_(l-Et)<jt?(t.point(n,r=(r+a)/2>0?Pt:-Pt),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(i,r),e=0):o!==s&&l>=Et&&(_(n-o)<jt&&(n-=o*jt),_(i-s)<jt&&(i-=s*jt),r=function(t,e,n,r){var o,i,a=Math.sin(t-n);return _(a)>jt?Math.atan((Math.sin(e)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(o=Math.cos(e))*Math.sin(t))/(o*i*a)):(e+r)/2}(n,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=i,r=a),o=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var o;if(null==t)o=n*Pt,r.point(-Et,o),r.point(0,o),r.point(Et,o),r.point(Et,0),r.point(Et,-o),r.point(0,-o),r.point(-Et,-o),r.point(-Et,0),r.point(-Et,o);else if(_(t[0]-e[0])>jt){var i=t[0]<e[0]?Et:-Et;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])},[-Et,-Et/2]);function ar(t,e,n,r){return function(o){var i,a=o.a,s=o.b,l=a.x,c=a.y,u=0,d=1,h=s.x-l,p=s.y-c;if(i=t-l,h||!(i>0)){if(i/=h,h<0){if(i<u)return;i<d&&(d=i)}else if(h>0){if(i>d)return;i>u&&(u=i)}if(i=n-l,h||!(i<0)){if(i/=h,h<0){if(i>d)return;i>u&&(u=i)}else if(h>0){if(i<u)return;i<d&&(d=i)}if(i=e-c,p||!(i>0)){if(i/=p,p<0){if(i<u)return;i<d&&(d=i)}else if(p>0){if(i>d)return;i>u&&(u=i)}if(i=r-c,p||!(i<0)){if(i/=p,p<0){if(i>d)return;i>u&&(u=i)}else if(p>0){if(i<u)return;i<d&&(d=i)}return u>0&&(o.a={x:l+u*h,y:c+u*p}),d<1&&(o.b={x:l+d*h,y:c+d*p}),o}}}}}}var sr=1e9;function lr(t,e,n,r){return function(l){var c,u,d,h,p,m,f,g,v,y,b,w=l,x=rr(),_=ar(t,e,n,r),C={point:A,lineStart:function(){C.point=j,u&&u.push(d=[]);y=!0,v=!1,f=g=NaN},lineEnd:function(){c&&(j(h,p),m&&v&&x.rejoin(),c.push(x.buffer()));C.point=A,v&&l.lineEnd()},polygonStart:function(){l=x,c=[],u=[],b=!0},polygonEnd:function(){l=w,c=i.merge(c);var e=function(t){for(var e=0,n=u.length,r=t[1],o=0;o<n;++o)for(var i,a=1,s=u[o],l=s.length,c=s[0];a<l;++a)i=s[a],c[1]<=r?i[1]>r&&Nt(c,i,t)>0&&++e:i[1]<=r&&Nt(c,i,t)<0&&--e,c=i;return 0!==e}([t,r]),n=b&&e,o=c.length;(n||o)&&(l.polygonStart(),n&&(l.lineStart(),k(null,null,1,l),l.lineEnd()),o&&Xn(c,a,e,k,l),l.polygonEnd()),c=u=d=null}};function k(i,a,l,c){var u=0,d=0;if(null==i||(u=o(i,l))!==(d=o(a,l))||s(i,a)<0^l>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+l+4)%4)!==d);else c.point(a[0],a[1])}function T(o,i){return t<=o&&o<=n&&e<=i&&i<=r}function A(t,e){T(t,e)&&l.point(t,e)}function j(t,e){var n=T(t=Math.max(-sr,Math.min(sr,t)),e=Math.max(-sr,Math.min(sr,e)));if(u&&d.push([t,e]),y)h=t,p=e,m=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var r={a:{x:f,y:g},b:{x:t,y:e}};_(r)?(v||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),b=!1):n&&(l.lineStart(),l.point(t,e),b=!1)}f=t,g=e,v=n}return C};function o(r,o){return _(r[0]-t)<jt?o>0?0:3:_(r[0]-n)<jt?o>0?2:1:_(r[1]-e)<jt?o>0?1:0:o>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function cr(t){var e=0,n=Et/3,r=Rr(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*Et/180,n=t[1]*Et/180):[e/Et*180,n/Et*180]},o}function ur(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,o=1+n*(2*r-n),i=Math.sqrt(o)/r;function a(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),i-n*Math.cos(t)]}return a.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,Ft((o-(t*t+n*n)*r*r)/(2*r))]},a}i.geo.clipExtent=function(){var t,e,n,r,o,i,a={stream:function(t){return o&&(o.valid=!1),(o=i(t)).valid=!0,o},extent:function(s){return arguments.length?(i=lr(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),o&&(o.valid=!1,o=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(i.geo.conicEqualArea=function(){return cr(ur)}).raw=ur,i.geo.albers=function(){return i.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},i.geo.albersUsa=function(){var t,e,n,r,o=i.geo.albers(),a=i.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=i.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function c(o){var i=o[0],a=o[1];return t=null,e(i,a),t||(n(i,a),t)||r(i,a),t}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},c.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,o){e.point(t,o),n.point(t,o),r.point(t,o)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),c):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var i=o.scale(),u=+t[0],d=+t[1];return e=o.translate(t).clipExtent([[u-.455*i,d-.238*i],[u+.455*i,d+.238*i]]).stream(l).point,n=a.translate([u-.307*i,d+.201*i]).clipExtent([[u-.425*i+jt,d+.12*i+jt],[u-.214*i-jt,d+.234*i-jt]]).stream(l).point,r=s.translate([u-.205*i,d+.212*i]).clipExtent([[u-.214*i+jt,d+.166*i+jt],[u-.115*i-jt,d+.234*i-jt]]).stream(l).point,c},c.scale(1070)};var dr,hr,pr,mr,fr,gr,vr={point:H,lineStart:H,lineEnd:H,polygonStart:function(){hr=0,vr.lineStart=yr},polygonEnd:function(){vr.lineStart=vr.lineEnd=vr.point=H,dr+=_(hr/2)}};function yr(){var t,e,n,r;function o(t,e){hr+=r*t-n*e,n=t,r=e}vr.point=function(i,a){vr.point=o,t=n=i,e=r=a},vr.lineEnd=function(){o(t,e)}}var br={point:function(t,e){t<pr&&(pr=t);t>fr&&(fr=t);e<mr&&(mr=e);e>gr&&(gr=e)},lineStart:H,lineEnd:H,polygonStart:H,polygonEnd:H};function wr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var xr,_r={point:Cr,lineStart:kr,lineEnd:Tr,polygonStart:function(){_r.lineStart=Ar},polygonEnd:function(){_r.point=Cr,_r.lineStart=kr,_r.lineEnd=Tr}};function Cr(t,e){kn+=t,Tn+=e,++An}function kr(){var t,e;function n(n,r){var o=n-t,i=r-e,a=Math.sqrt(o*o+i*i);jn+=a*(t+n)/2,Mn+=a*(e+r)/2,En+=a,Cr(t=n,e=r)}_r.point=function(r,o){_r.point=n,Cr(t=r,e=o)}}function Tr(){_r.point=Cr}function Ar(){var t,e,n,r;function o(t,e){var o=t-n,i=e-r,a=Math.sqrt(o*o+i*i);jn+=a*(n+t)/2,Mn+=a*(r+e)/2,En+=a,Sn+=(a=r*t-n*e)*(n+t),Rn+=a*(r+e),Pn+=3*a,Cr(n=t,r=e)}_r.point=function(i,a){_r.point=o,Cr(t=n=i,e=r=a)},_r.lineEnd=function(){o(t,e)}}function jr(t){var e=.5,n=Math.cos(30*Dt),r=16;function o(e){return(r?function(e){var n,o,a,s,l,c,u,d,h,p,m,f,g={point:v,lineStart:y,lineEnd:w,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){d=NaN,g.point=b,e.lineStart()}function b(n,o){var a=Nn([n,o]),s=t(n,o);i(d,h,u,p,m,f,d=s[0],h=s[1],u=n,p=a[0],m=a[1],f=a[2],r,e),e.point(d,h)}function w(){g.point=v,e.lineEnd()}function x(){y(),g.point=_,g.lineEnd=C}function _(t,e){b(n=t,e),o=d,a=h,s=p,l=m,c=f,g.point=b}function C(){i(d,h,u,p,m,f,o,a,n,s,l,c,r,e),g.lineEnd=w,w()}return g}:function(e){return Er(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function i(r,o,a,s,l,c,u,d,h,p,m,f,g,v){var y=u-r,b=d-o,w=y*y+b*b;if(w>4*e&&g--){var x=s+p,C=l+m,k=c+f,T=Math.sqrt(x*x+C*C+k*k),A=Math.asin(k/=T),j=_(_(k)-1)<jt||_(a-h)<jt?(a+h)/2:Math.atan2(C,x),M=t(j,A),E=M[0],S=M[1],R=E-r,P=S-o,D=b*R-y*P;(D*D/w>e||_((y*R+b*P)/w-.5)>.3||s*p+l*m+c*f<n)&&(i(r,o,a,s,l,c,E,S,j,x/=T,C/=T,k,g,v),v.point(E,S),i(E,S,j,x,C,k,u,d,h,p,m,f,g,v))}}return o.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,o):Math.sqrt(e)},o}function Mr(t){this.stream=t}function Er(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Sr(t){return Rr(function(){return t})()}function Rr(t){var e,n,r,o,a,s,l=jr(function(t,n){return[(t=e(t,n))[0]*c+o,a-t[1]*c]}),c=150,u=480,d=250,h=0,p=0,m=0,f=0,g=0,v=ir,y=I,b=null,w=null;function x(t){return[(t=r(t[0]*Dt,t[1]*Dt))[0]*c+o,a-t[1]*c]}function C(t){return(t=r.invert((t[0]-o)/c,(a-t[1])/c))&&[t[0]*Ot,t[1]*Ot]}function k(){r=Jn(n=Ir(m,f,g),e);var t=e(h,p);return o=u-t[0]*c,a=d+t[1]*c,T()}function T(){return s&&(s.valid=!1,s=null),x}return x.stream=function(t){return s&&(s.valid=!1),(s=Pr(v(n,l(y(t))))).valid=!0,s},x.clipAngle=function(t){return arguments.length?(v=null==t?(b=t,ir):function(t){var e=Math.cos(t),n=e>0,r=_(e)>jt;return er(o,function(t){var e,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var p,m=[d,h],f=o(d,h),g=n?f?0:a(d,h):f?a(d+(d<0?Et:-Et),h):0;if(!e&&(c=l=f)&&t.lineStart(),f!==l&&(p=i(e,m),(qn(e,p)||qn(m,p))&&(m[0]+=jt,m[1]+=jt,f=o(m[0],m[1]))),f!==l)u=0,f?(t.lineStart(),p=i(m,e),t.point(p[0],p[1])):(p=i(e,m),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&n^f){var v;g&s||!(v=i(m,e,!0))||(u=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!f||e&&qn(e,m)||t.point(m[0],m[1]),e=m,l=f,s=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},Hr(t,6*Dt),n?[0,-t]:[-Et,t-Et]);function o(t,n){return Math.cos(t)*Math.cos(n)>e}function i(t,n,r){var o=[1,0,0],i=Fn(Nn(t),Nn(n)),a=Ln(i,i),s=i[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,d=Fn(o,i),h=Bn(o,c);Hn(h,Bn(i,u));var p=d,m=Ln(h,p),f=Ln(p,p),g=m*m-f*(Ln(h,h)-1);if(!(g<0)){var v=Math.sqrt(g),y=Bn(p,(-m-v)/f);if(Hn(y,h),y=zn(y),!r)return y;var b,w=t[0],x=n[0],C=t[1],k=n[1];x<w&&(b=w,w=x,x=b);var T=x-w,A=_(T-Et)<jt;if(!A&&k<C&&(b=C,C=k,k=b),A||T<jt?A?C+k>0^y[1]<(_(y[0]-w)<jt?C:k):C<=y[1]&&y[1]<=k:T>Et^(w<=y[0]&&y[0]<=x)){var j=Bn(p,(-m+v)/f);return Hn(j,h),[y,zn(j)]}}}function a(e,r){var o=n?t:Et-t,i=0;return e<-o?i|=1:e>o&&(i|=2),r<-o?i|=4:r>o&&(i|=8),i}}((b=+t)*Dt),T()):b},x.clipExtent=function(t){return arguments.length?(w=t,y=t?lr(t[0][0],t[0][1],t[1][0],t[1][1]):I,T()):w},x.scale=function(t){return arguments.length?(c=+t,k()):c},x.translate=function(t){return arguments.length?(u=+t[0],d=+t[1],k()):[u,d]},x.center=function(t){return arguments.length?(h=t[0]%360*Dt,p=t[1]%360*Dt,k()):[h*Ot,p*Ot]},x.rotate=function(t){return arguments.length?(m=t[0]%360*Dt,f=t[1]%360*Dt,g=t.length>2?t[2]%360*Dt:0,k()):[m*Ot,f*Ot,g*Ot]},i.rebind(x,l,"precision"),function(){return e=t.apply(this,arguments),x.invert=e.invert&&C,k()}}function Pr(t){return Er(t,function(e,n){t.point(e*Dt,n*Dt)})}function Dr(t,e){return[t,e]}function Or(t,e){return[t>Et?t-St:t<-Et?t+St:t,e]}function Ir(t,e,n){return t?e||n?Jn(Lr(t),Fr(e,n)):Lr(t):e||n?Fr(e,n):Or}function Nr(t){return function(e,n){return[(e+=t)>Et?e-St:e<-Et?e+St:e,n]}}function Lr(t){var e=Nr(t);return e.invert=Nr(-t),e}function Fr(t,e){var n=Math.cos(t),r=Math.sin(t),o=Math.cos(e),i=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,c=Math.sin(e),u=c*n+s*r;return[Math.atan2(l*o-u*i,s*n-c*r),Ft(u*o+l*i)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,c=Math.sin(e),u=c*o-l*i;return[Math.atan2(l*o+c*i,s*n+u*r),Ft(u*n-s*r)]},a}function Hr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(o,i,a,s){var l=a*e;null!=o?(o=Br(n,o),i=Br(n,i),(a>0?o<i:o>i)&&(o+=a*St)):(o=t+a*St,i=t-.5*l);for(var c,u=o;a>0?u>i:u<i;u-=l)s.point((c=zn([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],c[1])}}function Br(t,e){var n=Nn(e);n[0]-=t,Un(n);var r=Lt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-jt)%(2*Math.PI)}function Ur(t,e,n){var r=i.range(t,e-jt,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function zr(t,e,n){var r=i.range(t,e-jt,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function qr(t){return t.source}function Wr(t){return t.target}i.geo.path=function(){var t,e,n,r,o,a=4.5;function s(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=n(r)),i.geo.stream(t,o)),r.result()}function l(){return o=null,s}return s.area=function(t){return dr=0,i.geo.stream(t,n(vr)),dr},s.centroid=function(t){return kn=Tn=An=jn=Mn=En=Sn=Rn=Pn=0,i.geo.stream(t,n(_r)),Pn?[Sn/Pn,Rn/Pn]:En?[jn/En,Mn/En]:An?[kn/An,Tn/An]:[NaN,NaN]},s.bounds=function(t){return fr=gr=-(pr=mr=1/0),i.geo.stream(t,n(br)),[[pr,mr],[fr,gr]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||(r=e,o=jr(function(t,e){return r([t*Ot,e*Ot])}),function(t){return Pr(o(t))}):I,l()):t;var r,o},s.context=function(t){return arguments.length?(r=null==(e=t)?new function(){var t=wr(4.5),e=[],n={point:r,lineStart:function(){n.point=o},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=wr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function o(t,r){e.push("M",t,",",r),n.point=i}function i(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}:new function(t){var e=4.5,n={point:r,lineStart:function(){n.point=o},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:H};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,St)}function o(e,r){t.moveTo(e,r),n.point=i}function i(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}(t),"function"!=typeof a&&r.pointRadius(a),l()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),s):a},s.projection(i.geo.albersUsa()).context(null)},i.geo.transform=function(t){return{stream:function(e){var n=new Mr(e);for(var r in t)n[r]=t[r];return n}}},Mr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},i.geo.projection=Sr,i.geo.projectionMutator=Rr,(i.geo.equirectangular=function(){return Sr(Dr)}).raw=Dr.invert=Dr,i.geo.rotation=function(t){function e(e){return(e=t(e[0]*Dt,e[1]*Dt))[0]*=Ot,e[1]*=Ot,e}return t=Ir(t[0]%360*Dt,t[1]*Dt,t.length>2?t[2]*Dt:0),e.invert=function(e){return(e=t.invert(e[0]*Dt,e[1]*Dt))[0]*=Ot,e[1]*=Ot,e},e},Or.invert=Dr,i.geo.circle=function(){var t,e,n=[0,0],r=6;function o(){var t="function"==typeof n?n.apply(this,arguments):n,r=Ir(-t[0]*Dt,-t[1]*Dt,0).invert,o=[];return e(null,null,1,{point:function(t,e){o.push(t=r(t,e)),t[0]*=Ot,t[1]*=Ot}}),{type:"Polygon",coordinates:[o]}}return o.origin=function(t){return arguments.length?(n=t,o):n},o.angle=function(n){return arguments.length?(e=Hr((t=+n)*Dt,r*Dt),o):t},o.precision=function(n){return arguments.length?(e=Hr(t*Dt,(r=+n)*Dt),o):r},o.angle(90)},i.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Dt,o=t[1]*Dt,i=e[1]*Dt,a=Math.sin(r),s=Math.cos(r),l=Math.sin(o),c=Math.cos(o),u=Math.sin(i),d=Math.cos(i);return Math.atan2(Math.sqrt((n=d*a)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},i.geo.graticule=function(){var t,e,n,r,o,a,s,l,c,u,d,h,p=10,m=p,f=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return i.range(Math.ceil(r/f)*f,n,f).map(d).concat(i.range(Math.ceil(l/g)*g,s,g).map(h)).concat(i.range(Math.ceil(e/p)*p,t,p).filter(function(t){return _(t%f)>jt}).map(c)).concat(i.range(Math.ceil(a/m)*m,o,m).filter(function(t){return _(t%g)>jt}).map(u))}return y.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(h(s).slice(1),d(n).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),l>s&&(t=l,l=s,s=t),y.precision(v)):[[r,l],[n,s]]},y.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),a>o&&(n=a,a=o,o=n),y.precision(v)):[[e,a],[t,o]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(f=+t[0],g=+t[1],y):[f,g]},y.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],y):[p,m]},y.precision=function(i){return arguments.length?(v=+i,c=Ur(a,o,90),u=zr(e,t,v),d=Ur(l,s,90),h=zr(r,n,v),y):v},y.majorExtent([[-180,-90+jt],[180,90-jt]]).minorExtent([[-180,-80-jt],[180,80+jt]])},i.geo.greatArc=function(){var t,e,n=qr,r=Wr;function o(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return o.distance=function(){return i.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},o.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,o):n},o.target=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,o):r},o.precision=function(){return arguments.length?o:0},o},i.geo.interpolate=function(t,e){return n=t[0]*Dt,r=t[1]*Dt,o=e[0]*Dt,i=e[1]*Dt,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=a*Math.cos(n),d=a*Math.sin(n),h=l*Math.cos(o),p=l*Math.sin(o),m=2*Math.asin(Math.sqrt(Bt(i-r)+a*l*Bt(o-n))),f=1/Math.sin(m),(g=m?function(t){var e=Math.sin(t*=m)*f,n=Math.sin(m-t)*f,r=n*u+e*h,o=n*d+e*p,i=n*s+e*c;return[Math.atan2(o,r)*Ot,Math.atan2(i,Math.sqrt(r*r+o*o))*Ot]}:function(){return[n*Ot,r*Ot]}).distance=m,g;var n,r,o,i,a,s,l,c,u,d,h,p,m,f,g},i.geo.length=function(t){return xr=0,i.geo.stream(t,Vr),xr};var Vr={sphere:H,point:H,lineStart:function(){var t,e,n;function r(r,o){var i=Math.sin(o*=Dt),a=Math.cos(o),s=_((r*=Dt)-t),l=Math.cos(s);xr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*i-e*a*l)*s),e*i+n*a*l),t=r,e=i,n=a}Vr.point=function(o,i){t=o*Dt,e=Math.sin(i*=Dt),n=Math.cos(i),Vr.point=r},Vr.lineEnd=function(){Vr.point=Vr.lineEnd=H}},lineEnd:H,polygonStart:H,polygonEnd:H};function $r(t,e){function n(e,n){var r=Math.cos(e),o=Math.cos(n),i=t(r*o);return[i*o*Math.sin(e),i*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),o=e(r),i=Math.sin(o),a=Math.cos(o);return[Math.atan2(t*i,r*a),Math.asin(r&&n*i/r)]},n}var Gr=$r(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(i.geo.azimuthalEqualArea=function(){return Sr(Gr)}).raw=Gr;var Yr=$r(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},I);function Zr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Et/4+t/2)},o=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),i=n*Math.pow(r(t),o)/o;if(!o)return Xr;function a(t,e){i>0?e<-Pt+jt&&(e=-Pt+jt):e>Pt-jt&&(e=Pt-jt);var n=i/Math.pow(r(e),o);return[n*Math.sin(o*t),i-n*Math.cos(o*t)]}return a.invert=function(t,e){var n=i-e,r=It(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(i/r,1/o))-Pt]},a}function Jr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),o=n/r+t;if(_(r)<jt)return Dr;function i(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}return i.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-It(r)*Math.sqrt(t*t+n*n)]},i}(i.geo.azimuthalEquidistant=function(){return Sr(Yr)}).raw=Yr,(i.geo.conicConformal=function(){return cr(Zr)}).raw=Zr,(i.geo.conicEquidistant=function(){return cr(Jr)}).raw=Jr;var Kr=$r(function(t){return 1/t},Math.atan);function Xr(t,e){return[t,Math.log(Math.tan(Et/4+e/2))]}function Qr(t){var e,n=Sr(t),r=n.scale,o=n.translate,i=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=o.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=i.apply(n,arguments);if(a===n){if(e=null==t){var s=Et*r(),l=o();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(i.geo.gnomonic=function(){return Sr(Kr)}).raw=Kr,Xr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Pt]},(i.geo.mercator=function(){return Qr(Xr)}).raw=Xr;var to=$r(function(){return 1},Math.asin);(i.geo.orthographic=function(){return Sr(to)}).raw=to;var eo=$r(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function no(t,e){return[Math.log(Math.tan(Et/4+e/2)),-t]}function ro(t){return t[0]}function oo(t){return t[1]}function io(t){for(var e=t.length,n=[0,1],r=2,o=2;o<e;o++){for(;r>1&&Nt(t[n[r-2]],t[n[r-1]],t[o])<=0;)--r;n[r++]=o}return n.slice(0,r)}function ao(t,e){return t[0]-e[0]||t[1]-e[1]}(i.geo.stereographic=function(){return Sr(eo)}).raw=eo,no.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Pt]},(i.geo.transverseMercator=function(){var t=Qr(no),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=no,i.geom={},i.geom.hull=function(t){var e=ro,n=oo;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,o=we(e),i=we(n),a=t.length,s=[],l=[];for(r=0;r<a;r++)s.push([+o.call(this,t[r],r),+i.call(this,t[r],r),r]);for(s.sort(ao),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var c=io(s),u=io(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],p=[];for(r=c.length-1;r>=0;--r)p.push(t[s[c[r]][2]]);for(r=+d;r<u.length-h;++r)p.push(t[s[u[r]][2]]);return p}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},i.geom.polygon=function(t){return $(t,so),t};var so=i.geom.polygon.prototype=[];function lo(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function co(t,e,n,r){var o=t[0],i=n[0],a=e[0]-o,s=r[0]-i,l=t[1],c=n[1],u=e[1]-l,d=r[1]-c,h=(s*(l-c)-d*(o-i))/(d*a-s*u);return[o+h*a,l+h*u]}function uo(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}so.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],o=0;++e<n;)t=r,r=this[e],o+=t[1]*r[0]-t[0]*r[1];return.5*o},so.centroid=function(t){var e,n,r=-1,o=this.length,i=0,a=0,s=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++r<o;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],i+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[i*t,a*t]},so.clip=function(t){for(var e,n,r,o,i,a,s=uo(t),l=-1,c=this.length-uo(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,o=this[l],i=e[(r=e.length-s)-1],n=-1;++n<r;)lo(a=e[n],u,o)?(lo(i,u,o)||t.push(co(i,a,u,o)),t.push(a)):lo(i,u,o)&&t.push(co(i,a,u,o)),i=a;s&&t.push(t[0]),u=o}return t};var ho,po,mo,fo,go,vo=[],yo=[];function bo(t){var e=vo.pop()||new function(){Io(this),this.edge=this.site=this.circle=null};return e.site=t,e}function wo(t){Mo(t),mo.remove(t),vo.push(t),Io(t)}function xo(t){var e=t.circle,n=e.x,r=e.cy,o={x:n,y:r},i=t.P,a=t.N,s=[t];wo(t);for(var l=i;l.circle&&_(n-l.circle.x)<jt&&_(r-l.circle.cy)<jt;)i=l.P,s.unshift(l),wo(l),l=i;s.unshift(l),Mo(l);for(var c=a;c.circle&&_(n-c.circle.x)<jt&&_(r-c.circle.cy)<jt;)a=c.N,s.push(c),wo(c),c=a;s.push(c),Mo(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],Po(c.edge,l.site,c.site,o);l=s[0],(c=s[d-1]).edge=Ro(l.site,c.site,null,o),jo(l),jo(c)}function _o(t){for(var e,n,r,o,i=t.x,a=t.y,s=mo._;s;)if((r=Co(s,a)-i)>jt)s=s.L;else{if(!((o=i-ko(s,a))>jt)){r>-jt?(e=s.P,n=s):o>-jt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=bo(t);if(mo.insert(e,l),e||n){if(e===n)return Mo(e),n=bo(e.site),mo.insert(l,n),l.edge=n.edge=Ro(e.site,l.site),jo(e),void jo(n);if(n){Mo(e),Mo(n);var c=e.site,u=c.x,d=c.y,h=t.x-u,p=t.y-d,m=n.site,f=m.x-u,g=m.y-d,v=2*(h*g-p*f),y=h*h+p*p,b=f*f+g*g,w={x:(g*y-p*b)/v+u,y:(h*b-f*y)/v+d};Po(n.edge,c,m,w),l.edge=Ro(c,t,null,w),n.edge=Ro(t,m,null,w),jo(e),jo(n)}else l.edge=Ro(e.site,l.site)}}function Co(t,e){var n=t.site,r=n.x,o=n.y,i=o-e;if(!i)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-e;if(!c)return s;var u=s-r,d=1/i-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+o-i/2)))/d+r:(r+s)/2}function ko(t,e){var n=t.N;if(n)return Co(n,e);var r=t.site;return r.y===e?r.x:1/0}function To(t){this.site=t,this.edges=[]}function Ao(t,e){return e.angle-t.angle}function jo(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,o=t.site,i=n.site;if(r!==i){var a=o.x,s=o.y,l=r.x-a,c=r.y-s,u=i.x-a,d=2*(l*(g=i.y-s)-c*u);if(!(d>=-Mt)){var h=l*l+c*c,p=u*u+g*g,m=(g*h-c*p)/d,f=(l*p-u*h)/d,g=f+s,v=yo.pop()||new function(){Io(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=o,v.x=m+a,v.y=g+Math.sqrt(m*m+f*f),v.cy=g,t.circle=v;for(var y=null,b=go._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}go.insert(y,v),y||(fo=v)}}}}function Mo(t){var e=t.circle;e&&(e.P||(fo=e.N),go.remove(e),yo.push(e),Io(e),t.circle=null)}function Eo(t,e){var n=t.b;if(n)return!0;var r,o,i=t.a,a=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,d=t.r,h=u.x,p=u.y,m=d.x,f=d.y,g=(h+m)/2,v=(p+f)/2;if(f===p){if(g<a||g>=s)return;if(h>m){if(i){if(i.y>=c)return}else i={x:g,y:l};n={x:g,y:c}}else{if(i){if(i.y<l)return}else i={x:g,y:c};n={x:g,y:l}}}else if(o=v-(r=(h-m)/(f-p))*g,r<-1||r>1)if(h>m){if(i){if(i.y>=c)return}else i={x:(l-o)/r,y:l};n={x:(c-o)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-o)/r,y:c};n={x:(l-o)/r,y:l}}else if(p<f){if(i){if(i.x>=s)return}else i={x:a,y:r*a+o};n={x:s,y:r*s+o}}else{if(i){if(i.x<a)return}else i={x:s,y:r*s+o};n={x:a,y:r*a+o}}return t.a=i,t.b=n,!0}function So(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ro(t,e,n,r){var o=new So(t,e);return ho.push(o),n&&Po(o,t,e,n),r&&Po(o,e,t,r),po[t.i].edges.push(new Do(o,t,e)),po[e.i].edges.push(new Do(o,e,t)),o}function Po(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Do(t,e,n){var r=t.a,o=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(o.x-r.x,r.y-o.y):Math.atan2(r.x-o.x,o.y-r.y)}function Oo(){this._=null}function Io(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function No(t,e){var n=e,r=e.R,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Lo(t,e){var n=e,r=e.L,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Fo(t){for(;t.L;)t=t.L;return t}function Ho(t,e){var n,r,o,i=t.sort(Bo).pop();for(ho=[],po=new Array(t.length),mo=new Oo,go=new Oo;;)if(o=fo,i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x))i.x===n&&i.y===r||(po[i.i]=new To(i),_o(i),n=i.x,r=i.y),i=t.pop();else{if(!o)break;xo(o.arc)}e&&(function(t){for(var e,n=ho,r=ar(t[0][0],t[0][1],t[1][0],t[1][1]),o=n.length;o--;)(!Eo(e=n[o],t)||!r(e)||_(e.a.x-e.b.x)<jt&&_(e.a.y-e.b.y)<jt)&&(e.a=e.b=null,n.splice(o,1))}(e),function(t){for(var e,n,r,o,i,a,s,l,c,u,d=t[0][0],h=t[1][0],p=t[0][1],m=t[1][1],f=po,g=f.length;g--;)if((i=f[g])&&i.prepare())for(l=(s=i.edges).length,a=0;a<l;)r=(u=s[a].end()).x,o=u.y,e=(c=s[++a%l].start()).x,n=c.y,(_(r-e)>jt||_(o-n)>jt)&&(s.splice(a,0,new Do((v=i.site,y=u,b=_(r-d)<jt&&m-o>jt?{x:d,y:_(e-d)<jt?n:m}:_(o-m)<jt&&h-r>jt?{x:_(n-m)<jt?e:h,y:m}:_(r-h)<jt&&o-p>jt?{x:h,y:_(e-h)<jt?n:p}:_(o-p)<jt&&r-d>jt?{x:_(n-p)<jt?e:d,y:p}:null,w=void 0,w=new So(v,null),w.a=y,w.b=b,ho.push(w),w),i.site,null)),++l);var v,y,b,w}(e));var a={cells:po,edges:ho};return mo=go=ho=po=null,a}function Bo(t,e){return e.y-t.y||e.x-t.x}To.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ao),e.length},Do.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Oo.prototype={insert:function(t,e){var n,r,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Fo(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(o=r.R)&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.R&&(No(this,n),n=(t=n).U),n.C=!1,r.C=!0,Lo(this,r)):(o=r.L)&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.L&&(Lo(this,n),n=(t=n).U),n.C=!1,r.C=!0,No(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,o=t.U,i=t.L,a=t.R;if(n=i?a?Fo(a):i:a,o?o.L===t?o.L=n:o.R=n:this._=n,i&&a?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==a?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=a,a.U=n):(n.U=o,o=n,t=n.R)):(r=t.C,t=n),t&&(t.U=o),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,No(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Lo(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,No(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,Lo(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,No(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,Lo(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}},i.geom.voronoi=function(t){var e=ro,n=oo,r=e,o=n,i=Uo;if(t)return a(t);function a(t){var e=new Array(t.length),n=i[0][0],r=i[0][1],o=i[1][0],a=i[1][1];return Ho(s(t),i).cells.forEach(function(i,s){var l=i.edges,c=i.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=o&&c.y>=r&&c.y<=a?[[n,a],[o,a],[o,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/jt)*jt,y:Math.round(o(t,e)/jt)*jt,i:e}})}return a.links=function(t){return Ho(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Ho(s(t)).cells.forEach(function(n,r){for(var o,i,a,s,l=n.site,c=n.edges.sort(Ao),u=-1,d=c.length,h=c[d-1].edge,p=h.l===l?h.r:h.l;++u<d;)h,o=p,p=(h=c[u].edge).l===l?h.r:h.l,r<o.i&&r<p.i&&(a=o,s=p,((i=l).x-s.x)*(a.y-i.y)-(i.x-a.x)*(s.y-i.y)<0)&&e.push([t[r],t[o.i],t[p.i]])}),e},a.x=function(t){return arguments.length?(r=we(e=t),a):e},a.y=function(t){return arguments.length?(o=we(n=t),a):n},a.clipExtent=function(t){return arguments.length?(i=null==t?Uo:t,a):i===Uo?null:i},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):i===Uo?null:i&&i[1]},a};var Uo=[[-1e6,-1e6],[1e6,1e6]];function zo(t){return t.x}function qo(t){return t.y}function Wo(t,e){t=i.rgb(t),e=i.rgb(e);var n=t.r,r=t.g,o=t.b,a=e.r-n,s=e.g-r,l=e.b-o;return function(t){return"#"+pe(Math.round(n+a*t))+pe(Math.round(r+s*t))+pe(Math.round(o+l*t))}}function Vo(t,e){var n,r={},o={};for(n in t)n in e?r[n]=Jo(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in r)o[n]=r[n](t);return o}}function $o(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Go(t,e){var n,r,o,i=Yo.lastIndex=Zo.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Yo.exec(t))&&(r=Zo.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:$o(n,r)})),i=Zo.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}i.geom.delaunay=function(t){return i.geom.voronoi().triangles(t)},i.geom.quadtree=function(t,e,n,r,o){var i,a=ro,s=oo;if(i=arguments.length)return a=zo,s=qo,3===i&&(o=n,r=e,n=e=0),l(t);function l(t){var l,c,u,d,h,p,m,f,g,v=we(a),y=we(s);if(null!=e)p=e,m=n,f=r,g=o;else if(f=g=-(p=m=1/0),c=[],u=[],h=t.length,i)for(d=0;d<h;++d)(l=t[d]).x<p&&(p=l.x),l.y<m&&(m=l.y),l.x>f&&(f=l.x),l.y>g&&(g=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<h;++d){var b=+v(l=t[d],d),w=+y(l,d);b<p&&(p=b),w<m&&(m=w),b>f&&(f=b),w>g&&(g=w),c.push(b),u.push(w)}var x=f-p,C=g-m;function k(t,e,n,r,o,i,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(_(l-n)+_(c-r)<.01)T(t,e,n,r,o,i,a,s);else{var u=t.point;t.x=t.y=t.point=null,T(t,u,l,c,o,i,a,s),T(t,e,n,r,o,i,a,s)}else t.x=n,t.y=r,t.point=e}else T(t,e,n,r,o,i,a,s)}function T(t,e,n,r,o,i,a,s){var l=.5*(o+a),c=.5*(i+s),u=n>=l,d=r>=c,h=d<<1|u;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){k(A,t,+v(t,++d),+y(t,d),p,m,f,g)}}),u?o=l:a=l,d?i=c:s=c,k(t,e,n,r,o,i,a,s)}x>C?g=m+x:f=p+C;var A={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){k(A,t,+v(t,++d),+y(t,d),p,m,f,g)}};if(A.visit=function(t){!function t(e,n,r,o,i,a){if(!e(n,r,o,i,a)){var s=.5*(r+i),l=.5*(o+a),c=n.nodes;c[0]&&t(e,c[0],r,o,s,l),c[1]&&t(e,c[1],s,o,i,l),c[2]&&t(e,c[2],r,l,s,a),c[3]&&t(e,c[3],s,l,i,a)}}(t,A,p,m,f,g)},A.find=function(t){return function(t,e,n,r,o,i,a){var s,l=1/0;return function t(c,u,d,h,p){if(!(u>i||d>a||h<r||p<o)){if(m=c.point){var m,f=e-c.x,g=n-c.y,v=f*f+g*g;if(v<l){var y=Math.sqrt(l=v);r=e-y,o=n-y,i=e+y,a=n+y,s=m}}for(var b=c.nodes,w=.5*(u+h),x=.5*(d+p),_=(n>=x)<<1|e>=w,C=_+4;_<C;++_)if(c=b[3&_])switch(3&_){case 0:t(c,u,d,w,x);break;case 1:t(c,w,d,h,x);break;case 2:t(c,u,x,w,p);break;case 3:t(c,w,x,h,p)}}}(t,r,o,i,a),s}(A,t[0],t[1],p,m,f,g)},d=-1,null==e){for(;++d<h;)k(A,t[d],c[d],u[d],p,m,f,g);--d}else t.forEach(A.add);return c=u=t=l=null,A}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=o=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],o=+t[1][1]),l):null==e?null:[[e,n],[r,o]]},l.size=function(t){return arguments.length?(null==t?e=n=r=o=null:(e=n=0,r=+t[0],o=+t[1]),l):null==e?null:[r-e,o-n]},l},i.interpolateRgb=Wo,i.interpolateObject=Vo,i.interpolateNumber=$o,i.interpolateString=Go;var Yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zo=new RegExp(Yo.source,"g");function Jo(t,e){for(var n,r=i.interpolators.length;--r>=0&&!(n=i.interpolators[r](t,e)););return n}function Ko(t,e){var n,r=[],o=[],i=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Jo(t[n],e[n]));for(;n<i;++n)o[n]=t[n];for(;n<a;++n)o[n]=e[n];return function(t){for(n=0;n<s;++n)o[n]=r[n](t);return o}}i.interpolate=Jo,i.interpolators=[function(t,e){var n=typeof e;return("string"===n?be.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Wo:Go:e instanceof Vt?Wo:Array.isArray(e)?Ko:"object"===n&&isNaN(e)?Vo:$o)(t,e)}],i.interpolateArray=Ko;var Xo=function(){return I},Qo=i.map({linear:Xo,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return ri},cubic:function(){return oi},sin:function(){return ai},exp:function(){return si},circle:function(){return li},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/St*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*St/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ci}}),ti=i.map({in:I,out:ei,"in-out":ni,"out-in":function(t){return ni(ei(t))}});function ei(t){return function(e){return 1-t(1-e)}}function ni(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function ri(t){return t*t}function oi(t){return t*t*t}function ii(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ai(t){return 1-Math.cos(t*Pt)}function si(t){return Math.pow(2,10*(t-1))}function li(t){return 1-Math.sqrt(1-t*t)}function ci(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ui(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function di(t){var e,n,r,o=[t.a,t.b],i=[t.c,t.d],a=pi(o),s=hi(o,i),l=pi(((e=i)[0]+=(r=-s)*(n=o)[0],e[1]+=r*n[1],e))||0;o[0]*i[1]<i[0]*o[1]&&(o[0]*=-1,o[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(o[1],o[0]):Math.atan2(-i[0],i[1]))*Ot,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Ot:0}function hi(t,e){return t[0]*e[0]+t[1]*e[1]}function pi(t){var e=Math.sqrt(hi(t,t));return e&&(t[0]/=e,t[1]/=e),e}i.ease=function(t){var e,n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,o=n>=0?t.slice(n+1):"in";return r=Qo.get(r)||Xo,o=ti.get(o)||I,e=o(r.apply(null,a.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},i.interpolateHcl=function(t,e){t=i.hcl(t),e=i.hcl(e);var n=t.h,r=t.c,o=t.l,a=e.h-n,s=e.c-r,l=e.l-o;isNaN(s)&&(s=0,r=isNaN(r)?e.c:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Kt(n+a*t,r+s*t,o+l*t)+""}},i.interpolateHsl=function(t,e){t=i.hsl(t),e=i.hsl(e);var n=t.h,r=t.s,o=t.l,a=e.h-n,s=e.s-r,l=e.l-o;isNaN(s)&&(s=0,r=isNaN(r)?e.s:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Yt(n+a*t,r+s*t,o+l*t)+""}},i.interpolateLab=function(t,e){t=i.lab(t),e=i.lab(e);var n=t.l,r=t.a,o=t.b,a=e.l-n,s=e.a-r,l=e.b-o;return function(t){return oe(n+a*t,r+s*t,o+l*t)+""}},i.interpolateRound=ui,i.transform=function(t){var e=l.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new di(n?n.matrix:mi)})(t)},di.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mi={a:1,b:0,c:0,d:1,e:0,f:0};function fi(t){return t.length?t.pop()+",":""}function gi(t,e){var n=[],r=[];return t=i.transform(t),e=i.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push("translate(",null,",",null,")");r.push({i:o-4,x:$o(t[0],e[0])},{i:o-2,x:$o(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(fi(n)+"rotate(",null,")")-2,x:$o(t,e)})):e&&n.push(fi(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(fi(n)+"skewX(",null,")")-2,x:$o(t,e)}):e&&n.push(fi(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push(fi(n)+"scale(",null,",",null,")");r.push({i:o-4,x:$o(t[0],e[0])},{i:o-2,x:$o(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(fi(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,o=-1,i=r.length;++o<i;)n[(e=r[o]).i]=e.x(t);return n.join("")}}function vi(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function yi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function bi(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=wi(t),r=wi(e),o=n.pop(),i=r.pop(),a=null;for(;o===i;)a=o,o=n.pop(),i=r.pop();return a}(e,n),o=[e];e!==r;)e=e.parent,o.push(e);for(var i=o.length;n!==r;)o.splice(i,0,n),n=n.parent;return o}function wi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function xi(t){t.fixed|=2}function _i(t){t.fixed&=-7}function Ci(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ki(t){t.fixed&=-5}i.interpolateTransform=gi,i.layout={},i.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(bi(t[n]));return e}},i.layout.chord=function(){var t,e,n,r,o,a,s,l={},c=0;function u(){var l,u,h,p,m,f={},g=[],v=i.range(r),y=[];for(t=[],e=[],l=0,p=-1;++p<r;){for(u=0,m=-1;++m<r;)u+=n[p][m];g.push(u),y.push(i.range(r)),l+=u}for(o&&v.sort(function(t,e){return o(g[t],g[e])}),a&&y.forEach(function(t,e){t.sort(function(t,r){return a(n[e][t],n[e][r])})}),l=(St-c*r)/l,u=0,p=-1;++p<r;){for(h=u,m=-1;++m<r;){var b=v[p],w=y[b][m],x=n[b][w],_=u,C=u+=x*l;f[b+"-"+w]={index:b,subindex:w,startAngle:_,endAngle:C,value:x}}e[b]={index:b,startAngle:h,endAngle:u,value:g[b]},u+=c}for(p=-1;++p<r;)for(m=p-1;++m<r;){var k=f[p+"-"+m],T=f[m+"-"+p];(k.value||T.value)&&t.push(k.value<T.value?{source:T,target:k}:{source:k,target:T})}s&&d()}function d(){t.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(o){return arguments.length?(r=(n=o)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(c=n,t=e=null,l):c},l.sortGroups=function(n){return arguments.length?(o=n,t=e=null,l):o},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(s=e,t&&d(),l):s},l.chords=function(){return t||u(),t},l.groups=function(){return e||u(),e},l},i.layout.force=function(){var t,e,n,r,o,a,s={},l=i.dispatch("start","tick","end"),c=[1,1],u=.9,d=Ti,h=Ai,p=-30,m=ji,f=.1,g=.64,v=[],y=[];function b(t){return function(e,n,r,o){if(e.point!==t){var i=e.cx-t.x,a=e.cy-t.y,s=o-n,l=i*i+a*a;if(s*s/g<l){if(l<m){var c=e.charge/l;t.px-=i*c,t.py-=a*c}return!0}if(e.point&&l&&l<m){c=e.pointCharge/l;t.px-=i*c,t.py-=a*c}}return!e.charge}}function w(t){t.px=i.event.x,t.py=i.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var e,s,d,h,m,g,w,x,_,C=v.length,k=y.length;for(s=0;s<k;++s)h=(d=y[s]).source,(g=(x=(m=d.target).x-h.x)*x+(_=m.y-h.y)*_)&&(x*=g=n*o[s]*((g=Math.sqrt(g))-r[s])/g,_*=g,m.x-=x*(w=h.weight+m.weight?h.weight/(h.weight+m.weight):.5),m.y-=_*w,h.x+=x*(w=1-w),h.y+=_*w);if((w=n*f)&&(x=c[0]/2,_=c[1]/2,s=-1,w))for(;++s<C;)(d=v[s]).x+=(x-d.x)*w,d.y+=(_-d.y)*w;if(p)for(!function t(e,n,r){var o=0,i=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,l=s.length,c=-1;++c<l;)null!=(a=s[c])&&(t(a,n,r),e.charge+=a.charge,o+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=n*r[e.point.index];e.charge+=e.pointCharge=u,o+=u*e.point.x,i+=u*e.point.y}e.cx=o/e.charge;e.cy=i/e.charge}(e=i.geom.quadtree(v),n,a),s=-1;++s<C;)(d=v[s]).fixed||e.visit(b(d));for(s=-1;++s<C;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.gravity=function(t){return arguments.length?(f=+t,s):f},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=Me(s.tick)),s):n},s.start=function(){var t,e,n,i=v.length,l=y.length,u=c[0],m=c[1];for(t=0;t<i;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<i;++t)n=v[t],isNaN(n.x)&&(n.x=f("x",u)),isNaN(n.y)&&(n.y=f("y",m)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof d)for(t=0;t<l;++t)r[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)r[t]=d;if(o=[],"function"==typeof h)for(t=0;t<l;++t)o[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)o[t]=h;if(a=[],"function"==typeof p)for(t=0;t<i;++t)a[t]=+p.call(this,v[t],t);else for(t=0;t<i;++t)a[t]=p;function f(n,r){if(!e){for(e=new Array(i),c=0;c<i;++c)e[c]=[];for(c=0;c<l;++c){var o=y[c];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(a=s[c][n]))return a;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=i.behavior.drag().origin(I).on("dragstart.force",xi).on("drag.force",w).on("dragend.force",_i)),!arguments.length)return e;this.on("mouseover.force",Ci).on("mouseout.force",ki).call(e)},i.rebind(s,l,"on")};var Ti=20,Ai=1,ji=1/0;function Mi(t,e){return i.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Oi,t}function Ei(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(o=t.children)&&(r=o.length))for(var r,o;--r>=0;)n.push(o[r])}function Si(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(i=t.children)&&(o=i.length))for(var o,i,a=-1;++a<o;)n.push(i[a]);for(;null!=(t=r.pop());)e(t)}function Ri(t){return t.children}function Pi(t){return t.value}function Di(t,e){return e.value-t.value}function Oi(t){return i.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}i.layout.hierarchy=function(){var t=Di,e=Ri,n=Pi;function r(o){var i,a=[o],s=[];for(o.depth=0;null!=(i=a.pop());)if(s.push(i),(c=e.call(r,i,i.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)a.push(u=c[l]),u.parent=i,u.depth=i.depth+1;n&&(i.value=0),i.children=c}else n&&(i.value=+n.call(r,i,i.depth)||0),delete i.children;return Si(o,function(e){var r,o;t&&(r=e.children)&&r.sort(t),n&&(o=e.parent)&&(o.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Ei(t,function(t){t.children&&(t.value=0)}),Si(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},i.layout.partition=function(){var t=i.layout.hierarchy(),e=[1,1];function n(n,r){var o=t.call(this,n,r);return function t(e,n,r,o){var i=e.children;if(e.x=n,e.y=e.depth*o,e.dx=r,e.dy=o,i&&(a=i.length)){var a,s,l,c=-1;for(r=e.value?r/e.value:0;++c<a;)t(s=i[c],n,l=s.value*r,o),n+=l}}(o[0],0,e[0],e[1]/function t(e){var n=e.children,r=0;if(n&&(o=n.length))for(var o,i=-1;++i<o;)r=Math.max(r,t(n[i]));return 1+r}(o[0])),o}return n.size=function(t){return arguments.length?(e=t,n):e},Mi(n,t)},i.layout.pie=function(){var t=Number,e=Ii,n=0,r=St,o=0;function a(s){var l,c=s.length,u=s.map(function(e,n){return+t.call(a,e,n)}),d=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof r?r.apply(this,arguments):r)-d,p=Math.min(Math.abs(h)/c,+("function"==typeof o?o.apply(this,arguments):o)),m=p*(h<0?-1:1),f=i.sum(u),g=f?(h-c*m)/f:0,v=i.range(c),y=[];return null!=e&&v.sort(e===Ii?function(t,e){return u[e]-u[t]}:function(t,n){return e(s[t],s[n])}),v.forEach(function(t){y[t]={data:s[t],value:l=u[t],startAngle:d,endAngle:d+=l*g+m,padAngle:p}}),y}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(r=t,a):r},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var Ii={};function Ni(t){return t.x}function Li(t){return t.y}function Fi(t,e,n){t.y0=e,t.y=n}i.layout.stack=function(){var t=I,e=Ui,n=zi,r=Fi,o=Ni,a=Li;function s(l,c){if(!(p=l.length))return l;var u=l.map(function(e,n){return t.call(s,e,n)}),d=u.map(function(t){return t.map(function(t,e){return[o.call(s,t,e),a.call(s,t,e)]})}),h=e.call(s,d,c);u=i.permute(u,h),d=i.permute(d,h);var p,m,f,g,v=n.call(s,d,c),y=u[0].length;for(f=0;f<y;++f)for(r.call(s,u[0][f],g=v[f],d[0][f][1]),m=1;m<p;++m)r.call(s,u[m][f],g+=d[m-1][f][1],d[m][f][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:Hi.get(t)||Ui,s):e},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:Bi.get(t)||zi,s):n},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(r=t,s):r},s};var Hi=i.map({"inside-out":function(t){var e,n,r=t.length,o=t.map(qi),a=t.map(Wi),s=i.range(r).sort(function(t,e){return o[t]-o[e]}),l=0,c=0,u=[],d=[];for(e=0;e<r;++e)n=s[e],l<c?(l+=a[n],u.push(n)):(c+=a[n],d.push(n));return d.reverse().concat(u)},reverse:function(t){return i.range(t.length).reverse()},default:Ui}),Bi=i.map({silhouette:function(t){var e,n,r,o=t.length,i=t[0].length,a=[],s=0,l=[];for(n=0;n<i;++n){for(e=0,r=0;e<o;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<i;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,o,i,a,s,l,c,u=t.length,d=t[0],h=d.length,p=[];for(p[0]=l=c=0,n=1;n<h;++n){for(e=0,o=0;e<u;++e)o+=t[e][n][1];for(e=0,i=0,s=d[n][0]-d[n-1][0];e<u;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;i+=a*t[e][n][1]}p[n]=l-=o?i/o*s:0,l<c&&(c=l)}for(n=0;n<h;++n)p[n]-=c;return p},expand:function(t){var e,n,r,o=t.length,i=t[0].length,a=1/o,s=[];for(n=0;n<i;++n){for(e=0,r=0;e<o;e++)r+=t[e][n][1];if(r)for(e=0;e<o;e++)t[e][n][1]/=r;else for(e=0;e<o;e++)t[e][n][1]=a}for(n=0;n<i;++n)s[n]=0;return s},zero:zi});function Ui(t){return i.range(t.length)}function zi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function qi(t){for(var e,n=1,r=0,o=t[0][1],i=t.length;n<i;++n)(e=t[n][1])>o&&(r=n,o=e);return r}function Wi(t){return t.reduce(Vi,0)}function Vi(t,e){return t+e[1]}function $i(t,e){return Gi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Gi(t,e){for(var n=-1,r=+t[0],o=(t[1]-r)/e,i=[];++n<=e;)i[n]=o*n+r;return i}function Yi(t){return[i.min(t),i.max(t)]}function Zi(t,e){return t.value-e.value}function Ji(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ki(t,e){t._pack_next=e,e._pack_prev=t}function Xi(t,e){var n=e.x-t.x,r=e.y-t.y,o=t.r+e.r;return.999*o*o>n*n+r*r}function Qi(t){if((e=t.children)&&(l=e.length)){var e,n,r,o,i,a,s,l,c=1/0,u=-1/0,d=1/0,h=-1/0;if(e.forEach(ta),(n=e[0]).x=-n.r,n.y=0,b(n),l>1&&((r=e[1]).x=r.r,r.y=0,b(r),l>2))for(na(n,r,o=e[2]),b(o),Ji(n,o),n._pack_prev=o,Ji(o,r),r=n._pack_next,i=3;i<l;i++){na(n,r,o=e[i]);var p=0,m=1,f=1;for(a=r._pack_next;a!==r;a=a._pack_next,m++)if(Xi(a,o)){p=1;break}if(1==p)for(s=n._pack_prev;s!==a._pack_prev&&!Xi(s,o);s=s._pack_prev,f++);p?(m<f||m==f&&r.r<n.r?Ki(n,r=a):Ki(n=s,r),i--):(Ji(n,o),r=o,b(o))}var g=(c+u)/2,v=(d+h)/2,y=0;for(i=0;i<l;i++)(o=e[i]).x-=g,o.y-=v,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,e.forEach(ea)}function b(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}}function ta(t){t._pack_next=t._pack_prev=t}function ea(t){delete t._pack_next,delete t._pack_prev}function na(t,e,n){var r=t.r+n.r,o=e.x-t.x,i=e.y-t.y;if(r&&(o||i)){var a=e.r+n.r,s=o*o+i*i,l=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*o+c*i,n.y=t.y+l*i-c*o}else n.x=t.x+r,n.y=t.y}function ra(t,e){return t.parent==e.parent?1:2}function oa(t){var e=t.children;return e.length?e[0]:t.t}function ia(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function aa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function sa(t,e,n){return t.a.parent===e.parent?t.a:n}function la(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ca(t,e){var n=t.x+e[3],r=t.y+e[0],o=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return o<0&&(n+=o/2,o=0),i<0&&(r+=i/2,i=0),{x:n,y:r,dx:o,dy:i}}function ua(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function da(t){return t.rangeExtent?t.rangeExtent():ua(t.range())}function ha(t,e,n,r){var o=n(t[0],t[1]),i=r(e[0],e[1]);return function(t){return i(o(t))}}function pa(t,e){var n,r=0,o=t.length-1,i=t[r],a=t[o];return a<i&&(n=r,r=o,o=n,n=i,i=a,a=n),t[r]=e.floor(i),t[o]=e.ceil(a),t}function ma(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:fa}i.layout.histogram=function(){var t=!0,e=Number,n=Yi,r=$i;function o(o,a){for(var s,l,c=[],u=o.map(e,this),d=n.call(this,u,a),h=r.call(this,d,u,a),p=(a=-1,u.length),m=h.length-1,f=t?1:1/p;++a<m;)(s=c[a]=[]).dx=h[a+1]-(s.x=h[a]),s.y=0;if(m>0)for(a=-1;++a<p;)(l=u[a])>=d[0]&&l<=d[1]&&((s=c[i.bisect(h,l,1,m)-1]).y+=f,s.push(o[a]));return c}return o.value=function(t){return arguments.length?(e=t,o):e},o.range=function(t){return arguments.length?(n=we(t),o):n},o.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Gi(e,t)}:we(t),o):r},o.frequency=function(e){return arguments.length?(t=!!e,o):t},o},i.layout.pack=function(){var t,e=i.layout.hierarchy().sort(Zi),n=0,r=[1,1];function o(o,i){var a=e.call(this,o,i),s=a[0],l=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Si(s,function(t){t.r=+u(t.value)}),Si(s,Qi),n){var d=n*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;Si(s,function(t){t.r+=d}),Si(s,Qi),Si(s,function(t){t.r-=d})}return function t(e,n,r,o){var i=e.children;e.x=n+=o*e.x;e.y=r+=o*e.y;e.r*=o;if(i)for(var a=-1,s=i.length;++a<s;)t(i[a],n,r,o)}(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),a}return o.size=function(t){return arguments.length?(r=t,o):r},o.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,o):t},o.padding=function(t){return arguments.length?(n=+t,o):n},Mi(o,e)},i.layout.tree=function(){var t=i.layout.hierarchy().sort(null).value(null),e=ra,n=[1,1],r=null;function o(o,i){var c=t.call(this,o,i),u=c[0],d=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var o,i=e.children,a=0,s=i.length;a<s;++a)r.push((i[a]=o={_:i[a],parent:e,children:(o=i[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return n.children[0]}(u);if(Si(d,a),d.parent.m=-d.z,Ei(d,s),r)Ei(u,l);else{var h=u,p=u,m=u;Ei(u,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>m.depth&&(m=t)});var f=e(h,p)/2-h.x,g=n[0]/(p.x+e(p,h)/2+f),v=n[1]/(m.depth||1);Ei(u,function(t){t.x=(t.x+f)*g,t.y=t.depth*v})}return c}function a(t){var n=t.children,r=t.parent.children,o=t.i?r[t.i-1]:null;if(n.length){!function(t){var e,n=0,r=0,o=t.children,i=o.length;for(;--i>=0;)(e=o[i]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;o?(t.z=o.z+e(t._,o._),t.m=t.z-i):t.z=i}else o&&(t.z=o.z+e(t._,o._));t.parent.A=function(t,n,r){if(n){for(var o,i=t,a=t,s=n,l=i.parent.children[0],c=i.m,u=a.m,d=s.m,h=l.m;s=ia(s),i=oa(i),s&&i;)l=oa(l),(a=ia(a)).a=t,(o=s.z+d-i.z-c+e(s._,i._))>0&&(aa(sa(s,t,r),t,o),c+=o,u+=o),d+=s.m,c+=i.m,h+=l.m,u+=a.m;s&&!ia(a)&&(a.t=s,a.m+=d-u),i&&!oa(l)&&(l.t=i,l.m+=c-h,r=t)}return r}(t,o,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(t){return arguments.length?(r=null==(n=t)?l:null,o):r?null:n},o.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:l,o):r?n:null},Mi(o,t)},i.layout.cluster=function(){var t=i.layout.hierarchy().sort(null).value(null),e=ra,n=[1,1],r=!1;function o(o,a){var s,l=t.call(this,o,a),c=l[0],u=0;Si(c,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+i.max(t,function(t){return t.y})}(n)):(t.x=s?u+=e(t,s):0,t.y=0,s=t)});var d=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(c),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(c),p=d.x-e(d,h)/2,m=h.x+e(h,d)/2;return Si(c,r?function(t){t.x=(t.x-c.x)*n[0],t.y=(c.y-t.y)*n[1]}:function(t){t.x=(t.x-p)/(m-p)*n[0],t.y=(1-(c.y?t.y/c.y:1))*n[1]}),l}return o.separation=function(t){return arguments.length?(e=t,o):e},o.size=function(t){return arguments.length?(r=null==(n=t),o):r?null:n},o.nodeSize=function(t){return arguments.length?(r=null!=(n=t),o):r?n:null},Mi(o,t)},i.layout.treemap=function(){var t,e=i.layout.hierarchy(),n=Math.round,r=[1,1],o=null,a=la,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var n,r,o=-1,i=t.length;++o<i;)r=(n=t[o]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function d(t){var e=t.children;if(e&&e.length){var n,r,o,i=a(t),s=[],c=e.slice(),h=1/0,f="slice"===l?i.dx:"dice"===l?i.dy:"slice-dice"===l?1&t.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(u(c,i.dx*i.dy/t.value),s.area=0;(o=c.length)>0;)s.push(n=c[o-1]),s.area+=n.area,"squarify"!==l||(r=p(s,f))<=h?(c.pop(),h=r):(s.area-=s.pop().area,m(s,f,i,!1),f=Math.min(i.dx,i.dy),s.length=s.area=0,h=1/0);s.length&&(m(s,f,i,!0),s.length=s.area=0),e.forEach(d)}}function h(t){var e=t.children;if(e&&e.length){var n,r=a(t),o=e.slice(),i=[];for(u(o,r.dx*r.dy/t.value),i.area=0;n=o.pop();)i.push(n),i.area+=n.area,null!=n.z&&(m(i,n.z?r.dx:r.dy,r,!o.length),i.length=i.area=0);e.forEach(h)}}function p(t,e){for(var n,r=t.area,o=0,i=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<i&&(i=n),n>o&&(o=n));return e*=e,(r*=r)?Math.max(e*o*c/r,r/(e*i*c)):1/0}function m(t,e,r,o){var i,a=-1,s=t.length,l=r.x,c=r.y,u=e?n(t.area/e):0;if(e==r.dx){for((o||u>r.dy)&&(u=r.dy);++a<s;)(i=t[a]).x=l,i.y=c,i.dy=u,l+=i.dx=Math.min(r.x+r.dx-l,u?n(i.area/u):0);i.z=!0,i.dx+=r.x+r.dx-l,r.y+=u,r.dy-=u}else{for((o||u>r.dx)&&(u=r.dx);++a<s;)(i=t[a]).x=l,i.y=c,i.dx=u,c+=i.dy=Math.min(r.y+r.dy-c,u?n(i.area/u):0);i.z=!1,i.dy+=r.y+r.dy-c,r.x+=u,r.dx-=u}}function f(n){var o=t||e(n),i=o[0];return i.x=i.y=0,i.value?(i.dx=r[0],i.dy=r[1]):i.dx=i.dy=0,t&&e.revalue(i),u([i],i.dx*i.dy/i.value),(t?h:d)(i),s&&(t=o),o}return f.size=function(t){return arguments.length?(r=t,f):r},f.padding=function(t){if(!arguments.length)return o;function e(e){return ca(e,t)}var n;return a=null==(o=t)?la:"function"==(n=typeof t)?function(e){var n=t.call(f,e,e.depth);return null==n?la(e):ca(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,f},f.round=function(t){return arguments.length?(n=t?Math.round:Number,f):n!=Number},f.sticky=function(e){return arguments.length?(s=e,t=null,f):s},f.ratio=function(t){return arguments.length?(c=t,f):c},f.mode=function(t){return arguments.length?(l=t+"",f):l},Mi(f,e)},i.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,o;do{o=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!o||o>1);return t+e*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=i.random.normal.apply(i,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=i.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},i.scale={};var fa={floor:I,ceil:I};function ga(t,e,n,r){var o=[],a=[],s=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=l;)o.push(n(t[s-1],t[s])),a.push(r(e[s-1],e[s]));return function(e){var n=i.bisect(t,e,1,l)-1;return a[n](o[n](e))}}function va(t,e){return i.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ya(t,e){return pa(t,ma(ba(t,e)[2])),pa(t,ma(ba(t,e)[2])),t}function ba(t,e){null==e&&(e=10);var n=ua(t),r=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),i=e/r*o;return i<=.15?o*=10:i<=.35?o*=5:i<=.75&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function wa(t,e){return i.range.apply(i,ba(t,e))}function xa(t,e,n){var r=ba(t,e);if(n){var o=Oe.exec(n);if(o.shift(),"s"===o[8]){var a=i.formatPrefix(Math.max(_(r[0]),_(r[1])));return o[7]||(o[7]="."+Ca(a.scale(r[2]))),o[8]="f",n=i.format(o.join("")),function(t){return n(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var n=Ca(e[2]);return t in _a?Math.abs(n-Ca(Math.max(_(e[0]),_(e[1]))))+ +("e"!==t):n-2*("%"===t)}(o[8],r)),n=o.join("")}else n=",."+Ca(r[2])+"f";return i.format(n)}i.scale.linear=function(){return function t(e,n,r,o){var i,a;function s(){var t=Math.min(e.length,n.length)>2?ga:ha,s=o?yi:vi;return i=t(e,n,s,r),a=t(n,e,s,Jo),l}function l(t){return i(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};l.range=function(t){return arguments.length?(n=t,s()):n};l.rangeRound=function(t){return l.range(t).interpolate(ui)};l.clamp=function(t){return arguments.length?(o=t,s()):o};l.interpolate=function(t){return arguments.length?(r=t,s()):r};l.ticks=function(t){return wa(e,t)};l.tickFormat=function(t,n){return xa(e,t,n)};l.nice=function(t){return ya(e,t),s()};l.copy=function(){return t(e,n,r,o)};return s()}([0,1],[0,1],Jo,!1)};var _a={s:1,g:1,p:1,r:1,e:1};function Ca(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}i.scale.log=function(){return function t(e,n,r,o){function a(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function l(t){return e(a(t))}l.invert=function(t){return s(e.invert(t))};l.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((o=t.map(Number)).map(a)),l):o};l.base=function(t){return arguments.length?(n=+t,e.domain(o.map(a)),l):n};l.nice=function(){var t=pa(o.map(a),r?Math:Ta);return e.domain(t),o=t.map(s),l};l.ticks=function(){var t=ua(o),e=[],i=t[0],l=t[1],c=Math.floor(a(i)),u=Math.ceil(a(l)),d=n%1?2:n;if(isFinite(u-c)){if(r){for(;c<u;c++)for(var h=1;h<d;h++)e.push(s(c)*h);e.push(s(c))}else for(e.push(s(c));c++<u;)for(var h=d-1;h>0;h--)e.push(s(c)*h);for(c=0;e[c]<i;c++);for(u=e.length;e[u-1]>l;u--);e=e.slice(c,u)}return e};l.tickFormat=function(t,e){if(!arguments.length)return ka;arguments.length<2?e=ka:"function"!=typeof e&&(e=i.format(e));var r=Math.max(1,n*t/l.ticks().length);return function(t){var o=t/s(Math.round(a(t)));return o*n<n-.5&&(o*=n),o<=r?e(t):""}};l.copy=function(){return t(e.copy(),n,r,o)};return va(l,e)}(i.scale.linear().domain([0,1]),10,!0,[1,10])};var ka=i.format(".0e"),Ta={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Aa(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}i.scale.pow=function(){return function t(e,n,r){var o=Aa(n),i=Aa(1/n);function a(t){return e(o(t))}a.invert=function(t){return i(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(o)),a):r};a.ticks=function(t){return wa(r,t)};a.tickFormat=function(t,e){return xa(r,t,e)};a.nice=function(t){return a.domain(ya(r,t))};a.exponent=function(t){return arguments.length?(o=Aa(n=t),i=Aa(1/n),e.domain(r.map(o)),a):n};a.copy=function(){return t(e.copy(),n,r)};return va(a,e)}(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return function t(e,n){var r,o,a;function s(t){return o[((r.get(t)||("range"===n.t?r.set(t,e.push(t)):NaN))-1)%o.length]}function l(t,n){return i.range(e.length).map(function(e){return t+n*e})}s.domain=function(t){if(!arguments.length)return e;e=[],r=new k;for(var o,i=-1,a=t.length;++i<a;)r.has(o=t[i])||r.set(o,e.push(o));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},s):o};s.rangePoints=function(t,r){arguments.length<2&&(r=0);var i=t[0],c=t[1],u=e.length<2?(i=(i+c)/2,0):(c-i)/(e.length-1+r);return o=l(i+u*r/2,u),a=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var i=t[0],c=t[1],u=e.length<2?(i=c=Math.round((i+c)/2),0):(c-i)/(e.length-1+r)|0;return o=l(i+Math.round(u*r/2+(c-i-(e.length-1+r)*u)/2),u),a=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,r,i){arguments.length<2&&(r=0),arguments.length<3&&(i=r);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=(d-u)/(e.length-r+2*i);return o=l(u+h*i,h),c&&o.reverse(),a=h*(1-r),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,r,i){arguments.length<2&&(r=0),arguments.length<3&&(i=r);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=Math.floor((d-u)/(e.length-r+2*i));return o=l(u+Math.round((d-u-(e.length-r)*h)/2),h),c&&o.reverse(),a=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return ua(n.a[0])};s.copy=function(){return t(e,n)};return s.domain(e)}([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(ja)},i.scale.category20=function(){return i.scale.ordinal().range(Ma)},i.scale.category20b=function(){return i.scale.ordinal().range(Ea)},i.scale.category20c=function(){return i.scale.ordinal().range(Sa)};var ja=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(de),Ma=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(de),Ea=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(de),Sa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(de);function Ra(){return 0}i.scale.quantile=function(){return function t(e,n){var r;function o(){var t=0,o=n.length;for(r=[];++t<o;)r[t-1]=i.quantile(e,t/o);return a}function a(t){if(!isNaN(t=+t))return n[i.bisect(r,t)]}a.domain=function(t){return arguments.length?(e=t.map(v).filter(y).sort(g),o()):e};a.range=function(t){return arguments.length?(n=t,o()):n};a.quantiles=function(){return r};a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};a.copy=function(){return t(e,n)};return o()}([],[])},i.scale.quantize=function(){return function t(e,n,r){var o,i;function a(t){return r[Math.max(0,Math.min(i,Math.floor(o*(t-e))))]}function s(){return o=r.length/(n-e),i=r.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};a.range=function(t){return arguments.length?(r=t,s()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/o+e,t+1/o]};a.copy=function(){return t(e,n,r)};return s()}(0,1,[0,1])},i.scale.threshold=function(){return function t(e,n){function r(t){if(t<=t)return n[i.bisect(e,t)]}r.domain=function(t){return arguments.length?(e=t,r):e};r.range=function(t){return arguments.length?(n=t,r):n};r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};r.copy=function(){return t(e,n)};return r}([.5],[0,1])},i.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return wa(e,t)};n.tickFormat=function(t,n){return xa(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},i.svg={},i.svg.arc=function(){var t=Da,e=Oa,n=Ra,r=Pa,o=Ia,i=Na,a=La;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=o.apply(this,arguments)-Pt,d=i.apply(this,arguments)-Pt,h=Math.abs(d-u),p=u>d?0:1;if(c<s&&(m=c,c=s,s=m),h>=Rt)return l(c,p)+(s?l(s,1-p):"")+"Z";var m,f,g,v,y,b,w,x,_,C,k,T,A=0,j=0,M=[];if((v=(+a.apply(this,arguments)||0)/2)&&(g=r===Pa?Math.sqrt(s*s+c*c):+r.apply(this,arguments),p||(j*=-1),c&&(j=Ft(g/c*Math.sin(v))),s&&(A=Ft(g/s*Math.sin(v)))),c){y=c*Math.cos(u+j),b=c*Math.sin(u+j),w=c*Math.cos(d-j),x=c*Math.sin(d-j);var E=Math.abs(d-u-2*j)<=Et?0:1;if(j&&Fa(y,b,w,x)===p^E){var S=(u+d)/2;y=c*Math.cos(S),b=c*Math.sin(S),w=x=null}}else y=b=0;if(s){_=s*Math.cos(d-A),C=s*Math.sin(d-A),k=s*Math.cos(u+A),T=s*Math.sin(u+A);var R=Math.abs(u-d+2*A)<=Et?0:1;if(A&&Fa(_,C,k,T)===1-p^R){var P=(u+d)/2;_=s*Math.cos(P),C=s*Math.sin(P),k=T=null}}else _=C=0;if(h>jt&&(m=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){f=s<c^p?0:1;var D=m,O=m;if(h<Et){var I=null==k?[_,C]:null==w?[y,b]:co([y,b],[k,T],[w,x],[_,C]),N=y-I[0],L=b-I[1],F=w-I[0],H=x-I[1],B=1/Math.sin(Math.acos((N*F+L*H)/(Math.sqrt(N*N+L*L)*Math.sqrt(F*F+H*H)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);O=Math.min(m,(s-U)/(B-1)),D=Math.min(m,(c-U)/(B+1))}if(null!=w){var z=Ha(null==k?[_,C]:[k,T],[y,b],c,D,p),q=Ha([w,x],[_,C],c,D,p);m===D?M.push("M",z[0],"A",D,",",D," 0 0,",f," ",z[1],"A",c,",",c," 0 ",1-p^Fa(z[1][0],z[1][1],q[1][0],q[1][1]),",",p," ",q[1],"A",D,",",D," 0 0,",f," ",q[0]):M.push("M",z[0],"A",D,",",D," 0 1,",f," ",q[0])}else M.push("M",y,",",b);if(null!=k){var W=Ha([y,b],[k,T],s,-O,p),V=Ha([_,C],null==w?[y,b]:[w,x],s,-O,p);m===O?M.push("L",V[0],"A",O,",",O," 0 0,",f," ",V[1],"A",s,",",s," 0 ",p^Fa(V[1][0],V[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",O,",",O," 0 0,",f," ",W[0]):M.push("L",V[0],"A",O,",",O," 0 0,",f," ",W[0])}else M.push("L",_,",",C)}else M.push("M",y,",",b),null!=w&&M.push("A",c,",",c," 0 ",E,",",p," ",w,",",x),M.push("L",_,",",C),null!=k&&M.push("A",s,",",s," 0 ",R,",",1-p," ",k,",",T);return M.push("Z"),M.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=we(e),s):t},s.outerRadius=function(t){return arguments.length?(e=we(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=we(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Pa?Pa:we(t),s):r},s.startAngle=function(t){return arguments.length?(o=we(t),s):o},s.endAngle=function(t){return arguments.length?(i=we(t),s):i},s.padAngle=function(t){return arguments.length?(a=we(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-Pt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Pa="auto";function Da(t){return t.innerRadius}function Oa(t){return t.outerRadius}function Ia(t){return t.startAngle}function Na(t){return t.endAngle}function La(t){return t&&t.padAngle}function Fa(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ha(t,e,n,r,o){var i=t[0]-e[0],a=t[1]-e[1],s=(o?r:-r)/Math.sqrt(i*i+a*a),l=s*a,c=-s*i,u=t[0]+l,d=t[1]+c,h=e[0]+l,p=e[1]+c,m=(u+h)/2,f=(d+p)/2,g=h-u,v=p-d,y=g*g+v*v,b=n-r,w=u*p-h*d,x=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),_=(w*v-g*x)/y,C=(-w*g-v*x)/y,k=(w*v+g*x)/y,T=(-w*g+v*x)/y,A=_-m,j=C-f,M=k-m,E=T-f;return A*A+j*j>M*M+E*E&&(_=k,C=T),[[_-l,C-c],[_*n/b,C*n/b]]}function Ba(t){var e=ro,n=oo,r=Kn,o=za,i=o.key,a=.7;function s(i){var s,l=[],c=[],u=-1,d=i.length,h=we(e),p=we(n);function m(){l.push("M",o(t(c),a))}for(;++u<d;)r.call(this,s=i[u],u)?c.push([+h.call(this,s,u),+p.call(this,s,u)]):c.length&&(m(),c=[]);return c.length&&m(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(i="function"==typeof t?o=t:(o=Ua.get(t)||za).key,s):i},s.tension=function(t){return arguments.length?(a=t,s):a},s}i.svg.line=function(){return Ba(I)};var Ua=i.map({linear:za,"linear-closed":qa,step:function(t){var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];for(;++e<n;)o.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&o.push("H",r[0]);return o.join("")},"step-before":Wa,"step-after":Va,basis:Ya,"basis-open":function(t){if(t.length<4)return za(t);var e,n=[],r=-1,o=t.length,i=[0],a=[0];for(;++r<3;)e=t[r],i.push(e[0]),a.push(e[1]);n.push(Za(Xa,i)+","+Za(Xa,a)),--r;for(;++r<o;)e=t[r],i.shift(),i.push(e[0]),a.shift(),a.push(e[1]),Qa(n,i,a);return n.join("")},"basis-closed":function(t){var e,n,r=-1,o=t.length,i=o+4,a=[],s=[];for(;++r<4;)n=t[r%o],a.push(n[0]),s.push(n[1]);e=[Za(Xa,a),",",Za(Xa,s)],--r;for(;++r<i;)n=t[r%o],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Qa(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,o,i=t[0][0],a=t[0][1],s=t[n][0]-i,l=t[n][1]-a,c=-1;++c<=n;)r=t[c],o=c/n,r[0]=e*r[0]+(1-e)*(i+o*s),r[1]=e*r[1]+(1-e)*(a+o*l);return Ya(t)},cardinal:function(t,e){return t.length<3?za(t):t[0]+$a(t,Ga(t,e))},"cardinal-open":function(t,e){return t.length<4?za(t):t[1]+$a(t.slice(1,-1),Ga(t,e))},"cardinal-closed":function(t,e){return t.length<3?qa(t):t[0]+$a((t.push(t[0]),t),Ga([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?za(t):t[0]+$a(t,function(t){var e,n,r,o,i=[],a=function(t){var e=0,n=t.length-1,r=[],o=t[0],i=t[1],a=r[0]=ts(o,i);for(;++e<n;)r[e]=(a+(a=ts(o=i,i=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;for(;++s<l;)e=ts(t[s],t[s+1]),_(e)<jt?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,(o=n*n+r*r)>9&&(o=3*e/Math.sqrt(o),a[s]=o*n,a[s+1]=o*r));s=-1;for(;++s<=l;)o=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),i.push([o||0,a[s]*o||0]);return i}(t))}});function za(t){return t.length>1?t.join("L"):t+"Z"}function qa(t){return t.join("L")+"Z"}function Wa(t){for(var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];++e<n;)o.push("V",(r=t[e])[1],"H",r[0]);return o.join("")}function Va(t){for(var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];++e<n;)o.push("H",(r=t[e])[0],"V",r[1]);return o.join("")}function $a(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return za(t);var n=t.length!=e.length,r="",o=t[0],i=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],o=t[1],l=2),e.length>1){s=e[1],i=t[l],l++,r+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<e.length;c++,l++)i=t[l],s=e[c],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var u=t[l];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Ga(t,e){for(var n,r=[],o=(1-e)/2,i=t[0],a=t[1],s=1,l=t.length;++s<l;)n=i,i=a,a=t[s],r.push([o*(a[0]-n[0]),o*(a[1]-n[1])]);return r}function Ya(t){if(t.length<3)return za(t);var e=1,n=t.length,r=t[0],o=r[0],i=r[1],a=[o,o,o,(r=t[1])[0]],s=[i,i,i,r[1]],l=[o,",",i,"L",Za(Xa,a),",",Za(Xa,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Qa(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Za(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ua.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ja=[0,2/3,1/3,0],Ka=[0,1/3,2/3,0],Xa=[0,1/6,2/3,1/6];function Qa(t,e,n){t.push("C",Za(Ja,e),",",Za(Ja,n),",",Za(Ka,e),",",Za(Ka,n),",",Za(Xa,e),",",Za(Xa,n))}function ts(t,e){return(e[1]-t[1])/(e[0]-t[0])}function es(t){for(var e,n,r,o=-1,i=t.length;++o<i;)n=(e=t[o])[0],r=e[1]-Pt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function ns(t){var e=ro,n=ro,r=0,o=oo,i=Kn,a=za,s=a.key,l=a,c="L",u=.7;function d(s){var d,h,p,m=[],f=[],g=[],v=-1,y=s.length,b=we(e),w=we(r),x=e===n?function(){return h}:we(n),_=r===o?function(){return p}:we(o);function C(){m.push("M",a(t(g),u),c,l(t(f.reverse()),u),"Z")}for(;++v<y;)i.call(this,d=s[v],v)?(f.push([h=+b.call(this,d,v),p=+w.call(this,d,v)]),g.push([+x.call(this,d,v),+_.call(this,d,v)])):f.length&&(C(),f=[],g=[]);return f.length&&C(),m.length?m.join(""):null}return d.x=function(t){return arguments.length?(e=n=t,d):n},d.x0=function(t){return arguments.length?(e=t,d):e},d.x1=function(t){return arguments.length?(n=t,d):n},d.y=function(t){return arguments.length?(r=o=t,d):o},d.y0=function(t){return arguments.length?(r=t,d):r},d.y1=function(t){return arguments.length?(o=t,d):o},d.defined=function(t){return arguments.length?(i=t,d):i},d.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=Ua.get(t)||za).key,l=a.reverse||a,c=a.closed?"M":"L",d):s},d.tension=function(t){return arguments.length?(u=t,d):u},d}function rs(t){return t.radius}function os(t){return[t.x,t.y]}function is(){return 64}function as(){return"circle"}function ss(t){var e=Math.sqrt(t/Et);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}i.svg.line.radial=function(){var t=Ba(es);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Wa.reverse=Va,Va.reverse=Wa,i.svg.area=function(){return ns(I)},i.svg.area.radial=function(){var t=ns(es);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},i.svg.chord=function(){var t=qr,e=Wr,n=rs,r=Ia,o=Na;function i(n,r){var o,i,c=a(this,t,n,r),u=a(this,e,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+(i=u,(o=c).a0==i.a0&&o.a1==i.a1?l(c.r,c.p1,c.r,c.p0):l(c.r,c.p1,u.r,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(u.r,u.p1,c.r,c.p0))+"Z"}function a(t,e,i,a){var s=e.call(t,i,a),l=n.call(t,s,a),c=r.call(t,s,a)-Pt,u=o.call(t,s,a)-Pt;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Et)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return i.radius=function(t){return arguments.length?(n=we(t),i):n},i.source=function(e){return arguments.length?(t=we(e),i):t},i.target=function(t){return arguments.length?(e=we(t),i):e},i.startAngle=function(t){return arguments.length?(r=we(t),i):r},i.endAngle=function(t){return arguments.length?(o=we(t),i):o},i},i.svg.diagonal=function(){var t=qr,e=Wr,n=os;function r(r,o){var i=t.call(this,r,o),a=e.call(this,r,o),s=(i.y+a.y)/2,l=[i,{x:i.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=we(e),r):t},r.target=function(t){return arguments.length?(e=we(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},i.svg.diagonal.radial=function(){var t=i.svg.diagonal(),e=os,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Pt;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},i.svg.symbol=function(){var t=as,e=is;function n(n,r){return(ls.get(t.call(this,n,r))||ss)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=we(e),n):t},n.size=function(t){return arguments.length?(e=we(t),n):e},n};var ls=i.map({circle:ss,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*us)),n=e*us;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/cs),n=e*cs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/cs),n=e*cs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});i.svg.symbolTypes=ls.keys();var cs=Math.sqrt(3),us=Math.tan(30*Dt);K.transition=function(t){for(var e,n,r=ms||++vs,o=ws(t),i=[],a=fs||{time:Date.now(),ease:ii,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&xs(n,u,o,r,a),e.push(n)}return ps(i,o,r)},K.interrupt=function(t){return this.each(null==t?ds:hs(ws(t)))};var ds=hs(ws());function hs(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ps(t,e,n){return $(t,gs),t.namespace=e,t.id=n,t}var ms,fs,gs=[],vs=0;function ys(t,e,n,r){var o=t.id,i=t.namespace;return mt(t,"function"==typeof n?function(t,a,s){t[i][o].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[i][o].tween.set(e,n)}))}function bs(t){return null==t&&(t=""),function(){this.textContent=t}}function ws(t){return null==t?"__transition__":"__transition_"+t+"__"}function xs(t,e,n,r,o){var i,a,s,l,c,u=t[n]||(t[n]={active:0,count:0}),d=u[r];function h(n){var o=u.active,h=u[o];for(var m in h&&(h.timer.c=null,h.timer.t=NaN,--u.count,delete u[o],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),u)if(+m<r){var f=u[m];f.timer.c=null,f.timer.t=NaN,--u.count,delete u[m]}a.c=p,Me(function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1},0,i),u.active=r,d.event&&d.event.start.call(t,t.__data__,e),c=[],d.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&c.push(r)}),l=d.ease,s=d.duration}function p(o){for(var i=o/s,a=l(i),h=c.length;h>0;)c[--h].call(t,a);if(i>=1)return d.event&&d.event.end.call(t,t.__data__,e),--u.count?delete u[r]:delete t[n],1}d||(i=o.time,a=Me(function(t){var e=d.delay;if(a.t=e+i,e<=t)return h(t-e);a.c=h},0,i),d=u[r]={tween:new k,time:i,timer:a,delay:o.delay,duration:o.duration,ease:o.ease,index:e},o=null,++u.count)}gs.call=K.call,gs.empty=K.empty,gs.node=K.node,gs.size=K.size,i.transition=function(t,e){return t&&t.transition?ms?t.transition(e):t:i.selection().transition(t)},i.transition.prototype=gs,gs.select=function(t){var e,n,r,o=this.id,i=this.namespace,a=[];t=X(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=t.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),xs(n,u,i,o,r[i][o]),e.push(n)):e.push(null)}return ps(a,i,o)},gs.selectAll=function(t){var e,n,r,o,i,a=this.id,s=this.namespace,l=[];t=Q(t);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,p=d.length;++h<p;)if(r=d[h]){i=r[s][a],n=t.call(r,r.__data__,h,c),l.push(e=[]);for(var m=-1,f=n.length;++m<f;)(o=n[m])&&xs(o,m,s,a,i),e.push(o)}return ps(l,s,a)},gs.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=pt(t));for(var o=0,i=this.length;o<i;o++){r.push(e=[]);for(var a,s=0,l=(a=this[o]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,o)&&e.push(n)}return ps(r,this.namespace,this.id)},gs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):mt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(o){o[r][n].tween.set(t,e)})},gs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?gi:Jo,r=i.ns.qualify(t);function o(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}return ys(this,"attr."+t,e,r.local?function(t){return null==t?a:(t+="",function(){var e,o=this.getAttributeNS(r.space,r.local);return o!==t&&(e=n(o,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?o:(t+="",function(){var e,o=this.getAttribute(r);return o!==t&&(e=n(o,t),function(t){this.setAttribute(r,e(t))})})})},gs.attrTween=function(t,e){var n=i.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var o=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return o&&function(t){this.setAttributeNS(n.space,n.local,o(t))}}:function(t,r){var o=e.call(this,t,r,this.getAttribute(n));return o&&function(t){this.setAttribute(n,o(t))}})},gs.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function o(){this.style.removeProperty(t)}return ys(this,"style."+t,e,function(e){return null==e?o:(e+="",function(){var r,o=u(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(r=Jo(o,e),function(e){this.style.setProperty(t,r(e),n)})})})},gs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,o){var i=e.call(this,r,o,u(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),n)}})},gs.text=function(t){return ys(this,"text",t,bs)},gs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},gs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=i.ease.apply(i,arguments)),mt(this,function(r){r[n][e].ease=t}))},gs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:mt(this,"function"==typeof t?function(r,o,i){r[n][e].delay=+t.call(r,r.__data__,o,i)}:(t=+t,function(r){r[n][e].delay=t}))},gs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:mt(this,"function"==typeof t?function(r,o,i){r[n][e].duration=Math.max(1,t.call(r,r.__data__,o,i))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},gs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var o=fs,a=ms;try{ms=n,mt(this,function(e,o,i){fs=e[r][n],t.call(e,e.__data__,o,i)})}finally{fs=o,ms=a}}else mt(this,function(o){var a=o[r][n];(a.event||(a.event=i.dispatch("start","end","interrupt"))).on(t,e)});return this},gs.transition=function(){for(var t,e,n,r=this.id,o=++vs,i=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(e=c[u])&&xs(e,u,i,o,{time:(n=e[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ps(a,i,o)},i.svg.axis=function(){var t,e=i.scale.linear(),n=_s,r=6,o=6,a=3,l=[10],c=null;function u(s){s.each(function(){var s,u=i.select(this),d=this.__chart__||e,h=this.__chart__=e.copy(),p=null==c?h.ticks?h.ticks.apply(h,l):h.domain():c,m=null==t?h.tickFormat?h.tickFormat.apply(h,l):I:t,f=u.selectAll(".tick").data(p,h),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",jt),v=i.transition(f.exit()).style("opacity",jt).remove(),y=i.transition(f.order()).style("opacity",1),b=Math.max(r,0)+a,w=da(h),x=u.selectAll(".domain").data([0]),_=(x.enter().append("path").attr("class","domain"),i.transition(x));g.append("line"),g.append("text");var C,k,T,A,j=g.select("line"),M=y.select("line"),E=f.select("text").text(m),S=g.select("text"),R=y.select("text"),P="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=ks,C="x",T="y",k="x2",A="y2",E.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+w[0]+","+P*o+"V0H"+w[1]+"V"+P*o)):(s=Ts,C="y",T="x",k="y2",A="x2",E.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),_.attr("d","M"+P*o+","+w[0]+"H0V"+w[1]+"H"+P*o)),j.attr(A,P*r),S.attr(T,P*b),M.attr(k,0).attr(A,P*r),R.attr(C,0).attr(T,P*b),h.rangeBand){var D=h,O=D.rangeBand()/2;d=h=function(t){return D(t)+O}}else d.rangeBand?d=h:v.call(s,h,d);g.call(s,d,h),y.call(s,h,h)})}return u.scale=function(t){return arguments.length?(e=t,u):e},u.orient=function(t){return arguments.length?(n=t in Cs?t+"":_s,u):n},u.ticks=function(){return arguments.length?(l=s(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(e){return arguments.length?(t=e,u):t},u.tickSize=function(t){var e=arguments.length;return e?(r=+t,o=+arguments[e-1],u):r},u.innerTickSize=function(t){return arguments.length?(r=+t,u):r},u.outerTickSize=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(a=+t,u):a},u.tickSubdivide=function(){return arguments.length&&u},u};var _s="bottom",Cs={top:1,right:1,bottom:1,left:1};function ks(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Ts(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}i.svg.brush=function(){var t,e,n=W(h,"brushstart","brush","brushend"),r=null,o=null,a=[0,0],s=[0,0],l=!0,c=!0,d=js[0];function h(t){t.each(function(){var t=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(d,I);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return As[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var a,s=i.transition(t),l=i.transition(e);r&&(a=da(r),l.attr("x",a[0]).attr("width",a[1]-a[0]),m(s)),o&&(a=da(o),l.attr("y",a[0]).attr("height",a[1]-a[0]),f(s)),p(s)})}function p(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+a[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function m(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function f(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var d,g,v=this,y=i.select(i.event.target),b=n.of(v,arguments),w=i.select(v),x=y.datum(),_=!/^(n|s)$/.test(x)&&r,C=!/^(e|w)$/.test(x)&&o,k=y.classed("extent"),T=Ct(v),A=i.mouse(v),j=i.select(u(v)).on("keydown.brush",function(){32==i.event.keyCode&&(k||(d=null,A[0]-=a[1],A[1]-=s[1],k=2),z())}).on("keyup.brush",function(){32==i.event.keyCode&&2==k&&(A[0]+=a[1],A[1]+=s[1],k=0,z())});if(i.event.changedTouches?j.on("touchmove.brush",S).on("touchend.brush",P):j.on("mousemove.brush",S).on("mouseup.brush",P),w.interrupt().selectAll("*").interrupt(),k)A[0]=a[0]-A[0],A[1]=s[0]-A[1];else if(x){var M=+/w$/.test(x),E=+/^n/.test(x);g=[a[1-M]-A[0],s[1-E]-A[1]],A[0]=a[M],A[1]=s[E]}else i.event.altKey&&(d=A.slice());function S(){var t=i.mouse(v),e=!1;g&&(t[0]+=g[0],t[1]+=g[1]),k||(i.event.altKey?(d||(d=[(a[0]+a[1])/2,(s[0]+s[1])/2]),A[0]=a[+(t[0]<d[0])],A[1]=s[+(t[1]<d[1])]):d=null),_&&R(t,r,0)&&(m(w),e=!0),C&&R(t,o,1)&&(f(w),e=!0),e&&(p(w),b({type:"brush",mode:k?"move":"resize"}))}function R(n,r,o){var i,u,h=da(r),p=h[0],m=h[1],f=A[o],g=o?s:a,v=g[1]-g[0];if(k&&(p-=f,m-=v+f),i=(o?c:l)?Math.max(p,Math.min(m,n[o])):n[o],k?u=(i+=f)+v:(d&&(f=Math.max(p,Math.min(m,2*d[o]-i))),f<i?(u=i,i=f):u=f),g[0]!=i||g[1]!=u)return o?e=null:t=null,g[0]=i,g[1]=u,!0}function P(){S(),w.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),i.select("body").style("cursor",null),j.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),b({type:"brushend"})}w.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),S()}return h.event=function(r){r.each(function(){var r=n.of(this,arguments),o={x:a,y:s,i:t,j:e},l=this.__chart__||o;this.__chart__=o,ms?i.select(this).transition().each("start.brush",function(){t=l.i,e=l.j,a=l.x,s=l.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=Ko(a,o.x),i=Ko(s,o.y);return t=e=null,function(t){a=o.x=n(t),s=o.y=i(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=o.i,e=o.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},h.x=function(t){return arguments.length?(d=js[!(r=t)<<1|!o],h):r},h.y=function(t){return arguments.length?(d=js[!r<<1|!(o=t)],h):o},h.clamp=function(t){return arguments.length?(r&&o?(l=!!t[0],c=!!t[1]):r?l=!!t:o&&(c=!!t),h):r&&o?[l,c]:r?l:o?c:null},h.extent=function(n){var i,l,c,u,d;return arguments.length?(r&&(i=n[0],l=n[1],o&&(i=i[0],l=l[0]),t=[i,l],r.invert&&(i=r(i),l=r(l)),l<i&&(d=i,i=l,l=d),i==a[0]&&l==a[1]||(a=[i,l])),o&&(c=n[0],u=n[1],r&&(c=c[1],u=u[1]),e=[c,u],o.invert&&(c=o(c),u=o(u)),u<c&&(d=c,c=u,u=d),c==s[0]&&u==s[1]||(s=[c,u])),h):(r&&(t?(i=t[0],l=t[1]):(i=a[0],l=a[1],r.invert&&(i=r.invert(i),l=r.invert(l)),l<i&&(d=i,i=l,l=d))),o&&(e?(c=e[0],u=e[1]):(c=s[0],u=s[1],o.invert&&(c=o.invert(c),u=o.invert(u)),u<c&&(d=c,c=u,u=d))),r&&o?[[i,c],[l,u]]:r?[i,l]:o&&[c,u])},h.clear=function(){return h.empty()||(a=[0,0],s=[0,0],t=e=null),h},h.empty=function(){return!!r&&a[0]==a[1]||!!o&&s[0]==s[1]},i.rebind(h,n,"on")};var As={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},js=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ms=Le.format=hn.timeFormat,Es=Ms.utc,Ss=Es("%Y-%m-%dT%H:%M:%S.%LZ");function Rs(t){return t.toISOString()}function Ps(t,e,n){function r(e){return t(e)}function o(t,n){var r=(t[1]-t[0])/n,o=i.bisect(Os,r);return o==Os.length?[e.year,ba(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Os[o-1]<Os[o]/r?o-1:o]:[Ls,ba(t,n)[2]]}return r.invert=function(e){return Ds(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ds)},r.nice=function(t,e){var n=r.domain(),i=ua(n),a=null==t?o(i,10):"number"==typeof t&&o(i,t);function s(n){return!isNaN(n)&&!t.range(n,Ds(+n+1),e).length}return a&&(t=a[0],e=a[1]),r.domain(pa(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ds(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ds(+e+1);return e}}:t))},r.ticks=function(t,e){var n=ua(r.domain()),i=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ds(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Ps(t.copy(),e,n)},va(r,t)}function Ds(t){return new Date(t)}Ms.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rs:Ss,Rs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Rs.toString=Ss.toString,Le.second=Ue(function(t){return new Fe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Le.seconds=Le.second.range,Le.seconds.utc=Le.second.utc.range,Le.minute=Ue(function(t){return new Fe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Le.minutes=Le.minute.range,Le.minutes.utc=Le.minute.utc.range,Le.hour=Ue(function(t){var e=t.getTimezoneOffset()/60;return new Fe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Le.hours=Le.hour.range,Le.hours.utc=Le.hour.utc.range,Le.month=Ue(function(t){return(t=Le.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Le.months=Le.month.range,Le.months.utc=Le.month.utc.range;var Os=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Is=[[Le.second,1],[Le.second,5],[Le.second,15],[Le.second,30],[Le.minute,1],[Le.minute,5],[Le.minute,15],[Le.minute,30],[Le.hour,1],[Le.hour,3],[Le.hour,6],[Le.hour,12],[Le.day,1],[Le.day,2],[Le.week,1],[Le.month,1],[Le.month,3],[Le.year,1]],Ns=Ms.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Kn]]),Ls={range:function(t,e,n){return i.range(Math.ceil(t/n)*n,+e,n).map(Ds)},floor:I,ceil:I};Is.year=Le.year,Le.scale=function(){return Ps(i.scale.linear(),Is,Ns)};var Fs=Is.map(function(t){return[t[0].utc,t[1]]}),Hs=Es.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Kn]]);function Bs(t){return JSON.parse(t.responseText)}function Us(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}Fs.year=Le.year.utc,Le.scale.utc=function(){return Ps(i.scale.linear(),Fs,Hs)},i.text=xe(function(t){return t.responseText}),i.json=function(t,e){return _e(t,"application/json",Bs,e)},i.html=function(t,e){return _e(t,"text/html",Us,e)},i.xml=xe(function(t){return t.responseXML}),this.d3=i,void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)}()},"./node_modules/delegate/src/closest.js":function(t,e){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},"./node_modules/delegate/src/delegate.js":function(t,e,n){var r=n("./node_modules/delegate/src/closest.js");function o(t,e,n,o,i){var a=function(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,a,i),{destroy:function(){t.removeEventListener(n,a,i)}}}t.exports=function(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return o(t,e,n,r,i)}))}},"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="function"!=typeof Object.create&&"~";function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(){}a.prototype._events=void 0,a.prototype.eventNames=function(){var t,e=this._events,n=[];if(!e)return n;for(t in e)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(t,e){var n=o?o+t:t,r=this._events&&this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},a.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events||!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(t,e,n){var r=new i(e,n||this),a=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):this._events[a]=r,this},a.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),a=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):this._events[a]=r,this},a.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events||!this._events[i])return this;var a=this._events[i],s=[];if(e)if(a.fn)(a.fn!==e||r&&!a.once||n&&a.context!==n)&&s.push(a);else for(var l=0,c=a.length;l<c;l++)(a[l].fn!==e||r&&!a[l].once||n&&a[l].context!==n)&&s.push(a[l]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},a.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=o,t.exports=a},"./node_modules/good-listener/src/is.js":function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},"./node_modules/good-listener/src/listen.js":function(t,e,n){var r=n("./node_modules/good-listener/src/is.js"),o=n("./node_modules/delegate/src/delegate.js");t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(r.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(r.string(t))return function(t,e,n){return o(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},"./node_modules/lodash/_arrayEvery.js":function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},"./node_modules/lodash/_arrayReduce.js":function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},"./node_modules/lodash/_baseEvery.js":function(t,e,n){var r=n("./node_modules/lodash/_baseEach.js");t.exports=function(t,e){var n=!0;return r(t,function(t,r,o){return n=!!e(t,r,o)}),n}},"./node_modules/lodash/_baseExtremum.js":function(t,e,n){var r=n("./node_modules/lodash/isSymbol.js");t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=e(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,c=a}return c}},"./node_modules/lodash/_baseFilter.js":function(t,e,n){var r=n("./node_modules/lodash/_baseEach.js");t.exports=function(t,e){var n=[];return r(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}},"./node_modules/lodash/_baseLt.js":function(t,e){t.exports=function(t,e){return t<e}},"./node_modules/lodash/_baseMap.js":function(t,e,n){var r=n("./node_modules/lodash/_baseEach.js"),o=n("./node_modules/lodash/isArrayLike.js");t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,function(t,r,o){i[++n]=e(t,r,o)}),i}},"./node_modules/lodash/_baseReduce.js":function(t,e){t.exports=function(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}},"./node_modules/lodash/_isIterateeCall.js":function(t,e,n){var r=n("./node_modules/lodash/eq.js"),o=n("./node_modules/lodash/isArrayLike.js"),i=n("./node_modules/lodash/_isIndex.js"),a=n("./node_modules/lodash/isObject.js");t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?o(n)&&i(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},"./node_modules/lodash/every.js":function(t,e,n){var r=n("./node_modules/lodash/_arrayEvery.js"),o=n("./node_modules/lodash/_baseEvery.js"),i=n("./node_modules/lodash/_baseIteratee.js"),a=n("./node_modules/lodash/isArray.js"),s=n("./node_modules/lodash/_isIterateeCall.js");t.exports=function(t,e,n){var l=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),l(t,i(e,3))}},"./node_modules/lodash/filter.js":function(t,e,n){var r=n("./node_modules/lodash/_arrayFilter.js"),o=n("./node_modules/lodash/_baseFilter.js"),i=n("./node_modules/lodash/_baseIteratee.js"),a=n("./node_modules/lodash/isArray.js");t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},"./node_modules/lodash/map.js":function(t,e,n){var r=n("./node_modules/lodash/_arrayMap.js"),o=n("./node_modules/lodash/_baseIteratee.js"),i=n("./node_modules/lodash/_baseMap.js"),a=n("./node_modules/lodash/isArray.js");t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},"./node_modules/lodash/min.js":function(t,e,n){var r=n("./node_modules/lodash/_baseExtremum.js"),o=n("./node_modules/lodash/_baseLt.js"),i=n("./node_modules/lodash/identity.js");t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},"./node_modules/lodash/reduce.js":function(t,e,n){var r=n("./node_modules/lodash/_arrayReduce.js"),o=n("./node_modules/lodash/_baseEach.js"),i=n("./node_modules/lodash/_baseIteratee.js"),a=n("./node_modules/lodash/_baseReduce.js"),s=n("./node_modules/lodash/isArray.js");t.exports=function(t,e,n){var l=s(t)?r:a,c=arguments.length<3;return l(t,i(e,4),n,c,o)}},"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(t,e,n){var r={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mn":"./node_modules/moment/locale/mn.js","./mn.js":"./node_modules/moment/locale/mn.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"},"./node_modules/ng-file-upload/dist/ng-file-upload-all.js":function(t,e){var n;
/**!
 * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * FileAPI Flash shim for old browsers not supporting FormData
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */
!function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(t){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,r){t.__listeners[n]=r,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,r,o){n(this),this.__url=r;try{t.apply(this,[e,r,o])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,t.apply(this,[e,"_fix_for_ie_crossdomain__",o]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,r){if("__setXHR_"===e){n(this);var o=r(this);o instanceof Function&&o(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=r,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var r=arguments[0],o={url:n.__url,jsonp:!1,cache:!0,complete:function(t,r){t&&angular.isString(t)&&-1!==t.indexOf("#2174")&&(t=null),n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&e(n,"status",function(){return 0===r.status&&t&&"abort"!==t?500:r.status}),void 0!==r.statusText&&e(n,"statusText",function(){return r.statusText}),e(n,"readyState",function(){return 4}),void 0!==r.response&&e(n,"response",function(){return r.response});var o=r.responseText||(t&&0===r.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return o}),e(n,"response",function(){return o}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders,data:{},files:{}},i=0;i<r.data.length;i++){var a=r.data[i];null!=a.val&&null!=a.val.name&&null!=a.val.size&&null!=a.val.type?o.files[a.key]=a.val:o.data[a.key]=a.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(o)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}}}}(),function(){function t(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function e(t){var e=0,n=0;if(window.jQuery)return jQuery(t).offset();if(t.offsetParent)do{e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent}while(t);return{left:e,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var n,r,o,i,a,s=document.createElement("script"),l=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)n=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)r=window.FileAPI.jsPath;else for(o=0;o<l.length;o++)if((i=(a=l[o].src).search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/))>-1){r=a.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=r),s.setAttribute("src",n||r+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(s)}FileAPI.ngfFixIE=function(n,r,o){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.bind("mouseenter",function(){var t=r.parent();n.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(r.attr("__ngf_flash_")||(r.unbind("change"),r.unbind("click"),r.bind("change",function(t){i.apply(this,[t]),o.apply(this,[t])}),r.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),function(t){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}(n)||(t.css("position","absolute").css("top",e(n[0]).top+"px").css("left",e(n[0]).left+"px").css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",n.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),r.css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))});var i=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var r=0;r<n.length;r++)n[r].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var r={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){var o;e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",r))),"load"===r.type?(t.onloadend&&t.onloadend(n("loadend",r)),o=n("load",r),t.onload&&t.onload(o),t.dispatchEvent(o)):"progress"===r.type?(o=n("progress",r),t.onprogress&&t.onprogress(o),t.dispatchEvent(o)):(o=n("error",r),t.onerror&&t.onerror(o),t.dispatchEvent(o))};this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,r)},this.readAsText=function(t){FileAPI.readAsText(t,r)}})
/**!
 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */,!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=(n=window.XMLHttpRequest.prototype.setRequestHeader,function(t,e){if("__setXHR_"===t){var r=e(this);r instanceof Function&&r(this)}else n.apply(this,arguments)}));var r=angular.module("ngFileUpload",[]);r.version="12.2.13",r.service("UploadBase",["$http","$q","$timeout",function(t,e,n){var o=this;o.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var i=this.isResumeSupported();function a(r){r.method=r.method||"POST",r.headers=r.headers||{};var a=r._deferred=r._deferred||e.defer(),s=a.promise;function l(t){a.notify&&a.notify(t),s.progressFunc&&n(function(){s.progressFunc(t)})}function c(t){return null!=r._start&&i?{loaded:t.loaded+r._start,total:r._file&&r._file.size||t.total,type:t.type,config:r,lengthComputable:!0,target:t.target}:t}function u(){t(r).then(function(t){if(i&&r._chunkSize&&!r._finished&&r._file){var e=r._file&&r._file.size||0;l({loaded:Math.min(r._end,e),total:e,config:r,type:"progress"}),o.upload(r,!0)}else r._finished&&delete r._finished,a.resolve(t)},function(t){a.reject(t)},function(t){a.notify(t)})}return r.disableProgress||(r.headers.__setXHR_=function(){return function(t){t&&t.upload&&t.upload.addEventListener&&(r.__XHR=t,r.xhrFn&&r.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=r,l(c(t))},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=r,l(c(t)))},!1))}}),i?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,u()):r.resumeSizeUrl?t.get(r.resumeSizeUrl).then(function(t){r.resumeSizeResponseReader?r._start=r.resumeSizeResponseReader(t.data):r._start=parseInt((null==t.data.size?t.data:t.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),u()},function(t){throw t}):r.resumeSize?r.resumeSize().then(function(t){r._start=t,r._chunkSize&&(r._end=r._start+r._chunkSize),u()},function(t){throw t}):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),u()):u(),s.success=function(t){return s.then(function(e){t(e.data,e.status,e.headers,r)}),s},s.error=function(t){return s.then(null,function(e){t(e.data,e.status,e.headers,r)}),s},s.progress=function(t){return s.progressFunc=t,s.then(null,null,function(e){t(e)}),s},s.abort=s.pause=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),s},s.xhr=function(t){var e;return r.xhrFn=(e=r.xhrFn,function(){e&&e.apply(s,arguments),t.apply(s,arguments)}),s},o.promisesCount++,s.finally&&s.finally instanceof Function&&s.finally(function(){o.promisesCount--}),s}function s(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}this.isUploadInProgress=function(){return o.promisesCount>0},this.rename=function(t,e){return t.ngfName=e,t},this.jsonBlob=function(t){null==t||angular.isString(t)||(t=JSON.stringify(t));var e=new window.Blob([t],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(t){return angular.toJson(t)},this.isFile=function(t){return null!=t&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)},this.upload=function(t,e){function n(e,r,a){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))e.append(a,r);else if(o.isFile(r)){var s=function(e,n){if(e._ngfBlob)return e;if(t._file=t._file||e,null!=t._start&&i){t._end&&t._end>=e.size&&(t._finished=!0,t._end=e.size);var r=e.slice(t._start,t._end||e.size);return r.name=e.name,r.ngfName=e.ngfName,t._chunkSize&&(n.append("_chunkSize",t._chunkSize),n.append("_currentChunkSize",t._end-t._start),n.append("_chunkNumber",Math.floor(t._start/t._chunkSize)),n.append("_totalSize",t._file.size)),r}return e}(r,e),l=a.split(",");l[1]&&(s.ngfName=l[1].replace(/^\s+|\s+$/g,""),a=l[0]),t._fileKey=t._fileKey||a,e.append(a,s,s.ngfName||s.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+a;r.$$ngfCircularDetection=!0;try{for(var c in r)if(r.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==t.objectKey?"[i]":t.objectKey;r.length&&parseInt(c)>-1&&(u=null==t.arrayKey?u:t.arrayKey),n(e,r[c],a+u.replace(/[ik]/g,c))}}finally{delete r.$$ngfCircularDetection}}else e.append(a,r)}return e||(t=s(t)),t._isDigested||(t._isDigested=!0,t._chunkSize=o.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?angular.isArray(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e){var r,o=new window.FormData;for(r in e=e||t.fields||{},t.file&&(e.file=t.file),e)if(e.hasOwnProperty(r)){var i=e[r];t.formDataAppender?t.formDataAppender(o,r,i):n(o,i,r)}return o})),a(t)},this.http=function(e){return(e=s(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:t.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=o.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,a(e)},this.translateScalars=function(t){if(angular.isString(t)){if(t.search(/kb/i)===t.length-2)return parseFloat(1024*t.substring(0,t.length-2));if(t.search(/mb/i)===t.length-2)return parseFloat(1048576*t.substring(0,t.length-2));if(t.search(/gb/i)===t.length-2)return parseFloat(1073741824*t.substring(0,t.length-2));if(t.search(/b/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/s/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/m/i)===t.length-1)return parseFloat(60*t.substring(0,t.length-1));if(t.search(/h/i)===t.length-1)return parseFloat(3600*t.substring(0,t.length-1))}return t},this.urlToBlob=function(n){var r=e.defer();return t({url:n,method:"get",responseType:"arraybuffer"}).then(function(t){var e=new Uint8Array(t.data),o=t.headers("content-type")||"image/WebP",i=new window.Blob([e],{type:o}),a=n.match(/.*\/(.+?)(\?.*)?$/);a.length>1&&(i.name=a[1]),r.resolve(i)},function(t){r.reject(t)}),r.promise},this.setDefaults=function(t){this.defaults=t||{}},this.defaults={},this.version=r.version}]),r.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(t,e,n,r,o){var i=o;function a(t,e,n,o,a){var s=[i.emptyPromise()];function l(r,l){if(0===r.type.indexOf("image")){if(t.pattern&&!i.validatePattern(r,t.pattern))return;t.resizeIf=function(t,e){return i.attrGetter("ngfResizeIf",n,o,{$width:t,$height:e,$file:r})};var c=i.resize(r,t);s.push(c),c.then(function(t){e.splice(l,1,t)},function(t){r.$error="resize",(r.$errorMessages=r.$errorMessages||{}).resize=!0,r.$errorParam=(t?(t.message?t.message:t)+": ":"")+(r&&r.name),a.$ngfValidations.push({name:"resize",valid:!1}),i.applyModelValidation(a,e)})}}for(var c=0;c<e.length;c++)l(e[c],c);return r.all(s)}return i.getAttrWithDefaults=function(t,e){if(null!=t[e])return t[e];var n=i.defaults[e];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},i.attrGetter=function(e,n,r,o){var i=this.getAttrWithDefaults(n,e);if(!r)return i;try{return o?t(i)(r,o):t(i)(r)}catch(t){if(e.search(/min|max|pattern/i))return i;throw t}},i.shouldUpdateOn=function(t,e,n){var r=i.attrGetter("ngfModelOptions",e,n);return!r||!r.updateOn||r.updateOn.split(" ").indexOf(t)>-1},i.emptyPromise=function(){var t=r.defer(),n=arguments;return e(function(){t.resolve.apply(t,n)}),t.promise},i.rejectPromise=function(){var t=r.defer(),n=arguments;return e(function(){t.reject.apply(t,n)}),t.promise},i.happyPromise=function(t,n){var o=r.defer();return t.then(function(t){o.resolve(t)},function(t){e(function(){throw t}),o.resolve(n)}),o.promise},i.updateModel=function(n,o,s,l,c,u,d){function h(r,a,c,d,h){o.$$ngfPrevValidFiles=r,o.$$ngfPrevInvalidFiles=a;var p=r&&r.length?r[0]:null,m=a&&a.length?a[0]:null;n&&(i.applyModelValidation(n,r),n.$setViewValue(h?p:r)),l&&t(l)(s,{$files:r,$file:p,$newFiles:c,$duplicateFiles:d,$invalidFiles:a,$invalidFile:m,$event:u});var f=i.attrGetter("ngfModelInvalid",o);f&&e(function(){t(f).assign(s,h?m:a)}),e(function(){})}var p,m,f,g,v=[],y=[],b=[];function w(){function t(){e(function(){h(x?m.concat(b):b,x?f.concat(y):y,c,v,_)},k&&k.debounce?k.debounce.change||k.debounce:0)}var l=C?p:b;(function(t,e,n,o){var s=i.attrGetter("ngfResize",e,n);if(!s||!i.isResizeSupported()||!t.length)return i.emptyPromise();if(s instanceof Function){var l=r.defer();return s(t).then(function(r){a(r,t,e,n,o).then(function(t){l.resolve(t)},function(t){l.reject(t)})},function(t){l.reject(t)})}return a(s,t,e,n,o)})(l,o,s,n).then(function(){C?i.validate(p,x?m.length:0,n,o,s).then(function(e){b=e.validsFiles,y=e.invalidsFiles,t()}):t()},function(){for(var e=0;e<l.length;e++){var n=l[e];if("resize"===n.$error){var r=b.indexOf(n);r>-1&&(b.splice(r,1),y.push(n)),t()}}})}m=o.$$ngfPrevValidFiles||[],f=o.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(g=n.$modelValue,m=angular.isArray(g)?g:[g]);var x=i.attrGetter("ngfKeep",o,s);p=(c||[]).slice(0),"distinct"!==x&&!0!==i.attrGetter("ngfKeepDistinct",o,s)||function(){function t(t,e){return t.name===e.name&&(t.$ngfOrigSize||t.size)===(e.$ngfOrigSize||e.size)&&t.type===e.type}function e(e){var n;for(n=0;n<m.length;n++)if(t(e,m[n]))return!0;for(n=0;n<f.length;n++)if(t(e,f[n]))return!0;return!1}if(c){p=[],v=[];for(var n=0;n<c.length;n++)e(c[n])?v.push(c[n]):p.push(c[n])}}();var _=!x&&!i.attrGetter("ngfMultiple",o,s)&&!i.attrGetter("multiple",o);if(!x||p.length){i.attrGetter("ngfBeforeModelChange",o,s,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:p,$duplicateFiles:v,$event:u});var C=i.attrGetter("ngfValidateAfterResize",o,s),k=i.attrGetter("ngfModelOptions",o,s);i.validate(p,x?m.length:0,n,o,s).then(function(t){d?h(p,[],c,v,_):(k&&k.allowInvalid||C?b=p:(b=t.validFiles,y=t.invalidFiles),i.attrGetter("ngfFixOrientation",o,s)&&i.isExifSupported()?function(t,e,n){var o=[i.emptyPromise()];return angular.forEach(t,function(r,a){0===r.type.indexOf("image/jpeg")&&i.attrGetter("ngfFixOrientation",e,n,{$file:r})&&o.push(i.happyPromise(i.applyExifRotation(r),r).then(function(e){t.splice(a,1,e)}))}),r.all(o)}(b,o,s).then(function(){w()}):w())})}},i}]),r.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(t,e,n,r){var o=[];function i(t,e,n,i,a,s,l,c){var u=function(t,e){return c.attrGetter(t,n,e)};function d(){return"input"===e[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function h(){return u("ngfChange")||u("ngfSelect")}function p(e){if(c.shouldUpdateOn("change",n,t)){var r=e.__files_||e.target&&e.target.files,o=[];if(!r)return;for(var a=0;a<r.length;a++)o.push(r[a]);c.updateModel(i,n,t,h(),o.length?o:null,e)}}c.registerModelChangeValidator(i,n,t);var m=[];u("ngfMultiple")&&m.push(t.$watch(u("ngfMultiple"),function(){v.attr("multiple",u("ngfMultiple",t))})),u("ngfCapture")&&m.push(t.$watch(u("ngfCapture"),function(){v.attr("capture",u("ngfCapture",t))})),u("ngfAccept")&&m.push(t.$watch(u("ngfAccept"),function(){v.attr("accept",u("ngfAccept",t))})),m.push(n.$observe("accept",function(){v.attr("accept",u("accept"))}));var f=0,g=0;var v=e;function y(e){c.shouldUpdateOn("click",n,t)&&v.val()&&(v.val(null),c.updateModel(i,n,t,h(),null,e,!0))}d()||(v=function(){if(d())return e;var t=angular.element('<input type="file">'),r=angular.element("<label>upload</label>");return r.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,r){function o(e){t.attr("id","ngf-"+e),r.attr("id","ngf-label-"+e)}for(var i=0;i<e[0].attributes.length;i++){var a=e[0].attributes[i];"type"!==a.name&&"class"!==a.name&&"style"!==a.name&&("id"===a.name?(o(a.value),m.push(n.$observe("id",o))):t.attr(a.name,a.value||"required"!==a.name&&"multiple"!==a.name?a.value:a.name))}}(t,r),o.push({el:e,ref:r}),document.body.appendChild(r.append(t)[0]),t}()),v.bind("change",p),d()?e.bind("click",y):e.bind("click touchstart touchend",function(n){if(e.attr("disabled"))return!1;if(!u("ngfSelectDisabled",t)){var i=function(t){var e=t.changedTouches||t.originalEvent&&t.originalEvent.changedTouches;if(e){if("touchstart"===t.type)return g=e[0].clientX,f=e[0].clientY,!0;if("touchend"===t.type){var n=e[0].clientX,r=e[0].clientY;if(Math.abs(n-g)>20||Math.abs(r-f)>20)return t.stopPropagation(),t.preventDefault(),!1}return!0}}(n);if(null!=i)return i;y(n);try{d()||document.body.contains(v[0])||(o.push({el:e,ref:v.parent()}),document.body.appendChild(v.parent()[0]),v.bind("change",p))}catch(t){}return function(t){var e=t.match(/Android[^\d]*(\d+)\.(\d+)/);if(e&&e.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(e[1])<4||parseInt(e[1])===n&&parseInt(e[2])<n}return-1===t.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(t)}(navigator.userAgent)?setTimeout(function(){v[0].click()},0):v[0].click(),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&v.bind("click",function t(e){if(v&&!v.attr("__ngf_ie10_Fix_")){if(!v[0].parentNode)return void(v=null);e.preventDefault(),e.stopPropagation(),v.unbind("click");var n=v.clone();return v.replaceWith(n),(v=n).attr("__ngf_ie10_Fix_","true"),v.bind("change",p),v.bind("click",t),v[0].click(),!1}v.removeAttr("__ngf_ie10_Fix_")}),i&&i.$formatters.push(function(t){return null!=t&&0!==t.length||v.val()&&v.val(null),t}),t.$on("$destroy",function(){d()||v.parent().remove(),angular.forEach(m,function(t){t()})}),s(function(){for(var t=0;t<o.length;t++){var e=o[t];document.body.contains(e.el[0])||(o.splice(t,1),e.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(e,v,p)}return{restrict:"AEC",require:"?ngModel",link:function(t,n,o,a){i(t,n,o,a,0,e,0,r)}}}]),function(){function t(t,e,n,r,o,i,a,s){function l(i){var a=t.attrGetter("ngfNoObjectUrl",o,n);t.dataUrl(i,a).finally(function(){e(function(){var t=(a?i.$ngfDataUrl:i.$ngfBlobUrl)||i.$ngfDataUrl;s?r.css("background-image","url('"+(t||"")+"')"):r.attr("src",t),t?r.removeClass("ng-hide"):r.addClass("ng-hide")})})}e(function(){var e=n.$watch(o[i],function(e){var c,u=a;if("ngfThumbnail"===i&&(u||(u={width:r[0].naturalWidth||r[0].clientWidth,height:r[0].naturalHeight||r[0].clientHeight}),0===u.width&&window.getComputedStyle)){var d=getComputedStyle(r[0]);d.width&&d.width.indexOf("px")>-1&&d.height&&d.height.indexOf("px")>-1&&(u={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))})}if(angular.isString(e))return r.removeClass("ng-hide"),s?r.css("background-image","url('"+e+"')"):r.attr("src",e);!e||!e.type||0!==e.type.search("img"===(c=r[0]).tagName.toLowerCase()?"image":"audio"===c.tagName.toLowerCase()?"audio":"video"===c.tagName.toLowerCase()?"video":/./)||s&&0!==e.type.indexOf("image")?r.addClass("ng-hide"):u&&t.isResizeSupported()?(u.resizeIf=function(r,i){return t.attrGetter("ngfResizeIf",o,n,{$width:r,$height:i,$file:e})},t.resize(e,u).then(function(t){l(t)},function(t){throw t})):l(e)});n.$on("$destroy",function(){e()})})}r.service("UploadDataUrl",["UploadBase","$timeout","$q",function(t,e,n){var r=t;return r.base64DataUrl=function(t){if(angular.isArray(t)){var e=n.defer(),o=0;return angular.forEach(t,function(n){r.dataUrl(n,!0).finally(function(){if(++o===t.length){var n=[];angular.forEach(t,function(t){n.push(t.$ngfDataUrl)}),e.resolve(n,t)}})}),e.promise}return r.dataUrl(t,!0)},r.dataUrl=function(t,o){if(!t)return r.emptyPromise(t,t);if(o&&null!=t.$ngfDataUrl||!o&&null!=t.$ngfBlobUrl)return r.emptyPromise(o?t.$ngfDataUrl:t.$ngfBlobUrl,t);var i=o?t.$$ngfDataUrlPromise:t.$$ngfBlobUrlPromise;if(i)return i;var a=n.defer();return e(function(){if(window.FileReader&&t&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||t.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||t.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!o){var i;try{i=n.createObjectURL(t)}catch(n){return void e(function(){t.$ngfBlobUrl="",a.reject()})}e(function(){if(t.$ngfBlobUrl=i,i){a.resolve(i,t),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:i,size:t.size}),r.blobUrlsTotalSize+=t.size||0;for(var e=r.defaults.blobUrlsMaxMemory||268435456,o=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>e||r.blobUrls.length>o)&&r.blobUrls.length>1;){var s=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),r.blobUrlsTotalSize-=s.size}}})}else{var s=new FileReader;s.onload=function(n){e(function(){t.$ngfDataUrl=n.target.result,a.resolve(n.target.result,t),e(function(){delete t.$ngfDataUrl},1e3)})},s.onerror=function(){e(function(){t.$ngfDataUrl="",a.reject()})},s.readAsDataURL(t)}}else e(function(){t[o?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),(i=o?t.$$ngfDataUrlPromise=a.promise:t.$$ngfBlobUrlPromise=a.promise).finally(function(){delete t[o?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),i},r}]),r.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,o,i){t(e,n,r,o,i,"ngfSrc",e.attrGetter("ngfResize",i,r),!1)}}}]),r.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,o,i){t(e,n,r,o,i,"ngfBackground",e.attrGetter("ngfResize",i,r),!0)}}}]),r.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,o,i){var a=e.attrGetter("ngfSize",i,r);t(e,n,r,o,i,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",i,r))}}}]),r.config(["$compileProvider",function(t){t.imgSrcSanitizationWhitelist&&t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),t.aHrefSanitizationWhitelist&&t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),r.filter("ngfDataUrl",["UploadDataUrl","$sce",function(t,e){return function(n,r,o){if(angular.isString(n))return e.trustAsResourceUrl(n);var i=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!i?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,t.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&i?o?e.trustAsResourceUrl(i):i:n)||"")}}])}(),r.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(t,e,n){var r=t;return r.validatePattern=function(t,e){if(!e)return!0;var n=function t(e){var n="",r=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])n=e.substring(1,e.length-1);else{var o=e.split(",");if(o.length>1)for(var i=0;i<o.length;i++){var a=t(o[i]);a.regexp?(n+="("+a.regexp+")",i<o.length-1&&(n+="|")):r=r.concat(a.excludes)}else 0===e.indexOf("!")?r.push("^((?!"+t(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),n=(n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:r}}(e),r=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");r=null!=t.type&&o.test(t.type)||null!=t.name&&o.test(t.name)}for(var i=n.excludes.length;i--;){var a=new RegExp(n.excludes[i],"i");r=r&&(null==t.type||a.test(t.type))&&(null==t.name||a.test(t.name))}return r},r.ratioToFloat=function(t){var e=t.toString(),n=e.search(/[x:]/i);return e=n>-1?parseFloat(e.substring(0,n))/parseFloat(e.substring(n+1)):parseFloat(e)},r.registerModelChangeValidator=function(t,e,n){t&&t.$formatters.push(function(o){if(t.$dirty){var i=o;o&&!angular.isArray(o)&&(i=[o]),r.validate(i,0,t,e,n).then(function(){r.applyModelValidation(t,i)})}return o})},r.applyModelValidation=function(t,e){!function(t,e){null==e||t.$dirty||(t.$setDirty?t.$setDirty():t.$dirty=!0)}(t,e),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},r.getValidationAttr=function(t,e,n,o,i){var a="ngf"+n[0].toUpperCase()+n.substr(1),s=r.attrGetter(a,t,e,{$file:i});if(null==s&&(s=r.attrGetter("ngfValidate",t,e,{$file:i}))){var l=(o||n).split(".");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},r.validate=function(t,n,o,i,a){(o=o||{}).$ngfValidations=o.$ngfValidations||[],angular.forEach(o.$ngfValidations,function(t){t.valid=!0});var s=function(t,e){return r.attrGetter(t,i,a,e)},l=(r.attrGetter("ngfIgnoreInvalid",i,a)||"").split(" "),c=r.attrGetter("ngfRunAllValidations",i,a);if(null==t||0===t.length)return r.emptyPromise({validFiles:t,invalidFiles:[]});t=void 0===t.length?[t]:t.slice(0);var u=[];function d(e,n,s){if(t){for(var d=t.length,h=null;d--;){var p=t[d];if(p){var m=r.getValidationAttr(i,a,e,n,p);null!=m&&(s(p,m,d)||(-1===l.indexOf(e)?(p.$error=e,(p.$errorMessages=p.$errorMessages||{})[e]=!0,p.$errorParam=m,-1===u.indexOf(p)&&u.push(p),c||t.splice(d,1),h=!1):t.splice(d,1)))}}null!==h&&o.$ngfValidations.push({name:e,valid:h})}}d("pattern",null,r.validatePattern),d("minSize","size.min",function(t,e){return t.size+.1>=r.translateScalars(e)}),d("maxSize","size.max",function(t,e){return t.size-.1<=r.translateScalars(e)});var h=0;if(d("maxTotalSize",null,function(e,n){return!((h+=e.size)>r.translateScalars(n))||(t.splice(0,t.length),!1)}),d("validateFn",null,function(t,e){return!0===e||null===e||""===e}),!t.length)return r.emptyPromise({validFiles:[],invalidFiles:u});function p(n,d,h,p,m){function f(e,r,o){function i(i){if(i())if(-1===l.indexOf(n)){if(r.$error=n,(r.$errorMessages=r.$errorMessages||{})[n]=!0,r.$errorParam=o,-1===u.indexOf(r)&&u.push(r),!c){var a=t.indexOf(r);a>-1&&t.splice(a,1)}e.resolve(!1)}else{var s=t.indexOf(r);s>-1&&t.splice(s,1),e.resolve(!0)}else e.resolve(!0)}null!=o?p(r,o).then(function(t){i(function(){return!m(t,o)})},function(){i(function(){return s("ngfValidateForce",{$file:r})})}):e.resolve(!0)}var g=[r.emptyPromise(!0)];t&&(t=void 0===t.length?[t]:t,angular.forEach(t,function(t){var o=e.defer();g.push(o.promise),!h||null!=t.type&&0===t.type.search(h)?"dimensions"===n&&null!=r.attrGetter("ngfDimensions",i)?r.imageDimensions(t).then(function(e){f(o,t,s("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){o.resolve(!1)}):"duration"===n&&null!=r.attrGetter("ngfDuration",i)?r.mediaDuration(t).then(function(e){f(o,t,s("ngfDuration",{$file:t,$duration:e}))},function(){o.resolve(!1)}):f(o,t,r.getValidationAttr(i,a,n,d,t)):o.resolve(!0)}));var v=e.defer();return e.all(g).then(function(t){for(var e=!0,r=0;r<t.length;r++)if(!t[r]){e=!1;break}o.$ngfValidations.push({name:n,valid:e}),v.resolve(e)}),v.promise}var m=e.defer(),f=[];return f.push(p("maxHeight","height.max",/image/,this.imageDimensions,function(t,e){return t.height<=e})),f.push(p("minHeight","height.min",/image/,this.imageDimensions,function(t,e){return t.height>=e})),f.push(p("maxWidth","width.max",/image/,this.imageDimensions,function(t,e){return t.width<=e})),f.push(p("minWidth","width.min",/image/,this.imageDimensions,function(t,e){return t.width>=e})),f.push(p("dimensions",null,/image/,function(t,e){return r.emptyPromise(e)},function(t){return t})),f.push(p("ratio",null,/image/,this.imageDimensions,function(t,e){for(var n=e.toString().split(","),o=!1,i=0;i<n.length;i++)Math.abs(t.width/t.height-r.ratioToFloat(n[i]))<.01&&(o=!0);return o})),f.push(p("maxRatio","ratio.max",/image/,this.imageDimensions,function(t,e){return t.width/t.height-r.ratioToFloat(e)<1e-4})),f.push(p("minRatio","ratio.min",/image/,this.imageDimensions,function(t,e){return t.width/t.height-r.ratioToFloat(e)>-1e-4})),f.push(p("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(t,e){return t<=r.translateScalars(e)})),f.push(p("minDuration","duration.min",/audio|video/,this.mediaDuration,function(t,e){return t>=r.translateScalars(e)})),f.push(p("duration",null,/audio|video/,function(t,e){return r.emptyPromise(e)},function(t){return t})),f.push(p("validateAsyncFn",null,null,function(t,e){return e},function(t){return!0===t||null===t||""===t})),e.all(f).then(function(){if(c)for(var e=0;e<t.length;e++){t[e].$error&&t.splice(e--,1)}c=!1,d("maxFiles",null,function(t,e,r){return n+r<e}),m.resolve({validFiles:t,invalidFiles:u})}),m.promise},r.imageDimensions=function(t){if(t.$ngfWidth&&t.$ngfHeight){var o=e.defer();return n(function(){o.resolve({width:t.$ngfWidth,height:t.$ngfHeight})}),o.promise}if(t.$ngfDimensionPromise)return t.$ngfDimensionPromise;var i=e.defer();return n(function(){0===t.type.indexOf("image")?r.dataUrl(t).then(function(e){var r=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function o(){var e=r[0].naturalWidth||r[0].clientWidth,n=r[0].naturalHeight||r[0].clientHeight;r.remove(),t.$ngfWidth=e,t.$ngfHeight=n,i.resolve({width:e,height:n})}function a(){r.remove(),i.reject("load error")}r.on("load",o),r.on("error",a);var s=0;!function t(){n(function(){r[0].parentNode&&(r[0].clientWidth?o():s++>10?a():t())},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(r)},function(){i.reject("load error")}):i.reject("not image")}),t.$ngfDimensionPromise=i.promise,t.$ngfDimensionPromise.finally(function(){delete t.$ngfDimensionPromise}),t.$ngfDimensionPromise},r.mediaDuration=function(t){if(t.$ngfDuration){var o=e.defer();return n(function(){o.resolve(t.$ngfDuration)}),o.promise}if(t.$ngfDurationPromise)return t.$ngfDurationPromise;var i=e.defer();return n(function(){0===t.type.indexOf("audio")||0===t.type.indexOf("video")?r.dataUrl(t).then(function(e){var r=angular.element(0===t.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function o(){var e=r[0].duration;t.$ngfDuration=e,r.remove(),i.resolve(e)}function a(){r.remove(),i.reject("load error")}r.on("loadedmetadata",o),r.on("error",a);var s=0;!function t(){n(function(){r[0].parentNode&&(r[0].duration?o():s>10?a():t())},1e3)}(),angular.element(document.body).append(r)},function(){i.reject("load error")}):i.reject("not media")}),t.$ngfDurationPromise=i.promise,t.$ngfDurationPromise.finally(function(){delete t.$ngfDurationPromise}),t.$ngfDurationPromise},r}]),r.service("UploadResize",["UploadValidate","$q",function(t,e){var n=t,r=function(t,r,o,i,a,s,l,c){var u=e.defer(),d=document.createElement("canvas"),h=document.createElement("img");return h.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(h),h.onload=function(){var t=h.width,e=h.height;if(h.parentNode.removeChild(h),null==c||!1!==c(t,e))try{if(s){var p=n.ratioToFloat(s);t/e<p?o=(r=t)/p:r=(o=e)*p}r||(r=t),o||(o=e);var m=function(t,e,n,r,o){var i=o?Math.max(n/t,r/e):Math.min(n/t,r/e);return{width:t*i,height:e*i,marginX:t*i-n,marginY:e*i-r}}(t,e,r,o,l);d.width=Math.min(m.width,r),d.height=Math.min(m.height,o),d.getContext("2d").drawImage(h,Math.min(0,-m.marginX/2),Math.min(0,-m.marginY/2),m.width,m.height),u.resolve(d.toDataURL(a||"image/WebP",i||.934))}catch(t){u.reject(t)}else u.reject("resizeIf")},h.onerror=function(){h.parentNode.removeChild(h),u.reject()},h.src=t,u.promise};return n.dataUrltoBlob=function(t,e,n){for(var r=t.split(","),o=r[0].match(/:(.*?);/)[1],i=atob(r[1]),a=i.length,s=new Uint8Array(a);a--;)s[a]=i.charCodeAt(a);var l=new window.Blob([s],{type:o});return l.name=e,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var t=document.createElement("canvas");return window.atob&&t.getContext&&t.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(t){this.$ngfName=t},configurable:!0}),n.resize=function(t,o){if(0!==t.type.indexOf("image"))return n.emptyPromise(t);var i=e.defer();return n.dataUrl(t,!0).then(function(e){r(e,o.width,o.height,o.quality,o.type||t.type,o.ratio,o.centerCrop,o.resizeIf).then(function(r){if("image/jpeg"===t.type&&!1!==o.restoreExif)try{r=n.restoreExif(e,r)}catch(t){setTimeout(function(){throw t},1)}try{var a=n.dataUrltoBlob(r,t.name,t.size);i.resolve(a)}catch(t){i.reject(t)}},function(e){"resizeIf"===e&&i.resolve(t),i.reject(e)})},function(t){i.reject(t)}),i.promise},n}]),function(){function t(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t&&!/Edge\/12./i.test(navigator.userAgent)}r.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(e,n,r,o,i,a){return{restrict:"AEC",require:"?ngModel",link:function(i,s,l,c){!function(e,n,r,o,i,a,s,l,c,u){var d=t(),h=function(t,e,n){return l.attrGetter(t,r,e,n)};h("dropAvailable")&&a(function(){e[h("dropAvailable")]?e[h("dropAvailable")].value=d:e[h("dropAvailable")]=d});if(!d)return void(!0===h("ngfHideOnDropNotAvailable",e)&&n.css("display","none"));function p(){return n.attr("disabled")||h("ngfDropDisabled",e)}null==h("ngfSelect")&&l.registerModelChangeValidator(o,r,e);var m,f=null,g=i(h("ngfStopPropagation")),v=1;n[0].addEventListener("dragover",function(t){if(!p()&&l.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),g(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var o=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===o||"linkMove"===o?"move":"copy"}a.cancel(f),m||(m="C",function(t,e,n,r){var o=h("ngfDragOverClass",t,{$event:n}),i="dragover";if(angular.isString(o))i=o;else if(o&&(o.delay&&(v=o.delay),o.accept||o.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=o.pattern||h("ngfPattern",t,{$event:n}),c=a.length;c--;){if(!l.validatePattern(a[c],s)){i=o.reject;break}i=o.accept}else i=o.accept}r(i)}(e,0,t,function(r){m=r,n.addClass(m),h("ngfDrag",e,{$isDragging:!0,$class:m,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!p()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),g(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!p()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),g(e)&&t.stopPropagation(),f=a(function(){m&&n.removeClass(m),m=null,h("ngfDrag",e,{$isDragging:!1,$event:t})},v||100))},!1),n[0].addEventListener("drop",function(t){!p()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),g(e)&&t.stopPropagation(),m&&n.removeClass(m),m=null,y(t.dataTransfer,t,"dropUrl"))},!1),n[0].addEventListener("paste",function(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&h("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!p()&&l.shouldUpdateOn("paste",r,e)&&y(t.clipboardData||t.originalEvent.clipboardData,t,"pasteUrl")},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&h("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(t){t.metaKey||t.ctrlKey||t.preventDefault()}));function y(t,n,o){if(t){var i;try{i=t&&t.getData&&t.getData("text/html")}catch(t){}(function(t,n,o,i){var a=l.getValidationAttr(r,e,"maxFiles");null==a&&(a=Number.MAX_VALUE);var c=l.getValidationAttr(r,e,"maxTotalSize");null==c&&(c=Number.MAX_VALUE);var d=h("ngfIncludeDir",e),p=[],m=0;function f(t,e){var n=u.defer();if(null!=t)if(t.isDirectory){var r=[l.emptyPromise()];if(d){var o={type:"directory"};o.name=o.path=(e||"")+t.name,p.push(o)}var i=t.createReader(),s=[],h=function(){i.readEntries(function(o){try{o.length?(s=s.concat(Array.prototype.slice.call(o||[],0)),h()):(angular.forEach(s.slice(0),function(n){p.length<=a&&m<=c&&r.push(f(n,(e||"")+t.name+"/"))}),u.all(r).then(function(){n.resolve()},function(t){n.reject(t)}))}catch(t){n.reject(t)}},function(t){n.reject(t)})};h()}else t.file(function(t){try{t.path=(e||"")+t.name,d&&(t=l.rename(t,t.path)),p.push(t),m+=t.size,n.resolve()}catch(t){n.reject(t)}},function(t){n.reject(t)});return n.promise}var g=[l.emptyPromise()];if(t&&t.length>0&&"file:"!==s.location.protocol)for(var v=0;v<t.length;v++){if(t[v].webkitGetAsEntry&&t[v].webkitGetAsEntry()&&t[v].webkitGetAsEntry().isDirectory){var y=t[v].webkitGetAsEntry();if(y.isDirectory&&!o)continue;null!=y&&g.push(f(y))}else{var b=t[v].getAsFile();null!=b&&(p.push(b),m+=b.size)}if(p.length>a||m>c||!i&&p.length>0)break}else if(null!=n)for(var w=0;w<n.length;w++){var x=n.item(w);if((x.type||x.size>0)&&(p.push(x),m+=x.size),p.length>a||m>c||!i&&p.length>0)break}var _=u.defer();return u.all(g).then(function(){if(i||d||!p.length)_.resolve(p);else{for(var t=0;p[t]&&"directory"===p[t].type;)t++;_.resolve([p[t]])}},function(t){_.reject(t)}),_.promise})(t.items,t.files,!1!==h("ngfAllowDir",e),h("multiple")||h("ngfMultiple",e)).then(function(t){t.length?b(t,n):function(t,n){if(!l.shouldUpdateOn(t,r,e)||"string"!=typeof n)return l.rejectPromise([]);var o=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(t,e,n){o.push(n)});var i=[],a=[];if(o.length){angular.forEach(o,function(t){i.push(l.urlToBlob(t).then(function(t){a.push(t)}))});var s=u.defer();return u.all(i).then(function(){s.resolve(a)},function(t){s.reject(t)}),s.promise}return l.emptyPromise()}(o,i).then(function(t){b(t,n)})})}}function b(t,n){l.updateModel(o,r,e,h("ngfChange")||h("ngfDrop"),t,n)}}(i,s,l,c,e,n,r,o,0,a)}}}]),r.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),r.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(o,i,a){if(t()){var s=e(r.attrGetter("ngfDropAvailable",a));n(function(){s(o),s.assign&&s.assign(o,!0)})}}}])}(),r.service("UploadExif",["UploadResize","$q",function(t,e){var n=t;return n.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&n.isResizeSupported()},n.readOrientation=function(t){var n=e.defer(),r=new FileReader,o=t.slice?t.slice(0,65536):t;return r.readAsArrayBuffer(o),r.onerror=function(t){return n.reject(t)},r.onload=function(t){var e={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(e);for(var o=r.byteLength,i=2;i<o;){var a=r.getUint16(i,!1);if(i+=2,65505===a){if(1165519206!==r.getUint32(i+=2,!1))return n.resolve(e);var s=18761===r.getUint16(i+=6,!1);i+=r.getUint32(i+4,s);var l=r.getUint16(i,s);i+=2;for(var c=0;c<l;c++)if(274===r.getUint16(i+12*c,s)){var u=r.getUint16(i+12*c+8,s);return u>=2&&u<=8&&(r.setUint16(i+12*c+8,1,s),e.fixedArrayBuffer=t.target.result),e.orientation=u,n.resolve(e)}}else{if(65280!=(65280&a))break;i+=r.getUint16(i,!1)}}return n.resolve(e)},n.promise},n.applyExifRotation=function(t){if(0!==t.type.indexOf("image/jpeg"))return n.emptyPromise(t);var r=e.defer();return n.readOrientation(t).then(function(e){if(e.orientation<2||e.orientation>8)return r.resolve(t);n.dataUrl(t,!0).then(function(o){var i=document.createElement("canvas"),a=document.createElement("img");a.onload=function(){try{i.width=e.orientation>4?a.height:a.width,i.height=e.orientation>4?a.width:a.height;var o=i.getContext("2d");!function(t,e,n,r){switch(e){case 2:return t.transform(-1,0,0,1,n,0);case 3:return t.transform(-1,0,0,-1,n,r);case 4:return t.transform(1,0,0,-1,0,r);case 5:return t.transform(0,1,1,0,0,0);case 6:return t.transform(0,1,-1,0,r,0);case 7:return t.transform(0,-1,-1,0,r,n);case 8:t.transform(0,-1,1,0,0,n)}}(o,e.orientation,a.width,a.height),o.drawImage(a,0,0);var s=i.toDataURL(t.type||"image/WebP",.934);s=n.restoreExif(function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,o=0;o<r;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}(e.fixedArrayBuffer),s);var l=n.dataUrltoBlob(s,t.name);r.resolve(l)}catch(t){return r.reject(t)}},a.onerror=function(){r.reject()},a.src=o},function(t){r.reject(t)})},function(t){r.reject(t)}),r.promise},n.restoreExif=function(t,e){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(t){var e,n,r,o,i,a="",s="",l="",c=0;do{r=(e=t[c++])>>2,o=(3&e)<<4|(n=t[c++])>>4,i=(15&n)<<2|(s=t[c++])>>6,l=63&s,isNaN(n)?i=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(l),e=n=s="",r=o=i=l=""}while(c<t.length);return a},restore:function(t,e){t.match("data:image/jpeg;base64,")&&(t=t.replace("data:image/jpeg;base64,",""));var n=this.decode64(t),r=this.slice2Segments(n),o=this.exifManipulation(e,r);return"data:image/jpeg;base64,"+this.encode64(o)},exifManipulation:function(t,e){var n=this.getExifArray(e),r=this.insertExif(t,n);return new Uint8Array(r)},getExifArray:function(t){for(var e,n=0;n<t.length;n++)if(255===(e=t[n])[0]&225===e[1])return e;return[]},insertExif:function(t,e){var n=t.replace("data:image/jpeg;base64,",""),r=this.decode64(n),o=r.indexOf(255,3),i=r.slice(0,o),a=r.slice(o),s=i;return s=(s=s.concat(e)).concat(a)},slice2Segments:function(t){for(var e=0,n=[];!(255===t[e]&218===t[e+1]);){if(255===t[e]&216===t[e+1])e+=2;else{var r=e+(256*t[e+2]+t[e+3])+2,o=t.slice(e,r);n.push(o),e=r}if(e>t.length)break}return n},decode64:function(t){var e,n,r,o,i="",a="",s=0,l=[];/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=this.KEY_STR.indexOf(t.charAt(s++))<<2|(r=this.KEY_STR.indexOf(t.charAt(s++)))>>4,n=(15&r)<<4|(o=this.KEY_STR.indexOf(t.charAt(s++)))>>2,i=(3&o)<<6|(a=this.KEY_STR.indexOf(t.charAt(s++))),l.push(e),64!==o&&l.push(n),64!==a&&l.push(i),e=n=i="",r=o=a=""}while(s<t.length);return l}};return n.restore(t,e)},n}])},"./node_modules/ng-file-upload/index.js":function(t,e,n){n("./node_modules/ng-file-upload/dist/ng-file-upload-all.js"),t.exports="ngFileUpload"},"./node_modules/select/src/select.js":function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}},"./node_modules/svg-pan-zoom/src/browserify.js":function(t,e,n){var r=n("./node_modules/svg-pan-zoom/src/svg-pan-zoom.js");t.exports=r},"./node_modules/svg-pan-zoom/src/control-icons.js":function(t,e,n){var r=n("./node_modules/svg-pan-zoom/src/svg-utilities.js");t.exports={enable:function(t){var e=t.svg.querySelector("defs");if(e||(e=document.createElementNS(r.svgNS,"defs"),t.svg.appendChild(e)),!e.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(r.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var o=document.createElementNS(r.svgNS,"g");o.setAttribute("id","svg-pan-zoom-controls"),o.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),o.setAttribute("class","svg-pan-zoom-control"),o.appendChild(this._createZoomIn(t)),o.appendChild(this._createZoomReset(t)),o.appendChild(this._createZoomOut(t)),t.svg.appendChild(o),t.controlIcons=o},_createZoomIn:function(t){var e=document.createElementNS(r.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(r.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(r.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},_createZoomReset:function(t){var e=document.createElementNS(r.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var n=document.createElementNS(r.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(r.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o);var i=document.createElementNS(r.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(i),e},_createZoomOut:function(t){var e=document.createElementNS(r.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(r.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(r.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}}},"./node_modules/svg-pan-zoom/src/shadow-viewport.js":function(t,e,n){var r=n("./node_modules/svg-pan-zoom/src/svg-utilities.js"),o=n("./node_modules/svg-pan-zoom/src/utilities.js"),i=function(t,e){this.init(t,e)};i.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=o.proxy(this.updateCTM,this),this.requestAnimationFrame=o.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},i.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(t){return t}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},i.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height},i.prototype.getViewBox=function(){return o.extend({},this.viewBox)},i.prototype.processCTM=function(){var t,e=this.getCTM();(this.options.fit||this.options.contain)&&(t=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t);if(this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*e.a),r=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*e.a);e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},i.prototype.getOriginalState=function(){return o.extend({},this.originalState)},i.prototype.getState=function(){return o.extend({},this.activeState)},i.prototype.getZoom=function(){return this.activeState.zoom},i.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},i.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom},i.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},i.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t},i.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),n=this.isPanDifferent(t);if(e||n){if(e&&(!1===this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),i=!1,a=!1;!1===r?(t.e=this.getPan().x,t.f=this.getPan().y,i=a=!0):o.isObject(r)&&(!1===r.x?(t.e=this.getPan().x,i=!0):o.isNumber(r.x)&&(t.e=r.x),!1===r.y?(t.f=this.getPan().y,a=!0):o.isNumber(r.y)&&(t.f=r.y)),i&&a||!this.isPanDifferent(t)?n=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||n)&&this.updateCTMOnNextFrame()}},i.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a},i.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f},i.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f},i.prototype.pendingUpdate=!1,i.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},i.prototype.updateCTM=function(){var t=this.getCTM();r.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)},t.exports=function(t,e){return new i(t,e)}},"./node_modules/svg-pan-zoom/src/svg-pan-zoom.js":function(t,e,n){var r=n("./node_modules/svg-pan-zoom/src/uniwheel.js"),o=n("./node_modules/svg-pan-zoom/src/control-icons.js"),i=n("./node_modules/svg-pan-zoom/src/utilities.js"),a=n("./node_modules/svg-pan-zoom/src/svg-utilities.js"),s=n("./node_modules/svg-pan-zoom/src/shadow-viewport.js"),l=function(t,e){this.init(t,e)},c={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null};l.prototype.init=function(t,e){var n=this;this.svg=t,this.defs=t.querySelector("defs"),a.setupSvgAttributes(this.svg),this.options=i.extend(i.extend({},c),e),this.state="none";var r=a.getBoundingClientRectNormalized(t);this.width=r.width,this.height=r.height,this.viewport=s(a.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(t,e){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(t,e)},onZoom:function(t){if(n.viewport&&n.options.onZoom)return n.options.onZoom(t)},beforePan:function(t,e){if(n.viewport&&n.options.beforePan)return n.options.beforePan(t,e)},onPan:function(t){if(n.viewport&&n.options.onPan)return n.options.onPan(t)},onUpdatedCTM:function(t){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(t)}});var l=this.getPublicInstance();l.setBeforeZoom(this.options.beforeZoom),l.setOnZoom(this.options.onZoom),l.setBeforePan(this.options.beforePan),l.setOnPan(this.options.onPan),l.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&o.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},l.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(n){var r=t.handleMouseDown(n,e);return e=n,r},touchstart:function(n){var r=t.handleMouseDown(n,e);return e=n,r},mouseup:function(e){return t.handleMouseUp(e)},touchend:function(e){return t.handleMouseUp(e)},mousemove:function(e){return t.handleMouseMove(e)},touchmove:function(e){return t.handleMouseMove(e)},mouseleave:function(e){return t.handleMouseUp(e)},touchleave:function(e){return t.handleMouseUp(e)},touchcancel:function(e){return t.handleMouseUp(e)}},null!=this.options.customEventsHandler){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var o in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(o,this.eventListeners[o],!1);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},l.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(e){return t.handleMouseWheel(e)},r.on(this.options.eventsListenerElement||this.svg,this.wheelListener,!1),this.options.mouseWheelZoomEnabled=!0}},l.prototype.disableMouseWheelZoom=function(){this.options.mouseWheelZoomEnabled&&(r.off(this.options.eventsListenerElement||this.svg,this.wheelListener,!1),this.options.mouseWheelZoomEnabled=!1)},l.prototype.handleMouseWheel=function(t){if(this.options.zoomEnabled&&"none"===this.state){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&0===t.deltaMode&&t.wheelDelta&&(e=0===t.deltaY?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/r;var o=this.svg.getScreenCTM().inverse(),i=a.getEventPoint(t,this.svg).matrixTransform(o),s=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(s,i)}},l.prototype.zoomAtPoint=function(t,e,n){var r=this.viewport.getOriginalState();n?(t=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,t)),t/=this.getZoom()):this.getZoom()*t<this.options.minZoom*r.zoom?t=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*r.zoom&&(t=this.options.maxZoom*r.zoom/this.getZoom());var o=this.viewport.getCTM(),i=e.matrixTransform(o.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(t).translate(-i.x,-i.y),s=o.multiply(a);s.a!==o.a&&this.viewport.setCTM(s)},l.prototype.zoom=function(t,e){this.zoomAtPoint(t,a.getSvgCenterPoint(this.svg,this.width,this.height),e)},l.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)},l.prototype.publicZoomAtPoint=function(t,e,n){if(n&&(t=this.computeFromRelativeZoom(t)),"SVGPoint"!==i.getType(e)){if(!("x"in e&&"y"in e))throw new Error("Given point is invalid");e=a.createSVGPoint(this.svg,e.x,e.y)}this.zoomAtPoint(t,e,n)},l.prototype.getZoom=function(){return this.viewport.getZoom()},l.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},l.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom},l.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)},l.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},l.prototype.reset=function(){this.resetZoom(),this.resetPan()},l.prototype.handleDblClick=function(t){var e;if((this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled)&&(t.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;e=t.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=a.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(e,n)},l.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),i.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&i.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))},l.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&this.options.panEnabled){var e=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(n)}},l.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&(this.state="none")},l.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)},l.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)},l.prototype.center=function(){var t=this.viewport.getViewBox(),e=.5*(this.width-(t.width+2*t.x)*this.getZoom()),n=.5*(this.height-(t.height+2*t.y)*this.getZoom());this.getPublicInstance().pan({x:e,y:n})},l.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},l.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)},l.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)},l.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}},l.prototype.resize=function(){var t=a.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},l.prototype.destroy=function(){var t=this;for(var e in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,null!=this.options.customEventsHandler&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],!1);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),u=u.filter(function(e){return e.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},l.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=null===e?null:i.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=null===e?null:i.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,o.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,o.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=null===e?null:i.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=null===e?null:i.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,n){return t.publicZoomAtPoint(e,n,!0),t.pi},zoomAtPointBy:function(e,n){return t.publicZoomAtPoint(e,n,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=null===e?null:i.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var u=[];t.exports=function(t,e){var n=i.getSvg(t);if(null===n)return null;for(var r=u.length-1;r>=0;r--)if(u[r].svg===n)return u[r].instance.getPublicInstance();return u.push({svg:n,instance:new l(n,e)}),u[u.length-1].instance.getPublicInstance()}},"./node_modules/svg-pan-zoom/src/svg-utilities.js":function(t,e,n){var r=n("./node_modules/svg-pan-zoom/src/utilities.js"),o="unknown";document.documentMode&&(o="ie"),t.exports={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var n=null;if(!(n=r.isElement(e)?e:t.querySelector(e))){var o=Array.prototype.slice.call(t.childNodes||t.children).filter(function(t){return"defs"!==t.nodeName&&"#text"!==t.nodeName});1===o.length&&"g"===o[0].nodeName&&null===o[0].getAttribute("transform")&&(n=o[0])}if(!n){var i="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",i);var a=t.childNodes||t.children;if(a&&a.length>0)for(var s=a.length;s>0;s--)"defs"!==a[a.length-s].nodeName&&n.appendChild(a[a.length-s]);t.appendChild(n)}var l=[];return n.getAttribute("class")&&(l=n.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),n.setAttribute("class",l.join(" "))),n},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==t.parentNode){var e=t.getAttribute("style")||"";-1===e.toLowerCase().indexOf("overflow")&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:r.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,n=0;n<e;n++){var r=t[n];r.parentNode.insertBefore(r,r)}},this?this.internetExplorerRedisplayInterval:null),setCTM:function(t,e,n){var r=this,i="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",i),"transform"in t.style?t.style.transform=i:"-ms-transform"in t.style?t.style["-ms-transform"]=i:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=i),"ie"===o&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var n=e.createSVGPoint();return r.mouseAndTouchNormalize(t,e),n.x=t.clientX,n.y=t.clientY,n},getSvgCenterPoint:function(t,e,n){return this.createSVGPoint(t,e/2,n/2)},createSVGPoint:function(t,e,n){var r=t.createSVGPoint();return r.x=e,r.y=n,r}}},"./node_modules/svg-pan-zoom/src/uniwheel.js":function(t,e){t.exports=function(){var t,e,n,r="",o=[];function i(e,i,a,s){var l;l="wheel"===n?a:function(t,e,r){var i=function(t){!t&&(t=window.event);var r={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==n?(r.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(r.deltaX=-.025*t.wheelDeltaX)):r.deltaY=t.detail,e(r)};return o.push({element:t,fn:i,capture:r}),i}(e,a,s),e[t](r+i,l,s||!1)}function a(t,i,a,s){var l;l="wheel"===n?a:function(t,e){for(var n=0;n<o.length;n++)if(o[n].element===t&&o[n].capture===e)return o[n].fn;return function(){}}(t,s),t[e](r+i,l,s||!1),function(t,e){for(var n=0;n<o.length;n++)if(o[n].element===t&&o[n].capture===e)return o.splice(n,1)}(t,s)}return window.addEventListener?(t="addEventListener",e="removeEventListener"):(t="attachEvent",e="detachEvent",r="on"),n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",{on:function(t,e,r){i(t,n,e,r),"DOMMouseScroll"==n&&i(t,"MozMousePixelScroll",e,r)},off:function(t,e,r){a(t,n,e,r),"DOMMouseScroll"==n&&a(t,"MozMousePixelScroll",e,r)}}}()},"./node_modules/svg-pan-zoom/src/utilities.js":function(t,e){function n(t){return function(e){window.setTimeout(e,t)}}t.exports={extend:function(t,e){for(var n in t=t||{},e)this.isObject(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,n;if(this.isElement(t))e=t;else{if(!("string"==typeof t||t instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(e=document.querySelector(t)))throw new Error("Provided selector did not find any elements. Selector: "+t)}if("svg"===e.tagName.toLowerCase())n=e;else if("object"===e.tagName.toLowerCase())n=e.contentDocument.documentElement;else{if("embed"!==e.tagName.toLowerCase())throw"img"===e.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=e.getSVGDocument().documentElement}return n},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(void 0===t.clientX||null===t.clientX)if(t.clientX=0,t.clientY=0,void 0!==t.touches&&t.touches.length){if(void 0!==t.touches[0].clientX)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(void 0!==t.touches[0].pageX){var n=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else void 0!==t.originalEvent&&void 0!==t.originalEvent.clientX&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(2===t.detail)return!0;if(void 0!==e&&null!==e){var n=t.timeStamp-e.timeStamp,r=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(t,e,n){var r,o,i,a=this,s=null,l=0;n||(n={});var c=function(){l=!1===n.leading?0:a.now(),s=null,i=t.apply(r,o),s||(r=o=null)};return function(){var u=a.now();l||!1!==n.leading||(l=u);var d=e-(u-l);return r=this,o=arguments,d<=0||d>e?(clearTimeout(s),s=null,l=u,i=t.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(c,d)),i}},createRequestAnimationFrame:function(t){var e=null;return"auto"!==t&&t<60&&t>1&&(e=Math.floor(1e3/t)),null===e?window.requestAnimationFrame||n(33):n(e)}}},"./node_modules/tiny-emitter/index.js":function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;i<a;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n},"./node_modules/topojson/dist/topojson.js":function(t,e,n){!function(t){"use strict";var e=function(t,e,n,r,o,i){3===arguments.length&&(r=i=Array,o=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new i(t),l=t-1,c=0;c<t;++c)a[c]=o;return{set:function(r,i){for(var c=e(r)&l,u=a[c],d=0;u!=o;){if(n(u,r))return s[c]=i;if(++d>=t)throw new Error("full hashmap");u=a[c=c+1&l]}return a[c]=r,s[c]=i,i},maybeSet:function(r,i){for(var c=e(r)&l,u=a[c],d=0;u!=o;){if(n(u,r))return s[c];if(++d>=t)throw new Error("full hashmap");u=a[c=c+1&l]}return a[c]=r,s[c]=i,i},get:function(r,i){for(var c=e(r)&l,u=a[c],d=0;u!=o;){if(n(u,r))return s[c];if(++d>=t)break;u=a[c=c+1&l]}return i},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=o&&t.push(r)}return t}}},n=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r=new ArrayBuffer(16),o=new Float64Array(r),i=new Uint32Array(r),a=function(t){o[0]=t[0],o[1]=t[1];var e=i[0]^i[1];return 2147483647&(e=e<<5^e>>7^i[2]^i[3])},s=function(t){var r,o,i,s,l,c=t.coordinates,u=t.lines,d=t.rings,h=function(){for(var t=e(1.4*c.length,T,A,Int32Array,-1,Int32Array),n=new Int32Array(c.length),r=0,o=c.length;r<o;++r)n[r]=t.maybeSet(r,r);return n}(),p=new Int32Array(c.length),m=new Int32Array(c.length),f=new Int32Array(c.length),g=new Int8Array(c.length),v=0;for(r=0,o=c.length;r<o;++r)p[r]=m[r]=f[r]=-1;for(r=0,o=u.length;r<o;++r){var y=u[r],b=y[0],w=y[1];for(s=h[b],l=h[++b],++v,g[s]=1;++b<=w;)k(r,i=s,s=l,l=h[b]);++v,g[l]=1}for(r=0,o=c.length;r<o;++r)p[r]=-1;for(r=0,o=d.length;r<o;++r){var x=d[r],_=x[0]+1,C=x[1];for(i=h[C-1],s=h[_-1],l=h[_],k(r,i,s,l);++_<=C;)k(r,i=s,s=l,l=h[_])}function k(t,e,n,r){if(p[n]!==t){p[n]=t;var o=m[n];if(o>=0){var i=f[n];o===e&&i===r||o===r&&i===e||(++v,g[n]=1)}else m[n]=e,f[n]=r}}function T(t){return a(c[t])}function A(t,e){return n(c[t],c[e])}p=m=f=null;var j,M=function(t,e,n,r,o){3===arguments.length&&(r=Array,o=null);for(var i=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)i[s]=o;return{add:function(r){for(var s=e(r)&a,l=i[s],c=0;l!=o;){if(n(l,r))return!0;if(++c>=t)throw new Error("full hashset");l=i[s=s+1&a]}return i[s]=r,!0},has:function(r){for(var s=e(r)&a,l=i[s],c=0;l!=o;){if(n(l,r))return!0;if(++c>=t)break;l=i[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=i.length;e<n;++e){var r=i[e];r!=o&&t.push(r)}return t}}}(1.4*v,a,n);for(r=0,o=c.length;r<o;++r)g[j=h[r]]&&M.add(c[j]);return M};function l(t,e,n){for(var r,o=e+(n---e>>1);e<o;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function c(t){var e=t.geometry;return null==e?t.type=null:(u(e),t.type=e.type,e.geometries?t.geometries=e.geometries:e.coordinates&&(t.coordinates=e.coordinates),e.bbox&&(t.bbox=e.bbox)),delete t.geometry,t}function u(t){return t?(h.hasOwnProperty(t.type)&&h[t.type](t),t):{type:null}}var d={Feature:c,FeatureCollection:function(t){return t.type="GeometryCollection",t.geometries=t.features,t.features.forEach(c),delete t.features,t}},h={GeometryCollection:function(t){for(var e=t.geometries,n=-1,r=e.length;++n<r;)e[n]=u(e[n])},MultiPoint:function(t){t.coordinates.length?t.coordinates.length<2&&(t.type="Point",t.coordinates=t.coordinates[0]):(t.type=null,delete t.coordinates)},LineString:function(t){t.coordinates.length||(t.type=null,delete t.coordinates)},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=0,o=e.length;n<o;++n){var i=e[n];i.length&&(e[r++]=i)}r?r<2?(t.type="LineString",t.coordinates=e[0]):t.coordinates.length=r:(t.type=null,delete t.coordinates)},Polygon:function(t){for(var e=t.coordinates,n=0,r=0,o=e.length;n<o;++n){var i=e[n];i.length&&(e[r++]=i)}r?t.coordinates.length=r:(t.type=null,delete t.coordinates)},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=0,o=e.length;n<o;++n){for(var i=e[n],a=0,s=0,l=i.length;a<l;++a){var c=i[a];c.length&&(i[s++]=c)}s&&(i.length=s,e[r++]=i)}r?r<2?(t.type="Polygon",t.coordinates=e[0]):e.length=r:(t.type=null,delete t.coordinates)}};function p(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function m(t,e){var n,r=t[0],o=t[1],i=e[0],a=e[1];return o<r&&(n=r,r=o,o=n),a<i&&(n=i,i=a,a=n),r===i&&o===a}function f(){return!0}function g(t){return t}function v(t){return null!=t.type}var y=function(t){return t},b=function(t){if(null==(e=t.transform))return y;var e,n,r,o=e.scale[0],i=e.scale[1],a=e.translate[0],s=e.translate[1];return function(t,e){return e||(n=r=0),t[0]=(n+=t[0])*o+a,t[1]=(r+=t[1])*i+s,t}},w=function(t){var e=t.bbox;function n(t){s[0]=t[0],s[1]=t[1],a(s),s[0]<l&&(l=s[0]),s[0]>u&&(u=s[0]),s[1]<c&&(c=s[1]),s[1]>d&&(d=s[1])}function r(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"Point":n(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(n)}}if(!e){var o,i,a=b(t),s=new Array(2),l=1/0,c=l,u=-l,d=-l;for(i in t.arcs.forEach(function(t){for(var e=-1,n=t.length;++e<n;)o=t[e],s[0]=o[0],s[1]=o[1],a(s,e),s[0]<l&&(l=s[0]),s[0]>u&&(u=s[0]),s[1]<c&&(c=s[1]),s[1]>d&&(d=s[1])}),t.objects)r(t.objects[i]);e=t.bbox=[l,c,u,d]}return e},x=function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n},_=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return C(t,e)})}:C(t,e)};function C(t,e){var n=e.id,r=e.bbox,o=null==e.properties?{}:e.properties,i=k(t,e);return null==n&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function k(t,e){var n=b(t),r=t.arcs;function o(t,e){e.length&&e.pop();for(var o=r[t<0?~t:t],i=0,a=o.length;i<a;++i)e.push(n(o[i].slice(),i));t<0&&x(e,a)}function i(t){return n(t.slice())}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}var T=function(t,e){var n={},r={},o={},i=[],a=-1;function s(t,e){for(var r in t){var o=t[r];delete e[o.start],delete o.start,delete o.end,o.forEach(function(t){n[t<0?~t:t]=1}),i.push(o)}}return e.forEach(function(n,r){var o,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++a],e[a]=n,e[r]=o)}),e.forEach(function(e){var n,i,a=function(e){var n,r=t.arcs[e<0?~e:e],o=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,o]:[o,n]}(e),s=a[0],l=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=l,i=r[l]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=o[c.end=i.end]=c}else r[n.start]=o[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,i=o[s]){delete o[i.end];var u=i===n?n:i.concat(n);r[u.start=i.start]=o[u.end=n.end]=u}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=s]=o[n.end=l]=n}),s(o,r),s(r,o),e.forEach(function(t){n[t<0?~t:t]||i.push([t])}),i};function A(t,e,n){var r,o,i;if(arguments.length>1)r=function(t,e,n){var r,o=[],i=[];function a(t){var e=t<0?~t:t;(i[e]||(i[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function l(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":e.arcs.forEach(l)}}(e),i.forEach(null==n?function(t){o.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&o.push(t[0].i)}),o}(0,e,n);else for(o=0,r=new Array(i=t.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:T(t,r)}}function j(t,e){var n={},r=[],o=[];function i(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,o=t[r-1],i=0;++n<r;)e=o,o=t[n],i+=e[0]*o[1]-e[1]*o[0];return Math.abs(i)}(k(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,o.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:o.map(function(e){var r,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&o.push(t)})})}),o=T(t,o),(r=o.length)>1)for(var i,s,l=1,c=a(o[0]);l<r;++l)(i=a(o[l]))>c&&(s=o[0],o[0]=o[l],o[l]=s,c=i);return o})}}var M=function(t,e){for(var n=0,r=t.length;n<r;){var o=n+r>>>1;t[o]<e?n=o+1:r=o}return n},E=function(t){if(null==(e=t.transform))return y;var e,n,r,o=e.scale[0],i=e.scale[1],a=e.translate[0],s=e.translate[1];return function(t,e){e||(n=r=0);var l=Math.round((t[0]-a)/o),c=Math.round((t[1]-s)/i);return t[0]=l-n,n=l,t[1]=c-r,r=c,t}};function S(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function R(t){for(var e,n=-1,r=t.length,o=t[r-1],i=0;++n<r;)e=o,o=t[n],i+=e[0]*o[1]-e[1]*o[0];return Math.abs(i)/2}function P(t,e){return t[1][2]-e[1][2]}function D(t,e){return e-t}var O=Math.PI,I=2*O,N=4*O,L=O/180,F=Math.abs,H=Math.atan,B=Math.atan2,U=Math.cos,z=Math.max,q=Math.sin,W=Math.sqrt,V=Math.tan;function $(t,e,n,r,o,i){var a=F(r-t),s=U(a),l=q(a),c=i*l,u=n*o-e*i*s,d=e*o+n*i*s;return B(W(c*c+u*u),d)}t.topology=function(t,r){var o=function(t){var e=1/0,n=1/0,r=-1/0,o=-1/0;function i(t){t&&a.hasOwnProperty(t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(i)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){l(t.coordinates)},MultiLineString:function(t){t.coordinates.forEach(l)},Polygon:function(t){t.coordinates.forEach(l)},MultiPolygon:function(t){t.coordinates.forEach(c)}};function s(t){var i=t[0],a=t[1];i<e&&(e=i),i>r&&(r=i),a<n&&(n=a),a>o&&(o=a)}function l(t){t.forEach(s)}function c(t){t.forEach(l)}for(var u in t)i(t[u]);return r>=e&&o>=n?[e,n,r,o]:void 0}(function(t){var e,n;for(e in t)t[e]=((n=t[e])&&d.hasOwnProperty(n.type)?d[n.type]:u)(n);return t}(t)),i=r>0&&o&&function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=i-r?(n-1)/(i-r):1,l=a-o?(n-1)/(a-o):1;function c(t){return t[0]=Math.round((t[0]-r)*s),t[1]=Math.round((t[1]-o)*l),t}function u(t){for(var e,n,r,o=0,i=1,a=t.length,s=c(t[0]),l=s[0],u=s[1];++o<a;)s=c(t[o]),n=s[0],r=s[1],n===l&&r===u||((e=t[i++])[0]=l=n,e[1]=u=r);t.length=i}function d(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}var h={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){c(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(c)},LineString:function(t){var e=t.coordinates;u(e),e.length<2&&(e[1]=e[0])},MultiLineString:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n){var o=e[n];u(o),o.length<2&&(o[1]=o[0])}},Polygon:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n){var o=e[n];for(u(o);o.length<4;)o.push(o[0])}},MultiPolygon:function(t){for(var e=t.coordinates,n=0,r=e.length;n<r;++n)for(var o=e[n],i=0,a=o.length;i<a;++i){var s=o[i];for(u(s);s.length<4;)s.push(s[0])}}};for(var p in t)d(t[p]);return{scale:[1/s,1/l],translate:[r,o]}}(t,o,r),c=function(t){var r,o,i,s,l=t.coordinates,c=t.lines,u=t.rings,d=c.length+u.length;for(delete t.lines,delete t.rings,i=0,s=c.length;i<s;++i)for(r=c[i];r=r.next;)++d;for(i=0,s=u.length;i<s;++i)for(o=u[i];o=o.next;)++d;var h=e(2*d*1.4,a,n),p=t.arcs=[];for(i=0,s=c.length;i<s;++i){r=c[i];do{m(r)}while(r=r.next)}for(i=0,s=u.length;i<s;++i)if((o=u[i]).next)do{m(o)}while(o=o.next);else f(o);function m(t){var e,n,r,o,i,a,s,c;if(r=h.get(e=l[t[0]]))for(s=0,c=r.length;s<c;++s)if(g(o=r[s],t))return t[0]=o[0],void(t[1]=o[1]);if(i=h.get(n=l[t[1]]))for(s=0,c=i.length;s<c;++s)if(v(a=i[s],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):h.set(e,[t]),i?i.push(t):h.set(n,[t]),p.push(t)}function f(t){var e,n,r,o,i;if(n=h.get(e=l[t[0]]))for(o=0,i=n.length;o<i;++o){if(y(r=n[o],t))return t[0]=r[0],void(t[1]=r[1]);if(b(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=h.get(e=l[t[0]+w(t)]))for(o=0,i=n.length;o<i;++o){if(y(r=n[o],t))return t[0]=r[0],void(t[1]=r[1]);if(b(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):h.set(e,[t]),p.push(t)}function g(t,e){var r=t[0],o=e[0],i=t[1],a=e[1];if(r-i!=o-a)return!1;for(;r<=i;++r,++o)if(!n(l[r],l[o]))return!1;return!0}function v(t,e){var r=t[0],o=e[0],i=t[1],a=e[1];if(r-i!=o-a)return!1;for(;r<=i;++r,--a)if(!n(l[r],l[a]))return!1;return!0}function y(t,e){var r=t[0],o=e[0],i=t[1],a=e[1],s=i-r;if(s!==a-o)return!1;for(var c=w(t),u=w(e),d=0;d<s;++d)if(!n(l[r+(d+c)%s],l[o+(d+u)%s]))return!1;return!0}function b(t,e){var r=t[0],o=e[0],i=t[1],a=e[1],s=i-r;if(s!==a-o)return!1;for(var c=w(t),u=s-w(e),d=0;d<s;++d)if(!n(l[r+(d+c)%s],l[a-(d+u)%s]))return!1;return!0}function w(t){for(var e=t[0],n=t[1],r=e,o=r,i=l[r];++r<n;){var a=l[r];(a[0]<i[0]||a[0]===i[0]&&a[1]<i[1])&&(o=r,i=a)}return o-e}return t}(function(t){var e,n,r,o,i,a,c,u=s(t),d=t.coordinates,h=t.lines,p=t.rings;for(n=0,r=h.length;n<r;++n)for(var m=h[n],f=m[0],g=m[1];++f<g;)u.has(d[f])&&(e={0:f,1:m[1]},m[1]=f,m=m.next=e);for(n=0,r=p.length;n<r;++n)for(var v=p[n],y=v[0],b=y,w=v[1],x=u.has(d[y]);++b<w;)u.has(d[b])&&(x?(e={0:b,1:v[1]},v[1]=b,v=v.next=e):(c=w-b,l(o=d,i=y,a=w),l(o,i,i+c),l(o,i+c,a),d[w]=d[y],x=!0,b=y));return t}(function(t){var e=-1,n=[],r=[],o=[];function i(t){t&&a.hasOwnProperty(t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(i)},LineString:function(t){t.arcs=s(t.coordinates),delete t.coordinates},MultiLineString:function(t){t.arcs=t.coordinates.map(s),delete t.coordinates},Polygon:function(t){t.arcs=t.coordinates.map(l),delete t.coordinates},MultiPolygon:function(t){t.arcs=t.coordinates.map(c),delete t.coordinates}};function s(t){for(var r=0,i=t.length;r<i;++r)o[++e]=t[r];var a={0:e-i+1,1:e};return n.push(a),a}function l(t){for(var n=0,i=t.length;n<i;++n)o[++e]=t[n];var a={0:e-i+1,1:e};return r.push(a),a}function c(t){return t.map(l)}for(var u in t)i(t[u]);return{type:"Topology",coordinates:o,lines:n,rings:r,objects:t}}(t))),h=c.coordinates,f=e(1.4*c.arcs.length,p,m);function g(t){t&&v.hasOwnProperty(t.type)&&v[t.type](t)}t=c.objects,c.bbox=o,c.arcs=c.arcs.map(function(t,e){return f.set(t,e),h.slice(t[0],t[1]+1)}),delete c.coordinates,h=null;var v={GeometryCollection:function(t){t.geometries.forEach(g)},LineString:function(t){t.arcs=y(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(y)},Polygon:function(t){t.arcs=t.arcs.map(y)},MultiPolygon:function(t){t.arcs=t.arcs.map(b)}};function y(t){var e=[];do{var n=f.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function b(t){return t.map(y)}for(var w in t)g(t[w]);return i&&(c.transform=i,function(t){for(var e=t.arcs,n=-1,r=e.length;++n<r;)for(var o,i,a=e[n],s=0,l=a.length,c=a[0],u=c[0],d=c[1];++s<l;)c=a[s],o=c[0],i=c[1],a[s]=[o-u,i-d],u=o,d=i}(c)),c},t.filter=function(t,e){var n;function r(t){switch(t.type){case"Polygon":t.arcs=o(t.arcs),t.arcs||(t.type=null,delete t.arcs);break;case"MultiPolygon":t.arcs=t.arcs.map(o).filter(g),t.arcs.length||(t.type=null,delete t.arcs);break;case"GeometryCollection":t.geometries.forEach(r),t.geometries=t.geometries.filter(v),t.geometries.length||(t.type=null,delete t.geometries)}}function o(t){return t.length&&(n=t[0],e(n,!1))?[t.shift()].concat(t.filter(i)):null;var n}function i(t){return e(t,!0)}for(n in null==e&&(e=f),t.objects)r(t.objects[n]);return function(t){var e,n=t.arcs,r=t.arcs=[],o=-1,i=new Array(n.length);function a(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(a);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":t.arcs.forEach(s);break;case"MultiPolygon":t.arcs.forEach(l)}}function s(t){for(var e=0,a=t.length;e<a;++e){var s,l=t[e],c=l<0&&(l=~l,!0);null==(s=i[l])&&(i[l]=s=++o,r[s]=n[l]),t[e]=c?~s:s}}function l(t){t.forEach(s)}for(e in t.objects)a(t.objects[e]);return t}(t)},t.filterAttached=function(t){var e,n={},r=0;function o(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(o);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}}function i(t){for(var e=0,o=t.length;e<o;++e,++r)for(var i=t[e],a=0,s=i.length;a<s;++a){var l=i[a];l<0&&(l=~l);var c=n[l];n[l]=c>=0&&c!==r?-1:r}}for(e in t.objects)o(t.objects[e]);return function(t){for(var e,r=0,o=t.length;r<o;++r)if(e=t[r],n[e<0?~e:e]<0)return!0;return!1}},t.filterWeight=function(t,e,n){return e=null==e?Number.MIN_VALUE:+e,null==n&&(n=R),function(r,o){return n(_(t,{type:"Polygon",arcs:[r]}).geometry.coordinates[0],o)>=e}},t.planarRingArea=R,t.planarTriangleArea=S,t.presimplify=function(t,e){var n=b(t),r=E(t),o=function(){var t={},e=[],n=0;function r(t,n){for(;n>0;){var r=(n+1>>1)-1,o=e[r];if(P(t,o)>=0)break;e[o._=n]=o,e[t._=n=r]=t}}function o(t,r){for(;;){var o=r+1<<1,i=o-1,a=r,s=e[a];if(i<n&&P(e[i],s)<0&&(s=e[a=i]),o<n&&P(e[o],s)<0&&(s=e[a=o]),a===r)break;e[s._=r]=s,e[t._=r=a]=t}}return t.push=function(t){return r(e[t._=n]=t,n++),n},t.pop=function(){if(!(n<=0)){var t,r=e[0];return--n>0&&(t=e[n],o(e[t._=0]=t,0)),r}},t.remove=function(t){var i,a=t._;if(e[a]===t)return a!==--n&&(P(i=e[n],t)<0?r:o)(e[i._=a]=i,a),a},t}();function i(t){o.remove(t),t[1][2]=e(t),o.push(t)}return null==e&&(e=S),t.arcs.forEach(function(t){var a,s,l,c=[],u=0;for(t.forEach(n),s=1,l=t.length-1;s<l;++s)(a=t.slice(s-1,s+2))[1][2]=e(a),c.push(a),o.push(a);for(t[0][2]=t[l][2]=1/0,s=0,l=c.length;s<l;++s)(a=c[s]).previous=c[s-1],a.next=c[s+1];for(;a=o.pop();){var d=a.previous,h=a.next;a[1][2]<u?a[1][2]=u:u=a[1][2],d&&(d.next=h,d[2]=a[2],i(d)),h&&(h.previous=d,h[0]=a[0],i(h))}t.forEach(r)}),t},t.quantile=function(t,e){var n=[];return t.arcs.forEach(function(t){t.forEach(function(t){isFinite(t[2])&&n.push(t[2])})}),n.length&&function(t,e){if(n=t.length){if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];var n,r=(n-1)*e,o=Math.floor(r),i=t[o],a=t[o+1];return i+(a-i)*(r-o)}}(n.sort(D),e)},t.simplify=function(t,e){return e=null==e?Number.MIN_VALUE:+e,t.arcs.forEach(t.transform?function(t){for(var n,r,o=0,i=0,a=-1,s=-1,l=t.length;++a<l;)(n=t[a])[2]>=e?((r=t[++s])[0]=n[0]+o,r[1]=n[1]+i,o=i=0):(o+=n[0],i+=n[1]);t.length=++s}:function(t){for(var n,r=-1,o=-1,i=t.length;++r<i;)(n=t[r])[2]>=e&&(t[++o]=n);t.length=++o}),t.arcs.forEach(t.transform?function(t){var e=0,n=0,r=t.length,o=t[0];for(o.length=2;++e<r;)(o=t[e]).length=2,(o[0]||o[1])&&(t[++n]=o);t.length=(n||1)+1}:function(t){var e,n,r=0,o=0,i=t.length,a=t[0],s=a[0],l=a[1];for(a.length=2;++r<i;)e=(a=t[r])[0],n=a[1],a.length=2,s===e&&l===n||(t[++o]=a,s=e,l=n);t.length=(o||1)+1}),t},t.sphericalRingArea=function(t,e){if(!t.length)return 0;var n,r,o,i,a,s,l,c=0,u=t[0],d=u[0]*L,h=(u[1]*L+I)/2,p=U(h),m=q(h);for(a=1,s=t.length;a<s;++a)u=t[a],n=d,d=u[0]*L,r=d-n,h=(u[1]*L+I)/2,o=p,p=U(h),i=m,m=q(h),c+=B((l=i*m)*q(r),o*p+l*U(r));return c=2*(c>O?c-I:c<-O?c+I:c),e&&(c*=-1),c<0?c+N:c},t.sphericalTriangleArea=function(t){var e=t[0][0]*L,n=t[0][1]*L,r=U(n),o=q(n),i=t[1][0]*L,a=t[1][1]*L,s=U(a),l=q(a),c=t[2][0]*L,u=t[2][1]*L,d=U(u),h=q(u),p=$(e,r,o,i,s,l),m=$(i,s,l,c,d,h),f=$(c,d,h,e,r,o),g=(p+m+f)/2;return 4*H(W(z(0,V(g/2)*V((g-p)/2)*V((g-m)/2)*V((g-f)/2))))},t.bbox=w,t.feature=_,t.merge=function(t){return k(t,j.apply(this,arguments))},t.mergeArcs=j,t.mesh=function(t){return k(t,A.apply(this,arguments))},t.meshArcs=A,t.neighbors=function(t){var e={},n=t.map(function(){return[]});function r(t,n){t.forEach(function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]})}function o(t,e){t.forEach(function(t){r(t,e)})}var i={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(t,e){t.forEach(function(t){o(t,e)})}};for(var a in t.forEach(function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach(function(e){t(e,n)}):e.type in i&&i[e.type](e.arcs,n)}),e)for(var s=e[a],l=s.length,c=0;c<l;++c)for(var u=c+1;u<l;++u){var d,h=s[c],p=s[u];(d=n[h])[a=M(d,p)]!==p&&d.splice(a,0,p),(d=n[p])[a=M(d,h)]!==h&&d.splice(a,0,h)}return n},t.quantize=function(t,e){if(!((e=Math.floor(e))>=2))throw new Error("n must be â¥2");if(t.transform)throw new Error("already quantized");var n,r=w(t),o=r[0],i=(r[2]-o)/(e-1)||1,a=r[1],s=(r[3]-a)/(e-1)||1;function l(t){t[0]=Math.round((t[0]-o)/i),t[1]=Math.round((t[1]-a)/s)}function c(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(c);break;case"Point":l(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(l)}}for(n in t.arcs.forEach(function(t){for(var e,n,r,l=1,c=1,u=t.length,d=t[0],h=d[0]=Math.round((d[0]-o)/i),p=d[1]=Math.round((d[1]-a)/s);l<u;++l)d=t[l],n=Math.round((d[0]-o)/i),r=Math.round((d[1]-a)/s),n===h&&r===p||((e=t[c++])[0]=n-h,h=n,e[1]=r-p,p=r);c<2&&((e=t[c++])[0]=0,e[1]=0),t.length=c}),t.objects)c(t.objects[n]);return t.transform={scale:[i,s],translate:[o,a]},t},t.transform=b,t.untransform=E,Object.defineProperty(t,"__esModule",{value:!0})}(e)},"./node_modules/trix/dist/trix.js":function(t,e,n){(function(r){var o,i,a,s,l;(function(){}).call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype.delete=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(e){function n(){}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function i(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void d(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)}))}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void c(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||h(t._value)},1);for(var e=0,n=t._deferreds.length;n>e;e++)i(t,t._deferreds[e]);t._deferreds=null}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var u=setTimeout,d="function"==typeof r&&r||function(t){u(t,1)},h=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var r=new o(n);return i(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,r)),r},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(i,t)},n)}e[i]=a,0==--o&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,o=t.length;o>r;r++)t[r].then(e,n)})},o._setImmediateFn=function(t){d=t},o._setUnhandledRejectionFn=function(t){h=t},void 0!==t&&t.exports?t.exports=o:e.Promise||(e.Promise=o)}(this),
/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
"undefined"==typeof WeakMap&&(a=Object.defineProperty,s=Date.now()%1e9,(l=function(){this.name="__st"+(1e9*Math.random()>>>0)+s+++"__"}).prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:a(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t||(e[0]=e[1]=void 0,0))},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=l),function(t){function e(t){v.push(t),g||(g=!0,u(n))}function n(){g=!1;var t=v;v=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var n=t.takeRecords();(function(t){t.nodes_.forEach(function(e){var n=d.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})})(t),n.length&&(t.callback_(n,t),e=!0)}),e&&n()}function r(t,e){for(var n=t;n;n=n.parentNode){var r=d.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.options;if(n===t||a.subtree){var s=e(a);s&&i.enqueue(s)}}}}function o(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++y}function i(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function a(t,e){return m=new i(t,e)}function s(t){return f||((f=function(t){var e=new i(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(m)).oldValue=t,f)}function l(t,e){return t===e?t:f&&function(t){return t===f||t===m}(t)?f:null}function c(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var u,d=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))u=setTimeout;else if(window.setImmediate)u=window.setImmediate;else{var h=[],p=String(Math.random());window.addEventListener("message",function(t){if(t.data===p){var e=h;h=[],e.forEach(function(t){t()})}}),u=function(t){h.push(t),window.postMessage(p,"*")}}var m,f,g=!1,v=[],y=0;o.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=d.get(t);n||d.set(t,n=[]);for(var r,o=0;o<n.length;o++)if(n[o].observer===this){(r=n[o]).removeListeners(),r.options=e;break}r||(r=new c(this,t,e),n.push(r),this.nodes_.push(t)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=d.get(t),n=0;n<e.length;n++){var r=e[n];if(r.observer===this){r.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},c.prototype={enqueue:function(t){var n=this.observer.records_,r=n.length;if(n.length>0){var o=l(n[r-1],t);if(o)return void(n[r-1]=o)}else e(this.observer);n[r]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=d.get(t);e||d.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=d.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,o=t.target;(l=new a("attributes",o)).attributeName=e,l.attributeNamespace=n;var i=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;r(o,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?s(i):l});break;case"DOMCharacterDataModified":var l=a("characterData",o=t.target);i=t.prevValue;r(o,function(t){return t.characterData?t.characterDataOldValue?s(i):l:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var c,u,d=t.target;"DOMNodeInserted"===t.type?(c=[d],u=[]):(c=[],u=[d]);var h=d.previousSibling,p=d.nextSibling;(l=a("childList",t.target.parentNode)).addedNodes=c,l.removedNodes=u,l.previousSibling=h,l.nextSibling=p,r(t.relatedNode,function(t){return t.childList?l:void 0})}m=f=void 0}},t.JsMutationObserver=o,t.MutationObserver||(t.MutationObserver=o,o._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}if(window.requestAnimationFrame||(window.requestAnimationFrame=function(){var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?function(e){return t(function(){e(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var e=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(e.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var n=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||n&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||n&&"function"!=typeof window.Event){var r=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=r.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,n=[];t.addModule=function(t){n.push(t)},t.initializeModules=function(){n.forEach(function(e){e(t)})},t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function e(t,e){(function t(e,n,r){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)!0!==n(o,r)&&t(o,n,r),o=o.nextElementSibling;return null})(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function n(t,n){for(var r=t.shadowRoot;r;)e(r,n),r=r.olderShadowRoot}var r=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=function(t,e){!function t(e,n,o){if(e=window.wrap(e),!(o.indexOf(e)>=0)){o.push(e);for(var i,a=e.querySelectorAll("link[rel="+r+"]"),s=0,l=a.length;l>s&&(i=a[s]);s++)i.import&&t(i.import,n,o);n(e)}}(t,e,[])},t.forSubtree=e}),window.CustomElements.addModule(function(t){function e(t,e){return n(t,e)||r(t,e)}function n(e,n){return!!t.upgrade(e,n)||void(n&&a(e))}function r(t,e){m(t,function(t){return!!n(t,e)||void 0})}function o(t){y.push(t),v||(v=!0,setTimeout(i))}function i(){v=!1;for(var t,e=y,n=0,r=e.length;r>n&&(t=e[n]);n++)t();y=[]}function a(t){g?o(function(){s(t)}):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function l(t){g?o(function(){c(t)}):c(t)}function c(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function u(t,n){if(p.dom){var r=n[0];if(r&&"childList"===r.type&&r.addedNodes&&r.addedNodes){for(var o=r.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=function(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}(t);n.forEach(function(t){"childList"===t.type&&(b(t.addedNodes,function(t){t.localName&&e(t,a)}),b(t.removedNodes,function(t){t.localName&&function(t){l(t),m(t,function(t){l(t)})}(t)}))}),p.dom&&console.groupEnd()}function d(t){if(!t.__observer){var e=new MutationObserver(u.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function h(t){t=window.wrap(t),p.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),d(t),p.dom&&console.groupEnd()}var p=t.flags,m=t.forSubtree,f=t.forDocumentTree,g=window.MutationObserver._isPolyfilled&&p["throttle-attached"];t.hasPolyfillMutations=g,t.hasThrottledAttached=g;var v=!1,y=[],b=Array.prototype.forEach.call.bind(Array.prototype.forEach),w=Element.prototype.createShadowRoot;w&&(Element.prototype.createShadowRoot=function(){var t=w.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=function(t){if(t.shadowRoot&&!t.shadowRoot.__watched){p.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)d(e),e=e.olderShadowRoot}},t.upgradeDocumentTree=function(t){f(t,h)},t.upgradeDocument=h,t.upgradeSubtree=r,t.upgradeAll=e,t.attached=a,t.takeRecords=function(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(u(t,e.takeRecords()),i())}}),window.CustomElements.addModule(function(t){function e(e,o,i){return r.upgrade&&console.group("upgrade:",e.localName),o.is&&e.setAttribute("is",o.is),n(e,o),e.__upgraded__=!0,function(t){t.createdCallback&&t.createdCallback()}(e),i&&t.attached(e),t.upgradeSubtree(e,i),r.upgrade&&console.groupEnd(),e}function n(t,e){Object.__proto__?t.__proto__=e.prototype:(function(t,e,n){for(var r={},o=e;o!==n&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)r[i]||(Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i)),r[i]=1);o=Object.getPrototypeOf(o)}}(t,e.prototype,e.native),t.__proto__=e.prototype)}var r=t.flags;t.upgrade=function(n,r){if("template"===n.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(n),!n.__upgraded__&&n.nodeType===Node.ELEMENT_NODE){var o=n.getAttribute("is"),i=t.getRegisteredDefinition(n.localName)||t.getRegisteredDefinition(o);if(i&&(o&&i.tag==n.localName||!o&&!i.extends))return e(n,i,r)}},t.upgradeWithDefinition=e,t.implementPrototype=n}),window.CustomElements.addModule(function(t){function e(t){if(!t.setAttribute._polyfilled){var e=t.setAttribute;t.setAttribute=function(t,r){n.call(this,t,r,e)};var r=t.removeAttribute;t.removeAttribute=function(t){n.call(this,t,null,r)},t.setAttribute._polyfilled=!0}}function n(t,e,n){t=t.toLowerCase();var r=this.getAttribute(t);n.apply(this,arguments);var o=this.getAttribute(t);this.attributeChangedCallback&&o!==r&&this.attributeChangedCallback(t,r,o)}function r(t){return t?m[t.toLowerCase()]:void 0}function o(t){return function(){return function(t){return u(g(t.tag),t)}(t)}}function i(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,o=r(e||t);if(o){if(t==o.tag&&e==o.is)return new o.ctor;if(!e&&!o.is)return new o.ctor}return e?((n=i(t)).setAttribute("is",e),n):(n=g(t),t.indexOf("-")>=0&&d(n,HTMLElement),n)}function a(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return c(t),t}}var s,l=(t.isIE,t.upgradeDocumentTree),c=t.upgradeAll,u=t.upgradeWithDefinition,d=t.implementPrototype,h=t.useNative,p=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],m={},f="http://www.w3.org/1999/xhtml",g=document.createElement.bind(document),v=document.createElementNS.bind(document);s=Object.__proto__||h?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},a(Node.prototype,"cloneNode"),a(document,"importNode"),document.registerElement=function(n,i){var a=i||{};if(!n)throw new Error("document.registerElement: first argument `name` must not be empty");if(n.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(n)+"'.");if(function(t){for(var e=0;e<p.length;e++)if(t===p[e])return!0}(n))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(n)+"'. The type name is invalid.");if(r(n))throw new Error("DuplicateDefinitionError: a type with name '"+String(n)+"' is already registered");return a.prototype||(a.prototype=Object.create(HTMLElement.prototype)),a.__name=n.toLowerCase(),a.extends&&(a.extends=a.extends.toLowerCase()),a.lifecycle=a.lifecycle||{},a.ancestry=function t(e){var n=r(e);return n?t(n.extends).concat([n]):[]}(a.extends),function(t){for(var e,n=t.extends,r=0;e=t.ancestry[r];r++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}(a),function(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var r,o=t.prototype,i=!1;o;)o==e&&(i=!0),(r=Object.getPrototypeOf(o))&&(o.__proto__=r),o=r;i||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t.native=e}}(a),e(a.prototype),function(t,e){m[t]=e}(a.__name,a),a.ctor=o(a),a.ctor.prototype=a.prototype,a.prototype.constructor=a.ctor,t.ready&&l(document),a.ctor},document.createElement=i,document.createElementNS=function(t,e,n){return t===f?i(e,n):v(t,e)},t.registry=m,t.instanceof=s,t.reservedTagList=p,t.getRegisteredDefinition=r,document.register=document.registerElement}),function(t){function e(){i(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,r=t.initializeModules;if(t.isIE,n){var o=function(){};t.watchShadow=o,t.upgrade=o,t.upgradeAll=o,t.upgradeDocumentTree=o,t.upgradeSubtree=o,t.takeRecords=o,t.instanceof=function(t,e){return t instanceof e}}else r();var i=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t.import&&a(wrap(t.import))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements),function(){}.call(this),function(){(function(){(function(){this.Trix={VERSION:"0.10.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"Â ",OBJECT_REPLACEMENT_CHARACTER:"ï¿¼",config:{}}}).call(this)}).call(this);var r=this.Trix;(function(){(function(){r.BasicObject=function(){function t(){}var e,n,r;return t.proxyMethod=function(t){var r,o,i,a,s;return i=n(t),r=i.name,a=i.toMethod,s=i.toProperty,o=i.optional,this.prototype[r]=function(){var t,n;return t=null!=a?o?"function"==typeof this[a]?this[a]():void 0:this[a]():null!=s?this[s]:void 0,o?null!=(n=null!=t?t[r]:void 0)?e.call(n,t,arguments):void 0:(n=t[r],e.call(n,t,arguments))}},n=function(t){var e,n;if(!(n=t.match(r)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},e=Function.prototype.apply,r=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Object=function(e){function n(){this.id=++o}var o;return t(n,e),o=0,n.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},n.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},n.prototype.isEqualTo=function(t){return this===t},n.prototype.inspect=function(){var t,e,n;return t=function(){var t,r,o;for(e in o=[],r=null!=(t=this.contentsForInspection())?t:{})n=r[e],o.push(e+"="+n);return o}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},n.prototype.contentsForInspection=function(){},n.prototype.toJSONString=function(){return JSON.stringify(this)},n.prototype.toUTF16String=function(){return r.UTF16String.box(this)},n.prototype.getCacheKey=function(){return this.id.toString()},n}(r.BasicObject)}.call(this),function(){r.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){r.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var t,e;r.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+r.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+r.NON_BREAKING_SPACE,"g")," ")},summarizeStringChange:function(t,n){var o,i,a,s;return t=r.UTF16String.box(t),(n=r.UTF16String.box(n)).length<t.length?(s=(i=e(t,n))[0],o=i[1]):(o=(a=e(n,t))[0],s=a[1]),{added:o,removed:s}}}),e=function(e,n){var o,i,a,s,l;return e.isEqualTo(n)?["",""]:(a=(s=(i=t(e,n)).utf16String.length)?(l=i.offset,o=e.codepoints.slice(0,l).concat(e.codepoints.slice(l+s)),t(n,r.UTF16String.fromCodepoints(o))):t(n,e),[i.utf16String.toString(),a.utf16String.toString()])},t=function(t,e){var n,r,o;for(n=0,r=t.length,o=e.length;r>n&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;r>n+1&&t.charAt(r-1).isEqualTo(e.charAt(o-1));)r--,o--;return{utf16String:t.slice(n,r),offset:n}}}.call(this),function(){r.extend({copyObject:function(t){var e,n,r;for(e in null==t&&(t={}),n={},t)r=t[e],n[e]=r;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var t=[].slice;r.extend({arraysAreEqual:function(t,e){var n,r,o;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(r=n=0,o=t.length;o>n;r=++n)if(t[r]!==e[r])return!1;return!0},arrayStartsWith:function(t,e){return null==t&&(t=[]),null==e&&(e=[]),r.arraysAreEqual(t.slice(0,e.length),e)},spliceArray:function(){var e,n,r;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],(r=n.slice(0)).splice.apply(r,e),r},summarizeArrayChange:function(t,e){var n,r,o,i,a,s,l,c,u,d,h;for(null==t&&(t=[]),null==e&&(e=[]),n=[],d=[],o=new Set,i=0,l=t.length;l>i;i++)h=t[i],o.add(h);for(r=new Set,a=0,c=e.length;c>a;a++)h=e[a],r.add(h),o.has(h)||n.push(h);for(s=0,u=t.length;u>s;s++)h=t[s],r.has(h)||d.push(h);return{added:n,removed:d}}})}.call(this),function(){var t,e,n,o;t=null,e=null,o=null,n=null,r.extend({getAllAttributeNames:function(){return null!=t?t:t=r.getTextAttributeNames().concat(r.getBlockAttributeNames())},getBlockConfig:function(t){return r.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=e?e:e=Object.keys(r.config.blockAttributes)},getTextConfig:function(t){return r.config.textAttributes[t]},getTextAttributeNames:function(){return null!=o?o:o=Object.keys(r.config.textAttributes)},getListAttributeNames:function(){var t,e;return null!=n?n:n=function(){var n,o;for(t in o=[],n=r.config.blockAttributes)null!=(e=n[t].listAttribute)&&o.push(e);return o}()}})}.call(this),function(){var t,e,n,o,i,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=document.documentElement,e=null!=(n=null!=(o=null!=(i=t.matchesSelector)?i:t.webkitMatchesSelector)?o:t.msMatchesSelector)?n:t.mozMatchesSelector,r.extend({handleEvent:function(e,n){var o,i,a,s,l,c,u,d,h,p,m;return l=(u=null!=n?n:{}).onElement,s=u.matchingSelector,m=u.withCallback,a=u.inPhase,c=u.preventDefault,h=u.times,o=null!=l?l:t,d=s,m,p="capturing"===a,(i=function(t){var e;return null!=h&&0==--h&&i.destroy(),null!=(e=r.findClosestElementFromNode(t.target,{matchingSelector:d}))&&(null!=m&&m.call(e,t,e),c)?t.preventDefault():void 0}).destroy=function(){return o.removeEventListener(e,i,p)},o.addEventListener(e,i,p),i},handleEventOnce:function(t,e){return null==e&&(e={}),e.times=1,r.handleEvent(t,e)},triggerEvent:function(e,n){var o,i,a,s,l,c,u;return c=(u=null!=n?n:{}).onElement,i=u.bubbles,a=u.cancelable,o=u.attributes,s=null!=c?c:t,i=!1!==i,a=!1!==a,(l=document.createEvent("Events")).initEvent(e,i,a),null!=o&&r.extend.call(l,o),s.dispatchEvent(l)},elementMatchesSelector:function(t,n){return 1===(null!=t?t.nodeType:void 0)?e.call(t,n):void 0},findClosestElementFromNode:function(t,e){var n,o,i;for(n=(o=null!=e?e:{}).matchingSelector,i=o.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==i)return t.closest(n);for(;t&&t!==i;){if(r.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&r.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,e){var n;return n=r.findNodeFromContainerAndOffset(t,e),r.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},walkTree:function(t,e){var n,r,o,i,a;return r=(o=null!=e?e:{}).onlyNodesOfType,i=o.usingFilter,n=o.expandEntityReferences,a=function(){switch(r){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=i?i:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,r,o,i,a,s,l,c,u,d;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},r=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(i in s=e.attributes)d=s[i],r.setAttribute(i,d);if(e.style)for(i in l=e.style)d=l[i],r.style[i]=d;if(e.data)for(i in c=e.data)d=c[i],r.dataset[i]=d;if(e.className)for(o=0,a=(u=e.className.split(" ")).length;a>o;o++)n=u[o],r.classList.add(n);return e.textContent&&(r.textContent=e.textContent),r},cloneFragment:function(t){var e,n,r,o,i;for(e=document.createDocumentFragment(),n=0,r=(i=t.childNodes).length;r>n;n++)o=i[n],e.appendChild(o.cloneNode(!0));return e},makeFragment:function(t){var e,n,r;for(null==t&&(t=""),(e=document.createElement("div")).innerHTML=t,n=document.createDocumentFragment();r=e.firstChild;)n.appendChild(r);return n},getBlockTagNames:function(){var t,e;return null!=r.blockTagNames?r.blockTagNames:r.blockTagNames=function(){var n,o;for(t in o=[],n=r.config.blockAttributes)e=n[t],o.push(e.tagName);return o}()},nodeIsBlockContainer:function(t){return r.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var e,n;return e=r.tagName(t),a.call(r.getBlockTagNames(),e)>=0&&(n=r.tagName(t.firstChild),a.call(r.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,e){return(null!=e?e:{strict:!0}).strict?r.nodeIsBlockStartComment(t):r.nodeIsBlockStartComment(t)||!r.nodeIsBlockStartComment(t.firstChild)&&r.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return r.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t){return t?r.nodeIsTextNode(t)?t.data===r.ZERO_WIDTH_SPACE:r.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return r.elementMatchesSelector(t,r.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return r.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var t,e,n,o,i;t=r.copyObject,o=r.objectsAreEqual,r.extend({normalizeRange:n=function(t){var n;if(null!=t)return Array.isArray(t)||(t=[t,t]),[e(t[0]),e(null!=(n=t[1])?n:t[0])]},rangeIsCollapsed:function(t){var e,r,o;if(null!=t)return o=(r=n(t))[0],e=r[1],i(o,e)},rangesAreEqual:function(t,e){var r,o,a,s,l,c;if(null!=t&&null!=e)return o=(a=n(t))[0],r=a[1],c=(s=n(e))[0],l=s[1],i(o,c)&&i(r,l)}}),e=function(e){return"number"==typeof e?e:t(e)},i=function(t,e){return"number"==typeof t?t===e:o(t,e)}}.call(this),function(){var t,e,n,o;t={extendsTagName:"div",css:"%t { display: block; }"},r.registerElement=function(e,r){var i,a,s,l,c,u,d;return null==r&&(r={}),e=e.toLowerCase(),l=null!=(d=(c=o(r)).extendsTagName)?d:t.extendsTagName,delete c.extendsTagName,a=c.defaultCSS,delete c.defaultCSS,null!=a&&l===t.extendsTagName?a+="\n"+t.css:a=t.css,n(a,e),(s=Object.getPrototypeOf(document.createElement(l))).__super__=s,u=Object.create(s,c),i=document.registerElement(e,{prototype:u}),Object.defineProperty(u,"constructor",{value:i}),i},n=function(t,n){return e(n).textContent=t.replace(/%t/g,n)},e=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},o=function(t){var e,n,r;for(e in n={},t)r=t[e],n[e]="function"==typeof r?{value:r}:r;return n}}.call(this),function(){var t,e;r.extend({getDOMSelection:function(){var t;return(t=window.getSelection()).rangeCount>0?t:void 0},getDOMRange:function(){var e,n;return(e=null!=(n=r.getDOMSelection())?n.getRangeAt(0):void 0)&&!t(e)?e:void 0},setDOMRange:function(t){var e;return(e=window.getSelection()).removeAllRanges(),e.addRange(t),r.selectionChangeObserver.update()}}),t=function(t){return e(t.startContainer)||e(t.endContainer)},e=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){}.call(this),function(){var t,e=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=r.arraysAreEqual,r.Hash=function(n){function o(t){null==t&&(t={}),this.values=a(t),o.__super__.constructor.apply(this,arguments)}var i,a,s,l,c;return e(o,n),o.fromCommonAttributesOfObjects=function(t){var e,n,r,o,a,s;if(null==t&&(t=[]),!t.length)return new this;for(r=(e=i(t[0])).getKeys(),n=0,o=(s=t.slice(1)).length;o>n;n++)a=s[n],r=e.getKeysCommonToHash(i(a)),e=e.slice(r);return e},o.box=function(t){return i(t)},o.prototype.add=function(t,e){return this.merge(l(t,e))},o.prototype.remove=function(t){return new r.Hash(a(this.values,t))},o.prototype.get=function(t){return this.values[t]},o.prototype.has=function(t){return t in this.values},o.prototype.merge=function(t){return new r.Hash(s(this.values,c(t)))},o.prototype.slice=function(t){var e,n,o,i;for(i={},e=0,o=t.length;o>e;e++)n=t[e],this.has(n)&&(i[n]=this.values[n]);return new r.Hash(i)},o.prototype.getKeys=function(){return Object.keys(this.values)},o.prototype.getKeysCommonToHash=function(t){var e,n,r,o,a;for(t=i(t),a=[],e=0,r=(o=this.getKeys()).length;r>e;e++)n=o[e],this.values[n]===t.values[n]&&a.push(n);return a},o.prototype.isEqualTo=function(e){return t(this.toArray(),i(e).toArray())},o.prototype.isEmpty=function(){return 0===this.getKeys().length},o.prototype.toArray=function(){var t,e,n;return(null!=this.array?this.array:this.array=function(){var r;for(t in e=[],r=this.values)n=r[t],e.push(t,n);return e}.call(this)).slice(0)},o.prototype.toObject=function(){return a(this.values)},o.prototype.toJSON=function(){return this.toObject()},o.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},l=function(t,e){var n;return(n={})[t]=e,n},s=function(t,e){var n,r,o;for(n in r=a(t),e)o=e[n],r[n]=o;return r},a=function(t,e){var n,r,o,i,a;for(i={},n=0,o=(a=Object.keys(t).sort()).length;o>n;n++)(r=a[n])!==e&&(i[r]=t[r]);return i},i=function(t){return t instanceof r.Hash?t:new r.Hash(t)},c=function(t){return t instanceof r.Hash?t.values:t},o}(r.Object)}.call(this),function(){r.ObjectGroup=function(){function t(t,e){var n,r;this.objects=null!=t?t:[],r=e.depth,(n=e.asTree)&&(this.depth=r,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,r,o,i,a,s,l,c,u;for(null==t&&(t=[]),o=(u=null!=e?e:{}).depth,(n=u.asTree)&&null==o&&(o=0),c=[],a=0,s=t.length;s>a;a++){if(l=t[a],i){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)&&("function"==typeof(r=i[i.length-1]).canBeGroupedWith?r.canBeGroupedWith(l,o):void 0)){i.push(l);continue}c.push(new this(i,{depth:o,asTree:n})),i=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)?i=[l]:c.push(l)}return i&&c.push(new this(i,{depth:o,asTree:n})),c},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,r,o;for(e=["objectGroup"],t=0,n=(o=this.getObjects()).length;n>t;t++)r=o[t],e.push(r.getCacheKey());return e.join("/")},t}()}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.ObjectMap=function(e){function n(t){var e,n,r,o,i;for(null==t&&(t=[]),this.objects={},r=0,o=t.length;o>r;r++)i=t[r],n=JSON.stringify(i),null==(e=this.objects)[n]&&(e[n]=i)}return t(n,e),n.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},n}(r.BasicObject)}.call(this),function(){r.ElementStore=function(){function t(t){this.reset(t)}var e;return t.prototype.add=function(t){var n;return n=e(t),this.elements[n]=t},t.prototype.remove=function(t){var n,r;return n=e(t),(r=this.elements[n])?(delete this.elements[n],r):void 0},t.prototype.reset=function(t){var e,n,r;for(null==t&&(t=[]),this.elements={},n=0,r=t.length;r>n;n++)e=t[n],this.add(e);return t},e=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Operation=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isPerforming=function(){return!0===this.performing},n.prototype.hasPerformed=function(){return!0===this.performed},n.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},n.prototype.hasFailed=function(){return this.performed&&!this.succeeded},n.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((t=this,function(e,n){return t.performing=!0,t.perform(function(r,o){return t.succeeded=r,t.performing=!1,t.performed=!0,t.succeeded?e(o):n(o)})}));var t},n.prototype.perform=function(t){return t(!1)},n.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},n.proxyMethod("getPromise().then"),n.proxyMethod("getPromise().catch"),n}(r.BasicObject)}.call(this),function(){var t,e,n,o,i,a={}.hasOwnProperty;r.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,o(t))},e.fromCodepoints=function(t){return new this(i(t),t)},e.prototype.offsetToUCS2Offset=function(t){return i(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return o(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(r.BasicObject),t=1===("function"==typeof Array.from?Array.from("ð¼").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" ð¼"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),o=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,r,o,i;for(o=[],e=0,r=t.length;r>e;)(i=t.charCodeAt(e++))>=55296&&56319>=i&&r>e&&(56320==(64512&(n=t.charCodeAt(e++)))?i=((1023&i)<<10)+(1023&n)+65536:e--),o.push(i);return o},i=n?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,n;return function(){var r,o,i;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],e="",n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),i.push(e+String.fromCharCode(n));return i}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){r.config.lang={bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Type a caption hereâ¦",captionPrompt:"Add a captionâ¦",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",urlPlaceholder:"Enter a URLâ¦",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){r.config.css={classNames:{attachment:{container:"attachment",typePrefix:"attachment-",caption:"caption",captionEdited:"caption-edited",captionEditor:"caption-editor",editingCaption:"caption-editing",progressBar:"progress",removeButton:"remove icon",size:"size"}}}}.call(this),function(){var t;r.config.blockAttributes=t={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(e){return r.tagName(e.parentNode)===t[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(e){return r.tagName(e.parentNode)===t[this.listAttribute].tagName}}}}.call(this),function(){var t,e;t=r.config.lang,e=[t.bytes,t.KB,t.MB,t.GB,t.TB,t.PB],r.config.fileSize={prefix:"IEC",precision:2,formatter:function(n){var r,o;switch(n){case 0:return"0 "+t.bytes;case 1:return"1 "+t.byte;default:return r=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),o=Math.floor(Math.log(n)/Math.log(r)),(n/Math.pow(r,o)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+e[o]}}}}.call(this),function(){r.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var e,n;return n="a:not("+r.AttachmentView.attachmentSelector+")",(e=r.findClosestElementFromNode(t,{matchingSelector:n}))?e.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var t,e,n,o,i;i="[data-trix-serialize=false]",o=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable"],n="["+(e="data-trix-serialized-attributes")+"]",t=new RegExp("\x3c!--block--\x3e","g"),r.extend({serializers:{"application/json":function(t){var e;if(t instanceof r.Document)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=r.Document.fromHTML(t.innerHTML)}return e.toSerializableDocument().toJSONString()},"text/html":function(a){var s,l,c,u,d,h,p,m,f,g,v,y,b,w,x,_,C;if(a instanceof r.Document)u=r.DocumentView.render(a);else{if(!(a instanceof HTMLElement))throw new Error("unserializable object");u=a.cloneNode(!0)}for(d=0,f=(w=u.querySelectorAll(i)).length;f>d;d++)(c=w[d]).parentNode.removeChild(c);for(h=0,g=o.length;g>h;h++)for(s=o[h],p=0,v=(x=u.querySelectorAll("["+s+"]")).length;v>p;p++)(c=x[p]).removeAttribute(s);for(m=0,y=(_=u.querySelectorAll(n)).length;y>m;m++){c=_[m];try{for(b in l=JSON.parse(c.getAttribute(e)),c.removeAttribute(e),l)C=l[b],c.setAttribute(b,C)}catch(t){}}return u.innerHTML.replace(t,"")}},deserializers:{"application/json":function(t){return r.Document.fromJSONString(t)},"text/html":function(t){return r.Document.fromHTML(t)}},serializeToContentType:function(t,e){var n;if(n=r.serializers[e])return n(t);throw new Error("unknown content type: "+e)},deserializeFromContentType:function(t,e){var n;if(n=r.deserializers[e])return n(t);throw new Error("unknown content type: "+e)}})}.call(this),function(){var t,e;e=r.makeFragment,t=r.config.lang,r.config.toolbar={content:e('<div class="button_row">\n  <span class="button_group text_tools">\n    <button type="button" class="icon bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'">'+t.bold+'</button>\n    <button type="button" class="icon italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'">'+t.italic+'</button>\n    <button type="button" class="icon strike" data-trix-attribute="strike" title="'+t.strike+'">'+t.strike+'</button>\n    <button type="button" class="icon link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'">'+t.link+'</button>\n  </span>\n\n  <span class="button_group block_tools">\n    <button type="button" class="icon heading-1" data-trix-attribute="heading1" title="'+t.heading1+'">'+t.heading1+'</button>\n    <button type="button" class="icon quote" data-trix-attribute="quote" title="'+t.quote+'">'+t.quote+'</button>\n    <button type="button" class="icon code" data-trix-attribute="code" title="'+t.code+'">'+t.code+'</button>\n    <button type="button" class="icon list bullets" data-trix-attribute="bullet" title="'+t.bullets+'">'+t.bullets+'</button>\n    <button type="button" class="icon list numbers" data-trix-attribute="number" title="'+t.numbers+'">'+t.numbers+'</button>\n    <button type="button" class="icon nesting-level decrease" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'">'+t.outdent+'</button>\n    <button type="button" class="icon nesting-level increase" data-trix-action="increaseNestingLevel" title="'+t.indent+'">'+t.indent+'</button>\n  </span>\n\n  <span class="button_group history_tools">\n    <button type="button" class="icon undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'">'+t.undo+'</button>\n    <button type="button" class="icon redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="dialogs">\n  <div class="dialog link_dialog" data-trix-attribute="href" data-trix-dialog="href">\n    <div class="link_url_fields">\n      <input type="url" required name="href" placeholder="'+t.urlPlaceholder+'">\n      <div class="button_group">\n        <input type="button" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>')}}.call(this),function(){r.config.undoInterval=5e3}.call(this),function(){var t,e;t=r.makeElement,e={cursorTarget:t({tagName:"span",textContent:r.ZERO_WIDTH_SPACE,data:{trixSelection:!0,trixCursorTarget:!0,trixSerialize:!1}})},r.extend({selectionElements:{selector:"[data-trix-selection]",cssText:"font-size: 0 !important;\npadding: 0 !important;\nmargin: 0 !important;\nborder: none !important;\nline-height: 0 !important;",create:function(t){return e[t].cloneNode(!0)}}})}.call(this),function(){}.call(this),function(){var t;t=r.cloneFragment,r.registerElement("trix-toolbar",{defaultCSS:"%t {\n  white-space: collapse;\n}\n\n%t .dialog {\n  display: none;\n}\n\n%t .dialog.active {\n  display: block;\n}\n\n%t .dialog input.validate:invalid {\n  background-color: #ffdddd;\n}\n\n%t[native] {\n  display: none;\n}",createdCallback:function(){return""===this.innerHTML?this.appendChild(t(r.config.toolbar.content)):void 0}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r.ObjectView=function(e){function o(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return t(o,e),o.prototype.getNodes=function(){var t,e,n,r,o;for(null==this.nodes&&(this.nodes=this.createNodes()),o=[],t=0,e=(r=this.nodes).length;e>t;t++)n=r[t],o.push(n.cloneNode(!0));return o},o.prototype.invalidate=function(){var t;return this.nodes=null,null!=(t=this.parentView)?t.invalidate():void 0},o.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},o.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},o.prototype.createChildView=function(t,e,n){var o;return null==n&&(n={}),e instanceof r.ObjectGroup&&(n.viewClass=t,t=r.ObjectGroupView),o=new t(e,n),this.recordChildView(o)},o.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,n.call(this.childViews,t)<0&&this.childViews.push(t),t},o.prototype.getAllChildViews=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.childViews).length;n>e;e++)t=r[e],o.push(t),o=o.concat(t.getAllChildViews());return o},o.prototype.findElement=function(){return this.findElementForObject(this.object)},o.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},o.prototype.findViewForObject=function(t){var e,n,r,o;for(e=0,n=(r=this.getAllChildViews()).length;n>e;e++)if((o=r[e]).object===t)return o},o.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},o.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},o.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},o.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},o.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},o.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},o.prototype.garbageCollectCachedViews=function(){var t,e,r,o,i,a;if(t=this.getViewCache()){for(e in a=this.getAllChildViews().concat(this),r=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)i=a[t],n.push(i.object.getCacheKey());return n}(),o=[],t)n.call(r,e)<0&&o.push(delete t[e]);return o}},o}(r.BasicObject)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.ObjectGroupView=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return t(n,e),n.prototype.getChildViews=function(){var t,e,n,r;if(!this.childViews.length)for(t=0,e=(r=this.objectGroup.getObjects()).length;e>t;t++)n=r[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},n.prototype.createNodes=function(){var t,e,n,r,o,i,a,s;for(t=this.createContainerElement(),e=0,r=(a=this.getChildViews()).length;r>e;e++)for(n=0,o=(s=a[e].getNodes()).length;o>n;n++)i=s[n],t.appendChild(i);return[t]},n.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},n}(r.ObjectView)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Controller=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(r.BasicObject)}.call(this),function(){var t,e,n,o,i,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=r.findClosestElementFromNode,n=r.nodeIsEmptyTextNode,e=r.nodeIsBlockStartComment,o=r.normalizeSpaces,i=r.summarizeStringChange,a=r.tagName,r.MutationObserver=function(r){function c(t){this.element=t,this.didMutate=s(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var d,h,p,m;return l(c,r),p="["+(h="data-trix-mutable")+"]",m={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},c.prototype.start=function(){return this.reset(),this.observer.observe(this.element,m)},c.prototype.stop=function(){return this.observer.disconnect()},c.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},c.prototype.reset=function(){return this.mutations=[]},c.prototype.findSignificantMutations=function(t){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],this.mutationIsSignificant(r)&&o.push(r);return o},c.prototype.mutationIsSignificant=function(t){var e,n,r,o;for(e=0,n=(o=this.nodesModifiedByMutation(t)).length;n>e;e++)if(r=o[e],this.nodeIsSignificant(r))return!0;return!1},c.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!n(t)},c.prototype.nodeIsMutable=function(e){return t(e,{matchingSelector:p})},c.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==h&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},c.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},c.prototype.getTextMutationSummary=function(){var t,e,n,r,o,i,a,s,l,c,d;for(n=(s=this.getTextChangesFromCharacterData()).additions,o=s.deletions,i=0,a=(l=(d=this.getTextChangesFromChildList()).additions).length;a>i;i++)e=l[i],u.call(n,e)<0&&n.push(e);return o.push.apply(o,d.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(r=o.join(""))&&(c.textDeleted=r),c},c.prototype.getMutationsByType=function(t){var e,n,r,o,i;for(i=[],e=0,n=(o=this.mutations).length;n>e;e++)(r=o[e]).type===t&&i.push(r);return i},c.prototype.getTextChangesFromChildList=function(){var t,n,r,i,a,s,l,c,u,h;for(t=[],l=[],n=0,i=(s=this.getMutationsByType("childList")).length;i>n;n++)a=s[n],t.push.apply(t,a.addedNodes),l.push.apply(l,a.removedNodes);return 0===t.length&&1===l.length&&e(l[0])?(u=[],h=["\n"]):(u=d(t),h=d(l)),{additions:function(){var t,e,n;for(n=[],r=t=0,e=u.length;e>t;r=++t)(c=u[r])!==h[r]&&n.push(o(c));return n}(),deletions:function(){var t,e,n;for(n=[],r=t=0,e=h.length;e>t;r=++t)(c=h[r])!==u[r]&&n.push(o(c));return n}()}},c.prototype.getTextChangesFromCharacterData=function(){var t,e,n,r,a,s,l,c;return(e=this.getMutationsByType("characterData")).length&&(c=e[0],n=e[e.length-1],a=o(c.oldValue),r=o(n.target.data),t=(s=i(a,r)).added,l=s.removed),{additions:t?[t]:[],deletions:l?[l]:[]}},d=function(t){var e,n,r,o;for(null==t&&(t=[]),o=[],e=0,n=t.length;n>e;e++)switch(r=t[e],r.nodeType){case Node.TEXT_NODE:o.push(r.data);break;case Node.ELEMENT_NODE:"br"===a(r)?o.push("\n"):o.push.apply(o,d(r.childNodes))}return o},c}(r.BasicObject)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.FileVerificationOperation=function(e){function n(t){this.file=t}return t(n,e),n.prototype.perform=function(t){var e,n;return(e=new FileReader).onerror=function(){return t(!1)},e.onload=(n=this,function(){e.onerror=null;try{e.abort()}catch(t){}return t(!0,n.file)}),e.readAsArrayBuffer(this.file)},n}(r.Operation)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.CompositionInput=function(e){function n(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return t(n,e),n.prototype.start=function(t){var e,n;return this.data.start=t,"keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0},n.prototype.update=function(t){var e;return this.data.update=t,(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},n.prototype.end=function(t){var e,n,r,o;return this.data.end=t,this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(r=this.responder)&&r.insertString(this.data.end),null!=(o=this.responder)?o.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0},n.prototype.getEndData=function(){return this.data.end},n.prototype.isEnded=function(){return null!=this.getEndData()},n.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&(null!=(e=this.data.end)?e.length:void 0)>0&&null!=this.range},n.proxyMethod("inputController.setInputSummary"),n.proxyMethod("inputController.requestRender"),n.proxyMethod("inputController.requestReparse"),n.proxyMethod("responder?.selectionIsExpanded"),n.proxyMethod("responder?.insertPlaceholder"),n.proxyMethod("responder?.selectPlaceholder"),n.proxyMethod("responder?.forgetPlaceholder"),n}(r.BasicObject)}.call(this),function(){var t,e,n,o,i,a,s,l,c,u,d,h,p=function(t,e){function n(){this.constructor=t}for(var r in e)m.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},m={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=r.handleEvent,c=r.makeElement,i=r.innerElementIsActive,u=r.objectsAreEqual,r.tagName,r.InputController=function(h){function m(t){var e;for(e in this.element=t,this.resetInputSummary(),this.mutationObserver=new r.MutationObserver(this.element),this.mutationObserver.delegate=this,this.events)o(e,{onElement:this.element,withCallback:this.handlerFor(e),inPhase:"capturing"})}var g;return p(m,h),g=0,m.keyNames={8:"backspace",9:"tab",13:"return",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},m.prototype.handlerFor=function(t){return e=this,function(n){return e.handleInput(function(){return i(this.element)?void 0:(this.eventName=t,this.events[t].call(this,n))})};var e},m.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},m.prototype.resetInputSummary=function(){return this.inputSummary={}},m.prototype.reset=function(){return this.resetInputSummary(),r.selectionChangeObserver.reset()},m.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},m.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},m.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},m.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},m.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},m.prototype.mutationIsExpected=function(t){var e,n,r,o,i,a,s,l,c;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,l="\n"===a&&!e,c="\n"===s&&!n,!!((l&&!c||c&&!l)&&(o=this.getSelectedRange())&&(r=l?-1:1,null!=(i=this.responder)?i.positionIsBlockBreak(o[1]+r):void 0))||e&&n)},m.prototype.mutationIsSignificant=function(t){var e,n,r;return r=Object.keys(t).length>0,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),r||!e},m.prototype.attachFiles=function(t){var e,n;return n=function(){var n,o,i;for(i=[],n=0,o=t.length;o>n;n++)e=t[n],i.push(new r.FileVerificationOperation(e));return i}(),Promise.all(n).then(function(t){return function(e){return t.handleInput(function(){var t,n;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(n=this.responder)&&n.insertFiles(e),this.requestRender()})}}(this))},m.prototype.events={keydown:function(t){var e,n,o,i,s,l,c,u,d;if(this.isComposing()||this.resetInputSummary(),i=this.constructor.keyNames[t.keyCode]){for(n=this.keys,o=0,l=(u=["ctrl","alt","shift","meta"]).length;l>o;o++)c=u[o],t[c+"Key"]&&("ctrl"===c&&(c="control"),n=null!=n?n[c]:void 0);null!=(null!=n?n[i]:void 0)&&(this.setInputSummary({keyName:i}),r.selectionChangeObserver.reset(),n[i].call(this,t))}return a(t)&&(e=String.fromCharCode(t.keyCode).toLowerCase())&&((s=function(){var e,n,r,o;for(o=[],e=0,n=(r=["alt","shift"]).length;n>e;e++)t[(c=r[e])+"Key"]&&o.push(c);return o}()).push(e),null!=(d=this.delegate)?d.inputControllerDidReceiveKeyboardCommand(s):void 0)?t.preventDefault():void 0},keypress:function(t){var e,n,r;if(null==this.inputSummary.eventName&&(!t.metaKey&&!t.ctrlKey||t.altKey)&&!l(t)&&!s(t))return null===t.which?e=String.fromCharCode(t.keyCode):0!==t.which&&0!==t.charCode&&(e=String.fromCharCode(t.charCode)),null!=e?(null!=(n=this.delegate)&&n.inputControllerWillPerformTyping(),null!=(r=this.responder)&&r.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,r,o;return e=t.data,(o=this.inputSummary.textAdded)&&o!==e&&o.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+o.length]),null!=(r=this.responder)&&r.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},u(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var e,n,o,i,a,s,l,c,u;return t.preventDefault(),o=null!=(a=t.dataTransfer)?a.files:void 0,i={x:t.clientX,y:t.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(i),(null!=o?o.length:void 0)?this.attachFiles(o):this.draggedRange?(null!=(l=this.delegate)&&l.inputControllerWillMoveText(),null!=(c=this.responder)&&c.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(e=r.Document.fromJSONString(n),null!=(u=this.responder)&&u.insertDocument(e),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e;return this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented?this.requestRender():void 0},copy:function(t){return this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(e){var o,i,a,s,l,c,u,h,p,m,v,y,b,w,x,_,C,k,T,A,j,M;return l=null!=(u=e.clipboardData)?u:e.testClipboardData,c={paste:l},null==l||d(e)?void this.getPastedHTMLUsingHiddenElement(function(t){return function(e){var n,r,o;return c.html=e,null!=(n=t.delegate)&&n.inputControllerWillPasteText(c),null!=(r=t.responder)&&r.insertHTML(e),t.requestRender(),null!=(o=t.delegate)?o.inputControllerDidPaste(c):void 0}}(this)):((a=l.getData("URL"))?(M=l.getData("public.url-name")||a,c.string=M,this.setInputSummary({textAdded:M,didDelete:this.selectionIsExpanded()}),null!=(h=this.delegate)&&h.inputControllerWillPasteText(c),null!=(w=this.responder)&&w.insertText(r.Text.textForStringWithAttributes(M,{href:a})),this.requestRender(),null!=(x=this.delegate)&&x.inputControllerDidPaste(c)):t(l)?(M=l.getData("text/plain"),c.string=M,this.setInputSummary({textAdded:M,didDelete:this.selectionIsExpanded()}),null!=(_=this.delegate)&&_.inputControllerWillPasteText(c),null!=(C=this.responder)&&C.insertString(M),this.requestRender(),null!=(k=this.delegate)&&k.inputControllerDidPaste(c)):(s=l.getData("text/html"))?(c.html=s,null!=(T=this.delegate)&&T.inputControllerWillPasteText(c),null!=(A=this.responder)&&A.insertHTML(s),this.requestRender(),null!=(j=this.delegate)&&j.inputControllerDidPaste(c)):f.call(l.types,"Files")>=0&&(i=null!=(p=l.items)&&null!=(m=p[0])&&"function"==typeof m.getAsFile?m.getAsFile():void 0)&&(!i.name&&(o=n(i))&&(i.name="pasted-file-"+ ++g+"."+o),c.file=i,null!=(v=this.delegate)&&v.inputControllerWillAttachFiles(),null!=(y=this.responder)&&y.insertFile(i),this.requestRender(),null!=(b=this.delegate)&&b.inputControllerDidPaste(c)),e.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},input:function(t){return t.stopPropagation()}},m.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},delete:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},return:function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{return:function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},m.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},m.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new r.CompositionInput(this)},m.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},m.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},m.prototype.serializeSelectionToDataTransfer=function(t){var n,o;if(e(t))return n=null!=(o=this.responder)?o.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(n)),t.setData("text/html",r.DocumentView.render(n).innerHTML),t.setData("text/plain",n.toString().replace(/\n$/,"")),!0},m.prototype.canAcceptDataTransfer=function(t){var e,n,r,o,i;for(i={},e=0,n=(o=null!=(r=null!=t?t.types:void 0)?r:[]).length;n>e;e++)i[o[e]]=!0;return i.Files||i["application/x-trix-document"]||i["text/html"]||i["text/plain"]},m.prototype.getPastedHTMLUsingHiddenElement=function(t){var e,n,r;return n=this.getSelectedRange(),r={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},e=c({style:r,tagName:"div",editable:!0}),document.body.appendChild(e),e.focus(),requestAnimationFrame(function(r){return function(){var o;return o=e.innerHTML,document.body.removeChild(e),r.setSelectedRange(n),t(o)}}(this))},m.proxyMethod("responder?.getSelectedRange"),m.proxyMethod("responder?.setSelectedRange"),m.proxyMethod("responder?.expandSelectionInDirection"),m.proxyMethod("responder?.selectionIsInCursorTarget"),m.proxyMethod("responder?.selectionIsExpanded"),m}(r.BasicObject),n=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},l=function(t){return t.metaKey&&t.altKey&&!t.shiftKey&&94===t.keyCode},s=function(t){return t.metaKey&&t.altKey&&t.shiftKey&&9674===t.keyCode},a=function(t){return/Mac|^iP/.test(navigator.platform)?t.metaKey:t.ctrlKey},d=function(t){var e,n;return(n=null!=(e=t.clipboardData)?e.types:void 0)?f.call(n,"text/html")<0&&(f.call(n,"com.apple.webarchive")>=0||f.call(n,"com.apple.flat-rtfd")>=0):void 0},t=function(t){var e,n,r;return r=t.getData("text/plain"),n=t.getData("text/html"),r&&n?((e=c("div")).innerHTML=n,e.textContent===r?!e.querySelector(":not(meta)"):void 0):null!=r?r.length:void 0},h={"application/x-trix-feature-detection":"test"},e=function(t){var e,n;if(null!=(null!=t?t.setData:void 0)){for(e in h)if(n=h[e],t.setData(e,n),t.getData(e)!==n)return;return!0}}}.call(this),function(){var t,e,n,o,i,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;e=r.handleEvent,i=r.makeElement,a=r.tagName,n=r.InputController.keyNames,o=r.config.lang,t=r.config.css.classNames,r.AttachmentEditorController=function(r){function c(t,e,n){this.attachmentPiece=t,this.element=e,this.container=n,this.uninstall=s(this.uninstall,this),this.didKeyDownCaption=s(this.didKeyDownCaption,this),this.didChangeCaption=s(this.didChangeCaption,this),this.didClickCaption=s(this.didClickCaption,this),this.didClickRemoveButton=s(this.didClickRemoveButton,this),this.attachment=this.attachmentPiece.attachment,"a"===a(this.element)&&(this.element=this.element.firstChild),this.install()}var u;return l(c,r),u=function(t){return function(){var e;return(e=t.apply(this,arguments)).do(),null==this.undos&&(this.undos=[]),this.undos.push(e.undo)}},c.prototype.install=function(){return this.makeElementMutable(),this.attachment.isPreviewable()&&this.makeCaptionEditable(),this.addRemoveButton()},c.prototype.makeElementMutable=u(function(){return{do:(t=this,function(){return t.element.dataset.trixMutable=!0}),undo:function(t){return function(){return delete t.element.dataset.trixMutable}}(this)};var t}),c.prototype.makeCaptionEditable=u(function(){var t,n,r;return t=this.element.querySelector("figcaption"),n=null,{do:(r=this,function(){return n=e("click",{onElement:t,withCallback:r.didClickCaption,inPhase:"capturing"})}),undo:function(){return n.destroy()}}}),c.prototype.addRemoveButton=u(function(){var n;return n=i({tagName:"button",textContent:o.remove,className:t.attachment.removeButton,attributes:{type:"button",title:o.remove},data:{trixMutable:!0}}),e("click",{onElement:n,withCallback:this.didClickRemoveButton}),{do:function(t){return function(){return t.element.appendChild(n)}}(this),undo:function(t){return function(){return t.element.removeChild(n)}}(this)}}),c.prototype.editCaption=u(function(){var n,r,a,s,l;return(s=i({tagName:"textarea",className:t.attachment.captionEditor,attributes:{placeholder:o.captionPlaceholder}})).value=this.attachmentPiece.getCaption(),(l=s.cloneNode()).classList.add("trix-autoresize-clone"),n=function(){return l.value=s.value,s.style.height=l.scrollHeight+"px"},e("input",{onElement:s,withCallback:n}),e("keydown",{onElement:s,withCallback:this.didKeyDownCaption}),e("change",{onElement:s,withCallback:this.didChangeCaption}),e("blur",{onElement:s,withCallback:this.uninstall}),a=this.element.querySelector("figcaption"),r=a.cloneNode(),{do:function(){return a.style.display="none",r.appendChild(s),r.appendChild(l),r.classList.add(t.attachment.editingCaption),a.parentElement.insertBefore(r,a),n(),s.focus()},undo:function(){return r.parentNode.removeChild(r),a.style.display=null}}}),c.prototype.didClickRemoveButton=function(t){var e;return t.preventDefault(),t.stopPropagation(),null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},c.prototype.didClickCaption=function(t){return t.preventDefault(),this.editCaption()},c.prototype.didChangeCaption=function(t){var e,n,r;return(e=t.target.value.replace(/\s/g," ").trim())?null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestUpdatingAttributesForAttachment?n.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:e},this.attachment):void 0:null!=(r=this.delegate)&&"function"==typeof r.attachmentEditorDidRequestRemovingAttributeForAttachment?r.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0},c.prototype.didKeyDownCaption=function(t){var e;return"return"===n[t.keyCode]?(t.preventDefault(),this.didChangeCaption(t),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},c.prototype.uninstall=function(){for(var t,e;e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},c}(r.BasicObject)}.call(this),function(){var t,e,n,o,i=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=r.makeElement,o=r.selectionElements,t=r.config.css.classNames,r.AttachmentView=function(r){function a(){a.__super__.constructor.apply(this,arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}return i(a,r),a.attachmentSelector="[data-trix-attachment]",a.prototype.createContentNodes=function(){return[]},a.prototype.createNodes=function(){var e,r,i,a,s,l,c,u,d,h,p;if(a=n({tagName:"figure",className:this.getClassName()}),this.attachment.hasContent())a.innerHTML=this.attachment.getContent();else for(l=0,u=(h=this.createContentNodes()).length;u>l;l++)d=h[l],a.appendChild(d);for(c in a.appendChild(this.createCaptionElement()),r={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(e=this.attachmentPiece.getAttributesForAttachment()).isEmpty()||(r.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(this.progressElement=n({tagName:"progress",attributes:{class:t.attachment.progressBar,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),a.appendChild(this.progressElement),r.trixSerialize=!1),(s=this.getHref())?(i=n("a",{href:s})).appendChild(a):i=a,r)p=r[c],i.dataset[c]=p;return i.setAttribute("contenteditable",!1),[o.create("cursorTarget"),i,o.create("cursorTarget")]},a.prototype.createCaptionElement=function(){var e,r,o,i,a;return r=n({tagName:"figcaption",className:t.attachment.caption}),(e=this.attachmentPiece.getCaption())?(r.classList.add(t.attachment.captionEdited),r.textContent=e):(o=this.attachment.getFilename())&&(r.textContent=o,(i=this.attachment.getFormattedFilesize())&&(r.appendChild(document.createTextNode(" ")),a=n({tagName:"span",className:t.attachment.size,textContent:i}),r.appendChild(a))),r},a.prototype.getClassName=function(){var e,n;return n=[t.attachment.container,""+t.attachment.typePrefix+this.attachment.getType()],(e=this.attachment.getExtension())&&n.push(e),n.join(" ")},a.prototype.getHref=function(){return e(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},a.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},a.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},a}(r.ObjectView),e=function(t,e){var r;return(r=n("div")).innerHTML=null!=t?t:"",r.querySelector(e)}}.call(this),function(){var t,e=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=r.makeElement,r.PreviewableAttachmentView=function(n){function r(){r.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return e(r,n),r.prototype.createContentNodes=function(){return this.image=t({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},r.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},r.prototype.updateAttributesForImage=function(t){var e,n,r,o,i,a;return i=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||i,n===i?t.removeAttribute("data-trix-serialized-attributes"):(r=JSON.stringify({src:i}),t.setAttribute("data-trix-serialized-attributes",r)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=o},r.prototype.attachmentDidChangePreviewURL=function(){return this.refresh(this.image),this.refresh()},r}(r.AttachmentView)}.call(this),function(){var t,e,n,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=r.makeElement,t=r.findInnerElement,e=r.getTextConfig,r.PieceView=function(i){function a(){var t;a.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var s;return o(a,i),a.prototype.createNodes=function(){var e,n,r,o,i,a;if(a=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement()){for(r=t(e),n=0,o=a.length;o>n;n++)i=a[n],r.appendChild(i);a=[e]}return a},a.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?r.PreviewableAttachmentView:r.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},a.prototype.createStringNodes=function(){var t,e,r,o,i,a,s,l,c;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(a=[],r=e=0,o=(l=this.string.split("\n")).length;o>e;r=++e)c=l[r],r>0&&(t=n("br"),a.push(t)),c.length&&(i=document.createTextNode(this.preserveSpaces(c)),a.push(i));return a},a.prototype.createElement=function(){var t,r,o,i,a,s,l,c;for(i in this.attributes)if((t=e(i))&&(t.tagName&&(a=n(t.tagName),o?(o.appendChild(a),o=a):r=o=a),t.style))if(l)for(i in s=t.style)c=s[i],l[i]=c;else l=t.style;if(l)for(i in null==r&&(r=n("span")),l)c=l[i],r.style[i]=c;return r},a.prototype.createContainerElement=function(){var t,r,o,i,a;for(o in i=this.attributes)if(a=i[o],(r=e(o))&&r.groupTagName)return(t={})[o]=a,n(r.groupTagName,t)},s=r.NON_BREAKING_SPACE,a.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+s+" $2").replace(/\ {2}/g,s+" ").replace(/\ {2}/g," "+s),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,s)),t},a}(r.ObjectView)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.TextView=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var o;return t(n,e),n.prototype.createNodes=function(){var t,e,n,i,a,s,l,c,u,d;for(s=[],i=(c=r.ObjectGroup.groupObjects(this.getPieces())).length-1,n=e=0,a=c.length;a>e;n=++e)l=c[n],t={},0===n&&(t.isFirst=!0),n===i&&(t.isLast=!0),o(u)&&(t.followsWhitespace=!0),d=this.findOrCreateCachedChildView(r.PieceView,l,{textConfig:this.textConfig,context:t}),s.push.apply(s,d.getNodes()),u=l;return s},n.prototype.getPieces=function(){var t,e,n,r,o;for(o=[],t=0,e=(r=this.text.getPieces()).length;e>t;t++)(n=r[t]).hasAttribute("blockBreak")||o.push(n);return o},o=function(t){return/\s$/.test(null!=t?t.toString():void 0)},n}(r.ObjectView)}.call(this),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=r.makeElement,t=r.getBlockConfig,r.BlockView=function(o){function i(){i.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return n(i,o),i.prototype.createNodes=function(){var n,o,i,a,s,l,c,u;if(s=[document.createComment("block")],this.block.isEmpty()?s.push(e("br")):(c=null!=(l=t(this.block.getLastAttribute()))?l.text:void 0,u=this.findOrCreateCachedChildView(r.TextView,this.block.text,{textConfig:c}),s.push.apply(s,u.getNodes()),this.shouldAddExtraNewlineElement()&&s.push(e("br"))),this.attributes.length)return s;for(n=e(r.config.blockAttributes.default.tagName),o=0,i=s.length;i>o;o++)a=s[o],n.appendChild(a);return[n]},i.prototype.createContainerElement=function(n){var r,o;return r=this.attributes[n],o=t(r),e(o.tagName)},i.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},i}(r.ObjectView)}.call(this),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=r.defer,e=r.makeElement,r.DocumentView=function(o){function i(){i.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new r.ElementStore,this.setDocument(this.object)}var a,s,l;return n(i,o),i.render=function(t){var n,r;return(r=new this(t,{element:n=e("div")})).render(),r.sync(),n},i.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},i.prototype.render=function(){var t,n,o,i,a,s,l;if(this.childViews=[],this.shadowElement=e("div"),!this.document.isEmpty()){for(s=[],t=0,n=(a=r.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;n>t;t++)i=a[t],l=this.findOrCreateCachedChildView(r.BlockView,i),s.push(function(){var t,e,n,r;for(r=[],t=0,e=(n=l.getNodes()).length;e>t;t++)o=n[t],r.push(this.shadowElement.appendChild(o));return r}.call(this));return s}},i.prototype.isSynced=function(){return a(this.shadowElement,this.element)},i.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},i.prototype.didSync=function(){return this.elementStore.reset(s(this.element)),t(function(t){return function(){return t.garbageCollectCachedViews()}}(this))},i.prototype.createDocumentFragmentForSync=function(){var t,e,n,r,o,i,a,l,c,u;for(e=document.createDocumentFragment(),n=0,o=(l=this.shadowElement.childNodes).length;o>n;n++)a=l[n],e.appendChild(a.cloneNode(!0));for(r=0,i=(c=s(e)).length;i>r;r++)t=c[r],(u=this.elementStore.remove(t))&&t.parentNode.replaceChild(u,t);return e},s=function(t){return t.querySelectorAll("[data-trix-store-key]")},a=function(t,e){return l(t.innerHTML)===l(e.innerHTML)},l=function(t){return t.replace(/&nbsp;/g," ")},i}(r.ObjectView)}.call(this),function(){var t,e,n,o,i=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r.handleEvent,o=r.innerElementIsActive,e=r.defer,t=r.AttachmentView.attachmentSelector,r.CompositionController=function(s){function l(e,o){this.element=e,this.composition=o,this.didClickAttachment=i(this.didClickAttachment,this),this.didBlur=i(this.didBlur,this),this.didFocus=i(this.didFocus,this),this.documentView=new r.DocumentView(this.composition.document,{element:this.element}),n("focus",{onElement:this.element,withCallback:this.didFocus}),n("blur",{onElement:this.element,withCallback:this.didBlur}),n("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),n("mousedown",{onElement:this.element,matchingSelector:t,withCallback:this.didClickAttachment}),n("click",{onElement:this.element,matchingSelector:"a"+t,preventDefault:!0})}return a(l,s),l.prototype.didFocus=function(){var t,e,n;return t=function(t){return function(){var e;return t.focused?void 0:(t.focused=!0,null!=(e=t.delegate)&&"function"==typeof e.compositionControllerDidFocus?e.compositionControllerDidFocus():void 0)}}(this),null!=(e=null!=(n=this.blurPromise)?n.then(t):void 0)?e:t()},l.prototype.didBlur=function(){return this.blurPromise=new Promise((t=this,function(n){return e(function(){var e;return o(t.element)||(t.focused=null,null!=(e=t.delegate)&&"function"==typeof e.compositionControllerDidBlur&&e.compositionControllerDidBlur()),t.blurPromise=null,n()})}));var t},l.prototype.didClickAttachment=function(t,e){var n,r;return n=this.findAttachmentForElement(e),null!=(r=this.delegate)&&"function"==typeof r.compositionControllerDidSelectAttachment?r.compositionControllerDidSelectAttachment(n):void 0},l.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.documentView.isSynced()||(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),this.reinstallAttachmentEditor(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},l.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},l.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},l.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},l.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},l.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},l.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},l.prototype.installAttachmentEditorForAttachment=function(t){var e,n,o;if((null!=(o=this.attachmentEditor)?o.attachment:void 0)!==t&&(n=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),e=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new r.AttachmentEditorController(e,n,this.element),this.attachmentEditor.delegate=this},l.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},l.prototype.reinstallAttachmentEditor=function(){var t;return this.attachmentEditor?(t=this.attachmentEditor.attachment,this.uninstallAttachmentEditor(),this.installAttachmentEditorForAttachment(t)):void 0},l.prototype.editAttachmentCaption=function(){var t;return null!=(t=this.attachmentEditor)?t.editCaption():void 0},l.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},l.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},l.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},l.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},l.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},l.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},l}(r.BasicObject)}.call(this),function(){var t,e,n,o=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;e=r.handleEvent,n=r.triggerEvent,t=r.findClosestElementFromNode,r.ToolbarController=function(r){function a(t){this.element=t,this.didKeyDownDialogInput=o(this.didKeyDownDialogInput,this),this.didClickDialogButton=o(this.didClickDialogButton,this),this.didClickAttributeButton=o(this.didClickAttributeButton,this),this.didClickActionButton=o(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),e("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),e("mousedown",{onElement:this.element,matchingSelector:c,withCallback:this.didClickAttributeButton}),e("click",{onElement:this.element,matchingSelector:v,preventDefault:!0}),e("click",{onElement:this.element,matchingSelector:u,withCallback:this.didClickDialogButton}),e("keydown",{onElement:this.element,matchingSelector:d,withCallback:this.didKeyDownDialogInput})}var s,l,c,u,d,h,p,m,f,g,v;return i(a,r),v=[s="button[data-trix-action]",c="button[data-trix-attribute]"].join(", "),l=(h=".dialog[data-trix-dialog]")+".active",u=h+" input[data-trix-method]",d=h+" input[type=text], "+h+" input[type=url]",a.prototype.didClickActionButton=function(t,e){var n,r,o;return null!=(r=this.delegate)&&r.toolbarDidClickButton(),t.preventDefault(),n=p(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)?o.toolbarDidInvokeAction(n):void 0},a.prototype.didClickAttributeButton=function(t,e){var n,r,o;return null!=(r=this.delegate)&&r.toolbarDidClickButton(),t.preventDefault(),n=m(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)&&o.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},a.prototype.didClickDialogButton=function(e,n){var r;return r=t(n,{matchingSelector:h}),this[n.getAttribute("data-trix-method")].call(this,r)},a.prototype.didKeyDownDialogInput=function(t,e){var n,r;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),r=this.getDialog(n),this.setAttribute(r)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},a.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},a.prototype.refreshActionButtons=function(){return this.eachActionButton((t=this,function(e,n){return e.disabled=!1===t.actions[n]}));var t},a.prototype.eachActionButton=function(t){var e,n,r,o,i;for(i=[],n=0,r=(o=this.element.querySelectorAll(s)).length;r>n;n++)e=o[n],i.push(t(e,p(e)));return i},a.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},a.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((t=this,function(e,n){return e.disabled=!1===t.attributes[n],t.attributes[n]||t.dialogIsVisible(n)?e.classList.add("active"):e.classList.remove("active")}));var t},a.prototype.eachAttributeButton=function(t){var e,n,r,o,i;for(i=[],n=0,r=(o=this.element.querySelectorAll(c)).length;r>n;n++)e=o[n],i.push(t(e,m(e)));return i},a.prototype.applyKeyboardCommand=function(t){var e,r,o,i,a,s;for(i=JSON.stringify(t.sort()),o=0,a=(s=this.element.querySelectorAll("[data-trix-key]")).length;a>o;o++)if(r=(e=s[o]).getAttribute("data-trix-key").split("+"),JSON.stringify(r.sort())===i)return n("mousedown",{onElement:e}),!0;return!1},a.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.classList.contains("active"):void 0},a.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},a.prototype.showDialog=function(t){var e,n,r,o,i,a,s,l,c;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).classList.add("active"),r=0,i=(s=n.querySelectorAll("input[disabled]")).length;i>r;r++)s[r].removeAttribute("disabled");return(e=m(n))&&(o=g(n,t))&&(o.value=null!=(l=this.attributes[e])?l:"http://",o.select()),null!=(c=this.delegate)?c.toolbarDidShowDialog(t):void 0},a.prototype.setAttribute=function(t){var e,n,r;return e=m(t),(n=g(t,e)).willValidate&&!n.checkValidity()?(n.classList.add("validate"),n.focus()):(null!=(r=this.delegate)&&r.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},a.prototype.removeAttribute=function(t){var e,n;return e=m(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},a.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(l))?(t.classList.remove("active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(f(t)):void 0):void 0},a.prototype.resetDialogInputs=function(){var t,e,n,r,o;for(o=[],t=0,n=(r=this.element.querySelectorAll(d)).length;n>t;t++)(e=r[t]).setAttribute("disabled","disabled"),o.push(e.classList.remove("validate"));return o},a.prototype.getDialog=function(t){return this.element.querySelector(".dialog[data-trix-dialog="+t+"]")},g=function(t,e){return null==e&&(e=m(t)),t.querySelector("input[name='"+e+"']")},p=function(t){return t.getAttribute("data-trix-action")},m=function(t){return t.getAttribute("data-trix-attribute")},f=function(t){return t.getAttribute("data-trix-dialog")},a}(r.BasicObject)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.ImagePreloadOperation=function(e){function n(t){this.url=t}return t(n,e),n.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},n}(r.Operation)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;r.Attachment=function(n){function o(e){null==e&&(e={}),this.releaseFile=t(this.releaseFile,this),o.__super__.constructor.apply(this,arguments),this.attributes=r.Hash.box(e),this.didChangeAttributes()}return e(o,n),o.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,o.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},o.attributesForFile=function(t){return new r.Hash({filename:t.name,filesize:t.size,contentType:t.type})},o.fromJSON=function(t){return new this(t)},o.prototype.getAttribute=function(t){return this.attributes.get(t)},o.prototype.hasAttribute=function(t){return this.attributes.has(t)},o.prototype.getAttributes=function(){return this.attributes.toObject()},o.prototype.setAttributes=function(t){var e,n;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangeAttributes?n.attachmentDidChangeAttributes(this):void 0)},o.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},o.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},o.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},o.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},o.prototype.getURL=function(){return this.attributes.get("url")},o.prototype.getHref=function(){return this.attributes.get("href")},o.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},o.prototype.getFilesize=function(){return this.attributes.get("filesize")},o.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?r.config.fileSize.formatter(t):""},o.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},o.prototype.getContentType=function(){return this.attributes.get("contentType")},o.prototype.hasContent=function(){return this.attributes.has("content")},o.prototype.getContent=function(){return this.attributes.get("content")},o.prototype.getWidth=function(){return this.attributes.get("width")},o.prototype.getHeight=function(){return this.attributes.get("height")},o.prototype.getFile=function(){return this.file},o.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},o.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},o.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},o.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},o.prototype.toJSON=function(){return this.getAttributes()},o.prototype.getCacheKey=function(){return[o.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},o.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},o.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangePreviewURL&&e.attachmentDidChangePreviewURL(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},o.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},o.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},o.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},o.prototype.preload=function(t,e){return t&&t!==this.getPreviewURL()?(this.preloadingURL=t,new r.ImagePreloadOperation(t).then(function(n){return function(r){var o,i;return i=r.width,o=r.height,n.setAttributes({width:i,height:o}),n.preloadingURL=null,n.setPreviewURL(t),"function"==typeof e?e():void 0}}(this))):void 0},o}(r.Object)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Piece=function(e){function n(t,e){null==e&&(e={}),n.__super__.constructor.apply(this,arguments),this.attributes=r.Hash.box(e)}return t(n,e),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var t,e,n;return(n=pieceList.getPieceAtIndex(0))?(t=n.attributes,e=t.getKeys(),pieceList.eachPiece(function(n){return e=t.getKeysCommonToHash(n.attributes),t=t.slice(e)}),t.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(r.Object)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Piece.registerType("attachment",r.AttachmentPiece=function(e){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href")}return t(n,e),n.fromJSON=function(t){return new this(r.Attachment.fromJSON(t.attachment),t.attributes)},n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)&&this.attachment.hasAttribute(t)?this.attributes=this.attributes.remove(t):void 0},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.getAttributesForAttachment=function(){return this.attributes.slice(["caption"])},n.prototype.canBeGrouped=function(){return n.__super__.canBeGrouped.apply(this,arguments)&&!this.attachment.hasAttribute("href")},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return r.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(r.Piece))}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Piece.registerType("string",r.StringPiece=function(e){function n(t){n.__super__.constructor.apply(this,arguments),this.string=t,this.length=this.string.length}return t(n,e),n.fromJSON=function(t){return new this(t.string,t.attributes)},n.prototype.getValue=function(){return this.string},n.prototype.toString=function(){return this.string.toString()},n.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).string=this.string,t},n.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},n.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},n.prototype.toConsole=function(){var t;return(t=this.string).length>15&&(t=t.slice(0,14)+"â¦"),JSON.stringify(t.toString())},n}(r.Piece))}.call(this),function(){var t,e=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].slice;t=r.spliceArray,r.SplittableList=function(n){function r(t){null==t&&(t=[]),r.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var i,a,s;return e(r,n),r.box=function(t){return t instanceof this?t:new this(t)},r.prototype.indexOf=function(t){return this.objects.indexOf(t)},r.prototype.splice=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],new this.constructor(t.apply(null,[this.objects].concat(o.call(e))))},r.prototype.eachObject=function(t){var e,n,r,o,i,a;for(a=[],n=e=0,r=(i=this.objects).length;r>e;n=++e)o=i[n],a.push(t(o,n));return a},r.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},r.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(o.call(t.objects)))},r.prototype.insertSplittableListAtPosition=function(t,e){var n,r,o;return r=(o=this.splitObjectAtPosition(e))[0],n=o[1],new this.constructor(r).insertSplittableListAtIndex(t,n)},r.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},r.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},r.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},r.prototype.getObjectAtIndex=function(t){return this.objects[t]},r.prototype.getSplittableListInRange=function(t){var e,n,r,o;return n=(r=this.splitObjectsAtRange(t))[0],e=r[1],o=r[2],new this.constructor(n.slice(e,o+1))},r.prototype.selectSplittableList=function(t){var e,n;return n=function(){var n,r,o,i;for(i=[],n=0,r=(o=this.objects).length;r>n;n++)e=o[n],t(e)&&i.push(e);return i}.call(this),new this.constructor(n)},r.prototype.removeObjectsInRange=function(t){var e,n,r,o;return n=(r=this.splitObjectsAtRange(t))[0],e=r[1],o=r[2],new this.constructor(n).splice(e,o-e+1)},r.prototype.transformObjectsInRange=function(t,e){var n,r,o,i,a,s,l;return a=this.splitObjectsAtRange(t),i=a[0],r=a[1],s=a[2],l=function(){var t,a,l;for(l=[],n=t=0,a=i.length;a>t;n=++t)o=i[n],l.push(n>=r&&s>=n?e(o):o);return l}(),new this.constructor(l)},r.prototype.splitObjectsAtRange=function(t){var e,n,r,o,a;return n=(o=this.splitObjectAtPosition(s(t)))[0],e=o[1],r=o[2],[n=(a=new this.constructor(n).splitObjectAtPosition(i(t)+r))[0],e,a[1]-1]},r.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},r.prototype.splitObjectAtPosition=function(t){var e,n,r,o,i,a,s,l,c;return e=(i=this.findIndexAndOffsetAtPosition(t)).index,o=i.offset,r=this.objects.slice(0),null!=e?0===o?(l=e,c=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(o))[0],s=a[1],r.splice(e,1,n,s),l=e+1,c=n.getLength()-o):(l=r.length,c=0),[r,l,c]},r.prototype.consolidate=function(){var t,e,n,r,o,i;for(r=[],o=this.objects[0],t=0,e=(i=this.objects.slice(1)).length;e>t;t++)n=i[t],("function"==typeof o.canBeConsolidatedWith?o.canBeConsolidatedWith(n):void 0)?o=o.consolidateWith(n):(r.push(o),o=n);return null!=o&&r.push(o),new this.constructor(r)},r.prototype.consolidateFromIndexToIndex=function(t,e){var n,r;return r=this.objects.slice(0).slice(t,e+1),n=new this.constructor(r).consolidate().toArray(),this.splice.apply(this,[t,r.length].concat(o.call(n)))},r.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,r,o,i,a;for(e=0,r=n=0,o=(a=this.objects).length;o>n;r=++n){if(i=e+a[r].getLength(),t>=e&&i>t)return{index:r,offset:t-e};e=i}return{index:null,offset:null}},r.prototype.findPositionAtIndexAndOffset=function(t,e){var n,r,o,i,a,s;for(a=0,n=r=0,o=(s=this.objects).length;o>r;n=++r)if(i=s[n],t>n)a+=i.getLength();else if(n===t){a+=e;break}return a},r.prototype.getEndPosition=function(){var t,e;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var n,r,o;for(e=0,n=0,r=(o=this.objects).length;r>n;n++)t=o[n],e+=t.getLength();return e}.call(this)},r.prototype.toString=function(){return this.objects.join("")},r.prototype.toArray=function(){return this.objects.slice(0)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.isEqualTo=function(t){return r.__super__.isEqualTo.apply(this,arguments)||a(this.objects,null!=t?t.objects:void 0)},a=function(t,e){var n,r,o,i,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,r=n=0,o=t.length;o>n;r=++n)i=t[r],a&&!i.isEqualTo(e[r])&&(a=!1);return a},r.prototype.contentsForInspection=function(){var t;return{objects:"["+function(){var e,n,r,o;for(o=[],e=0,n=(r=this.objects).length;n>e;e++)t=r[e],o.push(t.inspect());return o}.call(this).join(", ")+"]"}},s=function(t){return t[0]},i=function(t){return t[1]},r}(r.Object)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.Text=function(e){function n(t){var e;null==t&&(t=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new r.SplittableList(function(){var n,r,o;for(o=[],n=0,r=t.length;r>n;n++)(e=t[n]).isEmpty()||o.push(e);return o}())}return t(n,e),n.textForAttachmentWithAttributes=function(t,e){return new this([new r.AttachmentPiece(t,e)])},n.textForStringWithAttributes=function(t,e){return new this([new r.StringPiece(t,e)])},n.fromJSON=function(t){var e;return new this(function(){var n,o,i;for(i=[],n=0,o=t.length;o>n;n++)e=t[n],i.push(r.Piece.fromJSON(e));return i}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(t){var e,n;return n=function(){var n,r,o,i,a;for(a=[],n=0,r=(o=this.getPieces()).length;r>n;n++)e=o[n],a.push(null!=(i=t.find(e))?i:e);return a}.call(this),new this.constructor(n)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var n,r;if(!(t[0]<=e&&e<=t[1]))return n=(r=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(r,e)},n.prototype.addAttributeAtRange=function(t,e,n){var r;return(r={})[t]=e,this.addAttributesAtRange(r,n)},n.prototype.addAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAdditionalAttributes(t)}))},n.prototype.removeAttributeAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithoutAttribute(t)}))},n.prototype.setAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAttributes(t)}))},n.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,e;return t=function(){var t,n,r,o;for(o=[],t=0,n=(r=this.pieceList.toArray()).length;n>t;t++)e=r[t],o.push(e.getAttributes());return o}.call(this),r.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,r,o;for(n=o=e,r=this.getLength();n>0&&this.getCommonAttributesAtRange([n-1,o])[t];)n--;for(;r>o&&this.getCommonAttributesAtRange([e,o+1])[t];)o++;return[n,o]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,n,r,o;for(o=[],t=0,e=(r=this.pieceList.toArray()).length;e>t;t++)null!=(n=r[t]).attachment&&o.push(n);return o},n.prototype.getAttachments=function(){var t,e,n,r,o;for(o=[],t=0,e=(r=this.getAttachmentPieces()).length;e>t;t++)n=r[t],o.push(n.attachment);return o},n.prototype.getAttachmentAndPositionById=function(t){var e,n,r,o,i,a;for(o=0,e=0,n=(i=this.pieceList.toArray()).length;n>e;e++){if((null!=(a=(r=i[e]).attachment)?a.id:void 0)===t)return{attachment:r.attachment,position:o};o+=r.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},n.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,r,o;for(o=[],e=0,n=(r=this.pieceList.toArray()).length;n>e;e++)t=r[e],o.push(JSON.parse(t.toConsole()));return o}.call(this))},n}(r.Object)}.call(this),function(){var t,e,n,o,i=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=r.arraysAreEqual,o=r.spliceArray,e=r.getBlockConfig,r.getBlockAttributeNames,n=r.getListAttributeNames,r.Block=function(a){function c(t,e){null==t&&(t=new r.Text),null==e&&(e=[]),c.__super__.constructor.apply(this,arguments),this.text=d(t),this.attributes=e}var u,d,h,p,m,f,g,v,y;return i(c,a),c.fromJSON=function(t){return new this(r.Text.fromJSON(t.text),t.attributes)},c.prototype.isEmpty=function(){return this.text.isBlockBreak()},c.prototype.isEqualTo=function(e){return c.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=e?e.text:void 0)&&t(this.attributes,null!=e?e.attributes:void 0)},c.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},c.prototype.copyWithoutText=function(){return this.copyWithText(null)},c.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},c.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},c.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(p(t)),this.copyWithAttributes(e)},c.prototype.removeAttribute=function(t){var n,r;return r=e(t).listAttribute,n=f(f(this.attributes,t),r),this.copyWithAttributes(n)},c.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},c.prototype.getLastAttribute=function(){return m(this.attributes)},c.prototype.getAttributes=function(){return this.attributes.slice(0)},c.prototype.getAttributeLevel=function(){return this.attributes.length},c.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},c.prototype.hasAttributes=function(){return this.getAttributeLevel()>0},c.prototype.getLastNestableAttribute=function(){return m(this.getNestableAttributes())},c.prototype.getNestableAttributes=function(){var t,n,r,o,i;for(i=[],n=0,r=(o=this.attributes).length;r>n;n++)t=o[n],e(t).nestable&&i.push(t);return i},c.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},c.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},c.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=o.apply(null,[this.attributes,n+1,0].concat(s.call(p(t)))),this.copyWithAttributes(e)):this},c.prototype.getListItemAttributes=function(){var t,n,r,o,i;for(i=[],n=0,r=(o=this.attributes).length;r>n;n++)t=o[n],e(t).listAttribute&&i.push(t);return i},c.prototype.isListItem=function(){var t;return null!=(t=e(this.getLastAttribute()))?t.listAttribute:void 0},c.prototype.isTerminalBlock=function(){var t;return null!=(t=e(this.getLastAttribute()))?t.terminal:void 0},c.prototype.breaksOnReturn=function(){var t;return null!=(t=e(this.getLastAttribute()))?t.breakOnReturn:void 0},c.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,r;return r=this.toString(),-1!==(n=function(){switch(t){case"forward":return r.indexOf("\n",e);case"backward":return r.slice(0,e).lastIndexOf("\n")}}())?n:void 0},c.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},c.prototype.toString=function(){return this.text.toString()},c.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},c.prototype.getLength=function(){return this.text.getLength()},c.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},c.prototype.consolidateWith=function(t){var e,n;return e=r.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e),this.copyWithText(n.appendText(t.text))},c.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},c.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},c.prototype.getTextWithoutBlockBreak=function(){return g(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},c.prototype.canBeGrouped=function(t){return this.attributes[t]},c.prototype.canBeGroupedWith=function(t,r){var o,i,a,s;return i=(a=t.getAttributes())[r],(o=this.attributes[r])===i&&!(!1===e(o).group&&(s=a[r+1],l.call(n(),s)<0))},d=function(t){return t=y(t),u(t)},y=function(t){var e,n,o,i,a,l;return i=!1,l=t.getPieces(),n=2<=l.length?s.call(l,0,e=l.length-1):(e=0,[]),null==(o=l[e++])?t:(n=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)(a=n[t]).isBlockBreak()?(i=!0,r.push(v(a))):r.push(a);return r}(),i?new r.Text(s.call(n).concat([o])):t)},h=r.Text.textForStringWithAttributes("\n",{blockBreak:!0}),u=function(t){return g(t)?t:t.appendText(h)},g=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},v=function(t){return t.copyWithoutAttribute("blockBreak")},p=function(t){var n;return null!=(n=e(t).listAttribute)?[n,t]:[t]},m=function(t){return t.slice(-1)[0]},f=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:o(t,n,1)},c}(r.Object)}.call(this),function(){var t,e,n,o,i,a,s,l,c,u=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty,h=[].slice,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=r.arraysAreEqual,s=r.normalizeSpaces,i=r.makeElement,l=r.tagName,o=r.getBlockTagNames,c=r.walkTree,n=r.findClosestElementFromNode,e=r.elementContainsNode,a=r.nodeIsAttachmentElement,r.HTMLParser=function(d){function m(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var f,g,v,y,b,w,x,_,C,k,T,A,j,M,E,S;return u(m,d),f="style href src width height class".split(" "),m.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},m.prototype.getDocument=function(){return r.Document.fromJSON(this.blocks)},m.prototype.parse=function(){var t,e;try{for(this.createHiddenContainer(),t=j(this.html),this.containerElement.innerHTML=t,e=c(this.containerElement,{usingFilter:k});e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},m.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=i({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},m.prototype.removeHiddenContainer=function(){return this.containerElement.parentNode.removeChild(this.containerElement)},j=function(t){var e,n,r,o,i,a,s,l,u,d,m,g,v,y,w;for(t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(n=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,e=n.body,r=0,a=(g=n.head.querySelectorAll("style")).length;a>r;r++)y=g[r],e.appendChild(y);for(m=[],w=c(e);w.nextNode();)switch(d=w.currentNode,d.nodeType){case Node.ELEMENT_NODE:if(b(d))m.push(d);else for(o=0,s=(v=h.call(d.attributes)).length;s>o;o++)u=v[o].name,p.call(f,u)>=0||0===u.indexOf("data-trix")||d.removeAttribute(u);break;case Node.COMMENT_NODE:m.push(d)}for(i=0,l=m.length;l>i;i++)(d=m[i]).parentNode.removeChild(d);return e.innerHTML},b=function(t){return(null!=t?t.nodeType:void 0)!==Node.ELEMENT_NODE||a(t)?void 0:"script"===l(t)||"false"===t.getAttribute("data-trix-serialize")},k=function(t){return"style"===l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},m.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},m.prototype.appendBlockForElement=function(n){var r,o,i,a;if(i=this.isBlockElement(n),o=e(this.currentBlockElement,n),i&&!this.isBlockElement(n.firstChild)){if(!(this.isInsignificantTextNode(n.firstChild)&&this.isBlockElement(n.firstElementChild)||(r=this.getBlockAttributes(n),o&&t(r,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(r,n),this.currentBlockElement=n}else if(this.currentBlockElement&&!o&&!i)return(a=this.findParentBlockElement(n))?this.appendBlockForElement(a):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},m.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&p.call(this.blockElements,e)>=0)return e;e=e.parentElement}return null},m.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,y(t.parentNode)||(n=M(n),E(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=C(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},m.prototype.processElement=function(t){var e,n,r,o,i;if(a(t))return e=w(t),Object.keys(e).length&&(o=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,o),t.innerHTML=""),this.processedElements.push(t);switch(l(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},r=_(t))i=r[n],e[n]=i;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},m.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=g(t),this.blocks.push(n),n},m.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},m.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(A(t,e))},m.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(T(t,e))},m.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},m.prototype.appendStringToTextAtIndex=function(t,e){var n,r;return"string"===(null!=(n=(r=this.blocks[e].text)[r.length-1])?n.type:void 0)?n.string+=t:r.push(A(t))},m.prototype.prependStringToTextAtIndex=function(t,e){var n,r;return"string"===(null!=(n=(r=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:r.unshift(A(t))},A=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=s(t),attributes:e,type:n}},T=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},g=function(t){return null==t&&(t={}),{text:[],attributes:t}},m.prototype.getTextAttributes=function(t){var e,o,i,s,l,c,u,d,h,p,m,f,g;for(e in i={},p=r.config.textAttributes)if((l=p[e]).tagName&&n(t,{matchingSelector:l.tagName,untilNode:this.containerElement}))i[e]=!0;else if(l.parser&&(g=l.parser(t))){for(o=!1,c=0,h=(m=this.findBlockElementAncestors(t)).length;h>c;c++)if(s=m[c],l.parser(s)===g){o=!0;break}o||(i[e]=g)}if(a(t)&&(u=t.getAttribute("data-trix-attributes")))for(d in f=JSON.parse(u))g=f[d],i[d]=g;return i},m.prototype.getBlockAttributes=function(t){var e,n,o,i;for(n=[];t&&t!==this.containerElement;){for(e in i=r.config.blockAttributes)!1!==(o=i[e]).parse&&l(t)===o.tagName&&(("function"==typeof o.test?o.test(t):void 0)||!o.test)&&(n.push(e),o.listAttribute&&n.push(o.listAttribute));t=t.parentNode}return n.reverse()},m.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=l(t),p.call(o(),n)>=0&&e.push(t),t=t.parentNode;return e},w=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},_=function(t){var e,n,r;return r=t.getAttribute("width"),n=t.getAttribute("height"),e={},r&&(e.width=parseInt(r,10)),n&&(e.height=parseInt(n,10)),e},m.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!n(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=l(t),p.call(o(),e)>=0||"block"===window.getComputedStyle(t).display},m.prototype.isInsignificantTextNode=function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&S(t.data)&&!y(t.parentNode)?!t.previousSibling||this.isBlockElement(t.previousSibling)||!t.nextSibling||this.isBlockElement(t.nextSibling):void 0},m.prototype.isExtraBR=function(t){return"br"===l(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},y=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},m.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,r,o,i,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,r=(i=this.blocks).length;r>e;n=++e)i[n],(o=this.getMarginOfBlockElementAtIndex(n))&&(o.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(o.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},m.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||(n=l(e),p.call(o(),n)>=0||p.call(this.processedElements,e)>=0)?void 0:x(e)},m.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=i(r.config.blockAttributes.default.tagName),this.containerElement.appendChild(t),x(t)},x=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},v=RegExp("[^\\S"+r.NON_BREAKING_SPACE+"]"),M=function(t){return t.replace(RegExp(""+v.source,"g")," ").replace(/\ {2,}/g," ")},C=function(t){return t.replace(RegExp("^"+v.source+"+"),"")},S=function(t){return RegExp("^"+v.source+"*$").test(t)},E=function(t){return/\s$/.test(t)},m}(r.BasicObject)}.call(this),function(){var t,e,n,o,i=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=r.arraysAreEqual,n=r.normalizeRange,o=r.rangeIsCollapsed,e=r.getBlockConfig,r.Document=function(a){function c(t){null==t&&(t=[]),c.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new r.Block]),this.blockList=r.SplittableList.box(t)}var u;return i(c,a),c.fromJSON=function(t){var e;return new this(function(){var n,o,i;for(i=[],n=0,o=t.length;o>n;n++)e=t[n],i.push(r.Block.fromJSON(e));return i}())},c.fromHTML=function(t,e){return r.HTMLParser.parse(t,e).getDocument()},c.fromString=function(t,e){var n;return n=r.Text.textForStringWithAttributes(t,e),new this([new r.Block(n)])},c.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},c.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},c.prototype.copyUsingObjectsFromDocument=function(t){var e;return e=new r.ObjectMap(t.getObjects()),this.copyUsingObjectMap(e)},c.prototype.copyUsingObjectMap=function(t){var e,n,r;return n=function(){var n,o,i,a;for(a=[],n=0,o=(i=this.getBlocks()).length;o>n;n++)e=i[n],a.push((r=t.find(e))?r:e.copyUsingObjectMap(t));return a}.call(this),new this.constructor(n)},c.prototype.copyWithBaseBlockAttributes=function(t){var e,n,r;return null==t&&(t=[]),r=function(){var r,o,i,a;for(a=[],r=0,o=(i=this.getBlocks()).length;o>r;r++)n=i[r],e=t.concat(n.getAttributes()),a.push(n.copyWithAttributes(e));return a}.call(this),new this.constructor(r)},c.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},c.prototype.insertDocumentAtRange=function(t,e){var r,i,a,s,l,c,u;return i=t.blockList,l=(e=n(e))[0],a=(c=this.locationFromPosition(l)).index,s=c.offset,u=this,r=this.getBlockAtPosition(l),o(e)&&r.isEmpty()&&!r.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(a)):r.getBlockBreakPosition()===s&&l++,u=u.removeTextAtRange(e),new this.constructor(u.blockList.insertSplittableListAtPosition(i,l))},c.prototype.mergeDocumentAtRange=function(e,r){var o,i,a,s,l,c,u,d,h,p,m,f;return m=(r=n(r))[0],p=this.locationFromPosition(m),i=this.getBlockAtIndex(p.index).getAttributes(),o=e.getBaseBlockAttributes(),f=i.slice(-o.length),t(o,f)?(u=i.slice(0,-o.length),c=e.copyWithBaseBlockAttributes(u)):c=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(i),a=c.getBlockCount(),s=c.getBlockAtIndex(0),t(i,s.getAttributes())?(l=s.getTextWithoutBlockBreak(),h=this.insertTextAtRange(l,r),a>1&&(c=new this.constructor(c.getBlocks().slice(1)),d=m+l.getLength(),h=h.insertDocumentAtRange(c,d))):h=this.insertDocumentAtRange(c,r),h},c.prototype.insertTextAtRange=function(t,e){var r,o,i,a,s;return s=(e=n(e))[0],o=(a=this.locationFromPosition(s)).index,i=a.offset,r=this.removeTextAtRange(e),new this.constructor(r.blockList.editObjectAtIndex(o,function(e){return e.copyWithText(e.text.insertTextAtPosition(t,i))}))},c.prototype.removeTextAtRange=function(t){var e,r,i,a,s,l,c,u,d,h,p,m,f,g,v,y,b,w;return u=(h=t=n(t))[0],y=h[1],o(t)?this:(l=(p=this.locationRangeFromRange(t))[0],g=p[1],s=l.index,c=l.offset,a=this.getBlockAtIndex(s),f=g.index,v=g.offset,m=this.getBlockAtIndex(f),y-u==1&&a.getBlockBreakPosition()===c&&m.getBlockBreakPosition()!==v&&"\n"===m.text.getStringAtPosition(v)?i=this.blockList.editObjectAtIndex(f,function(t){return t.copyWithText(t.text.removeTextAtRange([v,v+1]))}):(d=a.text.getTextAtRange([0,c]),b=m.text.getTextAtRange([v,m.getLength()]),w=d.appendText(b),r=s!==f&&0===c&&a.getAttributeLevel()>=m.getAttributeLevel()?m.copyWithText(w):a.copyWithText(w),e=f+1-s,i=this.blockList.splice(s,e,r)),new this.constructor(i))},c.prototype.moveTextFromRangeToPosition=function(t,e){var r,o,i,a,l,c,u,d,h,p;if(h=(c=t=n(t))[0],i=c[1],e>=h&&i>=e)return this;if(o=this.getDocumentAtRange(t),d=this.removeTextAtRange(t),(l=e>h)&&(e-=o.getLength()),!d.firstBlockInRangeIsEntirelySelected(t)){if(a=(u=o.getBlocks())[0],0===(r=2<=u.length?s.call(u,1):[]).length?(p=a.getTextWithoutBlockBreak(),l&&(e+=1)):p=a.text,d=d.insertTextAtRange(p,e),0===r.length)return d;o=new this.constructor(r),e+=p.getLength()}return d.insertDocumentAtRange(o,e)},c.prototype.addAttributeAtRange=function(t,n,r){var o;return o=this.blockList,this.eachBlockAtRange(r,function(r,i,a){return o=o.editObjectAtIndex(a,function(){return e(t)?r.addAttribute(t,n):i[0]===i[1]?r:r.copyWithText(r.text.addAttributeAtRange(t,n,i))})}),new this.constructor(o)},c.prototype.addAttribute=function(t,e){var n;return n=this.blockList,this.eachBlock(function(r,o){return n=n.editObjectAtIndex(o,function(){return r.addAttribute(t,e)})}),new this.constructor(n)},c.prototype.removeAttributeAtRange=function(t,n){var r;return r=this.blockList,this.eachBlockAtRange(n,function(n,o,i){return e(t)?r=r.editObjectAtIndex(i,function(){return n.removeAttribute(t)}):o[0]!==o[1]?r=r.editObjectAtIndex(i,function(){return n.copyWithText(n.text.removeAttributeAtRange(t,o))}):void 0}),new this.constructor(r)},c.prototype.updateAttributesForAttachment=function(t,e){var n,r,o;return r=this.getRangeOfAttachment(e)[0],n=this.locationFromPosition(r).index,o=this.getTextAtIndex(n),new this.constructor(this.blockList.editObjectAtIndex(n,function(n){return n.copyWithText(o.updateAttributesForAttachment(t,e))}))},c.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},c.prototype.insertBlockBreakAtRange=function(t){var e,o,i,a;return a=(t=n(t))[0],i=this.locationFromPosition(a).offset,o=this.removeTextAtRange(t),0===i&&(e=[new r.Block]),new this.constructor(o.blockList.insertSplittableListAtPosition(new r.SplittableList(e),a))},c.prototype.applyBlockAttributeAtRange=function(t,n,r){var o,i,a,s;return i=(a=this.expandRangeToLineBreaksAndSplitBlocks(r)).document,r=a.range,(o=e(t)).listAttribute?(i=(s=(i=i.removeLastListAttributeAtRange(r,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(r)).document,r=s.range):i=o.terminal?i.removeLastTerminalAttributeAtRange(r):i.consolidateBlocksAtRange(r),i.addAttributeAtRange(t,n,r)},c.prototype.removeLastListAttributeAtRange=function(t,n){var r;return null==n&&(n={}),r=this.blockList,this.eachBlockAtRange(t,function(t,o,i){var a;if((a=t.getLastAttribute())&&e(a).listAttribute&&a!==n.exceptAttributeName)return r=r.editObjectAtIndex(i,function(){return t.removeAttribute(a)})}),new this.constructor(r)},c.prototype.removeLastTerminalAttributeAtRange=function(t){var n;return n=this.blockList,this.eachBlockAtRange(t,function(t,r,o){var i;if((i=t.getLastAttribute())&&e(i).terminal)return n=n.editObjectAtIndex(o,function(){return t.removeAttribute(i)})}),new this.constructor(n)},c.prototype.firstBlockInRangeIsEntirelySelected=function(t){var e,r,o,i,a,s;return s=(i=t=n(t))[0],e=i[1],r=this.locationFromPosition(s),a=this.locationFromPosition(e),0===r.offset&&r.index<a.index||r.index===a.index&&(o=this.getBlockAtIndex(r.index).getLength(),0===r.offset&&a.offset===o)},c.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,r,o,i,a,s,l,c,u;return u=(s=t=n(t))[0],i=s[1],c=this.locationFromPosition(u),o=this.locationFromPosition(i),l=(e=this).getBlockAtIndex(c.index),null!=(c.offset=l.findLineBreakInDirectionFromPosition("backward",c.offset))&&(a=e.positionFromLocation(c),e=e.insertBlockBreakAtRange([a,a+1]),o.index+=1,o.offset-=e.getBlockAtIndex(c.index).getLength(),c.index+=1),c.offset=0,0===o.offset&&o.index>c.index?(o.index-=1,o.offset=e.getBlockAtIndex(o.index).getBlockBreakPosition()):("\n"===(r=e.getBlockAtIndex(o.index)).text.getStringAtRange([o.offset-1,o.offset])?o.offset-=1:o.offset=r.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==r.getBlockBreakPosition()&&(a=e.positionFromLocation(o),e=e.insertBlockBreakAtRange([a,a+1]))),u=e.positionFromLocation(c),i=e.positionFromLocation(o),{document:e,range:t=n([u,i])}},c.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,r,o;return r=(t=n(t))[0],o=this.getStringAtRange(t).slice(0,-1),e=this,o.replace(/.*?\n/g,function(t){return r+=t.length,e=e.insertBlockBreakAtRange([r-1,r])}),{document:e,range:t}},c.prototype.consolidateBlocksAtRange=function(t){var e,r,o,i,a;return a=(o=t=n(t))[0],r=o[1],i=this.locationFromPosition(a).index,e=this.locationFromPosition(r).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(i,e))},c.prototype.getDocumentAtRange=function(t){var e;return t=n(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},c.prototype.getStringAtRange=function(t){return this.getDocumentAtRange(t).toString()},c.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},c.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},c.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},c.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},c.prototype.getPieceAtPosition=function(t){var e,n,r;return e=(r=this.locationFromPosition(t)).index,n=r.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},c.prototype.getCharacterAtPosition=function(t){var e,n,r;return e=(r=this.locationFromPosition(t)).index,n=r.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},c.prototype.getLength=function(){return this.blockList.getEndPosition()},c.prototype.getBlocks=function(){return this.blockList.toArray()},c.prototype.getBlockCount=function(){return this.blockList.length},c.prototype.getEditCount=function(){return this.editCount},c.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},c.prototype.eachBlockAtRange=function(t,e){var r,o,i,a,s,l,c,u,d,h,p,m;if(p=(l=t=n(t))[0],i=l[1],h=this.locationFromPosition(p),o=this.locationFromPosition(i),h.index===o.index)return r=this.getBlockAtIndex(h.index),m=[h.offset,o.offset],e(r,m,h.index);for(d=[],s=a=c=h.index,u=o.index;u>=c?u>=a:a>=u;s=u>=c?++a:--a)(r=this.getBlockAtIndex(s))?(m=function(){switch(s){case h.index:return[h.offset,r.text.getLength()];case o.index:return[0,o.offset];default:return[0,r.text.getLength()]}}(),d.push(e(r,m,s))):d.push(void 0);return d},c.prototype.getCommonAttributesAtRange=function(t){var e,i,a;return i=(t=n(t))[0],o(t)?this.getCommonAttributesAtPosition(i):(a=[],e=[],this.eachBlockAtRange(t,function(t,n){return n[0]!==n[1]?(a.push(t.text.getCommonAttributesAtRange(n)),e.push(u(t))):void 0}),r.Hash.fromCommonAttributesOfObjects(a).merge(r.Hash.fromCommonAttributesOfObjects(e)).toObject())},c.prototype.getCommonAttributesAtPosition=function(t){var e,n,o,i,a,s,c,d,h,p;if(a=(h=this.locationFromPosition(t)).index,d=h.offset,!(o=this.getBlockAtIndex(a)))return{};for(c in i=u(o),e=o.text.getAttributesAtPosition(d),n=o.text.getAttributesAtPosition(d-1),s=function(){var t,e;for(c in e=[],t=r.config.textAttributes)(p=t[c]).inheritable&&e.push(c);return e}(),n)((p=n[c])===e[c]||l.call(s,c)>=0)&&(i[c]=p);return i},c.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var r,o,i,a,s,l,c,u;return i=(s=this.locationFromPosition(e)).index,a=s.offset,u=(l=this.getTextAtIndex(i).getExpandedRangeForAttributeAtOffset(t,a))[0],o=l[1],c=this.positionFromLocation({index:i,offset:u}),r=this.positionFromLocation({index:i,offset:o}),n([c,r])},c.prototype.getBaseBlockAttributes=function(){var t,e,n,r,o,i,a;for(t=this.getBlockAtIndex(0).getAttributes(),n=r=1,a=this.getBlockCount();a>=1?a>r:r>a;n=a>=1?++r:--r)e=this.getBlockAtIndex(n).getAttributes(),i=Math.min(t.length,e.length),t=function(){var n,r,a;for(a=[],o=n=0,r=i;(r>=0?r>n:n>r)&&e[o]===t[o];o=r>=0?++n:--n)a.push(e[o]);return a}();return t},u=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},c.prototype.getAttachmentById=function(t){var e,n,r,o;for(n=0,r=(o=this.getAttachments()).length;r>n;n++)if((e=o[n]).id===t)return e},c.prototype.getAttachmentPieces=function(){var t;return t=[],this.blockList.eachObject(function(e){var n;return n=e.text,t=t.concat(n.getAttachmentPieces())}),t},c.prototype.getAttachments=function(){var t,e,n,r,o;for(o=[],t=0,e=(r=this.getAttachmentPieces()).length;e>t;t++)n=r[t],o.push(n.attachment);return o},c.prototype.getRangeOfAttachment=function(t){var e,r,o,i,a,s,l;for(i=0,r=e=0,o=(a=this.blockList.toArray()).length;o>e;r=++e){if(l=(s=a[r].text).getRangeOfAttachment(t))return n([i+l[0],i+l[1]]);i+=s.getLength()}},c.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},c.prototype.getAttachmentPieceForAttachment=function(t){var e,n,r,o;for(e=0,n=(o=this.getAttachmentPieces()).length;n>e;e++)if((r=o[e]).attachment===t)return r},c.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},c.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},c.prototype.locationRangeFromPosition=function(t){return n(this.locationFromPosition(t))},c.prototype.locationRangeFromRange=function(t){var e,r,o,i;if(t=n(t))return i=t[0],r=t[1],o=this.locationFromPosition(i),e=this.locationFromPosition(r),n([o,e])},c.prototype.rangeFromLocationRange=function(t){var e,r;return t=n(t),e=this.positionFromLocation(t[0]),o(t)||(r=this.positionFromLocation(t[1])),n([e,r])},c.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},c.prototype.getTexts=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.getBlocks()).length;n>e;e++)t=r[e],o.push(t.text);return o},c.prototype.getPieces=function(){var t,e,n,r,o;for(n=[],t=0,e=(r=this.getTexts()).length;e>t;t++)o=r[t],n.push.apply(n,o.getPieces());return n},c.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},c.prototype.toSerializableDocument=function(){var t;return t=[],this.blockList.eachObject(function(e){return t.push(e.copyWithText(e.text.toSerializableText()))}),new this.constructor(t)},c.prototype.toString=function(){return this.blockList.toString()},c.prototype.toJSON=function(){return this.blockList.toJSON()},c.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,r,o;for(o=[],e=0,n=(r=this.blockList.toArray()).length;n>e;e++)t=r[e],o.push(JSON.parse(t.text.toConsole()));return o}.call(this))},c}(r.Object)}.call(this),function(){r.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var t,e,n,o,i,a,s,l,c,u,d=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;a=r.normalizeRange,c=r.rangesAreEqual,l=r.rangeIsCollapsed,s=r.objectsAreEqual,t=r.arrayStartsWith,u=r.summarizeArrayChange,n=r.getAllAttributeNames,o=r.getBlockConfig,i=r.getTextConfig,e=r.extend,r.Composition=function(h){function p(){this.document=new r.Document,this.attachments=[],this.currentAttributes={},this.revision=0}return d(p,h),p.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},p.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},p.prototype.loadSnapshot=function(t){var e,n,o,i;return e=t.document,i=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=e?e:new r.Document),this.setSelection(null!=i?i:[0,0]),null!=(o=this.delegate)&&"function"==typeof o.compositionDidLoadSnapshot?o.compositionDidLoadSnapshot():void 0},p.prototype.insertText=function(t,e){var n,r,o,i;return i=(null!=e?e:{updatePosition:!0}).updatePosition,r=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,r)),n=(o=r[0])+t.getLength(),i&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([o,n])},p.prototype.insertBlock=function(t){var e;return null==t&&(t=new r.Block),e=new r.Document([t]),this.insertDocument(e)},p.prototype.insertDocument=function(t){var e,n,o;return null==t&&(t=new r.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),e=(o=n[0])+t.getLength(),this.setSelection(e),this.notifyDelegateOfInsertionAtRange([o,e])},p.prototype.insertString=function(t,e){var n,o;return n=this.getCurrentTextAttributes(),o=r.Text.textForStringWithAttributes(t,n),this.insertText(o,e)},p.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},p.prototype.insertLineBreak=function(){var t,e;return(e=new r.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(e.startPosition)):e.shouldPrependListItem()?(t=new r.Document([e.block.copyWithoutText()]),this.insertDocument(t)):e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString("\n")},p.prototype.insertHTML=function(t){var e,n,o,i;return i=this.getPosition(),o=this.document.getLength(),e=r.Document.fromHTML(t),this.setDocument(this.document.mergeDocumentAtRange(e,this.getSelectedRange())),n=i+(this.document.getLength()-o),this.setSelection(n),this.notifyDelegateOfInsertionAtRange([n,n])},p.prototype.replaceHTML=function(t){var e,n,o;return e=r.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),o=this.document.rangeFromLocationRange(n),this.setDocument(e),this.setSelection(o)},p.prototype.insertFile=function(t){var e,n;return(null!=(n=this.delegate)?n.compositionShouldAcceptFile(t):void 0)?(e=r.Attachment.attachmentForFile(t),this.insertAttachment(e)):void 0},p.prototype.insertFiles=function(t){var e,n,o,i,a,s,l;for(l=new r.Text,i=0,a=t.length;a>i;i++)o=t[i],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(o):void 0)&&(e=r.Attachment.attachmentForFile(o),n=r.Text.textForAttachmentWithAttributes(e,this.currentAttributes),l=l.appendText(n));return this.insertText(l)},p.prototype.insertAttachment=function(t){var e;return e=r.Text.textForAttachmentWithAttributes(t,this.currentAttributes),this.insertText(e)},p.prototype.deleteInDirection=function(t){var e,n,r,o,i,a,s;return o=this.getLocationRange(),i=this.getSelectedRange(),(a=l(i))?r="backward"===t&&0===o[0].offset:s=o[0].index!==o[1].index,!(r&&this.canDecreaseBlockAttributeLevel()&&(n=this.getBlock(),n.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(i[0]),n.isEmpty()))&&(a&&(i=this.getExpandedRangeInDirection(t),"backward"===t&&(e=this.getAttachmentAtRange(i))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(i)),this.setSelection(i[0]),!r&&!s&&void 0))},p.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},p.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},p.prototype.removeLastBlockAttribute=function(){var t,e,n,r;return r=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(r)}," ",p.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")},p.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+" ".length]),this.getSelectedRange()):void 0},p.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},p.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},p.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},p.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},p.prototype.canSetCurrentTextAttribute=function(t){switch(t){case"href":return!this.selectionContainsAttachmentWithAttribute(t);default:return!0}},p.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},p.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},p.prototype.setTextAttribute=function(t,e){var n,o;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,e,n)):"href"===t?(o=r.Text.textForStringWithAttributes(e,{href:e}),this.insertText(o)):void 0},p.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},p.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},p.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},p.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},p.prototype.canDecreaseNestingLevel=function(){var t;return(null!=(t=this.getBlock())?t.getNestingLevel():void 0)>0},p.prototype.canIncreaseNestingLevel=function(){var e,n,r;if(e=this.getBlock())return null!=(r=o(e.getLastNestableAttribute()))&&r.listAttribute?(n=this.getPreviousBlock())?t(n.getListItemAttributes(),e.getListItemAttributes()):void 0:e.getNestingLevel()>0},p.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},p.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},p.prototype.canDecreaseBlockAttributeLevel=function(){var t;return(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)>0},p.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},p.prototype.decreaseListLevel=function(){var t,e,n,r,o,i;for(i=this.getSelectedRange()[0],n=o=this.document.locationFromPosition(i).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return i=this.document.positionFromLocation({index:o,offset:0}),r=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([i,r]))},p.prototype.updateCurrentAttributes=function(){var t,e,r,o,i,a;if(a=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(a),r=0,o=(i=n()).length;o>r;r++)e[t=i[r]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!s(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},p.prototype.getCurrentAttributes=function(){return e.call({},this.currentAttributes)},p.prototype.getCurrentTextAttributes=function(){var t,e,n,r;for(e in t={},n=this.currentAttributes)r=n[e],i(e)&&(t[e]=r);return t},p.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},p.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},p.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},p.proxyMethod("getSelectionManager().getPointRange"),p.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),p.proxyMethod("getSelectionManager().locationIsCursorTarget"),p.proxyMethod("getSelectionManager().selectionIsExpanded"),p.proxyMethod("delegate?.getSelectionManager"),p.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},p.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},p.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},p.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},p.prototype.getLocationRange=function(t){var e;return null!=(e=this.getSelectionManager().getLocationRange(t))?e:a({index:0,offset:0})},p.prototype.getExpandedRangeInDirection=function(t){var e,n,r;return r=(n=this.getSelectedRange())[0],e=n[1],"backward"===t?r=this.translateUTF16PositionFromOffset(r,-1):e=this.translateUTF16PositionFromOffset(e,1),a([r,e])},p.prototype.moveCursorInDirection=function(t){var e,n,r,o;return this.editingAttachment?r=this.document.getRangeOfAttachment(this.editingAttachment):(o=this.getSelectedRange(),r=this.getExpandedRangeInDirection(t),n=!c(o,r)),this.setSelectedRange("backward"===t?r[0]:r[1]),n&&(e=this.getAttachmentAtRange(r))?this.editAttachment(e):void 0},p.prototype.expandSelectionInDirection=function(t){var e;return e=this.getExpandedRangeInDirection(t),this.setSelectedRange(e)},p.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},p.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},p.prototype.selectionContainsAttachmentWithAttribute=function(t){var e,n,r,o;if(o=this.getSelectedRange()){for(e=0,n=(r=this.document.getDocumentAtRange(o).getAttachments()).length;n>e;e++)if(r[e].hasAttribute(t))return!0;return!1}},p.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},p.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},p.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},p.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},p.prototype.getAttachments=function(){return this.attachments.slice(0)},p.prototype.refreshAttachments=function(){var t,e,n,r,o,i,a,s,l,c,d,h;for(n=this.document.getAttachments(),t=(s=u(this.attachments,n)).added,d=s.removed,this.attachments=n,r=0,i=d.length;i>r;r++)(e=d[r]).delegate=null,null!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(h=[],o=0,a=t.length;a>o;o++)(e=t[o]).delegate=this,h.push(null!=(c=this.delegate)&&"function"==typeof c.compositionDidAddAttachment?c.compositionDidAddAttachment(e):void 0);return h},p.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},p.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},p.prototype.editAttachment=function(t){var e;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(e=this.delegate)&&"function"==typeof e.compositionDidStartEditingAttachment?e.compositionDidStartEditingAttachment(this.editingAttachment):void 0},p.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},p.prototype.canEditAttachmentCaption=function(){var t;return null!=(t=this.editingAttachment)?t.isPreviewable():void 0},p.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},p.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},p.prototype.breakFormattedBlock=function(t){var e,n,o,i,a;return n=t.document,e=t.block,a=[(i=t.startPosition)-1,i],e.getBlockBreakPosition()===t.startLocation.offset?(e.breaksOnReturn()&&"\n"===t.nextCharacter?i+=1:n=n.removeTextAtRange(a),a=[i,i]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?a=[i-1,i+1]:(a=[i,i+1],i+=1):t.startLocation.offset-1!=0&&(i+=1),o=new r.Document([e.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(o,a)),this.setSelection(i)},p.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&(t=e[0].index)>0?this.document.getBlockAtIndex(t-1):void 0},p.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},p.prototype.getAttachmentAtRange=function(t){var e;return(e=this.document.getDocumentAtRange(t)).toString()===r.OBJECT_REPLACEMENT_CHARACTER+"\n"?e.getAttachments()[0]:void 0},p.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},p.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},p.prototype.translateUTF16PositionFromOffset=function(t,e){var n,r;return n=(r=this.document.toUTF16String()).offsetFromUCS2Offset(t),r.offsetToUCS2Offset(n+e)},p}(r.BasicObject)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.UndoManager=function(e){function n(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var r;return t(n,e),n.prototype.recordUndoEntry=function(t,e){var n,o,i,a,s;return o=(a=null!=e?e:{}).context,n=a.consolidatable,i=this.undoEntries.slice(-1)[0],n&&r(i,t,o)?void 0:(s=this.createEntry({description:t,context:o}),this.undoEntries.push(s),this.redoEntries=[])},n.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},n.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},n.prototype.canUndo=function(){return this.undoEntries.length>0},n.prototype.canRedo=function(){return this.redoEntries.length>0},n.prototype.createEntry=function(t){var e,n,r;return n=(r=null!=t?t:{}).description,e=r.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},r=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},n}(r.BasicObject)}.call(this),function(){r.Editor=function(){function t(t,e,n){this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new r.UndoManager(this.composition)}return t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(r.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var e,n;return e=t.document,n=t.selectedRange,e=r.Document.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})},t.prototype.loadSnapshot=function(t){return this.undoManager=new r.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canDecreaseIndentationLevel=function(){return this.canDecreaseNestingLevel()},t.prototype.canIncreaseIndentationLevel=function(){return this.canIncreaseNestingLevel()},t.prototype.decreaseIndentationLevel=function(){return this.decreaseNestingLevel()},t.prototype.increaseIndentationLevel=function(){return this.increaseNestingLevel()},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,r,o;return r=(o=null!=e?e:{}).context,n=o.consolidatable,this.undoManager.recordUndoEntry(t,{context:r,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.ManagedAttachment=function(e){function n(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return t(n,e),n.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},n.proxyMethod("attachment.getAttribute"),n.proxyMethod("attachment.hasAttribute"),n.proxyMethod("attachment.setAttribute"),n.proxyMethod("attachment.getAttributes"),n.proxyMethod("attachment.setAttributes"),n.proxyMethod("attachment.isPending"),n.proxyMethod("attachment.isPreviewable"),n.proxyMethod("attachment.getURL"),n.proxyMethod("attachment.getHref"),n.proxyMethod("attachment.getFilename"),n.proxyMethod("attachment.getFilesize"),n.proxyMethod("attachment.getFormattedFilesize"),n.proxyMethod("attachment.getExtension"),n.proxyMethod("attachment.getContentType"),n.proxyMethod("attachment.getFile"),n.proxyMethod("attachment.setFile"),n.proxyMethod("attachment.releaseFile"),n.proxyMethod("attachment.getUploadProgress"),n.proxyMethod("attachment.setUploadProgress"),n}(r.BasicObject)}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;r.AttachmentManager=function(e){function n(t){var e,n,r;for(null==t&&(t=[]),this.managedAttachments={},n=0,r=t.length;r>n;n++)e=t[n],this.manageAttachment(e)}return t(n,e),n.prototype.getAttachments=function(){var t,e,n,r;for(e in r=[],n=this.managedAttachments)t=n[e],r.push(t);return r},n.prototype.manageAttachment=function(t){var e,n;return null!=(e=this.managedAttachments)[n=t.id]?e[n]:e[n]=new r.ManagedAttachment(this,t)},n.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},n.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},n.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},n}(r.BasicObject)}.call(this),function(){var t,e,n,o,i,a,s,l,c,u,d;t=r.elementContainsNode,e=r.findChildIndexOfNode,i=r.nodeIsBlockStart,a=r.nodeIsBlockStartComment,o=r.nodeIsBlockContainer,s=r.nodeIsCursorTarget,l=r.nodeIsEmptyTextNode,c=r.nodeIsTextNode,n=r.nodeIsAttachmentElement,u=r.tagName,d=r.walkTree,r.LocationMapper=function(){function r(t){this.element=t}var h,p,m,f;return r.prototype.findLocationFromContainerAndOffset=function(n,r,o){var a,l,u,h,f,g,v;for(g=(null!=o?o:{strict:!0}).strict,l=0,u=!1,h={index:0,offset:0},(a=this.findAttachmentElementParentForNode(n))&&(n=a.parentNode,r=e(a)),v=d(this.element,{usingFilter:m});v.nextNode();){if((f=v.currentNode)===n&&c(n)){s(f)||(h.offset+=r);break}if(f.parentNode===n){if(l++===r)break}else if(!t(n,f)&&l>0)break;i(f,{strict:g})?(u&&h.index++,h.offset=0,u=!0):h.offset+=p(f)}return h},r.prototype.findContainerAndOffsetFromLocation=function(t){var n,r,a,s,l;if(0===t.index&&0===t.offset){for(n=this.element,s=0;n.firstChild;)if(n=n.firstChild,o(n)){s=1;break}return[n,s]}if(r=(l=this.findNodeAndOffsetFromLocation(t))[0],a=l[1],r){if(c(r))n=r,r.textContent,s=t.offset-a;else{if(n=r.parentNode,!i(r.previousSibling)&&!o(n))for(;r===n.lastChild&&(r=n,n=n.parentNode,!o(n)););s=e(r),0!==t.offset&&s++}return[n,s]}},r.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,r,o,i,a,l,u;for(l=0,n=0,r=(u=this.getSignificantNodesForIndex(t.index)).length;r>n;n++){if(e=u[n],o=p(e),t.offset<=l+o)if(c(e)){if(i=e,a=l,t.offset===a&&s(i))break}else i||(i=e,a=l);if((l+=o)>t.offset)break}return[i,a]},r.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},r.prototype.getSignificantNodesForIndex=function(t){var e,n,r,o,i;for(r=[],i=d(this.element,{usingFilter:h}),o=!1;i.nextNode();)if(n=i.currentNode,a(n)){if(void 0!==e&&null!==e?e++:e=0,e===t)o=!0;else if(o)break}else o&&r.push(n);return r},p=function(t){return t.nodeType===Node.TEXT_NODE?s(t)?0:t.textContent.length:"br"===u(t)||n(t)?1:0},h=function(t){return f(t)===NodeFilter.FILTER_ACCEPT?m(t):NodeFilter.FILTER_REJECT},f=function(t){return l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},m=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},r}()}.call(this),function(){var t,e,n=[].slice;t=r.getDOMRange,e=r.setDOMRange,r.PointMapper=function(){function r(){}return r.prototype.createDOMRangeFromPoint=function(n){var r,o,i,a,s,l,c,u;if(c=n.x,u=n.y,document.caretPositionFromPoint)return i=(s=document.caretPositionFromPoint(c,u)).offsetNode,o=s.offset,(r=document.createRange()).setStart(i,o),r;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(c,u);if(document.body.createTextRange){a=t();try{(l=document.body.createTextRange()).moveToPoint(c,u),l.select()}catch(t){}return r=t(),e(a),r}},r.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},r}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=r.getDOMRange,r.SelectionChangeObserver=function(r){function o(){this.run=e(this.run,this),this.update=e(this.update,this),this.selectionManagers=[]}var a;return n(o,r),o.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},o.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},o.prototype.registerSelectionManager=function(t){return i.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},o.prototype.unregisterSelectionManager=function(t){var e;return this.selectionManagers=function(){var n,r,o,i;for(i=[],n=0,r=(o=this.selectionManagers).length;r>n;n++)(e=o[n])!==t&&i.push(e);return i}.call(this),0===this.selectionManagers.length?this.stop():void 0},o.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,r,o;for(r=[],t=0,e=(n=this.selectionManagers).length;e>t;t++)o=n[t],r.push(o.selectionDidChange());return r},o.prototype.update=function(){var e;return e=t(),a(e,this.domRange)?void 0:(this.domRange=e,this.notifySelectionManagersOfSelectionChange())},o.prototype.reset=function(){return this.domRange=null,this.update()},o.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},a=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},o}(r.BasicObject),null==r.selectionChangeObserver&&(r.selectionChangeObserver=new r.SelectionChangeObserver)}.call(this),function(){var t,e,n,o,i,a,s,l,c,u,d=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=r.getDOMSelection,e=r.getDOMRange,u=r.setDOMRange,t=r.elementContainsNode,a=r.nodeIsCursorTarget,i=r.innerElementIsActive,o=r.handleEvent,s=r.normalizeRange,l=r.rangeIsCollapsed,c=r.rangesAreEqual,r.SelectionManager=function(p){function m(t){this.element=t,this.selectionDidChange=d(this.selectionDidChange,this),this.didMouseDown=d(this.didMouseDown,this),this.locationMapper=new r.LocationMapper(this.element),this.pointMapper=new r.PointMapper,this.lockCount=0,o("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return h(m,p),m.prototype.getLocationRange=function(t){var n;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(e(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(n=this.lockedLocationRange)?n:this.currentLocationRange},m.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(u(e),this.updateCurrentLocationRange(t)):void 0},m.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=s(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},m.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},m.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],a(e)},m.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},m.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,this.lockedLocationRange=null,null!=t)?this.setLocationRange(t):void 0},m.prototype.clearSelection=function(){var t;return null!=(t=n())?t.removeAllRanges():void 0},m.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=e())?t.collapsed:void 0)},m.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},m.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),m.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),m.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),m.proxyMethod("pointMapper.createDOMRangeFromPoint"),m.proxyMethod("pointMapper.getClientRectsForDOMRange"),m.prototype.didMouseDown=function(){return this.pauseTemporarily()},m.prototype.pauseTemporarily=function(){var e,n,r,i;return this.paused=!0,n=function(e){return function(){var n,o;for(e.paused=!1,clearTimeout(i),n=0,o=r.length;o>n;n++)r[n].destroy();return t(document,e.element)?e.selectionDidChange():void 0}}(this),i=setTimeout(n,200),r=function(){var t,r,i,a;for(a=[],t=0,r=(i=["mousemove","keydown"]).length;r>t;t++)e=i[t],a.push(o(e,{onElement:document,withCallback:n}));return a}()},m.prototype.selectionDidChange=function(){return this.paused||i(this.element)?void 0:this.updateCurrentLocationRange()},m.prototype.updateCurrentLocationRange=function(t){var n;return(null!=t?t:t=this.createLocationRangeFromDOMRange(e()))&&!c(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(n=this.delegate)&&"function"==typeof n.locationRangeDidChange?n.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},m.prototype.createDOMRangeFromLocationRange=function(t){var e,n,r,o;return r=this.findContainerAndOffsetFromLocation(t[0]),n=l(t)?r:null!=(o=this.findContainerAndOffsetFromLocation(t[1]))?o:r,null!=r&&null!=n?((e=document.createRange()).setStart.apply(e,r),e.setEnd.apply(e,n),e):void 0},m.prototype.createLocationRangeFromDOMRange=function(t,e){var n,r;if(null!=t&&this.domRangeWithinElement(t)&&(r=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([r,n])},m.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},m.prototype.domRangeWithinElement=function(e){return e.collapsed?t(this.element,e.startContainer):t(this.element,e.startContainer)&&t(this.element,e.endContainer)},m}(r.BasicObject)}.call(this),function(){var t,e,n,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,a=[].slice;e=r.rangeIsCollapsed,n=r.rangesAreEqual,t=r.objectsAreEqual,r.EditorController=function(i){function s(t){var e,n;this.editorElement=t.editorElement,e=t.document,n=t.html,this.selectionManager=new r.SelectionManager(this.editorElement),this.selectionManager.delegate=this,this.composition=new r.Composition,this.composition.delegate=this,this.attachmentManager=new r.AttachmentManager(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=new r.InputController(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new r.CompositionController(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new r.ToolbarController(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new r.Editor(this.composition,this.selectionManager,this.editorElement),null!=e?this.editor.loadDocument(e):this.editor.loadHTML(n)}return o(s,i),s.prototype.registerSelectionManager=function(){return r.selectionChangeObserver.registerSelectionManager(this.selectionManager)},s.prototype.unregisterSelectionManager=function(){return r.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},s.prototype.compositionDidChangeDocument=function(){return this.editorElement.notify("document-change"),this.handlingInput?void 0:this.render()},s.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.editorElement.notify("attributes-change",{attributes:this.currentAttributes})},s.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},s.prototype.compositionShouldAcceptFile=function(t){return this.editorElement.notify("file-accept",{file:t})},s.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.editorElement.notify("attachment-add",{attachment:e})},s.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.editorElement.notify("attachment-edit",{attachment:e}),this.editorElement.notify("change")},s.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.editorElement.notify("change")},s.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.editorElement.notify("attachment-remove",{attachment:e})},s.prototype.compositionDidStartEditingAttachment=function(t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t),this.selectionManager.setLocationRange(this.attachmentLocationRange)},s.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},s.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},s.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},s.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},s.prototype.getSelectionManager=function(){return this.selectionManager},s.proxyMethod("getSelectionManager().setLocationRange"),s.proxyMethod("getSelectionManager().getLocationRange"),s.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},s.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},s.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.editorElement.notify("sync")},s.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.composition.updateCurrentAttributes(),this.editorElement.notify("render")),this.renderedCompositionRevision=this.composition.revision},s.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.editorElement.notify("focus")},s.prototype.compositionControllerDidBlur=function(){return this.editorElement.notify("blur")},s.prototype.compositionControllerDidSelectAttachment=function(t){return this.composition.editAttachment(t)},s.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},s.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},s.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},s.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},s.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},s.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},s.prototype.inputControllerDidAllowUnhandledInput=function(){return this.editorElement.notify("change")},s.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},s.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},s.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},s.prototype.inputControllerWillPasteText=function(){return this.editor.recordUndoEntry("Paste"),this.pasting=!0},s.prototype.inputControllerDidPaste=function(t){var e;return e=this.pastedRange,this.pastedRange=null,this.pasting=null,this.editorElement.notify("paste",{pasteData:t,range:e})},s.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},s.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},s.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},s.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},s.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},s.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},s.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!n(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.editorElement.notify("selection-change")},s.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},s.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},s.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},s.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},s.prototype.toolbarDidShowDialog=function(t){return this.editorElement.notify("toolbar-dialog-show",{dialogName:t})},s.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.editorElement.notify("toolbar-dialog-hide",{dialogName:t})},s.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},s.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},s.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},increaseBlockLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseBlockLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},s.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},s.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.editorElement.notify("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},s.prototype.actionIsExternal=function(t){return/^x-./.test(t)},s.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},s.prototype.updateCurrentActions=function(){var e;return e=this.getCurrentActions(),t(e,this.currentActions)?void 0:(this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.editorElement.notify("actions-change",{actions:this.currentActions}))},s.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},s.prototype.render=function(){return this.compositionController.render()},s.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},s.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),e(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},s.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},s.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(a.call(t))},s.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),e(t)?t[0].index:t},s.prototype.getTimeContext=function(){return r.config.undoInterval>0?Math.floor((new Date).getTime()/r.config.undoInterval):0},s.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},s}(r.Controller)}.call(this),function(){var t,e,n,o,i,a,s,l,c,u,d,h;o=r.makeElement,i=r.selectionElements,a=r.triggerEvent,e=r.handleEvent,n=r.handleEventOnce,t=r.AttachmentView.attachmentSelector,r.registerElement("trix-editor",(u=0,s=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},d=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),n("focus",{onElement:t,withCallback:function(){return l(t)}}))},l=function(t){return c(t),h(t)},c=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),e("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},h=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=r.config.blockAttributes.default.tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},{defaultCSS:"%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+'[data-trix-mutable] figcaption:empty::before {\n  content: "'+r.config.lang.captionPrompt+'";\n  color: graytext;\n}\n\n%t '+i.selector+" { "+i.cssText+" }",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++u),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentElement?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=o("trix-toolbar",{id:n}),this.parentElement.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentElement?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=o("input",{type:"hidden",id:e}),this.parentElement.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){var n;switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notify("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":null!=(n=this.inputElement)&&(n.value=r.serializeToContentType(this,"text/html"))}return this.editorController?a("trix-"+t,{onElement:this,attributes:e}):void 0},createdCallback:function(){return d(this)},attachedCallback:function(){return this.hasAttribute("data-trix-internal")?void 0:(null==this.editorController&&(this.editorController=new r.EditorController({editorElement:this,html:this.defaultValue=this.value})),this.editorController.registerSelectionManager(),this.registerResetListener(),s(this),requestAnimationFrame((t=this,function(){return t.notify("initialize")})));var t},detachedCallback:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof t&&t.exports?t.exports=r:n("./node_modules/webpack/buildin/amd-options.js")&&(void 0===(i="function"==typeof(o=r)?o.call(e,n,e,t):o)||(t.exports=i))}.call(this)}).call(this,n("./node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/webpack/buildin/amd-options.js":function(t,e){(function(e){t.exports=e}).call(this,{})},"./src/Common/Axis/Axis.html":function(t,e){t.exports='<md-card md-whiteframe="2" layout="row" ng-class="{\'showCurrent\': vm.showCurrent}">\n\n    \x3c!-- Colored Background & axis logo --\x3e\n    <div\n        flex="nogrow"\n        ng-class="vm.axisClass"\n        class="picture"\n        layout="column"\n        layout-align="center center">\n\n        <img ng-src="{{vm.axisPicture}}"/>\n\n    </div>\n\n    <div layout="row" class="axis-domains">\n\n        \x3c!-- Axis column --\x3e\n        <div\n            flex="20"\n            class="axis"\n            ng-click="vm.goToAxis()">\n\n            <div class="vert-divider" layout="column">\n\n                <div class="md-block label axis-label" flex="60">\n                    <span>{{vm.axisName}}</span>\n                </div>\n\n                <div class="scores" layout="row" flex="40">\n\n                    <div flex="45" layout="row" layout-align="start center">\n\n                        <span flex="nogrow" layout-padding class="label ps">P</span>\n\n                        <div flex="grow" class="line" layout="row">\n                            <div flex="nogrow" ng-class="vm.axisCompletionClass"></div>\n                        </div>\n\n                    </div>\n\n                    <div flex="45" layout="row" layout-align="start center">\n\n                        <span flex="nogrow" layout-padding class="label ps" >S</span>\n                        <div flex="grow" class="line" layout="row" >\n                            <div flex="nogrow" ng-class="vm.axisScoreClass"></div>\n                        </div>\n\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n        \x3c!-- Domain columns --\x3e\n        <div\n            flex="20"\n            class="domains"\n            layout="column"\n            ng-repeat="domain in vm.domains"\n            ng-click="vm.changeDomain(domain)"\n            ng-class="{\'gotdata\': domain.domain_sum > 0, \'nodata\': domain.domain_sum === 0, \'active\': vm.setDomainActive(domain.index)}">\n\n            <div class="vert-divider" layout="column">\n\n                <div class="md-block label" flex="60">\n                    <span class="cap">{{domain.name}}</span>\n                </div>\n\n                <div class="scores" layout="row" ng-if="domain.domain_completion > 0" flex="40">\n\n                    <div flex="50" layout="row" layout-align="start center">\n\n                        <span layout-padding class="label ps" >S</span>\n\n                        <div class="line">\n\n                            <div ng-class="vm.advanceClassGenerator(domain.domain_completion)"></div>\n\n                        </div>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</md-card>\n'},"./src/Common/Axis/Axis.scss":function(t,e,n){},"./src/Common/Axis/AxisController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=a(n("./node_modules/babel-runtime/helpers/createClass.js")),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/toolkit.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n){(0,r.default)(this,t),this.scope=e,this.$ngRedux=n,this.EE=window.EE,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.changeDomain=this.changeDomain.bind(this)}return(0,o.default)(t,[{key:"mapState",value:function(t){var e=parseInt(this.axisIndex,10)+1,r=this.domainIndex?parseInt(this.domainIndex,10)+1:null,o=i.getAxisDetail(t,e),a=o.axis.split(".")[0].replace(" ","").toLowerCase(),s=n("./src/Common/Axis/images sync recursive ^\\.\\/icon\\-.*\\.svg$")("./icon-"+a+".svg"),l=o.axis_score,c=o.axis_completion;return{axisId:e,domainId:r,axisPicture:s,axisName:o.name,axisClass:a,axisScoreClass:this.advanceClassGenerator(l),axisCompletionClass:this.advanceClassGenerator(c),domains:o.domains}}},{key:"onInit",value:function(){null!==this.axisId&&void 0!==this.axisId||(this.axisId=0),this.unsubscribe=this.$ngRedux.connect(this.mapState,null)(this)}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"setDomainActive",value:function(t){return!!this.domainIndex&&parseInt(this.domainIndex,10)===t}},{key:"changeDomain",value:function(t){this.EE.emit("mapsDomainChange",this.axisIndex,t.index)}},{key:"goToAxis",value:function(){var t=parseInt(this.axisId,10)-1;this.EE.emit("mapsAxisChange",t)}},{key:"advanceClassGenerator",value:function(t){return t<50?"red":t<100?"yellow":"green"}}],[{key:"axisFactory",value:function(){function e(e,n){return new t(e,n)}return n("./src/Common/Axis/Axis.scss"),e.$inject=["$scope","$ngRedux"],e}}]),t}();e.default=s},"./src/Common/Axis/axisComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Axis/Axis.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Axis/AxisController.js")).default.axisFactory(),template:r.default,controllerAs:"vm",name:"axis",bindings:{axisIndex:"<",showCurrent:"@",domainIndex:"<"}};e.default=i},"./src/Common/Axis/images sync recursive ^\\.\\/icon\\-.*\\.svg$":function(t,e,n){var r={"./icon-axis1.svg":"./src/Common/Axis/images/icon-axis1.svg","./icon-axis2.svg":"./src/Common/Axis/images/icon-axis2.svg","./icon-axis3.svg":"./src/Common/Axis/images/icon-axis3.svg","./icon-axis4.svg":"./src/Common/Axis/images/icon-axis4.svg","./icon-axis5.svg":"./src/Common/Axis/images/icon-axis5.svg","./icon-axis6.svg":"./src/Common/Axis/images/icon-axis6.svg"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/Common/Axis/images sync recursive ^\\.\\/icon\\-.*\\.svg$"},"./src/Common/Axis/images/icon-axis1.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis1.svg"},"./src/Common/Axis/images/icon-axis2.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis2.svg"},"./src/Common/Axis/images/icon-axis3.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis3.svg"},"./src/Common/Axis/images/icon-axis4.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis4.svg"},"./src/Common/Axis/images/icon-axis5.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis5.svg"},"./src/Common/Axis/images/icon-axis6.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis6.svg"},"./src/Common/CountryMap/CountryMapController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=d(n("./node_modules/babel-runtime/helpers/createClass.js")),i=d(n("./node_modules/lodash/keys.js")),a=d(n("./node_modules/lodash/reduce.js")),s=d(n("./node_modules/lodash/forOwn.js")),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./node_modules/topojson/dist/topojson.js")),c=d(n("./node_modules/svg-pan-zoom/src/browserify.js")),u=d(n("./node_modules/d3/d3.js"));function d(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,n,o){(0,r.default)(this,t),this.el=e,this.scope=n,this.state=o,this.EE=window.EE,this.tooltipOver=!1,this.preventMouseOut=!1,this.checkIfCountryChanged=this.checkIfCountryChanged.bind(this),this.checkIfDistrictDataChanged=this.checkIfDistrictDataChanged.bind(this),this.createInMemoryDOMElement=this.createInMemoryDOMElement.bind(this),this.drawMapShape=this.drawMapShape.bind(this),this.$onInit=this.onInit,this.$onDestroy=this.onDestroy}return(0,o.default)(t,[{key:"onInit",value:function(){this.showPlaceholder=!this.big,this.svgPanZoom=c.default,this.covLib={},this.svgLib={},this.drawnMap=null,this.createInMemoryDOMElement(),this.watchers()}},{key:"createInMemoryDOMElement",value:function(){this.elementContainer=u.default.select(this.el[0]).append("div").attr("class","countrymapcontainer");var t=this.elementContainer[0][0].offsetWidth,e=this.big?u.default.select("#map")[0][0].offsetHeight:409,n=document.createElement("div");this.mapDOMElement=u.default.select(n).append("svg"),this.mapDOMElement.attr("class","countrymap").attr("width",t).attr("height",e)}},{key:"onDestroy",value:function(){this.data=!1,this.countryMapData=!1}},{key:"watchers",value:function(){this.scope.$watch(function(t){return t.vm.mapData},this.checkIfCountryChanged),this.scope.$watch(function(t){return t.vm.districtLevelCoverage},this.checkIfDistrictDataChanged,!0)}},{key:"checkIfCountryChanged",value:function(t){t&&t.mapData&&t.name!==this.drawnMap&&(this.drawMapShape(t),this.drawnMap=t.name)}},{key:"checkIfDistrictDataChanged",value:function(t){t&&this.drawnMap&&(this.boundNrs=(0,a.default)(t,function(t,e,n){return"date"===n?t:((0,s.default)(e,function(e,n){t[n]=(t[n]||0)+e}),t)},{}),this.fillDistrictData(t))}},{key:"setGlobal",value:function(){this.showNationalLevelCoverage=!0;var t=document.getElementsByClassName("d3district");Array.prototype.forEach.call(t,function(t){t.classList.add("global")})}},{key:"setTotal",value:function(){this.showNationalLevelCoverage=!1;var t=document.getElementsByClassName("d3district");Array.prototype.forEach.call(t,function(t){t.classList.remove("global")})}},{key:"makeGeoFromTopo",value:function(t){var e=(0,i.default)(t.objects)[0];return l.feature(t,t.objects[e])}},{key:"calculateScale",value:function(t){return 10*Math.max.apply(null,t.transform.scale.map(function(t){return 1/t}))}},{key:"makeSvgPannableAndZoomable",value:function(t){this.svgZoom=this.svgPanZoom(t,{panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,mouseWheelZoomEnabled:!1,preventMouseEventsDefault:!0,zoomScaleSensitivity:.2,minZoom:.5,maxZoom:10,contain:!1,center:!0,refreshRate:"auto"}),this.svgZoom.zoomOut()}},{key:"drawMapShape",value:function(t){var e=this;this.showPlaceholder=!0;var n=this;this.drawnMap&&(u.default.select(this.el[0]).select(".countrymapcontainer").remove(),this.createInMemoryDOMElement()),this.countryName=t.name,this.flagUrl=t.flag;var r=this.makeGeoFromTopo(t.mapData),o=u.default.geo.mercator().scale(this.calculateScale(t.mapData)),i=u.default.geo.path().projection(o);r.features.forEach(function(o){var a=o.properties.name||o.properties["wof:name"],s=t.districts.find(function(t){return t.id===a});e.svgLib[s.id]=e.mapDOMElement.append("path").datum({type:r.type,geocoding:r.geocoding,features:[o],name:s.name}).attr("d",i).classed("d3district",!0).classed("global",e.showNationalLevelCoverage).classed("name-"+s.id,!0).on("click",function(){e.scope.$evalAsync(function(){e.activeDistrict={name:s.name,data:n.svgLib[s.id]?n.svgLib[s.id].districtData:null}})})}),this.elementContainer.append(function(){return e.mapDOMElement.node()}),this.makeSvgPannableAndZoomable(this.mapDOMElement.node()),this.showPlaceholder=!1}},{key:"fillDistrictData",value:function(t){for(var e in this.svgLib){var n=this.svgLib[e];t[e]?(n.classed("d3district-data",!0),n.districtData=t[e]):(n.classed("d3district-data",!1),n.districtData=null)}}},{key:"goToProject",value:function(t){this.state.go("editProject",{appName:t.id,editMode:"publish"})}}],[{key:"countrymapFactory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Common/CountryMap/Countrymap.scss"),e.$inject=["$element","$scope","$state"],e}}]),t}();e.default=h},"./src/Common/CountryMap/Countrymap.html":function(t,e){t.exports='<div class="relative">\n\n  \x3c!-- for DASH --\x3e\n  <div class="countrychart-tooltip md-whiteframe-2dp" ng-if="!vm.big" ng-hide="vm.showPlaceholder">\n\n    <div class="countrychart-tooltip-header bold" layout="row" layout-align="space-between">\n      <p flex>{{vm.countryName}}</p>\n      <img class="tooltip-flag" ng-src="{{vm.flagUrl}}">\n    </div>\n\n    <md-tabs md-no-pagination md-dynamic-height md-stretch-tabs="always">\n      <md-tab label="{{\'Total\'|translate}}">\n\n        <div class="countrychart-tooltip-main" layout="column">\n\n          <div flex layout="row" class="coverage-data" >\n            <div flex class="cap lh">\n              <translate>Clients: </translate>\n            </div>\n            <div class="bold lh colorednr color0">{{vm.boundNrs.clients || 0}}</div>\n          </div>\n          <div flex layout="row" class="coverage-data">\n            <div flex class="cap lh">\n              <translate>Health Workers: </translate>\n            </div>\n            <div class="bold lh colorednr color1">{{vm.boundNrs.health_workers || 0}}</div>\n          </div>\n          <div flex layout="row" class="coverage-data">\n            <div flex class="cap lh">\n              <translate>Facilities: </translate>\n            </div>\n            <div class="bold lh colorednr color2">{{vm.boundNrs.facilities || 0}}</div>\n          </div>\n\n        </div>\n\n        <div class="countrychart-tooltip-main main2" ng-show="vm.activeDistrict.name" >\n\n          <div flex class="activename bold lh">\n            {{vm.activeDistrict.name}}\n          </div>\n\n          <div ng-show="vm.activeDistrict.data">\n            <div flex\n                 class="coverage-data"\n                 layout="row">\n              <div flex class="cap lh">\n                <translate>Clients: </translate>\n              </div>\n              <div class="bold lh colorednr color0">{{vm.activeDistrict.data.clients}}</div>\n            </div>\n            <div flex\n                 class="coverage-data"\n                 layout="row">\n              <div flex class="cap lh">\n                <translate>Health Workers: </translate>\n              </div>\n              <div class="bold lh colorednr color1">{{vm.activeDistrict.data.health_workers}}</div>\n            </div>\n            <div flex\n                 class="coverage-data"\n                 layout="row">\n              <div flex class="cap lh">\n                <translate>Facilities: </translate>\n              </div>\n              <div class="bold lh colorednr color2">{{vm.activeDistrict.data.facilities}}</div>\n            </div>\n          </div>\n          <div class="bold lh" ng-show="!vm.activeDistrict.data" translate>No coverage data</div>\n\n        </div>\n\n      </md-tab>\n      <md-tab label="{{\'Global\'|translate}}" md-on-select="vm.setGlobal()" md-on-deselect="vm.setTotal()">\n\n        <div class="countrychart-tooltip-main">\n\n          <div ng-show="vm.nationalLevelCoverage">\n            <div flex class="coverage-data" layout="row">\n              <div flex class="cap lh">\n                <translate>Clients: </translate>\n              </div>\n              <div class="bold lh colorednr color0">{{vm.nationalLevelCoverage.clients}}</div>\n            </div>\n\n            <div flex class="coverage-data" layout="row">\n              <div flex class="cap lh">\n                <translate>Health Workers: </translate>\n              </div>\n              <div class="bold lh colorednr color1">{{vm.nationalLevelCoverage.health_workers}}</div>\n            </div>\n\n            <div flex class="coverage-data"layout="row">\n              <div flex class="cap lh">\n                <translate>Facilities: </translate>\n              </div>\n              <div class="bold lh colorednr color2">{{vm.nationalLevelCoverage.facilities}}</div>\n            </div>\n\n          </div>\n\n          <div class="bold lh" ng-show="!vm.nationalLevelCoverage" translate>No national coverage</div>\n\n        </div>\n\n      </md-tab>\n    </md-tabs>\n  </div>\n\n  \x3c!-- for CLV --\x3e\n  <div class="countrychart-tooltip md-whiteframe-2dp" ng-if="vm.big" ng-hide="!vm.mapData">\n\n    <div class="countrychart-tooltip-header bold">\n      {{vm.countryName}} {{vm.activeDistrict.name ? \'-\' : \'\'}} {{vm.activeDistrict.name}}\n      <img class ="tooltip-flag" ng-src="{{vm.flagUrl}}">\n    </div>\n\n    <md-tabs md-no-pagination md-dynamic-height md-stretch-tabs="always">\n\n      <md-tab label="{{\'Sub-national\'|translate}}">\n\n        <div class="countrychart-tooltip-main countrychart-tooltip-main-big mainbig" ng-show="vm.activeDistrict.name" >\n\n          <div\n            flex\n            layout="column"\n            layout-align="space-around start"\n            class="projectcont"\n            ng-repeat="project in vm.activeDistrict.data | limitTo:5"\n            ng-click="vm.goToProject(project)">\n\n            <div class="projectname">{{project.name}}</div>\n            <div class="projectorg">{{project.organisation}}</div>\n\n            <div class="country-approved" ng-show="project.approved">\n              <i class="material-icons">assignment_turned_in</i>\n              <translate>Verified by country</translate>\n            </div>\n\n            <div ng-show="project.isMember" class="my-star"><md-icon>grade</md-icon></div>\n            <div ng-show="project.isViewer" class="my-eye"><md-icon>visibility</md-icon></div>\n          </div>\n          <div class="bold lh no-projects" ng-show="!vm.activeDistrict.data" translate>No projects available</div>\n        </div>\n      </md-tab>\n\n      <md-tab label="{{\'National\'|translate}}" md-on-select="vm.setGlobal()" md-on-deselect="vm.setTotal()">\n        <div class="countrychart-tooltip-main countrychart-tooltip-main-big mainbig">\n\n          <div flex\n               layout="column"\n               layout-align="space-around start"\n               class="projectcont"\n               ng-repeat="project in vm.nationalLevelCoverage | limitTo:5"\n               ng-click="vm.goToProject(project)">\n\n            <div class="projectname">{{project.name}}</div>\n            <div class="projectorg">{{project.organisation_name}}</div>\n\n            <div class="country-approved" ng-show="project.approved">\n              <i class="material-icons">assignment_turned_in</i>\n              <translate>Verified by country</translate>\n            </div>\n\n            <div ng-show="project.isMember" class="my-star"><md-icon>grade</md-icon></div>\n            <div ng-show="project.isViewer" class="my-eye"><md-icon>visibility</md-icon></div>\n          </div>\n          <div class="bold lh no-projects" ng-show="!vm.nationalLevelCoverage" translate>No projects available</div>\n        </div>\n      </md-tab>\n    </md-tabs>\n  </div>\n\n  <div ng-class="[\'zoomhandlers\', {zoomhandlers2: vm.big}]" ng-hide="!vm.mapData">\n    <div>\n      <md-icon class="material-icons unselectable" ng-click="vm.svgZoom.zoomIn()">add_circle_outline</md-icon>\n    </div>\n    <div>\n      <md-icon class="material-icons unselectable" ng-click="vm.svgZoom.zoomOut()">remove_circle_outline</md-icon>\n    </div>\n  </div>\n\n  \x3c!-- Placeholder spinner --\x3e\n  <div class="spinner" layout="row" layout-align="center center" ng-show="vm.showPlaceholder">\n    <span flex>Loading map</span>\n    <md-progress-circular flex md-mode="indeterminate" md-diameter="50"></md-progress-circular>\n  </div>\n\n</div>\n'},"./src/Common/CountryMap/Countrymap.scss":function(t,e,n){},"./src/Common/CountryMap/countrymap.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/CountryMap/Countrymap.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/CountryMap/CountryMapController.js")).default.countrymapFactory(),controllerAs:"vm",template:r.default,name:"countrymap",bindings:{big:"<",districtLevelCoverage:"<",nationalLevelCoverage:"<",mapData:"<"}};e.default=i},"./src/Common/CountryPartners/CountryPartners.html":function(t,e){t.exports='<div class="wrapper-preset">\n  <div layout="row" laxout-align="start start">\n\n    <div class="content-preset" flex="30">\n      <h4 class="md-title">{{vm.footerTitle}}</h4>\n      <p>{{vm.permanentFooter}}</p>\n      <p>{{vm.footerText}}</p>\n    </div>\n\n    <div class="content-logos" flex="60" flex-offset="10">\n      <div class="partnerscontainer">\n        <h4 class="md-title">\n        <translate>Global support to DHA</translate>\n        </h4>\n        <div class="partner">\n          <span class="logoimg" style="background-image: url(\'/static/partners/who-logo.png\')"></span>\n        </div>\n        <div class="partner">\n          <span class="logoimg" style="background-image: url(\'/static/partners/logo-hrp-new-cropped.png\')"></span>\n        </div>\n        <div class="partner">\n          <span class="logoimg" style="background-image: url(\'/static/partners/logo-path-color.png\')"></span>\n        </div>\n        <div class="partner">\n          <span class="logoimg" style="background-image: url(\'/static/partners/logo-digital_square.png\')"></span>\n        </div>\n      </div>\n\n      <div class="partnerscontainer " ng-if="vm.partners.length">\n        <h4 class="md-title">\n        <translate>In-country support to DHA</translate>\n        </h4>\n        <div\n          ng-repeat="logo in vm.partners track by $index | limitTo:4 "\n          class="partner">\n\n          <span class="logoimg" style="background-image: url({{logo}})"></span>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n'},"./src/Common/CountryPartners/CountryPartnersController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=i(n("./node_modules/babel-runtime/helpers/createClass.js"));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n,o){(0,r.default)(this,t),this.scope=e,this.state=n,this.$ngRedux=o,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this)}return(0,o.default)(t,[{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"computeLogoStyle",value:function(t){return{"background-image":"url("+t+")"}}}],[{key:"countryPartnersFactory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Common/CountryPartners/countryPartners.scss"),e.$inject=["$scope","$state","$ngRedux"],e}}]),t}();e.default=a},"./src/Common/CountryPartners/countryPartners.scss":function(t,e,n){},"./src/Common/CountryPartners/countryPartnersComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/CountryPartners/CountryPartners.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/CountryPartners/CountryPartnersController.js")).default.countryPartnersFactory(),template:r.default,controllerAs:"vm",name:"countryPartners",bindings:{footerText:"<",footerTitle:"<",partners:"<",permanentFooter:"<"}};e.default=i},"./src/Common/CountryTopBar/CountryTopBarController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=p(n("./node_modules/babel-runtime/helpers/extends.js")),o=p(n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),i=p(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=p(n("./node_modules/babel-runtime/helpers/createClass.js")),s=p(n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),l=p(n("./node_modules/babel-runtime/helpers/inherits.js")),c=p(n("./src/Common/TopBarBheaviour.js")),u=h(n("./src/store/modules/countries.js")),d=h(n("./src/store/modules/user.js"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t,n,r,a){(0,i.default)(this,e);var l=(0,s.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,n,a));return l.EE=window.EE,l.timeout=r,l.$onInit=l.onInit.bind(l),l.mapCountryState=l.mapCountryState.bind(l),l}return(0,l.default)(e,t),(0,a.default)(e,[{key:"mapCountryState",value:function(t){var e=u.getCountryCoverPage(t),n=e&&e.name&&"WHO"!==e.name;return(0,r.default)({},this.mapState(t),{countryData:e,countryFlag:u.getCurrentCountry(t).flag,pageLoaded:!!e.name,showCountryNameAndFlag:n,logoClass:n?"has-country-logo":""})}},{key:"onInit",value:function(){this.pageLoaded=!1,this.watchers(),this.commonInit(),window.onscroll=this.scrollEventHandler.bind(this),document.addEventListener("scroll",this.scrollEventHandler.bind(this),!0),this.unsubscribe=this.$ngRedux.connect(this.mapCountryState,d)(this)}},{key:"onDestroy",value:function(){this.unsubscribe(),this.commonOnDestroy()}},{key:"watchers",value:function(){var t=this,e=this;this.scope.$watch(function(){return t.state.current.name},function(t){t=t.replace(/ /g,"-"),e.pageClass="page-"+t})}},{key:"scrollEventHandler",value:function(t){var e=this;e.timeout(function(){e.isScrolled=t.target.scrollTop>100?"scrolled-down":"not-scrolled"})}}],[{key:"countryTopBarControllerFactory",value:function(){function t(t,n,r,o){return new e(t,n,r,o)}return n("./src/Common/CountryTopBar/countryTopBar.scss"),t.$inject=["$state","$scope","$timeout","$ngRedux"],t}}]),e}(c.default);e.default=m},"./src/Common/CountryTopBar/countryTopBar.html":function(t,e,n){t.exports='<md-toolbar class="main-toolbar toolbar-global toolbar-landing" ng-class="[vm.isScrolled, vm.pageClass, vm.logoClass]">\n  <div class="md-toolbar-tools">\n    <div class="country-logo" layout-align="">\n\n      <a ui-sref="landing">\n        <img ng-hide="vm.countryData.logo" src="'+n("./src/Common/CountryTopBar/images/dha-logo-blue.svg")+'" class="no-country" />\n        <img ng-show="vm.countryData.logo" ng-src="{{vm.countryData.logo}}" class="" />\n      </a>\n\n    </div>\n\n    <div class="supported-by" ng-show="vm.showCountryNameAndFlag"></div>\n\n    <span flex ></span>\n\n    <div class="current-country row" ng-if="vm.showCountryNameAndFlag">\n      <div class="country-flag">\n        <img ng-src="{{vm.countryFlag}}" alt="{{vm.countryData.name}}">\n      </div>\n      <div class="country-name">{{vm.countryData.name}}</div>\n    </div>\n\n    <md-button class="landing-link md-primary"\n               ui-sref-active="active"\n               ui-sref="login"\n               aria-label="Login"\n               ng-show="vm.currentState !== \'login\' && !vm.token"\n               md-no-ink>\n      <translate> Login </translate>\n    </md-button>\n\n    <md-button class="landing-link md-primary"\n               ui-sref-active="active"\n               ui-sref="signup"\n               aria-label="Signup"\n               ng-show="vm.currentState !== \'signup\' && !vm.token"\n               md-no-ink >\n      <translate>Sign Up</translate>\n    </md-button>\n\n    <md-button aria-label="Go to Dashboard"\n               class="view-selector"\n               ui-sref="dashboard"\n               ng-show="vm.token"\n               md-no-ink>\n      <md-icon class="material-icons ">apps</md-icon>\n      <translate>Dashboard</translate>\n    </md-button>\n\n    <md-menu md-position-mode="target-right target" ng-if="vm.token">\n      <md-button class="md-icon-button" aria-label="User" ng-click="vm.openMenu($mdOpenMenu, $event)" md-no-ink>\n        <md-icon md-menu-origin class="material-icons ">person</md-icon>\n      </md-button>\n\n      <md-menu-content class="user-menu" width="4">\n        <md-menu-item>\n          <div class="user-name">\n            <md-icon class="material-icons" md-menu-align-target>account_circle</md-icon>\n            <span ng-hide ="vm.profile.name">{{vm.profile.email}}</span>\n            <span ng-show ="vm.profile.name">{{vm.profile.name}} </span>\n          </div>\n        </md-menu-item>\n        <md-menu-item>\n          <div class="user-role">\n            <md-icon class="material-icons" md-menu-align-target>verified_user</md-icon>\n            <span>\n              <translate>Role: {{vm.writeUserRole()}}</translate>\n            </span>\n          </div>\n        </md-menu-item>\n        <md-menu-divider></md-menu-divider>\n        <md-menu-item>\n          <md-button ui-sref="editProfile">\n            <md-icon class="material-icons">settings</md-icon>\n            <translate>Edit my Profile</translate>\n          </md-button>\n        </md-menu-item>\n        <md-menu-item>\n          <md-button ng-click="vm.logout()">\n            <md-icon class="material-icons">exit_to_app</md-icon>\n            <translate>Logout</translate>\n          </md-button>\n        </md-menu-item>\n        <md-menu-divider></md-menu-divider>\n        <div ng-show="vm.profile.country">\n        <span class="label">\n          <translate>Country</translate>\n        </span>\n          <md-menu-item>\n            <div class="user-lang" layout="row" layout-align="start center">\n            <span class="country-flag">\n              <img ng-src="{{vm.profile.country.flag}}" alt="{{vm.profile.country.prettyName}}">\n            </span>\n              <span class="country-label">\n               {{vm.profile.country.prettyName}}\n            </span>\n            </div>\n          </md-menu-item>\n        </div>\n        <span class="label">\n          <translate>Site Language</translate>\n        </span>\n        <md-menu-item>\n          <div class="user-lang" layout="row" layout-align="start center">\n            <span class="country-flag">\n                 <img ng-src="{{vm.userLanguage.flag}}" alt="{{vm.userLanguage.name}}">\n            </span>\n            <span class="country-label">\n              {{vm.userLanguage.name}}\n            </span>\n          </div>\n        </md-menu-item>\n        \x3c!-- --\x3e\n      </md-menu-content>\n    </md-menu>\n\n    <md-button class="landing-link md-primary add-new-project" ui-sref="newProject"\n               aria-label="Add new project"\n               ng-show="vm.profile && vm.profile.organisation"\n               md-no-ink>\n      <md-icon class="material-icons">add</md-icon>\n      <translate>New Project</translate>\n    </md-button>\n  </div>\n  <div class="md-toolbar-tools-bottom">\n    <h3>\n      <translate>Get MAPS Toolkit</translate>\n    </h3>\n    <div class="dl-note">\n      <p>\n        <translate>A WHO toolkit for measuring and facilitating scale-up and national institutionalization of digital health solutions.</translate>\n      </p>\n    </div>\n    <md-button class="dl-maps-link md-raised md-primary"\n               href="/static/documents/maps_toolkit_eng.pdf"\n               download="Maps Toolkit.pdf"\n               target="_blank"\n               aria-label="Download MAPS Toolkit">\n      <md-icon class="material-icons">cloud_download</md-icon>\n      <translate>Download Pdf</translate>\n    </md-button>\n  </div>\n</md-toolbar>\n'},"./src/Common/CountryTopBar/countryTopBar.scss":function(t,e,n){},"./src/Common/CountryTopBar/countryTopBarComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/CountryTopBar/countryTopBar.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/CountryTopBar/CountryTopBarController.js")).default.countryTopBarControllerFactory(),template:r.default,controllerAs:"vm",name:"countryTopBar",bindings:{viewMode:"<",showFullNavigation:"<"}};e.default=i},"./src/Common/CountryTopBar/images/dha-logo-blue.svg":function(t,e,n){t.exports=n.p+"public/fonts/dha-logo-blue.svg"},"./src/Common/Disclaimer/disclaimer.html":function(t,e){t.exports='<footer>\n\n  <div>\n    <b>\n      <translate>Disclaimer:</translate>\n    </b>\n    <translate>\n      All reasonable precautions have been taken by the World Health Organization to verify the information contained in this publication. However, the published material is being distributed without warranty of any kind, either expressed or implied. The responsibility for the interpretation and use of the material lies with the reader. In no event shall the World Health Organization be liable for damages arising from its use.\n    </translate>\n    <br>\n    <a href="/terms-of-use">\n      <translate>Terms of use</translate>\n    </a>\n  </div>\n\n</footer>\n'},"./src/Common/Disclaimer/disclaimer.scss":function(t,e,n){},"./src/Common/Disclaimer/disclaimerComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n("./src/Common/Disclaimer/disclaimer.html"),i=(r=o)&&r.__esModule?r:{default:r};n("./src/Common/Disclaimer/disclaimer.scss");var a={template:i.default,name:"disclaimer",controllerAs:"vm"};e.default=a},"./src/Common/Donors/donors.html":function(t,e){t.exports='<md-card md-whiteframe="2" class="dash-stat-card">\n\n    <md-icon class="material-icons dash-trendicon">supervisor_account</md-icon>\n    <span class="dash-stat-nr">{{vm.number}}</span>\n    <span class="dash-stat-label">\n        <translate>Donors</translate>\n    </span>\n\n</md-card>\n'},"./src/Common/Donors/donors.scss":function(t,e,n){},"./src/Common/Donors/donorsComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n("./src/Common/Donors/donors.html"),i=(r=o)&&r.__esModule?r:{default:r};n("./src/Common/Donors/donors.scss");var a={template:i.default,controllerAs:"vm",name:"donors",bindings:{number:"="}};e.default=a},"./src/Common/EE.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=a(n("./node_modules/babel-runtime/helpers/createClass.js")),i=a(n("./node_modules/eventemitter3/index.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),window.EE=new i.default}return(0,o.default)(t,null,[{key:"initialize",value:function(){return new t}}]),t}();e.default=s},"./src/Common/EditProfile/EditProfile.html":function(t,e){t.exports='<div layout="column" layout-align="start center" >\n\n  <div class="page-title">\n    <h1 class="md-display-1 text-center"><translate>Edit User profile</translate></h1>\n  </div>\n\n\n  <div layout="row" layout-sm="column" layout-align="space-around" ng-show="!vm.dataLoaded">\n    <md-progress-circular md-mode="indeterminate" md-diameter="50"></md-progress-circular>\n  </div>\n\n  <div md-whiteframe="2" class="layout-padding-xl wrapper" layout-fill layout="column" ng-if="vm.dataLoaded">\n    <div class="profile-header md-title">\n      <translate>General info</translate>\n      <span class="last-update"><translate>Last update:</translate> {{vm.userProfile.modified}}</span>\n    </div>\n    <form name="vm.editProfileForm" ng-submit="vm.save($event)" novalidate>\n      <div layout="row" class="first">\n        <div flex="50">\n          <md-input-container class="md-block">\n            <label><translate>My name</translate></label>\n            <input ng-model="vm.userProfile.name" required name="name" type="text" ng-change="vm.handleCustomError(\'name\')" />\n            <div ng-messages="vm.editProfileForm.name.$error">\n              <div ng-message="required"><translate>This is required.</translate></div>\n              <div ng-message="custom" ng-repeat="error in vm.editProfileForm.name.customError">{{error}}</div>\n            </div>\n          </md-input-container>\n        </div>\n\n        <div flex="50">\n          <md-input-container class="md-block">\n            <label><translate>My email address</translate></label>\n            <input ng-model="vm.userProfile.email"\n                   ng-disabled="true" required name="email"\n                   type="email" ng-change="vm.handleCustomError(\'email\')" />\n            <div ng-messages="vm.editProfileForm.email.$error">\n              <div ng-message="email"><translate>This must be a valid email</translate></div>\n              <div ng-message="required"><translate>This is required.</translate></div>\n              <div ng-message="custom" ng-repeat="error in vm.editProfileForm.email.customError">{{error}}</div>\n            </div>\n          </md-input-container>\n        </div>\n      </div>\n\n      <div class="md-block">\n        <organisation-autocomplete\n          organisation="vm.userProfile.organisation"\n          form="vm.editProfileForm">\n        </organisation-autocomplete>\n      </div>\n\n      <div layout="row">\n        <div class="countries" flex="50">\n          <md-input-container class="md-block">\n            <label>\n              <translate>Country</translate>\n            </label>\n            <md-select\n              ng-disabled="vm.editMode"\n              required\n              name="country"\n              options="vm.countriesList"\n              ng-model="vm.userProfile.country.id"\n              placeholder="{{\'Select country from list\'|translate}}">\n              <md-option ng-value="country.id" ng-repeat="country in vm.countriesList track by country.id">\n                {{country.name}}\n              </md-option>\n            </md-select>\n            <div ng-messages="vm.editProfileForm.country.$error">\n              <div ng-message="required"><translate>This is required.</translate></div>\n              <div ng-message="custom" ng-repeat="error in vm.editProfileForm.country.customError">{{error}}</div>\n            </div>\n          </md-input-container>\n        </div>\n\n        <div class="languages" flex="50">\n          <md-input-container class="md-block">\n            <label>\n              <translate>Site language</translate>\n            </label>\n            <md-select ng-model="vm.userProfile.language">\n              <md-option ng-value="lang.code" ng-repeat="lang in vm.languages">{{lang.name}}</md-option>\n            </md-select>\n            <div ng-messages="vm.editProfileForm.country.$error">\n              <div ng-message="required">\n                <translate>This is required.</translate>\n              </div>\n              <div ng-message="custom" ng-repeat="error in vm.editProfileForm.country.customError">{{error}}</div>\n            </div>\n          </md-input-container>\n        </div>\n\n      </div>\n\n      <div layout="row" class="edit-button">\n        <div flex="50" layout="row" layout-align="start center">\n          <md-button class="md-gray md-raised" ui-sref="dashboard"><translate>Dismiss Changes</translate></md-button>\n        </div>\n        <div flex="50" layout="row" layout-align="end center">\n          <md-button type="submit" class="md-primary md-raised"><translate>Save Profile</translate></md-button>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <disclaimer></disclaimer>\n</div>\n'},"./src/Common/EditProfile/EditProfile.scss":function(t,e,n){},"./src/Common/EditProfile/EditProfileController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=p(n("./node_modules/babel-runtime/regenerator/index.js")),o=p(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=p(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=p(n("./node_modules/babel-runtime/helpers/createClass.js")),s=p(n("./node_modules/lodash/isEmpty.js")),l=p(n("./node_modules/lodash/forEach.js")),c=h(n("./src/store/modules/user.js")),u=h(n("./src/store/modules/countries.js")),d=h(n("./src/store/modules/system.js"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(e,n,r,o){(0,i.default)(this,t),this.scope=e,this.state=n,this.toast=r,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.unsubscribe=o.connect(this.mapState,c)(this)}return(0,a.default)(t,[{key:"mapState",value:function(t){var e=c.getProfile(t);return{userProfile:this.userProfile?this.userProfile:e,countriesList:u.getCountriesList(t),languages:d.getLanguages(t)}}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"onInit",value:function(){this.dataLoaded=!1,this.handleDataLoad()}},{key:"handleDataLoad",value:function(){var t=this;this.rawName=this.userProfile?this.userProfile.name:"",this.dataLoaded=!0,this.scope.$watch(function(){return t.userProfile},function(e){e&&e.modified&&(t.userProfile.modified=t.userProfile.modified.split("T")[0])})}},{key:"showToast",value:function(t){this.toast.show(this.toast.simple().textContent(t).position("bottom right").hideDelay(3e3))}},{key:"checkErrors",value:function(t){return!(!this.editProfileForm||!this.editProfileForm[t])&&!(0,s.default)(this.editProfileForm[t].$error)}},{key:"save",value:function(){var t=(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.editProfileForm.$valid||!this.userProfile.organisation){t.next=12;break}return t.prev=1,t.next=4,this.saveProfile(this.userProfile);case 4:this.state.go("dashboard"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.handleResponse(t.t0);case 10:t.next=13;break;case 12:this.showToast("Validation error");case 13:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()},{key:"handleResponse",value:function(t){var e=this;(0,l.default)(t.data,function(t,n){e.editProfileForm[n].customError=t,e.editProfileForm[n].$setValidity("custom",!1)}),this.showToast("Ops! Something went wrong")}},{key:"handleCustomError",value:function(t){this.editProfileForm[t].$setValidity("custom",!0),this.editProfileForm[t].customError=[]}}],[{key:"editProfileFactory",value:function(){function e(e,n,r,o){return new t(e,n,r,o)}return n("./src/Common/EditProfile/EditProfile.scss"),e.$inject=["$scope","$state","$mdToast","$ngRedux"],e}}]),t}();e.default=m},"./src/Common/EditProfile/editProfileComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/EditProfile/EditProfile.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/EditProfile/EditProfileController.js")).default.editProfileFactory(),template:r.default,controllerAs:"vm",name:"editProfile"};e.default=i},"./src/Common/EmailConfirmation/EmailConfirmation.html":function(t,e){t.exports='<div class="email-confirm-wrapper" layout="column" layout-align="start center" ng-style="vm.style">\n    <div class="page-title">\n        <h1 class="md-display-1 text-center"><translate>Email Confirmation</translate></h1>\n    </div>\n\n    <div md-whiteframe="2">\n        <md-content layout="column">\n           <div ng-show="vm.inProcess">\n               <translate>You email address is being verified</translate>\n           </div>\n\n            <div ng-hide="vm.inProcess">\n\n                <div ng-show="vm.success">\n                    <translate >Congratulations your email address is verified, you can now</translate>\n                    <a ui-sref="login"><translate >login</translate></a>\n                    <translate>and use the system</translate>\n                </div>\n\n                <div ng-hide="vm.success">\n                    <translate>Something went wrong, your account is not activated</translate>\n                </div>\n\n            </div>\n        </md-content>\n    </div>\n\n    <disclaimer></disclaimer>\n</div>\n'},"./src/Common/EmailConfirmation/EmailConfirmation.scss":function(t,e,n){},"./src/Common/EmailConfirmation/EmailConfirmationController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n("./node_modules/babel-runtime/regenerator/index.js")),o=c(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=c(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=c(n("./node_modules/babel-runtime/helpers/createClass.js")),s=n("./src/Utilities.js"),l=n("./src/store/modules/user.js");function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){(0,i.default)(this,t),this.scope=e,this.state=n,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this)}return(0,a.default)(t,[{key:"onInit",value:function(){this.inProcess=!0,this.style={height:(0,s.calculateHeight)()},this.key=this.state.params.key,this.key&&this.activateEmail()}},{key:"onDestroy",value:function(){}},{key:"activateEmail",value:function(){var t=(0,o.default)(r.default.mark(function t(){var e,n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!1,t.prev=1,t.next=4,(0,l.verifyEmail)({key:this.key});case 4:e=!0,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:this.scope.$evalAsync(function(){n.inProcess=!1,n.success=e});case 11:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()}],[{key:"emailConfirmationFactory",value:function(){function e(e,n){return new t(e,n)}return n("./src/Common/EmailConfirmation/EmailConfirmation.scss"),e.$inject=["$scope","$state"],e}}]),t}();e.default=u},"./src/Common/EmailConfirmation/emailConfirmation.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/EmailConfirmation/EmailConfirmation.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/EmailConfirmation/EmailConfirmationController.js")).default.emailConfirmationFactory(),template:r.default,controllerAs:"vm",name:"emailConfirmation"};e.default=i},"./src/Common/Login/Login.html":function(t,e){t.exports='<div class="login-wrapper" layout="column" layout-align="start center" ng-style="vm.style">\n  <div class="page-title">\n    <h1 class="md-display-1 text-center">\n      <translate>Login</translate>\n    </h1>\n    \x3c!-- <h6>Subtitle if needed</h6> --\x3e\n  </div>\n\n  <div md-whiteframe="2">\n    <md-content layout="column">\n      <form layout="column" name="vm.loginForm" ng-submit="vm.login()" novalidate>\n        <md-input-container>\n          <label>\n            <translate>Email address</translate>\n          </label>\n          <input ng-required="true" name="username" ng-model="vm.user.username" type="email" ng-change="vm.handleCustomError(\'username\')" />\n          <div ng-messages="vm.loginForm.username.$error">\n            <div ng-message="required">\n              <translate>This is required</translate>\n            </div>\n            <div ng-message="email">\n              <translate>This field must be a valid email</translate>\n            </div>\n            <div ng-message="custom" ng-repeat="error in vm.loginForm.username.customError">{{error}} </div>\n          </div>\n        </md-input-container>\n        <md-input-container>\n          <label>\n            <translate>Password</translate>\n          </label>\n          <input ng-required="true" name="password" ng-model="vm.user.password" type="password" ng-change="vm.handleCustomError(\'password\')"/>\n          <div ng-messages="vm.loginForm.password.$error">\n            <div ng-message="required">\n              <translate>This is required</translate>\n            </div>\n            <div ng-message="custom" ng-repeat="error in vm.loginForm.password.customError">{{error}} </div>\n          </div>\n        </md-input-container>\n\n        <p class="global-error">\n          <span ng-repeat="error in vm.loginForm.non_field_errors"> {{error}}</span>\n        </p>\n\n        <div layout="row" layout-align="start">\n          <div flex=auto>\n            <md-button class="md-gray md-small md-no-ink" ui-sref="reset">\n              <translate>Forgot password?</translate>\n            </md-button>\n          </div>\n          <div flex=grow layout-align="end">\n            <md-button type="submit" class="md-raised md-primary">\n              <translate>Login</translate>\n            </md-button>\n          </div>\n        </div>\n      </form>\n    </md-content>\n  </div>\n\n  <disclaimer></disclaimer>\n</div>\n'},"./src/Common/Login/Login.scss":function(t,e,n){},"./src/Common/Login/LoginController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n("./node_modules/babel-runtime/regenerator/index.js")),o=u(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=u(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=u(n("./node_modules/babel-runtime/helpers/createClass.js")),s=u(n("./node_modules/lodash/forEach.js")),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/user.js")),c=n("./src/Utilities.js");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,n,r,o){(0,i.default)(this,t),this.EE=window.EE,this.scope=e,this.state=n,this.$urlService=o,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.handleDataError=this.handleDataError.bind(this),this.unsubscribe=r.connect(this.mapState,l)(this)}return(0,a.default)(t,[{key:"mapState",value:function(t){return{userModel:t.user}}},{key:"onInit",value:function(){this.user={username:"",password:""},this.style={height:(0,c.calculateHeight)()}}},{key:"onDestroy",value:function(){this.user=void 0,this.unsubscribe()}},{key:"login",value:function(){var t=(0,o.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loginForm.$valid){t.next=11;break}return t.prev=1,t.next=4,this.doLogin(this.user);case 4:this.state.params.location?(e=this.$urlService.match({path:this.state.params.location}),this.state.go(e.rule.state.name,e.match)):this.state.go("dashboard"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.warn(t.t0),this.handleDataError(t.t0);case 11:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()},{key:"handleDataError",value:function(t){var e=this;t||(t={non_field_errors:["Security error"]}),(0,s.default)(t,function(t,n){e.loginForm[n]&&"non_field_errors"!==n?(e.loginForm[n].customError=t,e.loginForm[n].$setValidity("custom",!1)):e.loginForm[n]=t}),e.scope.$evalAsync()}},{key:"handleCustomError",value:function(t){this.loginForm[t].$setValidity("custom",!0),this.loginForm[t].customError=[]}}],[{key:"loginFactory",value:function(){function e(e,n,r,o){return new t(e,n,r,o)}return n("./src/Common/Login/Login.scss"),e.$inject=["$scope","$state","$ngRedux","$urlService"],e}}]),t}();e.default=d},"./src/Common/Login/loginComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Login/Login.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Login/LoginController.js")).default.loginFactory(),template:r.default,controllerAs:"vm",name:"login"};e.default=i},"./src/Common/OrganisationAutocomplete/Organisation.html":function(t,e){t.exports='  <div class="autocomplete-wrapper md-block">\n    <md-autocomplete\n        ng-required="!vm.notRequired"\n        id="organisation"\n        md-input-name="organisation"\n        md-no-cache="true"\n        md-input-maxlength="100"\n        md-autoselect="true"\n        md-selected-item="vm.organisation"\n        md-selected-item-change="vm.addOrganisationName(item)"\n        md-search-text="vm.searchText"\n        md-items="item in vm.organisationSearch(vm.searchText)"\n        md-item-text="item.name"\n        md-delay="300"\n        md-min-length="2"\n        md-floating-label="{{\'Organisation name\'|translate}}">\n      <md-item-template>\n        <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item.name}}</span>\n      </md-item-template>\n\n    </md-autocomplete>\n    <div class="autocomplete-errors" ng-messages="vm.form.organisation.$error">\n      <div ng-message="required"><translate>This field is required</translate></div>\n      <div ng-message="maxlength"><translate>This field has to be less than 100 characters long.</translate></div>\n    </div>\n  </div>\n'},"./src/Common/OrganisationAutocomplete/Organisation.scss":function(t,e,n){},"./src/Common/OrganisationAutocomplete/OrganisationController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n("./node_modules/babel-runtime/core-js/object/assign.js")),o=u(n("./node_modules/babel-runtime/regenerator/index.js")),i=u(n("./node_modules/babel-runtime/core-js/promise.js")),a=u(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),s=u(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),l=u(n("./node_modules/babel-runtime/helpers/createClass.js")),c=n("./src/store/modules/system.js");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,s.default)(this,t),this.scope=e,this.addOrganisationName=this.addOrganisationName.bind(this),this.organisationSearch=this.organisationSearch.bind(this),this.$onInit=this.onInit.bind(this)}return(0,l.default)(t,[{key:"onInit",value:function(){var t=this;this.scope.$watch(function(t){return t.vm.organisation},function(e,n){(!n&&e&&e.id||e&&e.id&&e.id!==n.id)&&t.callOnChange&&t.callOnChange instanceof Function&&t.callOnChange("organisation",t.organisation)})}},{key:"organisationSearch",value:function(){var t=(0,a.default)(o.default.mark(function t(e){var n,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.searchOrganisation)(e);case 2:return n=t.sent,r={id:null,name:e,manual:!0},n.some(function(t){return t.name===e})||n.splice(0,0,r),this.latestOrgs=n,t.abrupt("return",i.default.resolve(n));case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addOrganisationName",value:function(){var t=(0,a.default)(o.default.mark(function t(e){var n,i=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.manual&&e.name.length<101)){t.next=7;break}return t.next=3,(0,c.addOrganisation)(e.name);case 3:n=t.sent,this.scope.$evalAsync(function(){i.organisation=n,(0,r.default)(i.latestOrgs[0],n)}),t.next=8;break;case 7:this.organisation=e;case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"organisationFactory",value:function(){function e(e){return new t(e)}return n("./src/Common/OrganisationAutocomplete/Organisation.scss"),e.$inject=["$scope"],e}}]),t}();e.default=d},"./src/Common/OrganisationAutocomplete/organisationComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("./src/Common/OrganisationAutocomplete/Organisation.html")),o=i(n("./src/Common/OrganisationAutocomplete/OrganisationController.js"));function i(t){return t&&t.__esModule?t:{default:t}}var a={template:r.default,controller:o.default.organisationFactory(),controllerAs:"vm",name:"organisationAutocomplete",bindings:{organisation:"=",form:"<",notRequired:"<",callOnChange:"<"}};e.default=a},"./src/Common/ProjectComponent/ProjectComponent.html":function(t,e){t.exports='<md-card md-whiteframe="2" layout="column" layout-align="start start" ng-click="vm.cardClick()" ng-class="{\'show-pointer\' : !vm.showDetails}" >\n\n  <div class="project-container" layout="row">\n\n    <div class="text-container" layout="column">\n\n      <div ng-show="vm.project.isMember" ng-class="{\'my-star\':vm.project.isMember}"><md-icon>grade</md-icon></div>\n      <div ng-show="vm.project.isViewer && !vm.project.isMember" ng-class="{\'my-eye\': vm.project.isViewer}"><md-icon>visibility</md-icon></div>\n\n      <div class="upper" layout="row">\n        <div class="basic" flex layout="column">\n          <span flex class="name">{{vm.project.name}}</span>\n          <span flex class="org-country">{{vm.project.country_name}} &nbsp;|&nbsp; {{vm.project.organisation_name}} </span>\n        </div>\n        <div ng-show="vm.showDetails" class="donors" flex="no-grow">\n                    <span class="nr">\n                        {{vm.project.donors.length}}\n                    </span>\n          <span class="static">\n            <translate>Donors</translate>\n          </span>\n        </div>\n        <div class="version" ng-if="vm.showVersion">\n          <span class="nr" ng-show="vm.project.isPublished">\n              {{vm.project.last_version || 0}}\n          </span>\n          <span class="nr" ng-hide="vm.project.isPublished">\n            <translate >Draft</translate>\n          </span>\n          <span class="static">\n            <translate>Version</translate>\n          </span>\n        </div>\n      </div>\n\n      <div ng-if="vm.showDetails" class="lower" layout="row" layout-align="start center">\n        <div flex class="badges">\n          <div class="draft" ng-hide="vm.project.isPublished">\n            <translate >Draft</translate>\n          </div>\n          <div class="published" ng-show="vm.project.isPublished">\n            <translate>Published</translate>\n          </div>\n          <div class="country-approved" ng-show="vm.project.approved">\n            <translate>Verified by country</translate>\n          </div>\n        </div>\n\n        <div class="buttons" layout="row">\n\n          <md-button class="md-primary md-no-ink" ng-if="vm.project.isViewer" ng-click="vm.viewDraft()">\n            <md-icon class="material-icons">\n              arrow_forward\n            </md-icon>\n            <translate>View Draft</translate>\n          </md-button>\n\n          <md-button class="md-primary md-no-ink" ng-if="vm.project.isMember" ng-click="vm.editDraft()">\n            <md-icon class="material-icons">\n              mode_edit\n            </md-icon>\n            <translate>Edit Draft</translate>\n          </md-button>\n\n          <md-button class="md-primary md-no-ink" ng-show="vm.project.isPublished"\n                     ng-if="vm.project.isMember || vm.project.isViewer" ng-click="vm.viewPublished()">\n            <md-icon class="material-icons">\n              arrow_forward\n            </md-icon>\n            <translate>View Published</translate>\n          </md-button>\n\n          <md-button class="md-primary md-no-ink" ng-if="vm.project.isMember || vm.project.isViewer" ng-click="vm.goToAssessment()">\n            <md-icon class="material-icons">\n              arrow_forward\n            </md-icon>\n            <translate>Assesment</translate>\n          </md-button>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n</md-card>\n'},"./src/Common/ProjectComponent/ProjectComponent.scss":function(t,e,n){},"./src/Common/ProjectComponent/ProjectComponentController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=i(n("./node_modules/babel-runtime/helpers/createClass.js"));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n){(0,r.default)(this,t),this.state=e,this.$ngRedux=n,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.ondDestroy.bind(this)}return(0,o.default)(t,[{key:"onInit",value:function(){this.project||(this.project={})}},{key:"ondDestroy",value:function(){}},{key:"cardClick",value:function(){this.showDetails||this.goToAssessment()}},{key:"goToAssessment",value:function(){this.state.go(this.project.isMember||this.project.isViewer?"assessment":"public-assessment",{appName:this.project.id})}},{key:"viewDraft",value:function(){this.state.go("editProject",{appName:this.project.id})}},{key:"editDraft",value:function(){this.state.go("editProject",{appName:this.project.id})}},{key:"viewPublished",value:function(){this.state.go("editProject",{appName:this.project.id,editMode:"publish"})}}],[{key:"projectComponentFactory",value:function(){function e(e,n){return new t(e,n)}return n("./src/Common/ProjectComponent/ProjectComponent.scss"),e.$inject=["$state","$ngRedux"],e}}]),t}();e.default=a},"./src/Common/ProjectComponent/projectComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/ProjectComponent/ProjectComponent.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/ProjectComponent/ProjectComponentController.js")).default.projectComponentFactory(),template:r.default,controllerAs:"vm",name:"projectComponent",bindings:{project:"<",showDetails:"<",showVersion:"<"}};e.default=i},"./src/Common/Reset/Reset.html":function(t,e){t.exports='<div class="reset-wrapper" layout="column" layout-align="start center" ng-style="vm.style">\n    <div class="page-title">\n        <h1 class="md-display-1 text-center"><translate>Reset password</translate></h1>\n    </div>\n\n    <div md-whiteframe="2">\n        <md-content layout="column">\n            <form layout="column" name="vm.resetForm" ng-submit="vm.reset()" ng-hide="vm.sent" novalidate>\n                <div id="title-text">\n                    <translate>Enter your email address and follow the instructions you will get by email.</translate>\n                </div>\n                <md-input-container>\n                    <label><translate>Email address</translate></label>\n                    <input ng-required="true" name="email" ng-model="vm.email" type="email" ng-change="vm.handleCustomError(\'email\')" />\n                    <div ng-messages="vm.resetForm.email.$error">\n                        <div ng-message="required"><translate>This is required.</translate></div>\n                        <div ng-message="email"><translate>This field must be a valid email.</translate></div>\n                        <div ng-message="custom" ng-repeat="error in vm.resetForm.email.customError">{{error}} </div>\n                    </div>\n                </md-input-container>\n\n                <p class="global-error">\n                    <span ng-repeat="error in vm.resetForm.non_field_errors"> {{error}}</span>\n                </p>\n\n                <div layout="row" layout-align="start">\n                    <div flex=auto>\n                        <md-button class="md-gray md-small" ui-sref="login">\n                            <translate>Go back to login</translate>\n                        </md-button>\n                    </div>\n                    <div flex=grow layout-align="end">\n                        <md-button type="submit" class="md-raised md-primary">\n                            <translate>Reset</translate>\n                        </md-button>\n                    </div>\n                </div>\n            </form>\n            <div layout="column" class="form-success" ng-show="vm.sent">\n                <i class="material-icons">check_circle</i>\n                <h4 class="text-center"><translate>Congratulations!</translate></h4>\n                <p class="text-center">\n                    <translate>An email with instructions to reset your password have been sent.</translate>\n                </p>\n                <div layout="row" layout-align="center">\n                    <div>\n                        <md-button class="md-raised md-primary" ui-sref="login">\n                            <translate>Go back to login</translate>\n                        </md-button>\n                    </div>\n                </div>\n            </div>\n        </md-content>\n    </div>\n\n    <disclaimer></disclaimer>\n</div>\n'},"./src/Common/Reset/Reset.scss":function(t,e,n){},"./src/Common/Reset/ResetController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n("./node_modules/babel-runtime/regenerator/index.js")),o=u(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=u(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=u(n("./node_modules/babel-runtime/helpers/createClass.js")),s=u(n("./node_modules/lodash/forEach.js")),l=n("./src/Utilities.js"),c=n("./src/store/modules/user.js");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,i.default)(this,t),this.scope=e,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this)}return(0,a.default)(t,[{key:"onInit",value:function(){this.email="",this.sent=!1,this.style={height:(0,l.calculateHeight)()}}},{key:"onDestroy",value:function(){this.email=void 0}},{key:"reset",value:function(){var t=(0,o.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,!this.resetForm.$valid){t.next=12;break}return t.prev=2,t.next=5,(0,c.resetPassword)({email:this.email});case 5:this.sent=!0,e.scope.$evalAsync(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.handleDataError(t.t0.data);case 12:case"end":return t.stop()}},t,this,[[2,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"handleDataError",value:function(t){var e=this;(0,s.default)(t,function(t,n){e.resetForm[n]?(e.resetForm[n].customError=t,e.resetForm[n].$setValidity("custom",!1)):e.resetForm[n]=t}),e.scope.$evalAsync()}},{key:"handleCustomError",value:function(t){this.resetForm[t].$setValidity("custom",!0),this.resetForm[t].customError=[]}}],[{key:"resetFactory",value:function(){function e(e){return new t(e)}return n("./src/Common/Reset/Reset.scss"),e.$inject=["$scope"],e}}]),t}();e.default=d},"./src/Common/Reset/resetComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Reset/Reset.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Reset/ResetController.js")).default.resetFactory(),template:r.default,controllerAs:"vm",name:"reset"};e.default=i},"./src/Common/Searchbar/Searchbar.html":function(t,e){t.exports='<md-button ng-if="vm.compactMode" ng-click="vm.toggleSearch()" class="md-icon-button" aria-label="Search" md-no-ink>\n    <md-icon class="material-icons">search</md-icon>\n</md-button>\n<div class="search-project" ng-hide="vm.compactMode && !vm.showSearch" ng-class="{\'active\': vm.showSearch, \'compact\': vm.compactMode}">\n    <md-input-container class="searchinput md-block">\n        <md-icon>search</md-icon>\n        <input\n            type="text"\n            ng-model="vm.searchStr"\n            ng-model-options="{debounce: 500}"\n            ng-focus="vm.showSearch = true"\n            aria-label="search input field"\n            placeholder="{{ \'Type and search projects...\' | translate}}">\n    </md-input-container>\n\n    <md-button\n        ng-click="vm.close()"\n        id="closebtn"\n        class="md-icon-button md-gray md-no-ink">\n        <md-icon>close</md-icon>\n    </md-button>\n\n    <md-card\n        layout="column"\n        class="searchcard md-whiteframe-24dp"\n        ng-if="vm.showSearch">\n\n        <div class="md-block filters">\n          <md-subheader class="md-no-sticky">\n            <translate>Set filters:</translate>\n          </md-subheader>\n\n          <div>\n              <div layout="row" layout-wrap flex>\n                  <div ng-repeat="filter in vm.filters" flex="33">\n                      <md-checkbox class="md-primary small" ng-model="filter.value" ng-change="vm.checkboxChecks(filter)">\n                          {{filter.displayName}}\n                      </md-checkbox>\n                  </div>\n              </div>\n          </div>\n        </div>\n\n        <div class="md-block results" ng-show="vm.projects && vm.projects.length > 0">\n          <md-subheader class="md-no-sticky">\n            <translate>\n              Results ({{vm.resultNr}} out of {{vm.totalNr}}):\n            </translate>\n          </md-subheader>\n\n          <project-component\n              ng-repeat="project in vm.projects | limitTo: 5"\n              project="project"\n              show-version="false">\n          </project-component>\n        </div>\n    </md-card>\n</div>\n'},"./src/Common/Searchbar/Searchbar.scss":function(t,e,n){},"./src/Common/Searchbar/SearchbarController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n("./node_modules/babel-runtime/regenerator/index.js")),o=d(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=d(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=d(n("./node_modules/babel-runtime/helpers/createClass.js")),s=d(n("./node_modules/lodash/min.js")),l=d(n("./node_modules/lodash/map.js")),c=d(n("./node_modules/lodash/every.js")),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/system.js"));function d(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,n,r){(0,i.default)(this,t),this.EE=window.EE,this.scope=n,this.state=e,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.unsubscribe=r.connect(this.mapState,u)(this)}return(0,a.default)(t,[{key:"mapState",value:function(t){return{projects:u.getSearchResult(t),filters:u.getSearchFilters(t)}}},{key:"onInit",value:function(){var t=this;this.showSearch=!1,this.searchStr="",this.resultNr=0,this.scope.$watch(function(){return t.searchStr},function(e){t.search(e)})}},{key:"onDestroy",value:function(){this.unsetSearchedProjects(),this.unsubscribe()}},{key:"toggleSearch",value:function(){this.showSearch=!this.showSearch,this.showSearch||this.unsetSearchedProjects()}},{key:"search",value:function(){var t=(0,o.default)(r.default.mark(function t(e){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&0!==e.length){t.next=2;break}return t.abrupt("return",!1);case 2:if(e!==this.searchStr){t.next=8;break}if(!this.filters.some(function(t){return t.value})){t.next=8;break}return t.next=6,this.searchProjects(this.searchStr,this.filters);case 6:this.resultNr=(0,s.default)([this.projects.length,5]),this.totalNr=this.projects.length;case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){this.showSearch=!1,this.searchStr="",this.projects=void 0,this.totalNr=0,this.resultNr=0}},{key:"checkboxChecks",value:function(t){var e=this;this.filters=(0,l.default)(this.filters,function(n){return"all"===t.name&&t.value&&"all"!==n.name?n.value=!1:"all"!==t.name&&t.value&&"all"===n.name?n.value=!1:!t.value&&(0,c.default)(e.filters,function(t){return!t.value})&&(n.value=!0),n}),this.search(this.searchStr)}}],[{key:"searchbarFactory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Common/Searchbar/Searchbar.scss"),e.$inject=["$state","$scope","$ngRedux"],e}}]),t}();e.default=h},"./src/Common/Searchbar/searchbarComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Searchbar/Searchbar.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Searchbar/SearchbarController.js")).default.searchbarFactory(),template:r.default,controllerAs:"vm",name:"searchbar",bindings:{compactMode:"@"}};e.default=i},"./src/Common/Signup/Signup.html":function(t,e,n){t.exports='<div class="signup-wrapper" layout="column" layout-align="start center" ng-style="vm.style" ng-if="!vm.landingPage">\n  <div class="page-title">\n    <h1 class="md-display-1 text-center">\n      <translate>Sign Up</translate>\n    </h1>\n    \x3c!-- <h6>Subtitle if needed</h6> --\x3e\n  </div>\n\n  <div md-whiteframe="2">\n    <md-content layout="column">\n      <form layout="column" name="signupForm" ng-submit="vm.signup(signupForm)" novalidate ng-hide="vm.registered">\n        <div layout="column" class="role-form">\n          <h4>\n            <translate>1. Select your role</translate>\n          </h4>\n          <md-radio-group ng-model="vm.register.account_type">\n            <md-radio-button value="I" ng-selected="true" class="md-primary">\n              <img src="'+n("./src/Common/Signup/images/icon-role-implementer.svg")+'" alt="" class="img-role">\n              <translate>Implementer or Technologist</translate>\n            </md-radio-button>\n            <p class="md-small">\n              <translate>How can I better scale-up my implementation? Are there tips and resources that I should consider to improve my implementation? Sign up to complete the digital version of the MAPS toolkit and track the performance of your implementation.</translate>\n            </p>\n            <md-radio-button value="D" class="md-primary">\n              <img src="'+n("./src/Common/Signup/images/icon-role-investor.svg")+'" alt="" class="img-role">\n              <translate>Financial Investor</translate>\n            </md-radio-button>\n            <p class="md-small">\n              <translate>What are the different projects within your portfolio?Â Sign up to access a visual dashboard displaying the performance metrics of projects within your portfolio.</translate>\n            </p>\n            <md-radio-button value="G" class="md-primary">\n              <img src="'+n("./src/Common/Signup/images/icon-role-government.svg")+'" alt="" class="img-role">\n              <translate>Government</translate>\n            </md-radio-button>\n            <p class="md-small">\n              <translate>Who is implementing digital health interventions in your country? Sign up to access interactive maps and performance metrics on the different implementation in your country.</translate>\n            </p>\n          </md-radio-group>\n        </div>\n        <div layout="column" class="main-form">\n          <h4>\n            <translate>2. Fill out the form below</translate>\n          </h4>\n          <md-input-container class="md-block">\n            <label>\n              <translate>Email address</translate>\n            </label>\n            <input ng-model="vm.register.email" required name="email" type="email" ng-change="vm.handleCustomError(signupForm, \'email\')" />\n            <div ng-messages="signupForm.email.$error">\n              <div ng-message="required">\n                <translate>This is required</translate>\n              </div>\n              <div ng-message="email">\n                <translate>This should be a valid email</translate>\n              </div>\n              <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>\n            </div>\n          </md-input-container>\n          <md-input-container>\n            <label>\n              <translate>Password</translate>\n            </label>\n            <input ng-model="vm.register.password1" type="password" name="password1" required ng-minlength="6" ng-change="vm.handleCustomError(signupForm, \'password1\')"/>\n            <div ng-messages="signupForm.password1.$error" >\n              <div ng-message="required">\n                <translate>This is required</translate>\n              </div>\n              <div ng-message="minlength">\n                <translate>This need to be at least 6 chars</translate>\n              </div>\n              <div ng-message="custom" ng-repeat="error in signupForm.password1.customError">{{error}} </div>\n            </div>\n          </md-input-container>\n          <md-input-container>\n            <label>\n              <translate>Password (Again)</translate>\n            </label>\n            <input ng-model="vm.register.password2" type="password" name="password2" required  match-password="password1" ng-change="vm.handleCustomError(signupForm, \'password2\')" />\n            <div ng-messages="signupForm.password2.$error">\n              <div ng-message="required">\n                <translate>This is required</translate>\n              </div>\n              <div ng-message="passwordMatch">\n                <translate>Your passwords do not match.</translate>\n              </div>\n              <div ng-message="custom" ng-repeat="error in signupForm.password2.customError">{{error}} </div>\n            </div>\n          </md-input-container>\n          <p class="global-error">\n            <span ng-repeat="error in signupForm.non_field_errors"> {{error}}</span>\n          </p>\n          <div layout="row" layout-align="start">\n            <div flex="auto" class="login-back">\n              <small>\n                <translate>Already signed up?</translate>\n                <a ui-sref="login">\n                  <translate>Login here</translate>\n                </a>\n              </small>\n            </div>\n            <div flex="grow" layout="column" layout-align="center end">\n              <md-button ng-hide="vm.inProgress" class="md-raised md-primary" type="submit" ng-disabled="signupForm.$invalid">\n                <translate>Sign up now</translate>\n              </md-button>\n\n              <md-progress-circular ng-show="vm.inProgress" md-mode="indeterminate"></md-progress-circular>\n            </div>\n          </div>\n        </div>\n      </form>\n      <div layout="column" class="form-success" ng-show="vm.registered">\n        <i class="material-icons">check_circle</i>\n        <h4>\n          <translate>Go to next step</translate>\n        </h4>\n        <p class="text-center">\n          <translate>Your registration is successful, you will receive an email with the instructions to activate your account, you will be automatically logged in in 5 seconds...</translate>\n        </p>\n      </div>\n    </md-content>\n  </div>\n  <disclaimer></disclaimer>\n</div>\n\n\n<div ng-if="vm.landingPage" class="landing-page" ng-style="vm.style" >\n  <h2 class="md-display-3">\n    <translate>Sign up</translate>\n  </h2>\n  <h5 class="md-headline" id="scroll-to-head">\n    <translate>Whether you are an implementer, government, or financial investor, or technologist, sign up below.</translate>\n  </h5>\n\n  <form name="signupForm" ng-submit="vm.signup(signupForm)"  novalidate ng-hide="vm.registered" >\n    <div layout="column" class="role-form" ng-class="{\'hidden\' : vm.hideMainForm}">\n      <h4>\n        <translate>1. Select your role</translate>\n      </h4>\n      <md-radio-group ng-model="vm.register.account_type">\n        <md-radio-button value="I" ng-selected="true" class="md-primary">\n          <img src="'+n("./src/Common/Signup/images/icon-role-implementer.svg")+'" alt="" class="img-role">\n          <translate>Implementer or Technologist</translate>\n        </md-radio-button>\n        <p>\n          <translate>\n            How can I better scale-up my implementation? Are there tips and resources that I should consider to improve my implementation? Sign up to complete the digital version of the MAPS toolkit and track the performance of your implementation.\n          </translate>\n        </p>\n        <md-radio-button value="D" class="md-primary">\n          <img src="'+n("./src/Common/Signup/images/icon-role-investor.svg")+'" alt="" class="img-role">\n          <translate>Financial Investor</translate>\n        </md-radio-button>\n        <p>\n          <translate>\n            What are the different projects within your portfolio?Â Sign up to access a visual dashboard displaying the performance metrics of projects within your portfolio.\n          </translate>\n        </p>\n        <md-radio-button value="G" class="md-primary">\n          <img src="'+n("./src/Common/Signup/images/icon-role-government.svg")+'" alt="" class="img-role">\n          <translate>Government</translate>\n        </md-radio-button>\n        <p>\n          <translate>\n            Who is implementing digital health interventions in your country? Sign up to access interactive maps and performance metrics on the different implementation in your country.\n          </translate>\n        </p>\n      </md-radio-group>\n\n      <div class="form-actions" layout=row layout-align=end>\n        <md-button class="md-raised md-primary" type="submit" ng-click="vm.nextStep()">\n          <translate>Go to next step</translate>\n          <md-icon class="material-icons">arrow_forward</md-icon>\n        </md-button>\n      </div>\n    </div>\n    <div layout="column" class="main-form next-step" ng-class="{\'hidden\' : !vm.hideMainForm}">\n      <h4>\n        <translate>\n          Go to next step\n        </translate>\n      </h4>\n      <md-input-container class="md-block">\n        <label>\n          <translate>Email address</translate>\n        </label>\n        <input ng-model="vm.register.email" required name="email" type="email" ng-change="vm.handleCustomError(signupForm, \'email\')" />\n        <div ng-messages="signupForm.email.$error">\n          <div ng-message="required">\n            <translate>This is required</translate>\n          </div>\n          <div ng-message="email">\n            <translate>This should be a valid email</translate>\n          </div>\n          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>\n        </div>\n      </md-input-container>\n      <md-input-container>\n        <label>\n          <translate>Password</translate>\n        </label>\n        <input ng-model="vm.register.password1" type="password" name="password1" required ng-minlength="6" ng-change="vm.handleCustomError(signupForm, \'password1\')"/>\n        <div ng-messages="signupForm.password1.$error" >\n          <div ng-message="required">\n            <translate>This is required</translate>\n          </div>\n          <div ng-message="minlength">\n            <translate>This need to be at least 6 chars</translate>\n          </div>\n          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>\n        </div>\n      </md-input-container>\n      <md-input-container>\n        <label>\n          <translate>Password (Again)</translate>\n        </label>\n        <input ng-model="vm.register.password2" type="password" name="password2" required  match-password="password1" ng-change="vm.handleCustomError(signupForm, \'password2\')" />\n        <div ng-messages="signupForm.password2.$error">\n          <div ng-message="required">\n            <translate>This is required</translate>\n          </div>\n          <div ng-message="passwordMatch">\n            <translate>Your passwords do not match.</translate>\n          </div>\n          <div ng-message="custom" ng-repeat="error in signupForm.email.customError">{{error}} </div>\n        </div>\n      </md-input-container>\n      <div class="form-actions" layout=row layout-align=end>\n        <md-button ng-hide="vm.inProgress" class="md-raised md-primary" type="submit" ng-disabled="signupForm.$invalid">\n          <translate>Sign up now</translate>\n        </md-button>\n        <md-progress-circular ng-show="vm.inProgress" md-mode="indeterminate"></md-progress-circular>\n      </div>\n    </div>\n  </form>\n\n  <div layout="column" class="form-success md-whiteframe-2dp" ng-show="vm.registered">\n    <i class="material-icons">check_circle</i>\n    <h4>\n      <translate>Congratulations</translate>\n    </h4>\n    <p class="text-center">\n      <translate>Your registration is successful, you will receive an email with the instructions to activate your account, you will be automatically logged in in 5 seconds...</translate>\n    </p>\n  </div>\n</div>\n'},"./src/Common/Signup/Signup.scss":function(t,e,n){},"./src/Common/Signup/SignupController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n("./node_modules/babel-runtime/regenerator/index.js")),o=u(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=u(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=u(n("./node_modules/babel-runtime/helpers/createClass.js")),s=u(n("./node_modules/lodash/forEach.js")),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/user.js")),c=n("./src/Utilities.js");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,n,r,o,a){(0,i.default)(this,t),this.EE=window.EE,this.scope=e,this.$location=n,this.$anchorScroll=r,this.state=a,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.unsubscribe=o.connect(this.mapState,l)(this)}return(0,a.default)(t,[{key:"onInit",value:function(){this.inProgress=!1,this.registered=!1,this.hideMainForm=!1,this.handleDataError=this.handleDataError.bind(this),this.register={email:null,password1:null,password2:null,account_type:"I"},this.style={height:(0,c.calculateHeight)()}}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"mapState",value:function(t){return{userModel:t.user}}},{key:"signup",value:function(){var t=(0,o.default)(r.default.mark(function t(e){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$valid){t.next=13;break}return this.inProgress=!0,t.prev=2,t.next=5,this.doSignup(this.register);case 5:this.inProgress=!1,this.registered=!0,setTimeout(function(){n.state.go("editProfile")},5e3),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.handleDataError(e,t.t0);case 13:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"handleDataError",value:function(t,e){this.inProgress=!1,(0,s.default)(e,function(e,n){t[n]?(t[n].customError=e,t[n].$setValidity("custom",!1)):t[n]=e}),this.scope.$evalAsync()}},{key:"scrollTo",value:function(t){this.$location.hash(t),this.$anchorScroll()}},{key:"nextStep",value:function(){this.hideMainForm=!0,this.scrollTo("scroll-to-head")}},{key:"handleCustomError",value:function(t,e){t[e].$setValidity("custom",!0),t[e].customError=[]}}],[{key:"signupFactory",value:function(){function e(e,n,r,o,i){return new t(e,n,r,o,i)}return n("./src/Common/Signup/Signup.scss"),e.$inject=["$scope","$location","$anchorScroll","$ngRedux","$state"],e}}]),t}();e.default=d},"./src/Common/Signup/images/icon-role-government.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-role-government.svg"},"./src/Common/Signup/images/icon-role-implementer.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-role-implementer.svg"},"./src/Common/Signup/images/icon-role-investor.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-role-investor.svg"},"./src/Common/Signup/signupComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Signup/Signup.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Signup/SignupController.js")).default.signupFactory(),template:r.default,controllerAs:"vm",name:"signup",bindings:{landingPage:"@"}};e.default=i},"./src/Common/SubBar/SubBarController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=d(n("./node_modules/babel-runtime/helpers/createClass.js")),i=d(n("./node_modules/lodash/filter.js")),a=d(n("./node_modules/lodash/last.js")),s=d(n("./node_modules/clipboard/lib/clipboard.js")),l=u(n("./src/store/modules/projects.js")),c=u(n("./src/store/modules/user.js"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,n,o){(0,r.default)(this,t),this.state=e,this.scope=n,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.mapState=this.mapState.bind(this),this.unsubscribe=o.connect(this.mapState,l)(this),this.navigateToProject=this.navigateToProject.bind(this),this.iconFunction=this.iconFunction.bind(this)}return(0,o.default)(t,[{key:"mapState",value:function(t){return{projects:l.getPublishedProjects(t),userProfile:c.getProfile(t),currentProject:l.getCurrentProject(t),lastVersion:l.getCurrentVersion(t),lastVersionDate:l.getCurrentVersionDate(t)}}},{key:"onInit",value:function(){this.currentProject&&this.createShareDefinition()}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"createShareDefinition",value:function(){var t=this;this.shareUrl={url:"http://"+window.location.host+"/project/"+this.currentProject.public_id,copyClicked:!1,clipboard:new s.default(".share-copy")},this.shareUrl.clipboard.on("success",function(e){t.shareUrl.copyClicked=!0,e.clearSelection()})}},{key:"hasProfile",value:function(){return this.userProfile&&this.userProfile.country}},{key:"iconFunction",value:function(t){var e={name:"visibility",style:{color:"#53A0CE",position:"absolute",right:"5px",fontSize:"15px",lineHeight:"24px"}};return this.userProfile&&this.userProfile.member&&this.userProfile.member.indexOf(t.id)>-1&&(e.name="grade",e.style.color="#CD9924"),e}},{key:"navigateToProject",value:function(t){var e=(0,i.default)(this.projects,{name:t})[0].id;this.state.go(this.state.current.name,{appName:e})}},{key:"goToDashboard",value:function(){this.state.go("dashboard",{appName:(0,a.default)(this.projects).id})}},{key:"goToEditProject",value:function(){this.state.go("editProject",{appName:(0,a.default)(this.projects).id})}},{key:"showSubBar",value:function(){return null!==this.state.params.appName&&"public"!==this.state.current.parent}},{key:"openMenu",value:function(t,e){t(e)}}],[{key:"subBarControllerFactory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Common/SubBar/subBar.scss"),e.$inject=["$state","$scope","$ngRedux"],e}}]),t}();e.default=h},"./src/Common/SubBar/subBar.html":function(t,e){t.exports='<md-toolbar class="md-medium-tall toolbar-project md-whiteframe-1dp" ng-if="vm.showSubBar()">\n  <div class="md-toolbar-tools md-toolbar-tools-bottom" ng-hide="!vm.state.params.appName">\n\n    <div class="large project-name">\n      <div>{{vm.currentProject.name}} ({{vm.currentProject.country_name}})</div>\n      <md-icon class="material-icons viewerIcon" ng-show="vm.currentProject.isViewer">visibility</md-icon>\n      <md-icon class="material-icons memberIcon" ng-show="vm.currentProject.isMember">grade</md-icon>\n    </div>\n\n    <div flex></div>\n\n    <div class="project-info" layout="row" layout-align="end center">\n      <div class="info-block" ng-show="vm.currentProject.isPublished">\n        <h6>\n          <translate>UUID</translate>\n        </h6>\n        <span class="data-info">{{vm.currentProject.public_id}}</span>\n      </div>\n      <div class="info-block">\n        <h6>\n          <translate>Version</translate>\n        </h6>\n        <span ng-show="vm.currentProject.isPublished" class="data-info">\n          {{vm.lastVersion}}.\n          {{vm.lastVersionDate ? (\'(\' + (vm.lastVersionDate | date: medium) + \')\') : \'\' }}\n        </span>\n        <span ng-hide="vm.currentProject.isPublished" class="data-info">\n          <translate>Draft</translate>\n        </span>\n      </div>\n      <div class="info-block">\n        <h6>\n          <translate>Organisation</translate>\n        </h6>\n        <span class="data-info">{{vm.currentProject.organisation_name}}</span>\n      </div>\n      <div class="info-block" ng-if="vm.currentProject.contact_name" layout="row">\n        <div>\n          <h6>\n            <translate>Contact Person</translate>\n          </h6>\n          <span class="data-info">{{vm.currentProject.contact_name}}</span>\n        </div>\n        <div>\n          <md-button class="contact-button" ng-href="mailto:{{vm.currentProject.contact_email}}"  md-no-ink>\n            <md-icon class="material-icons">\n              mail_outline\n            </md-icon>\n            <translate>EMAIL</translate>\n          </md-button>\n        </div>\n      </div>\n\n    </div>\n  </div>\n  <div class="md-toolbar-tools md-toolbar-tools-mainmenu">\n    <div class="project-mainmenu">\n      <md-button ui-sref="assessment"\n                 ng-hide="vm.currentProject.isPublic"\n                 ui-sref-active="active" md-no-ink>\n        <md-tooltip md-autohide md-direction="top">\n          <translate>GO TO ASSESSMENT</translate>\n        </md-tooltip>\n        <span>\n          <translate>Assessment</translate>\n        </span>\n      </md-button>\n\n      <md-button ui-sref="editProject" ng-disabled="!vm.hasProfile()" ng-if="vm.currentProject.isMember && !vm.viewMode" ui-sref-active="active" md-no-ink>\n        <md-tooltip md-autohide md-direction="top">\n          <translate >EDIT PROJECT DETAILS</translate>\n        </md-tooltip>\n        <span>\n          <translate>Edit Project</translate>\n        </span>\n      </md-button>\n\n      <md-button ui-sref="maps" ng-show="vm.userType !== \'G\' && !vm.currentProject.isPublic"\n                 ng-if="!vm.viewMode"\n                 ng-disabled="!vm.hasProfile()"\n                 ui-sref-active="active" md-no-ink>\n        <md-tooltip md-autohide md-direction="top">\n          <translate >GO TO MAPS TOOLKIT</translate>\n        </md-tooltip>\n        <span ng-show="vm.currentProject.isViewer">\n          <translate>Visualize Score</translate>\n        </span>\n        <span ng-show="vm.currentProject.isMember">\n          <translate>Update Score</translate>\n        </span>\n      </md-button>\n\n      <md-button ui-sref="summary" ng-show="vm.userType !== \'G\' && !vm.currentProject.isPublic" ng-if="!vm.viewMode" ng-disabled="!vm.hasProfile()" ui-sref-active="active" md-no-ink>\n        <md-tooltip md-autohide md-direction="top">\n          <translate>SHOW SCORE SUMMARY</translate>\n        </md-tooltip>\n        <span>\n          <translate>Summary Score</translate>\n        </span>\n      </md-button>\n\n      <div class="project-submenu">\n        <md-menu md-position-mode="target-left target">\n          <md-button ng-click="vm.openMenu($mdOpenMenu, $event)" ng-show="vm.currentProject.isPublished" class="share-link" aria-label="Share" md-no-ink>\n            \x3c!-- <md-icon class="material-icons">share</md-icon> --\x3e\n            <translate>Share Public Link</translate>\n          </md-button>\n          <md-menu-content class="share-url">\n            <md-menu-item>\n              <span class="share-title">\n                <translate>Share Public Link</translate>\n              </span>\n            </md-menu-item>\n            <md-menu-item>\n              <input readonly class="share-url-box" ng-model="vm.shareUrl.url" />\n            </md-menu-item>\n            <md-menu-item>\n              <div class="share-button-container" >\n                <md-button ng-hide="vm.shareUrl.copyClicked"\n                           data-clipboard-target=\'.share-url-box\'\n                           class="md-primary md-raised share-copy"\n                           md-prevent-menu-close="md-prevent-menu-close" >\n                  <translate>Copy URL</translate>\n                </md-button>\n                <md-button ng-show="vm.shareUrl.copyClicked"\n                           class="md-raised share-copy share-copied">\n                  <md-icon>check</md-icon>\n                  <translate>Copied</translate>\n                </md-button>\n                <md-button class="share-cancel">\n                  <translate>Close</translate>\n                </md-button>\n              </div>\n            </md-menu-item>\n          </md-menu-content>\n        </md-menu>\n      </div>\n    </div>\n  </div>\n\n</md-toolbar>\n'},"./src/Common/SubBar/subBar.scss":function(t,e,n){},"./src/Common/SubBar/subBarComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/SubBar/subBar.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/SubBar/SubBarController.js")).default.subBarControllerFactory(),template:r.default,controllerAs:"vm",name:"subBar",bindings:{viewMode:"<"}};e.default=i},"./src/Common/TermsOfUse/TermsOfUse.html":function(t,e){t.exports='<div class="subpage-wrapper" layout=column>\n    <div class="bg-hero" ng-style="vm.countryCover" layout=row layout-align="start end">\n      <div class="welcome">\n        <div class="welcome-text">\n          <h2 class="md-display-3"><translate>DHA Help Center</translate></h2>\n          <md-button href="#" ng-click="vm.goBack()" class="md-no-ink" aria-label="Back">\n            <md-icon class="material-icons">arrow_back</md-icon> <translate>Back</translate>\n          </md-button>\n        </div>\n      </div>\n    </div>\n\n    <div ng-cloak md-whiteframe="2" class="subpage-content">\n      <md-content>\n        <md-tabs md-dynamic-height>\n\n          <md-tab label="{{\'Terms of Use\'|translate}}">\n            <md-content class="md-padding">\n              <h1 class="md-display-2"><translate>Terms of Use</translate></h1>\n              <p><translate>Please read these Terms of Use before using the Website or any of its features. By using the\n                  Website, you accept and agree to be bound by these Terms. If you do not agree to the Terms,\n                  please exit the Website and do not access or otherwise use the Website.</translate></p>\n              <p><translate>The following Terms of Use (âTermsâ) govern the use of</translate>\n                    <a href="http://www.digitalhealthatlas.org/" title="www.digitalhealthatlas.org">\n                        <translate>www.digitalhealthatlas.org</translate>\n                    </a>\n                  <translate>(âWebsiteâ), including without limitation participation in its forums, blog, and all linked\n                  pages owned and operated by Results for Development Institute (âHRP,â âwe,â or âourâ).</translate></p>\n              <p><translate>We reserve the right to modify, add, or delete any of these Terms at any time. Continued use of\n                  the Website after any modifications, additions, or deletions to the Terms will constitute your\n                  acceptance of the Terms, as modified.</translate></p>\n              <p><translate>This Site Does Not Provide Medical Advice, Diagnosis or Treatment.</translate></p>\n              <p><translate>The contents of the Website such as texts, graphics, images, and all other information, whether\n                  provided by HRP or its users, are for informational purposes only. The content is not intended\n                  to be a substitute for professional medical advice, diagnosis, or treatment. If you need\n                  specific advice (for example, medical, legal, or financial) please seek a professional who is\n                  licensed or knowledgeable in that area.</translate></p>\n              <h4><translate>Accuracy of Content</translate></h4>\n              <p><translate>The use of the Website and its content is at your own risk. HRP makes a reasonable effort to\n                  ensure that the content of the Website is accurate and up-to-date, but does not offer any\n                  warranties (whether express, implied or otherwise) as to the reliability, accuracy or\n                  completeness of the information appearing on the Website, whether provided by HRP or any user,\n                  information provider, or any other person or entity. HRP may remove material from the Website at\n                  its own discretion and without giving any notice.</translate></p>\n              <p><translate>HRP, its contributors, sponsors, administrators, or anyone else connected with HRP in any way\n                  whatsoever, cannot be responsible for any inaccurate or libelous information or for your use of\n                  the information contained in or linked from these web pages.</translate></p>\n              <h4><translate>Intellectual Property Rights</translate></h4>\n              <p><translate>The contents of the Website are protected by copyright, trademark, and other intellectual\n                  property laws. The Website may not be used in any manner that violates the privacy rights,\n                  publicity rights, copyrights, trademark rights, patent rights, contract rights, or any other\n                  rights belonging to HRP or a third party. Unless authorized by the Terms or by the owner of the\n                  materials, you are strictly prohibited from modifying, copying, reproducing, republishing,\n                  uploading, posting, transmitting, translating, selling, creating derivative works, or\n                  distributing in any manner or medium (including email or other electronic means) any material\n                  from the Website. Your use of the Website does not grant you ownership of any content, code,\n                  data, or other materials you may access on or through the Website. Use of the Website and the\n                  services offered on or through the Website are only for your personal and non-commercial\n                  use.</translate></p>\n              <p><translate>When you post or submit any material to this Website, you represent and warrant that you are the\n                  owner of the material or have express permission from the owner of the material to post, use, or\n                  submit the material. By posting or submitting material to the Website, you agree that such\n                  submission is non-confidential for all purposes. You are solely responsible for any damages\n                  resulting from any infringements of copyrights, trademark rights, propriety rights, or any other\n                  harm resulting from any uploading, posting, or submission. When you post or submit material to\n                  the Website, you grant HRP the right to use the material, royalty-free, and grant us a\n                  non-exclusive, perpetual, and worldwide license to use, reproduce, modify, adapt, publish,\n                  translate, display, distribute and create any type of derivative work from the submitted\n                  material. Submitting or posting material also grants us the right to identify you as the author\n                  of any of your postings or submissions by name, email address, or username, as we deem\n                  appropriate. If you wish to keep any information, ideas, concepts or inventions private or\n                  proprietary, do not submit them to the Website or to HRP by email. We try to answer every email\n                  in a timely manner, but are not always able to do so.</translate></p>\n              <p><translate>We respect the intellectual property rights of others and require that people who use the Website\n                  and services available on the Website do the same. If you believe your work has been copied in a\n                  way that constitutes infringement, please forward the following information to our designated\n                  offices: â¢ your address, telephone number, and email address; â¢ a description of the copyrighted\n                  work you claim has been infringed; â¢ a description of where the alleged infringing material is\n                  located; â¢ a statement that you have a good faith belief that the disputed use is not authorized\n                  by the copyright owner, its agent, or the law; â¢ an electronic or physical signature of the\n                  person authorized to act on behalf of the owner of the copyright interest; and â¢ a statement by\n                  you, made under penalty of perjury, that the above information in your notice is accurate and\n                  that you are the copyright owner or are authorized to act on the copyright owner\'s behalf.</translate></p>\n              <h4><translate>Message Boards and Other Interactive Features</translate></h4>\n              <p><translate>Message boards, bulletin boards, blogs, and other services may be available on or through the\n                  Website. In addition to any other rules or regulations that HRP posts in connection with these\n                  particular services, you shall not upload, post, transmit, distribute, or otherwise publish\n                  through the Website or any service or feature made available on or through the Website any\n                  materials which: (a) restrict or inhibit any other user from using and enjoying the Website; (b)\n                  are fraudulent, unlawful, threatening, abusive, harassing, libelous, defamatory, or offensive;\n                  (c) constitute or encourage conduct that would constitute a criminal offense, give rise to civil\n                  liability or otherwise violate any local, state, federal, or international law; (d) violate,\n                  plagiarize, or infringe the rights of third parties, including, without limitation, copyright,\n                  trademark, trade secret, confidentiality, contract, patent, rights of privacy, or publicity or\n                  any other proprietary rights; (e) contain a virus, spyware, or any other harmful content; (f)\n                  contain embedded links or advertising of any kind; or (g) constitute or contain false or\n                  misleading indications of origin, endorsements, or statements of fact.</translate></p>\n              <p><translate>HRP reserves the right, but has no obligation, to monitor the content of the message boards,\n                  bulletin boards, blogs, and other services available on the Website to determine compliance with\n                  the Terms of Use and any other operating rules we establish. We reserve the exclusive right to\n                  edit, remove, or refuse to post any submitted materials or information. We are not responsible\n                  for and do not endorse any of the opinions, advice, or statements posted in messages, bulletin\n                  boards, blogs, and other services. We are not responsible for any offensive, defamatory, or\n                  obscene posting made on the message boards or other features on the Website. We reserve the\n                  right to disclose any information we believe necessary to satisfy any Law regulation, or\n                  governmental request, or to refuse to post or to remove any information or materials, in whole\n                  or in part, that in our sole discretion are inappropriate, objectionable or in violation of\n                  these Terms. We also reserve the right to deny access to the Website or any features of the\n                  Website to anyone who violates these Terms or who, in our judgment, interferes with the ability\n                  of others to enjoy our website or infringes the rights of others. HRP assumes no liability for\n                  any action or inaction with respect to any conduct, communication, or posting on the message\n                  boards, bulletin boards, blogs, or other services on this Website.</translate></p>\n              <h4><translate>Privacy Policy</translate></h4>\n              <p><translate>We know that you care how information about you is used and shared and we are careful to ensure\n                  that any such information that comes into our possession is properly looked after. This Privacy\n                  Policy sets out the steps that we take to ensure that any information provided to us is kept\n                  secure and confidential and is used only for the purposes for which it is provided.</translate></p>\n              <h4><translate>Personal Information</translate></h4>\n              <p><translate>The only personal information that we will collect is the personal information that you provide\n                  to us when you register with us or when you communicate with us through our website. We will at\n                  any time, at your request, provide you with a copy of any personal information that we are\n                  holding about you.</translate></p>\n              <h4><translate>Purposes for which Personal Information May Be Used</translate></h4>\n              <p><translate>Any personal information that you provide to us will be used only for the following purposes:</translate></p>\n              <ul>\n                  <li><translate>To provide information or services to you as requested by you.</translate></li>\n                  <li><translate>To let you know about information and services from HRP in which you may be interested.</translate></li>\n                  <li><translate>For internal review.</translate></li>\n                  <li><translate>To improve the content of the website.</translate></li>\n                  <li><translate>To customize the content and /or layout of the website for each individual user.</translate></li>\n                  <li><translate>To notify users about updates to the website.</translate></li>\n                  <li><translate>To compile and disclose statistics about our users and their preferences. However, these\n                      statistics are anonymous and do not identify individual users.</translate>\n                  </li>\n              </ul>\n              <h4><translate>Disclosure</translate></h4>\n              <p><translate>We will not pass any of your personal information to any third party, other than members of HRP,\n                  without your consent.</translate></p>\n              <h4><translate>Marketing and Advertising</translate></h4>\n              <p><translate>No promotional offers or advertising will appear on the Website nor will your personal contact\n                  information ever be given, sold, or otherwise shared by HRP with third parties for advertising\n                  or marketing purposes.</translate></p>\n              <h4><translate>Third Party Sites</translate></h4>\n              <p><translate>You may be able to link from HRP\'s Website to third-party websites; conversely, third-party\n                  websites may link to HRPâs Website. You acknowledge and agree that HRP\'s Website has no\n                  responsibility for the information, content, products, services, advertising, code, or other\n                  materials which may be provided by or through third-party sites. Links to third-party sites do\n                  not constitute an endorsement or sponsorship by HRP\'s Website of such third-party sites or the\n                  information, content, products, services, advertising, or other materials presented on or\n                  through such websites. You agree that HRP and its affiliates are not responsible for any damages\n                  that you incur arising from your use of any products or services made available by third-parties\n                  through the Website.</translate></p>\n              <h4><translate>Registration and Passwords</translate></h4>\n              <p><translate>To access certain services of the Website, you may need to provide information such as your name,\n                  email address, street address, and zip code. By use of these services, you agree to: (a) provide\n                  accurate, current, and complete information about you; (b) maintain the security of your\n                  password and identification; (c) maintain and promptly update your data and any other\n                  information you provide to the Website to keep it accurate, current, and complete; and (d) be\n                  fully responsible for all use of your account and for any actions, whether by you or another\n                  person, that take place using your account. You will notify us immediately of any unauthorized\n                  use of your password or account or any other breach of security. HRP assumes no liability for\n                  any loss or damage arising from any unauthorized use of your password or account by a third\n                  party. Any reliance on the contents of a third-party site is done at your own risk and you\n                  assume all responsibilities and consequences resulting from such reliance. Our use of any\n                  personally identifiable information provided by you in regards to obtaining a registration and\n                  password is governed by the terms of our Privacy Policy.</translate></p>\n              <h4><translate>Disclaimers</translate></h4>\n              <p><translate>This Website provides links to websites maintained by third parties. Any information, products,\n                  or services provided by the third-party sites are maintained by the operators of such sites and\n                  not by HRP or our subsidiaries. When these third-party sites are accessed, they are accessed at\n                  your own risk.</translate></p>\n              <p><translate>The Website and any content, materials, features, or products available or sold on or through the Website are available on an âas isâ basis.</translate></p>\n              <p><small><translate>HRP, TO THE FULLEST EXTENT PERMITTED BY LAW,\n                    DISCLAIMS ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF\n                    TITLE, NON-INFRINGEMENT OF THIRD PARTIESâ RIGHTS, AND IMPLIED WARRANTIES OF MERCHANTABILITY OF\n                    FITNESS FOR A PARTICULAR PURPOSE. HRP DOES NOT WARRANT THAT THIS SERVICE WILL BE UNINTERRUPTED\n                    OR ERROR-FREE, VIRUS-FREE, NOR DOES HRP MAKE ANY WARRANTIES THAT ANY DEFECTS WILL BE\n                    CORRECTED.</translate></small></p>\n              <p><small><translate>WE MAKE NO WARRANTY THAT THE WEBSITE OR THE PROVIDED SERVICES WILL MEET USERS\' REQUIREMENTS. NO\n                    ADVICE, RESULTS OR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED BY YOU FROM US OR THROUGH THE\n                    WEBSITE SHALL CREATE ANY WARRANTY NOT EXPRESSLY MADE HEREIN. HRP ALSO ASSUMES NO RESPONSIBILITY,\n                    AND SHALL NOT BE LIABLE FOR, ANY DAMAGES TO, OR VIRUSES THAT MAY INFECT, YOUR EQUIPMENT ON\n                    ACCOUNT OF YOUR ACCESS TO, USE OF, OR BROWSING IN THE WEBSITE OR YOUR DOWNLOADING OF ANY\n                    MATERIALS, DATA, TEXT, IMAGES, VIDEO CONTENT, OR AUDIO CONTENT FROM THE WEBSITE. IF YOU ARE\n                    DISSATISFIED WITH THE WEBSITE, YOUR SOLE REMEDY IS TO DISCONTINUE USING THE WEBSITE.</translate></small></p>\n              <p><small><translate>WE TRY TO ENSURE THAT THE INFORMATION POSTED ON THE WEBSITE IS CORRECT AND UP-TO-DATE. WE RESERVE\n                    THE RIGHT TO CHANGE OR MAKE CORRECTIONS TO ANY OF THE INFORMATION PROVIDED ON THE WEBSITE AT ANY\n                    TIME AND WITHOUT ANY PRIOR WARNING. HRP NEITHER ENDORSES NOR IS RESPONSIBLE FOR THE ACCURACY OR\n                    RELIABILITY OF ANY OPINION, ADVICE OR STATEMENT ON THE WEBSITE, NOR FOR ANY OFFENSIVE,\n                    DEFAMATORY, OBSCENE, INDECENT, UNLAWFUL OR INFRINGING POSTING MADE THEREON BY ANYONE OTHER THAN\n                    AUTHORIZED HRP EMPLOYEE SPOKESPERSONS WHILE ACTING IN THEIR OFFICIAL CAPACITIES (INCLUDING,\n                    WITHOUT LIMITATION, OTHER USERS OF THE WEBSITE). IT IS YOUR RESPONSIBILITY TO EVALUATE THE\n                    ACCURACY, COMPLETENESS OR USEFULNESS OF ANY INFORMATION, OPINION, ADVICE OR OTHER CONTENT\n                    AVAILABLE THROUGH THE WEBSITE. PLEASE SEEK THE ADVICE OF PROFESSIONALS, AS APPROPRIATE,\n                    REGARDING THE EVALUATION OF ANY SPECIFIC INFORMATION, OPINION, ADVICE OR OTHER CONTENT,\n                    INCLUDING BUT NOT LIMITED TO FINANCIAL, HEALTH, OR LIFESTYLE INFORMATION, OPINION, ADVICE OR\n                    OTHER CONTENT.</translate></small></p>\n              <h4><translate>Limitations on Liability</translate></h4>\n              <p><translate>In no event will HRP or its directors, employees, or agents be liable to you or any third person\n                  for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages,\n                  including for any lost profits or lost data arising from your use of the Website or this service\n                  or the unavailability of the Website or this service. When using the Website, information will\n                  be transmitted over a medium that may be beyond the control and jurisdiction of HRP.\n                  Accordingly, HRP assumes no liability for or relating to the delay, failure, interruption, or\n                  corruption of any data or other information transmitted in connection with use of the\n                  Website.</translate></p>\n              <h4><translate>Terminations</translate></h4>\n              <p><translate>At any time and without notice, we may suspend, cancel, or terminate your right to use this\n                  Website or any portion of the Website. In the event of a suspension, cancellation, or\n                  termination, you are no longer authorized to access the part of the Website affected by such\n                  suspension, cancellation, or termination.</translate></p>\n              <h4><translate>Other Terms</translate></h4>\n              <p><translate>These Terms constitute the entire agreement between you and HRP regarding the use of the Website\n                  and supersede any prior agreements between you and HRP relating to your use of the Website. The\n                  failure of HRP to exercise or enforce any right or provision of these Terms shall not constitute\n                  a waiver of such right or provision in that or any other instance. If any provision of these\n                  Terms is held invalid, the remainder of the Terms shall continue in full force and effect. If\n                  any provision of these Terms shall be deemed unlawful, void, or for any other reason\n                  unenforceable, then that provision shall be deemed severable from these Terms and shall not\n                  affect the validity and enforceability of any remaining provisions. This agreement shall be\n                  governed and construed by the laws of the District of Columbia without giving effect to any\n                  principles of conflicts of law. The foregoing provisions of these Terms are for the benefit of\n                  HRP, its affiliates, and third-party content providers and licensors, and each shall have the\n                  right to asset and enforce provisions of the Terms directly and on their own behalf.</translate></p>\n            </md-content>\n          </md-tab>\n\n          <md-tab label="{{\'Contact\'|translate}}">\n            <md-content class="md-padding">\n              <h1 class="md-display-2"><translate>Contact</translate></h1>\n              <p><translate>Here comes the contact data...</translate></p>\n              <p><b><translate>Email:</translate></b>   <a href="mailto:digitalhealthatlas@gmail.com">digitalhealthatlas@gmail.com</a></p>\n            </md-content>\n          </md-tab>\n        </md-tabs>\n      </md-content>\n\n      <div class="md-toolbar-tools-bottom">\n        <h3><translate>Get MAPS Toolkit now!</translate></h3>\n        <div class="dl-note">\n          <p><translate>A new toolkit has been launched to help mHealth implementers<br> to successfully and sustainably scale-up their innovations.</translate></p>\n        </div>\n        <md-button class="dl-maps-link md-raised md-primary"\n                    href="/static/documents/maps_toolkit_eng.pdf"\n                    download="Maps Toolkit.pdf"\n                    target="_blank"\n                    aria-label="Download MAPS Toolkit">\n          <md-icon class="material-icons">cloud_download</md-icon>\n          <translate>Download Pdf</translate>\n        </md-button>\n      </div>\n    </div>\n</div>\n\n<country-partners ng-if="vm.showFooter" footer-title="vm.countryData.footer_title" footer-text="vm.countryData.footer_text" partners="vm.countryData.partner_logos"></country-partners>\n<disclaimer></disclaimer>\n'},"./src/Common/TermsOfUse/TermsOfUse.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/TermsOfUse/TermsOfUse.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/TermsOfUse/TermsOfUseController.js")).default.termOfUseFactory(),template:r.default,controllerAs:"vm",name:"termsOfUse"};e.default=i},"./src/Common/TermsOfUse/TermsOfUse.scss":function(t,e,n){},"./src/Common/TermsOfUse/TermsOfUseController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=s(n("./node_modules/babel-runtime/helpers/createClass.js")),i=n("./src/Utilities.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/countries.js"));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n,o){(0,r.default)(this,t),this.EE=window.EE,this.scope=e,this.window=n,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.unsubscribe=o.connect(this.mapState,a)(this)}return(0,o.default)(t,[{key:"mapState",value:function(t){var e=a.getCountryCoverPage(t),n=e.footer_text&&e.footer_title;return{countryData:e,countryCover:a.getCountryCoverPicture(t),showFooter:n}}},{key:"onInit",value:function(){var t=(0,i.getSubDomain)();this.setCurrentCountryFromCode(t),this.menuEntry=["contact","terms of use"],this.currentSection="terms of use",this.style={height:(0,i.calculateHeight)()}}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"goBack",value:function(){this.window.history.back()}},{key:"openSection",value:function(t){this.currentSection=t}}],[{key:"termOfUseFactory",value:function(){function e(e,n,r){return new t(e,n,r)}return n("./src/Common/TermsOfUse/TermsOfUse.scss"),e.$inject=["$scope","$window","$ngRedux"],e}}]),t}();e.default=l},"./src/Common/Thematic/SkeletonController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=a(n("./node_modules/babel-runtime/helpers/createClass.js")),i=n("./src/webpackRequires.js");function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,o,i,a,s,l){var c=this;(0,r.default)(this,t),this.scope=e,this.interpolate=n,this.axis=a,this.domain=s,this.data=i,this.icons=l,this.scroll=o,this.domainActivationSetter(this.axis,this.domain,!0),this.images=this.importImages(),this.templates=this.importHtmlTemplates(),this.data.forEach(function(t,e){return t.expand=e-2===c.axis,t})}return(0,o.default)(t,[{key:"importImages",value:function(){var t={},e=(0,i.loadSkeletonImages)();return e.keys().forEach(function(n){var r=n.split(".")[1].replace("/","");t[r]=e(n)}),t}},{key:"importHtmlTemplates",value:function(){var t=this,e={vm:{images:this.images}},n={},r=(0,i.loadSkeletonStatic)();return r.keys().forEach(function(o){n[o.slice(2)]=t.interpolate(r(o))(e)}),n}},{key:"axisClick",value:function(t,e){t.expand=!0,this.changeSpot(e-2,0)}},{key:"changeSpot",value:function(t,e){e=e||0,this.domainActivationSetter(this.axis,this.domain,!1),this.axis=t,this.domain=e,this.domainActivationSetter(this.axis,this.domain,!0),this.scroll("help-anchor")}},{key:"domainActivationSetter",value:function(t,e,n){this.data[t+2].domains[e].active=n}}],[{key:"factory",value:function(e,n,r,o){var i=function(i,a,s){return new t(i,a,s,e,n,r,o)};return i.$inject=["$scope","$interpolate","$anchorScroll"],i}}]),t}();e.default=s},"./src/Common/Thematic/Thematic.html":function(t,e){t.exports='<md-button ng-class="vm.buttonclass" ng-click="vm.showModal()" title="{{vm.buttontitle}}">\n    <md-icon>{{vm.buttonicon || \'help\'}}</md-icon>\n    {{vm.buttontext}}\n</md-button>\n'},"./src/Common/Thematic/Thematic.scss":function(t,e,n){},"./src/Common/Thematic/ThematicController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=l(n("./node_modules/babel-runtime/helpers/createClass.js")),i=l(n("./node_modules/angular/index.js")),a=l(n("./src/Common/Thematic/SkeletonController.js")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/system.js"));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e,n,o){(0,r.default)(this,t),this.modal=e,this.scope=n,this.$ngRedux=o,this.$onInit=this.onInit.bind(this)}return(0,o.default)(t,[{key:"mapState",value:function(t){var e=s.getDomainsForThematic(t);return{icons:e.map(function(t,e){return n("./src/Common/Thematic/images sync recursive ^\\.\\/icon\\-axis.*\\.svg$")("./icon-axis"+(e-1)+".svg")}),data:e}}},{key:"onInit",value:function(){this.$ngRedux.connect(this.mapState,null)(this)}},{key:"showModal",value:function(){this.axis=parseInt(this.axis,10),this.domain=parseInt(this.domain,10),this.modal.show({parent:i.default.element(document.body),template:n("./src/Common/Thematic/modal-skeleton.html"),controller:a.default.factory(this.data,this.axis,this.domain,this.icons),controllerAs:"vm",clickOutsideToClose:!0,fullScreen:!0})}}],[{key:"thematicFactory",value:function(){var e=function(e,r,o){return n("./src/Common/Thematic/Thematic.scss"),new t(e,r,o)};return e.$inject=["$mdDialog","$scope","$ngRedux"],e}}]),t}();e.default=c},"./src/Common/Thematic/images sync recursive \\.svg$":function(t,e,n){var r={"./axes-domains.svg":"./src/Common/Thematic/images/axes-domains.svg","./axes-scale.svg":"./src/Common/Thematic/images/axes-scale.svg","./conceptual-model.svg":"./src/Common/Thematic/images/conceptual-model.svg","./graph-1.svg":"./src/Common/Thematic/images/graph-1.svg","./graph-2.svg":"./src/Common/Thematic/images/graph-2.svg","./graph-3.svg":"./src/Common/Thematic/images/graph-3.svg","./graph-4.svg":"./src/Common/Thematic/images/graph-4.svg","./graph-5.svg":"./src/Common/Thematic/images/graph-5.svg","./graph-6.svg":"./src/Common/Thematic/images/graph-6.svg","./icon-axis-1.svg":"./src/Common/Thematic/images/icon-axis-1.svg","./icon-axis0.svg":"./src/Common/Thematic/images/icon-axis0.svg","./icon-axis1.svg":"./src/Common/Thematic/images/icon-axis1.svg","./icon-axis2.svg":"./src/Common/Thematic/images/icon-axis2.svg","./icon-axis3.svg":"./src/Common/Thematic/images/icon-axis3.svg","./icon-axis4.svg":"./src/Common/Thematic/images/icon-axis4.svg","./icon-axis5.svg":"./src/Common/Thematic/images/icon-axis5.svg","./icon-axis6.svg":"./src/Common/Thematic/images/icon-axis6.svg","./icon-domain-1.svg":"./src/Common/Thematic/images/icon-domain-1.svg","./icon-domain-10.svg":"./src/Common/Thematic/images/icon-domain-10.svg","./icon-domain-11.svg":"./src/Common/Thematic/images/icon-domain-11.svg","./icon-domain-12.svg":"./src/Common/Thematic/images/icon-domain-12.svg","./icon-domain-13.svg":"./src/Common/Thematic/images/icon-domain-13.svg","./icon-domain-14.svg":"./src/Common/Thematic/images/icon-domain-14.svg","./icon-domain-15.svg":"./src/Common/Thematic/images/icon-domain-15.svg","./icon-domain-16.svg":"./src/Common/Thematic/images/icon-domain-16.svg","./icon-domain-2.svg":"./src/Common/Thematic/images/icon-domain-2.svg","./icon-domain-3.svg":"./src/Common/Thematic/images/icon-domain-3.svg","./icon-domain-4.svg":"./src/Common/Thematic/images/icon-domain-4.svg","./icon-domain-5.svg":"./src/Common/Thematic/images/icon-domain-5.svg","./icon-domain-6.svg":"./src/Common/Thematic/images/icon-domain-6.svg","./icon-domain-7.svg":"./src/Common/Thematic/images/icon-domain-7.svg","./icon-domain-8.svg":"./src/Common/Thematic/images/icon-domain-8.svg","./icon-domain-9.svg":"./src/Common/Thematic/images/icon-domain-9.svg","./quote.svg":"./src/Common/Thematic/images/quote.svg","./sample-saq.svg":"./src/Common/Thematic/images/sample-saq.svg"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/Common/Thematic/images sync recursive \\.svg$"},"./src/Common/Thematic/images sync recursive ^\\.\\/icon\\-axis.*\\.svg$":function(t,e,n){var r={"./icon-axis-1.svg":"./src/Common/Thematic/images/icon-axis-1.svg","./icon-axis0.svg":"./src/Common/Thematic/images/icon-axis0.svg","./icon-axis1.svg":"./src/Common/Thematic/images/icon-axis1.svg","./icon-axis2.svg":"./src/Common/Thematic/images/icon-axis2.svg","./icon-axis3.svg":"./src/Common/Thematic/images/icon-axis3.svg","./icon-axis4.svg":"./src/Common/Thematic/images/icon-axis4.svg","./icon-axis5.svg":"./src/Common/Thematic/images/icon-axis5.svg","./icon-axis6.svg":"./src/Common/Thematic/images/icon-axis6.svg"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/Common/Thematic/images sync recursive ^\\.\\/icon\\-axis.*\\.svg$"},"./src/Common/Thematic/images/axes-domains.svg":function(t,e,n){t.exports=n.p+"public/fonts/axes-domains.svg"},"./src/Common/Thematic/images/axes-scale.svg":function(t,e,n){t.exports=n.p+"public/fonts/axes-scale.svg"},"./src/Common/Thematic/images/conceptual-model.svg":function(t,e,n){t.exports=n.p+"public/fonts/conceptual-model.svg"},"./src/Common/Thematic/images/graph-1.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-1.svg"},"./src/Common/Thematic/images/graph-2.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-2.svg"},"./src/Common/Thematic/images/graph-3.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-3.svg"},"./src/Common/Thematic/images/graph-4.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-4.svg"},"./src/Common/Thematic/images/graph-5.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-5.svg"},"./src/Common/Thematic/images/graph-6.svg":function(t,e,n){t.exports=n.p+"public/fonts/graph-6.svg"},"./src/Common/Thematic/images/icon-axis-1.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis-1.svg"},"./src/Common/Thematic/images/icon-axis0.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis0.svg"},"./src/Common/Thematic/images/icon-axis1.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis1.svg"},"./src/Common/Thematic/images/icon-axis2.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis2.svg"},"./src/Common/Thematic/images/icon-axis3.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis3.svg"},"./src/Common/Thematic/images/icon-axis4.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis4.svg"},"./src/Common/Thematic/images/icon-axis5.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis5.svg"},"./src/Common/Thematic/images/icon-axis6.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis6.svg"},"./src/Common/Thematic/images/icon-domain-1.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-1.svg"},"./src/Common/Thematic/images/icon-domain-10.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-10.svg"},"./src/Common/Thematic/images/icon-domain-11.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-11.svg"},"./src/Common/Thematic/images/icon-domain-12.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-12.svg"},"./src/Common/Thematic/images/icon-domain-13.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-13.svg"},"./src/Common/Thematic/images/icon-domain-14.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-14.svg"},"./src/Common/Thematic/images/icon-domain-15.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-15.svg"},"./src/Common/Thematic/images/icon-domain-16.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-16.svg"},"./src/Common/Thematic/images/icon-domain-2.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-2.svg"},"./src/Common/Thematic/images/icon-domain-3.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-3.svg"},"./src/Common/Thematic/images/icon-domain-4.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-4.svg"},"./src/Common/Thematic/images/icon-domain-5.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-5.svg"},"./src/Common/Thematic/images/icon-domain-6.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-6.svg"},"./src/Common/Thematic/images/icon-domain-7.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-7.svg"},"./src/Common/Thematic/images/icon-domain-8.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-8.svg"},"./src/Common/Thematic/images/icon-domain-9.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-domain-9.svg"},"./src/Common/Thematic/images/quote.svg":function(t,e,n){t.exports=n.p+"public/fonts/quote.svg"},"./src/Common/Thematic/images/sample-saq.svg":function(t,e,n){t.exports=n.p+"public/fonts/sample-saq.svg"},"./src/Common/Thematic/modal-skeleton.html":function(t,e){t.exports='<md-icon class="md-icons back-icon">close</md-icon>\n\n<md-dialog\n  flex-offset="15"\n  flex="85"\n  aria-label="Thematic overview (help) dialog"\n  class="thematic-overview">\n\n  <md-dialog-content layout="row">\n\n    <md-content class="left">\n\n      <div class="headline">\n        <h6><translate>MAPS Toolkit</translate></h6>\n        <p><translate>This section provides definitions and descriptions of key concepts, and highlights their relevance to scaling up and sustainability. It also includes diagrams to illustrate the conceptual framework underlying the Toolkit.</translate></p>\n      </div>\n\n      <div class="axes" ng-repeat="(axisId, axis) in vm.data track by $index">\n\n        <div class="axis" layout="row">\n\n          <div flex layout="row">\n            <div\n              class="iconcontainer"\n              layout="column"\n              layout-align="center center"\n              ng-click="vm.axisClick(axis, axisId);"\n              ng-class="(+vm.axis + 2) == $index ? \'active-axis\' + (+vm.axis + 1) : \'\'">\n\n              <img ng-src="{{vm.icons[$index]}}" ng-click="vm.axisClick(axis, axisId);">\n\n            </div>\n\n            <div\n              class="titles"\n              layout="column"\n              ng-class="(+vm.axis + 2) == $index ? \'active\' : \'\'">\n\n              <span ng-if="$index > 1" flex ng-click="vm.axisClick(axis, axisId);">\n                <translate>AXIS {{($index - 1)}}.</translate>\n                  <br>\n              </span>\n              <span flex ng-click="vm.axisClick(axis, axisId);">{{axis.name}}</span>\n\n              <div class="expander">\n                <md-icon ng-if="!axis.expand" ng-click="axis.expand = true">expand_more</md-icon>\n                <md-icon ng-if="axis.expand" ng-click="axis.expand = false">expand_less</md-icon>\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n        <div\n          class="domain"\n          ng-hide="!axis.expand"\n          ng-repeat="(domainId, domain) in axis.domains"\n          ng-click="vm.changeSpot(+axisId - 2, +domainId)"\n          ng-class="{\'active-domain\': domain.active}">\n\n          <span ng-if="axisId > 1"><translate>Domain {{domain.id}} : {{domain.name}} </translate></span>\n          <span ng-if="axisId < 2">{{domain.name}}</span>\n\n        </div>\n      </div>\n    </md-content>\n\n    <div class="right" layout="column" flex md-whiteframe="24">\n\n      <div class="right-header" ng-class="\'axis\' + (+vm.axis + 1)">\n        <div class="right-title">\n\n          <img ng-src="{{vm.icons[+vm.axis + 2]}}">\n\n          <span ng-if="vm.axis > -1"><translate>AXIS</translate> {{+vm.axis + 1}}. - {{vm.data[+vm.axis + 2].domains[+vm.domain].name}}\n          </span>\n\n          <span ng-if="vm.axis < 0">{{vm.data[+vm.axis + 2].domains[+vm.domain].name}}</span>\n\n        </div>\n      </div>\n\n      <md-content class="right-content" ng-class="\'axis\' + (vm.axis + 1)">\n\n        <div id="help-anchor"></div>\n        <div class="axis-html" ng-html-compile="vm.templates[(vm.axis + 1) + \'.html\']"></div>\n        <div class="content-html" ng-html-compile="vm.templates[(vm.axis + 1) + \'-\' + vm.domain + \'.html\']"></div>\n\n      </md-content>\n\n    </div>\n\n  </md-dialog-content>\n\n</md-dialog>\n'},"./src/Common/Thematic/static sync recursive \\.html$":function(t,e,n){var r={"./-1-0.html":"./src/Common/Thematic/static/-1-0.html","./-1-1.html":"./src/Common/Thematic/static/-1-1.html","./-1-2.html":"./src/Common/Thematic/static/-1-2.html","./-1-3.html":"./src/Common/Thematic/static/-1-3.html","./-1-4.html":"./src/Common/Thematic/static/-1-4.html","./-1.html":"./src/Common/Thematic/static/-1.html","./0-0.html":"./src/Common/Thematic/static/0-0.html","./0-1.html":"./src/Common/Thematic/static/0-1.html","./0-2.html":"./src/Common/Thematic/static/0-2.html","./0.html":"./src/Common/Thematic/static/0.html","./1-0.html":"./src/Common/Thematic/static/1-0.html","./1-1.html":"./src/Common/Thematic/static/1-1.html","./1-2.html":"./src/Common/Thematic/static/1-2.html","./1.html":"./src/Common/Thematic/static/1.html","./2-0.html":"./src/Common/Thematic/static/2-0.html","./2-1.html":"./src/Common/Thematic/static/2-1.html","./2.html":"./src/Common/Thematic/static/2.html","./3-0.html":"./src/Common/Thematic/static/3-0.html","./3-1.html":"./src/Common/Thematic/static/3-1.html","./3.html":"./src/Common/Thematic/static/3.html","./4-0.html":"./src/Common/Thematic/static/4-0.html","./4-1.html":"./src/Common/Thematic/static/4-1.html","./4-2.html":"./src/Common/Thematic/static/4-2.html","./4.html":"./src/Common/Thematic/static/4.html","./5-0.html":"./src/Common/Thematic/static/5-0.html","./5-1.html":"./src/Common/Thematic/static/5-1.html","./5-2.html":"./src/Common/Thematic/static/5-2.html","./5-3.html":"./src/Common/Thematic/static/5-3.html","./5.html":"./src/Common/Thematic/static/5.html","./6-0.html":"./src/Common/Thematic/static/6-0.html","./6-1.html":"./src/Common/Thematic/static/6-1.html","./6.html":"./src/Common/Thematic/static/6.html"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/Common/Thematic/static sync recursive \\.html$"},"./src/Common/Thematic/static/-1-0.html":function(t,e){t.exports="<p><translate>We are proud to present this mHealth Assessment and Planning for Scale (MAPS) Toolkit to help advance discussions on how to scale up mobile health (mHealth) innovations and maximize their impact on outcomes for womenâs, childrenâs and adolescentsâ health.</translate></p>\n\n<p><translate>To mobilize global commitment and spur progress towards the Millennium Development Goals, the United Nations Secretary General Ban Ki-moon launched the Global Strategy for Womenâs and Childrenâs Health in 2010. The Strategy called all partners to action, resulting in the unprecedented movement Every Woman Every Child (EWEC), which generated hundreds of financial, policy and service delivery commitments from governments, civil society, donors, and the private sector. Innovation was among the key areas highlighted in the Strategy where action was urgently required. The EWEC Innovation Working Group (IWG) has been instrumental in taking this agenda forward, not least by supporting the adoption and scaling up of mHealth solutions that strengthen the availability of essential health interventions that save women and childrenâs lives.</translate></p>\n\n<p><translate>The ubiquity of mobile technology in low- and middle-income countries has triggered an unprecedented investment in mHealth tools that are designed to enhance clinical decision support, measurement and accountability, and strengthen the coverage and quality of life-saving interventions. Established by the Government of Norway in 2011, the IWG Catalytic mHealth Grant Mechanism has played an instrumental role in supporting such mHealth innovations. Through a collaboration between the United Nations Foundation and the World Health Organization, the grant mechanism has offered both financial resources and technical assistance to support the scaling up of these innovations across 15 countries.These grantees should be proud of the contributions they have made to building an evidence base, expanding the dynamics of partnerships with both governments and the private sector, and delivering impact.</translate></p>\n\n<p><translate>Over the past four years, this Toolkit has benefited from the insights gathered through these pioneering mHealth projects. The Toolkit harnesses the learnings that the IWG Catalytic mHealth Grant Mechanism has contributed to scaling up mHealth innovations and maximizing their impact on womenâs, childrenâs and adolescentsâ health.</translate></p>\n\n<p><translate>The Toolkit arrives at a critical juncture, coinciding with the launch of the renewed Global Strategy for Womenâs, Childrenâs, and Adolescentsâ Health. As we transition from the Millennium Development Goals to the Sustainable Development Goals, digital innovations will need to play an even greater role in meeting the commitments to improve the well-being of women, children and adolescents globally.</translate></p>\n\n<br>\n\n<p><b><translate>Flavia Bustreo</translate></b><br>\n  <translate>Assistant Director General</translate><br>\n  <translate>Family, Womenâs and Childrens Health</translate><br>\n  <translate>World Health Organization</translate></p>\n\n<p><b><translate>Kate Dodson</translate></b><br>\n  <translate>Vice President</translate><br>\n  <translate>Global Health</translate><br>\n  <translate>United Nations Foundation</translate></p>\n"},"./src/Common/Thematic/static/-1-1.html":function(t,e){t.exports="<p><translate>WHO would like to gratefully acknowledge all the mHealth project teams, experts, thought leaders and other partners who shared their insights, perspectives and rich experiences throughout the process of developing this Toolkit. The meaningful contributions of such a diverse group of actors from the mobile health (mHealth) space have been essential to the success of this project. The Toolkit has been largely informed by the scaling-up challenges and lessons learnt that have emerged from the United Nations Innovation Working Group (IWG) Catalytic mHealth Grant Mechanism, in support of the Every Woman Every Child global strategy. This mechanism, which consists of a collaboration between the United Nations Foundation (UNF) and the World Health Organization (WHO) Department of Reproductive Health and Research, including the UNDP/UNFPA/UNICEF/WHO/World Bank Special Programme of Research, Development and Research Training in Human Reproduction (HRP), has assisted 26 mHealth projects in the process of scaling up by providing funding, technical assistance and joint learning opportunities between 2011 and 2015. We are grateful to these pioneers in the mHealth field for sharing their experiences and expertise.</translate></p>\n\n<p><translate>The MAPS Toolkit was developed by Jessica Rothstein and Tigest Tamrat, with guidance from Garrett Mehl, WHO, and Alain Labrique, Johns Hopkins University Global mHealth Initiative (JHU-GmI), with technical input from Patricia Mechael, UNF; Francis Gonzales, UNF; Carolyn Florey, UNF; Marion McNabb, Pathfinder International; Barbara Birch Lamphere, John Snow, Inc. (JSI); Nicki Ashcroft, Institute of Reproductive Health (IRH); Amnesty LeFevre, Johns Hopkins School of Public Health (JHSPH); Courtney Chang, JHSPH; and James Bon Tempo, Johns Hopkins University Center for Communication Programs (JHUCCP).</translate></p>\n\n<p><translate>Producing the Toolkit would not have been possible without the input from experts in the field who were consulted during its evolution. These include Sean Blaschke, United Nations Childrenâs Fund (UNICEF) Uganda; Willow Gerber, Management Sciences for Health; Carolyn Gulas, Ona; Ali Habib, Interactive Health Solutions, Pakistan; Kelly LâEngle, FHI 360; Jonathan Payne, Senior Technical Advisor, UNF; Suzanne Reier, WHO; Pam Riley, Abt Associates; Brendan Smith, Vital Wave Consulting; Nhan Tran, WHO; and Trinity Zan, FHI 360.</translate></p>\n\n<p><translate>Information gathered through engagement with mHealth project teams and their partner organizations during project site visits, and during technical IWG mHealth grantee workshops, was also invaluable to the Toolkitâs development. Among the many country-focused organizations, we would like to thank Robert Ainslee and Deo Ngâwanansabi, JHUCCP; Eliud Akama and Thomas Odeny, Kenya Medical Research Institute (KEMRI); Omar Ali and Selemon Ally, Ministry of Health (MOH), Zanzibar; Marcha Bekker, Praekelt Foundation; Janita Ferentinos, mHealth Tanzania PublicâPrivate Partnership; Mary Hadley, Denmarkâs development cooperation (Danida); Ali Hassan, Wired Mothers; Shinuna Kassim, Zantel; Aamir Khan, Interactive Research and Development (IRD); Erica Layer, Julia Dae Ruben and Lucy Silas, D-Tree International; Lillian Madeje, Tanzania House of Talent; Benjamin Mrema, Pathfinder International; Justin Murashani, FHI 360; Mwedwa Mwenesi, Ministry of Health and Social Welfare (MOHSW), United Republic of Tanzania; Zack Oloo, Changamka; Karen Romano and Lisa Wei, Grameen Foundation; Laura Turkington, Vodafone Foundation; and David Walton, Thoughtworks.</translate></p>\n\n<p><translate>The organizations are grateful to the individuals who provided important feedback during the testing and validation stage, including Sam Agatu, Changamka, Kenya; Boniface Chimphanga, JSI and MOH, Malawi; Zachariah Jezman, VillageReach, Malawi; Cheikh Mbaye, Women and Health Alliance (WAHA) International, Senegal; Christopher Mwase, Clinton Health Access Initiative (CHAI), Malawi; and Habeeb Salami, Pathfinder International, Nigeria.</translate></p>\n\n<p><translate>The organizations would also like to thank the project teams from organizations whose experiences informed the âPlanning and guidanceâ features of the Toolkit, including D-Tree International, United Republic of Tanzania; Dimagi, India; FHI 360, Kenya and United Republic of Tanzania; Grameen Foundation, Ghana; IRH, India; IRD, Pakistan; International Institute for Communication and Development (IICD), Mali and Senegal; JSI, Malawi; KEMRI, Kenya; Medic Mobile, African Regional Office; MOH, Rwanda; Pathfinder International, Nigeria; Society for Elimination of Rural Poverty (SERP), India; UNICEF and MOH, Uganda; VillageReach, Malawi; and the rest of the IWG grantees who contributed to our understanding of scaling up mHealth.</translate></p>\n\n<p><translate>WHO would like to thank the following projects for the use of their implementation photographs: Changamka; D-Tree International; MOH, Rwanda; Pathfinder International, Nigeria; Path, Viet Nam; and SERP, India.</translate></p>\n\n<p><translate>Lianne Gonsalves, Abigail Manz, Reid Miller, Tim Nichols and Lavanya Vasudevan also contributed valuable insights through their engagement in the IWG programme. WHO also thank Yorghos Carabas for his creative input throughout the development of MAPS.</translate></p>\n\n<p><translate>Finally, WHO and UNF are grateful to Helga Fogstad, Torre Godal and Haitham el-Noush, Norwegian Agency for Development Cooperation (Norad); Frederik Kristensen, WHO (formerly Norad); and Flavia Bustreo, Lale Say and Marleen Temmerman, WHO, for their critical support to the IWG Catalytic mHealth Grant Mechanism, and their leadership and vision on the use of mHealth innovations to improve reproductive, maternal, newborn and child health.</translate></p>\n"},"./src/Common/Thematic/static/-1-2.html":function(t,e){t.exports="<p><translate>The mHealth Assessment and Planning for Scale (MAPS) Toolkit is a comprehensive self-assessment and planning guide designed to improve the capacity of projects to pursue strategies that increase their potential for scaling up and achieving long-term sustainability. MAPS is designed specifically for project managers and project teams who are already deploying an mHealth product, and who are aiming to increase the scale of impact. External parties seeking to understand the maturity and value of mHealth projects may also find value in using the Toolkit jointly with projects.</translate></p>\n\n<p><translate>The Toolkit covers six major areas (referred to as the âaxes of scaleâ) that influence the scaling up of mHealth: Groundwork, Partnerships, Financial health, Technology &amp; architecture, Operations, and Monitoring &amp; evaluation. The axes of scale reflect the key concerns, activities and decisions that relate to these six areas.</translate></p>\n\n<p><translate>MAPS allows users to assess where projects stand in relation to each of the axes of scale, and to track progress as activities evolve and progress. The Toolkit will help project teams to identify areas that require further attention, and then to devise strategies to overcome any challenges or obstacles to progress. MAPS is designed to be used periodically at several time points throughout a projectâs trajectory, guiding projects through an iterative process of thorough assessment, careful planning and targeted improvements. These steps facilitate successful scaling up of mHealth products.</translate></p>\n"},"./src/Common/Thematic/static/-1-3.html":function(t,e){t.exports="<dl>\n\n  <dt><translate>AeHIN</translate></dt> <dd><translate>Asia eHealth Information Network</translate></dd>\n\n  <dt><translate>ANC</translate></dt> <dd><translate>antenatal care</translate></dd>\n\n  <dt><translate>ANDH</translate></dt> <dd><translate>African Network for Digital Health</translate></dd>\n\n  <dt><translate>API</translate></dt> <dd><translate>application programming interface</translate></dd>\n\n  <dt><translate>CBO</translate></dt> <dd><translate>community-based organization</translate></dd>\n\n  <dt><translate>CHAI</translate></dt> <dd><translate>Clinton Health Access Initiative</translate></dd>\n\n  <dt><translate>DFID</translate></dt>\t<dd><translate>Department for International Development (United Kingdom)</translate></dd>\n\n  <dt><translate>DHISDHIS</translate></dt> <dd><translate>District Health Information Software</translate></dd>\n\n  <dt><translate>eHealth</translate></dt> <dd><translate>electronic health</translate></dd>\n\n  <dt><translate>eLMIS</translate></dt> <dd><translate>electronic logistics management and information system</translate></dd>\n\n  <dt><translate>GPRS</translate></dt> <dd><translate>general packet radio service</translate></dd>\n\n  <dt><translate>GPS</translate></dt> <dd><translate>Global Positioning System</translate></dd>\n\n  <dt><translate>GSMA</translate></dt> <dd><translate>Groupe Speciale Mobile Association</translate></dd>\n\n  <dt><translate>HIPAA</translate></dt> <dd><translate>Health Insurance Portability and Accountability Act</translate></dd>\n\n  <dt><translate>HIS</translate></dt> <dd><translate>health information system</translate></dd>\n\n  <dt><translate>HIV</translate></dt> <dd><translate>human immunodeficiency virus</translate></dd>\n\n  <dt><translate>HL7</translate></dt> <dd><translate>Health Level 7 (data standard)</translate></dd>\n\n  <dt><translate>HMIS</translate></dt> <dd><translate>health management information system</translate></dd>\n\n  <dt><translate>HRIS</translate></dt> <dd><translate>human resource information system</translate></dd>\n\n  <dt><translate>HRP</translate></dt> <dd><translate>The UNDP/UNFPA/UNICEF/WHO/World Bank Special Programme of Research, Development and Research Training in Human Reproduction</translate></dd>\n\n  <dt><translate>ICD</translate></dt> <dd><translate>International Classification of Diseases and Related Health Problems</translate></dd>\n\n  <dt><translate>ICT</translate></dt> <dd><translate>information and communication technology</translate></dd>\n\n  <dt><translate>IICD</translate></dt> <dd><translate>International Institute for Communication and Development</translate></dd>\n\n  <dt><translate>INN</translate></dt> <dd><translate>International Nonproprietary Name</translate></dd>\n\n  <dt><translate>IRD</translate></dt> <dd><translate>Interactive Research and Development</translate></dd>\n\n  <dt><translate>IRH</translate></dt> <dd><translate>Institute for Reproductive Health (Georgetown University, United States of America)</translate></dd>\n\n  <dt><translate>ISO</translate></dt> <dd><translate>International Organization for Standardization</translate></dd>\n\n  <dt><translate>ITU</translate></dt> <dd><translate>International Telecommunication Union</translate></dd>\n\n  <dt><translate>IVR</translate></dt> <dd><translate>interactive voice response</translate></dd>\n\n  <dt><translate>IWG</translate></dt> <dd><translate>Innovation Working Group</translate></dd>\n\n  <dt><translate>JHUCCP</translate></dt> <dd><translate>Johns Hopkins University Center for Communication Programs</translate></dd>\n\n  <dt><translate>JHU-GmI</translate></dt> <dd><translate>Johns Hopkins University Global mHealth Initiative</translate></dd>\n\n  <dt><translate>JSI</translate></dt> <dd><translate>John Snow, Inc.</translate></dd>\n\n  <dt><translate>KEMRI</translate></dt> <dd><translate>Kenya Medical Research Institute</translate></dd>\n\n  <dt><translate>LMICs</translate></dt> <dd><translate>low- and middle-income countries</translate></dd>\n\n  <dt><translate>LMIS</translate></dt> <dd><translate>logistics management and information system</translate></dd>\n\n  <dt><translate>m4RH</translate></dt> <dd><translate>Mobile for Reproductive Health</translate></dd>\n\n  <dt><translate>M&amp;E</translate></dt> <dd><translate>monitoring and evaluation</translate></dd>\n\n  <dt><translate>MAMA</translate></dt> <dd><translate>Mobile Alliance for Maternal Action</translate></dd>\n\n  <dt><translate>MAPS</translate></dt> <dd><translate>mHealth Assessment and Planning for Scale</translate></dd>\n\n  <dt><translate>mHealth</translate></dt> <dd><translate>mobile health</translate></dd>\n\n  <dt><translate>MNCH</translate></dt> <dd><translate>maternal, newborn and child health</translate></dd>\n\n  <dt><translate>mNDCC</translate></dt> <dd><translate>mobile Nutrition Day Care Centre (India)</translate></dd>\n\n  <dt><translate>MNO</translate></dt> <dd><translate>mobile network operator</translate></dd>\n\n  <dt><translate>MOH</translate></dt> <dd><translate>Ministry of Health</translate></dd>\n\n  <dt><translate>MOTECH</translate></dt> <dd><translate>Mobile Technology for Community Health (Ghana)</translate></dd>\n\n  <dt><translate>MoU</translate></dt> <dd><translate>memorandum of understanding</translate></dd>\n\n  <dt><translate>MOHSW</translate></dt> <dd><translate>Ministry of Health and Social Welfare (United Republic of Tanzania)</translate></dd>\n\n  <dt><translate>N/A</translate></dt> <dd><translate>not applicable</translate></dd>\n\n  <dt><translate>NGO</translate></dt> <dd><translate>nongovernmental organization</translate></dd>\n\n  <dt><translate>Norad</translate></dt> <dd><translate>Norwegian Agency for Development Cooperation</translate></dd>\n\n  <dt><translate>OCL</translate></dt> <dd><translate>Open Concept Lab</translate></dd>\n\n  <dt><translate>OpenHIE</translate></dt> <dd><translate>Open Health Information Exchange</translate></dd>\n\n  <dt><translate>OpenSRP</translate></dt> <dd><translate>Open Smart Register Platform</translate></dd>\n\n  <dt><translate>PMNCH</translate></dt> T<dd><translate>he Partnership for Maternal, Newborn &amp; Child Health</translate></dd>\n\n  <dt><translate>PMP</translate></dt> <dd><translate>Performance Monitoring Plan</translate></dd>\n\n  <dt><translate>RE-AIM</translate></dt> <dd><translate>Reach Effectiveness Adoption Implementation Maintenance</translate></dd>\n\n  <dt><translate>RMNCH</translate></dt> <dd><translate>reproductive, maternal, newborn and child health</translate></dd>\n\n  <dt><translate>SAQ</translate></dt> <dd><translate>self-assessment question</translate></dd>\n\n  <dt><translate>SERP</translate></dt> <dd><translate>Society for the Elimination of Rural Poverty (India)</translate></dd>\n\n  <dt><translate>SMS</translate></dt> <dd><translate>short messaging service (also known as text messages)</translate></dd>\n\n  <dt><translate>SNOMED</translate></dt> <dd><translate>CT Systematized Nomenclature of Medicine â Clinical Terms</translate></dd>\n\n  <dt><translate>SOP</translate></dt> <dd><translate>standard operating procedures</translate></dd>\n\n  <dt><translate>TextIT</translate></dt> <dd><translate>Texting to Improve Testing (KEMRI programme)</translate></dd>\n\n  <dt><translate>TCO</translate></dt> <dd><translate>total cost of ownership</translate></dd>\n\n  <dt><translate>TWG</translate></dt> <dd><translate>Technical Working Group (Rwanda)</translate></dd>\n\n  <dt><translate>UNDP</translate></dt> <dd><translate>United Nations Development Programme</translate></dd>\n\n  <dt><translate>UNF</translate></dt> <dd><translate>United Nations Foundation</translate></dd>\n\n  <dt><translate>UNFPA</translate></dt> <dd><translate>United Nations Population Fund</translate></dd>\n\n  <dt><translate>UNICEF</translate></dt> <dd><translate>United Nations Childrenâs Fund</translate></dd>\n\n  <dt><translate>USAID</translate></dt> <dd><translate>United States Agency for International Development</translate></dd>\n\n  <dt><translate>USSD</translate></dt> <dd><translate>unstructured supplementary service data</translate></dd>\n\n  <dt><translate>WHO</translate></dt> <dd><translate>World Health Organization</translate></dd>\n\n  <dt><translate>Wi-Fi</translate></dt> <dd><translate>wireless local area network</translate></dd>\n\n</dl>\n"},"./src/Common/Thematic/static/-1-4.html":function(t,e){t.exports="<p><b><translate>Architecture:</translate></b><translate> A description of how the different pieces of a technology and/or information system work together.</translate></p>\n\n<p><b><translate>Champions: </translate></b><translate>Charismatic opinion leaders who advocate for a particular programme, policy or technology. Champions are characterized by their âpassion, persistence, and persuasivenessâ.</translate></p>\n\n<p><b><translate>Client beneficiaries:</translate></b><translate> The individuals who benefit from improvements in health as a result of a given mHealth product.</translate></p>\n\n<p><b><translate>Core partners: </translate></b><translate>Those partners that are essential to the pursuit of the projectâs endgame. For example, government adoption calls for close partnering with the ministry of health or other government entities, while commercial adoptionâ will require projects to place a stronger emphasis on private sector partners, such as a mobile network operator (MNO) or technology vendors.</translate></p>\n\n<p><b><translate>Data dashboard:</translate></b><translate> A user interface that organizes and presents information and data in a way that is easy to read. User-friendly dashboards facilitate real-time system tracking and decision-making.</translate></p>\n\n<p><b><translate>Data dictionary:</translate></b><translate> A description about a data set that details features such as meaning, relationships to other data, origin, usage, and the format of specific data elements.</translate></p>\n\n<p><b><translate>Data privacy:</translate></b><translate> The capacity to guarantee that patientsâ personal data will be protected against intentional and unintentional exposure.</translate></p>\n\n<p><b><translate>Data quality assurance:</translate></b><translate> Mechanisms for evaluating data within the mHealth system for inconsistencies, errors or missing elements.</translate></p>\n\n<p><b><translate>Data standards:</translate></b><translate> Methods, protocols, terminologies and specifications for the collection, exchange, storage and retrieval of information associated with health-care applications.</translate></p>\n\n<p><b><translate>eHealth:</translate></b><translate> The use of information and communication technologies in support of health and health-related fields. mHealth is a sub-domain within eHealth.</translate></p>\n\n<p><b><translate>Enabling environment:</translate></b><translate> The attitudes, actions, policies and practices that stimulate and support effective and efficient functioning of organizations, individuals, and programmes or projects.</translate></p>\n\n<p><b><translate>End-users:</translate></b><translate> Health workers or other clients who interact directly with the technology.</translate></p>\n\n<p><b><translate>Endgame:</translate></b><translate> A projectâs long-term approach to scaling up and sustaining the mHealth product once it has proven the effectiveness of its core strategy and technology.5, 6 An mHealth product may pursue sustainability through the following endgame strategies: government adoption, commercial adoption, or a hybrid of the two.</translate></p>\n\n<p><b><translate>Evaluation research:</translate></b><translate> Assessment of the productâs effects and outcomes, with the emphasis on research protocols that include rigorous methods.</translate></p>\n\n<p><b><translate>Formative research:</translate></b><translate> The use of primarily qualitative research methods to inform the development of effective intervention strategies. Formative research helps programme planners and researchers understand the factors that influence health outcomes, including the traits of target populations, such as their behaviours, attitudes and needs, in order to develop mHealth products that are appropriate to a particular context.</translate></p>\n\n<p><b><translate>Hardware:</translate></b><translate> Any physical device that people are able to touch, such as a mobile handset, tablet, sensor or computer monitor.</translate></p>\n\n<p><b><translate>Health system constraints:</translate></b><translate> The specific challenges and barriers that impede optimal health promotion, prevention and care. Constraints take the form of failures in availability, cost, efficiency, quality, utilization, information and/or acceptability that impede optimal provision of specific health interventions.</translate></p>\n\n<p><b><translate>Implementers:</translate></b><translate> Individuals that are involved in the development and deployment of an mHealth product.</translate></p>\n\n<p><b><translate>Information and communication technology (ICT):</translate></b><translate> The integration of information systems, telecommunications systems, and components of a system related to the capture, storage, retrieval and transmission of data.</translate></p>\n\n<p><b><translate>Interoperability:</translate></b><translate> The ability of different information technology systems and software applications to communicate, exchange data, and use the information that has been exchanged. Interoperability is enabled by the use of common data standards.</translate></p>\n\n<p><b><translate>Latency:</translate></b><translate> The amount of time or delay for data to travel from the source (mobile device) to the data centre. Latency, along with bandwidth, determines the speed of a network connection.</translate></p>\n\n<p><b><translate>mHealth strategy:</translate></b><translate> The application of a technology for a defined health purpose (e.g. text message to deliver messages for antenatal care follow-up) in order to address specific health system challenges.</translate></p>\n\n<p><b><translate>Mobile aggregator:</translate></b><translate> A company that serves as an intermediary between application/content providers and MNOs in order to provide message traffic throughput to multiple MNOs or other aggregators. Mobile aggregators also often rent out virtual numbers and short codes to application/content providers, and may provide mobile initiative campaign oversight, administration and billing services.</translate></p>\n\n<p><b><translate>Mobile health (mHealth):</translate></b><translate> The use of mobile and wireless technologies to support the achievement of health objectives.</translate></p>\n\n<p><b><translate>Mobile money:</translate></b><translate> A cash management service available on a mobile device or the Internet that facilitates money transfer by allowing customers to convert cash to and from electronic value (âe-moneyâ), and perform transfers or make payments.</translate></p>\n\n<p><b><translate>Mobile network operator (MNO):</translate></b><translate> A telephone company that provides wireless communications services for mobile phone subscribers. An MNO must own or control all of the components necessary to sell and deliver services, such as network infrastructure and radio spectrum allocation.</translate></p>\n\n<p><b><translate>Payers:</translate></b><translate> Payers are entities that are willing and able to pay for or reimburse specific products or services. This differs from a funder, which provides financing to set up or grow programmes. For example, MNOs who subsidize short messaging service (SMS) or text messaging costs can be considered as payers of the mHealth product.</translate></p>\n\n<p><b><translate>Pilot testing:</translate></b><translate> A small-scale study that allows project managers to assess implementation factors such as feasibility, acceptability and cost. For mHealth products, the results of a pilot study are generally used to inform decisions surrounding scaling up.</translate></p>\n\n<p><b><translate>Process monitoring:</translate></b><translate> Routine and ongoing monitoring of the implementation of the product to track programme processes, review implementation milestones, and make course corrections throughout the scaling-up process.</translate></p>\n\n<p><b><translate>Product:</translate></b><translate> In the context of mHealth, this term refers to the combination of technology components, software, and the strategy of their use to address particular challenges related to the health system.</translate></p>\n\n<p><b><translate>Programme fidelity: </translate></b><translate>The degree to which the product is implemented as it was intended.</translate></p>\n\n<p><b><translate>Scaling up:</translate></b><translate> Scaling up consists of deliberate efforts to increase the impact of innovations successfully tested in pilot or experimental projects so as to benefit more people and to foster policy and programme development on a lasting basis.</translate></p>\n\n<p><b><translate>Secondary users:</translate></b><translate> Individuals who derive benefit from end-usersâ input into mHealth products, but do not themselves directly enter data (e.g. supervisors).</translate></p>\n\n<p><b><translate>Short messaging service (SMS):</translate></b><translate> SMS allows mobile phone users to directly send and receive personal text messages that can be up to 160 characters long. SMS is supported by all mobile phones, and the messages can be delivered between users of different MNOs.</translate></p>\n\n<p><b><translate>Software:</translate></b><translate> A set of code and instructions that can be installed onto hardware. Examples of software include mobile phone applications, client and server-side platforms, and computer and mobile-device operating systems.</translate></p>\n\n<p><b><translate>Standard operating procedures (SOPs):</translate></b><translate> Written instructions intended to document the steps required for project staff to perform a particular activity.</translate></p>\n\n<p><b><translate>Stress test:</translate></b><translate> An assessment of how well the entire mHealth system functions when tested by extreme conditions (e.g. maximum data requests).</translate></p>\n\n<p><b><translate>Sustainability:</translate></b><translate> A process that enables individuals, communities and organizations to decrease their dependence on insecure resources and maintain the health gains of the intervention beyond the specific/initial project period. For an mHealth product to be sustainable, it must be supported by stable and secure financial and technical resources, as well as enduring partnerships. In addition, sustainability depends on the projectâs capacity to continually adapt the product to meet the demands of users and the ever-evolving operational environment.</translate></p>\n\n<p><b><translate>Total cost of ownership (TCO):</translate></b><translate> A financial estimate that accounts for the long-term direct and indirect costs of a product or service. The total cost of an mHealth product will include costs associated with software development, training, implementation, and other related costs for the project as well as for end-users.</translate></p>\n\n<p><b><translate>Value chain analysis:</translate></b><translate> An evaluation of the relationships between relevant stakeholders based on the productâs value proposition (âthe promoted utility of the productâ) from each stakeholderâs perspective.</translate></p>\n\n<p><b><translate>Value proposition:</translate></b><translate> The promoted utility of the product for a given stakeholder.</translate></p>\n"},"./src/Common/Thematic/static/-1.html":function(t,e){t.exports=""},"./src/Common/Thematic/static/0-0.html":function(t,e){t.exports='<blockquote>\n  <h6><translate>Scaling up</translate></h6>\n  <p><translate>Scaling up consists of deliberate efforts to increase the impact of innovations successfully tested in pilot or experimental projects so as to benefit more people and to foster policy and programme development on a lasting basis.</translate></p>\n  <h6><translate>Sustainability</translate></h6>\n  <p><translate>A process that enables individuals, communities and organizations to decrease their dependence on insecure resources and maintain the health gains of the intervention beyond the specific/initial project period. For an mHealth product to be sustainable, it must be supported by stable and secure financial and technical resources, as well as enduring partnerships. In addition, sustainability depends on the projectâs capacity to continually adapt the product to meet the demands of users and the ever-evolving operational environment.</translate></p>\n</blockquote>\n\n<p><translate>Mobile technologies have shown incredible potential for improving our capacity to overcome barriers to the optimal performance of health systems. Since the early 2000s, enthusiasm surrounding the use of mobile digital wireless technologies for health (mHealth) has surged along with the rapid adoption of mobile devices throughout low- and middle-income countries (LMICs). Short-term evaluations suggest that the use of mHealth offers opportunities for improving health and health system outcomes. In particular, mHealth is appropriate for addressing many of the health system constraints that currently inhibit services for reproductive, maternal, newborn and child health (RMNCH) in LMICs, and critical strategies for catalysing the potential for achieving universal health coverage goals.</translate></p>\n\n<p><translate>Recent health interventions incorporating mHealth consist largely of pilot projects or small-scale implementations, many of which have focused on establishing evidence of feasibility and effect, without extensive exploration of the infrastructure needed for <b>scaling up</b> and sustaining the mHealth product. As a result, there is limited understanding of what may be required to translate these projects into larger-scale deployments that can be sustained over the long term.</translate></p>\n\n<p><translate>Growing concern with the number of mHealth products that have failed to become integrated into the national health system or to achieve <b>sustainability</b> has triggered research on barriers to scale. The current literature surrounding scaling up mHealth offers many recommendations for addressing identified challenges, yet these are weighted heavily towards broad, systems-level changes. These publications emphasize issues beyond the immediate control of a project, operating at the ecosystem level, such as the creation of robust data standards, national electronic health (eHealth) policies, and the adoption of mHealth by ministries of health. While important, such recommendations may not be readily actionable from the perspective of mHealth project teams.</translate></p>\n\n<blockquote class="float-left">\n  <h6><translate>Endgame</translate></h6>\n  <p><translate>A projectâs long-term approach to scaling up and sustaining the mHealth product once it has proven the effectiveness of its core strategy and technology.5, 6 An mHealth product may pursue sustainability through the following endgame strategies:</translate></p>\n  <p>\n    <strong>&rarr; <translate>Government adoption</translate></strong><br>\n    <translate>A model with potential for high coverage and seeking integration into public sector programmes.</translate>\n  </p>\n  <p>\n    <strong>&rarr; <translate>Commercial adoption</translate></strong><br>\n    <translate>A model with potential for profit and seeking to be delivered through the private sector.</translate>\n  </p>\n  <p>\n    <strong>&rarr; <translate>Hybrid</translate></strong><br>\n    <translate>Models that entail elements of both the public and private sectors also exist.</translate>\n  </p>\n  <p><small><translate>Note: Government adoption, commercial adoption, and hybrid models are discussed in greater detail under Axis 1.</translate></small></p>\n</blockquote>\n\n<p><translate>In response to this need, the <b>mHealth Assessment and Planning for Scale (MAPS) Toolkit</b> was designed to help project teams conduct self-assessments, review progress and develop plans to improve their ability to scale up and achieve sustainability of their mHealth products. Uniquely, the MAPS Toolkit emphasizes that scaling up is a dynamic process and that projects will need to be responsive to the changing circumstances defining health systems in LMICs.19 In this Toolkit, there is no discrete marker or threshold numbers for achieving scale. To this end, the MAPS Toolkit approaches scaling up as a continuous process and offers insights that will prove useful throughout the ongoing stages of mHealth project goals for scaling up and sustainability, whether projects are focused on government adoption, commercial adoption, or a hybrid model.</translate></p>\n'},"./src/Common/Thematic/static/0-1.html":function(t,e){t.exports='<h4><translate>What is the purpose of the toolkit?</translate></h4>\n\n<div class="image-wrapper float-right">\n  <img src="{{vm.images[\'conceptual-model\']}}" alt="figure 1" width="300">\n  <small><translate>Figure 1. Conceptual model for the MAPS Toolkit</translate></small>\n</div>\n\n<p><translate>The MAPS Toolkit provides <b>actionable information</b> that will help project teams to consider and address diverse concerns relating to scaling up and sustaining their mHealth product. The Toolkit has two overarching goals:</translate></p>\n\n<ul>\n  <li><translate><b>Assess:</b> MAPS helps project teams to critically evaluate the progress of scaling up their mHealth product through a detailed set of self-assessment questions (SAQs). Scoring their answers will allow project teams to measure and track their position along the pathway of scale.</translate></li>\n  <li><translate><b>Plan:</b> The outcomes of the self-assessment process will help project teams to define their priorities and plan their next steps. In addition, the Toolkit offers separate planning and guidance features that will help devise strategies to address and overcome the challenges inherent in scaling up.</translate></li>\n</ul>\n\n<p><translate>The self-assessment and planning components together will advance the progress of project teams. Since scaling up is an ongoing process, teams are encouraged to use the Toolkit at multiple time points. MAPS guides projects through an <b>iterative cyclical process</b> of thorough assessment, careful planning and targeted improvements. These steps will facilitate the successful scaling up of mHealth products and help to establish a foundation for sustainability (see Figure 1).</translate></p>\n\n<h4><translate>What are the axes of scale?</translate></h4>\n\n<p><translate>MAPS provides a structure for organizing the specific activities and considerations that will determine a successful journey through the process of scaling up. The key determinants or axes of scale are <b>Groundwork</b>, <b>Partnerships</b>, <b>Financial health</b>, <b>Technology &amp; architecture</b>, <b>Operations</b>, and <b>Monitoring &amp; evaluation</b> (see Figure 2). These areas are considered to be relevant to all projects that have the goals of increasing scale and ensuring sustainability.</translate></p>\n\n<div class="image-wrapper center-block">\n  <img src="{{vm.images[\'axes-scale\']}}" alt="figure 2">\n  <small><translate>Figure 2. Axes of scale</translate></small>\n</div>\n\n<p><translate>Each axis is divided into <b>domains</b>, which capture the specific drivers of increasing scale. The domains comprise various <b>factors</b>, which represent the specific criteria used for the purpose of self-assessment (see Figure 3).</translate></p>\n\n<div class="image-wrapper center-block">\n  <img src="{{vm.images[\'axes-domains\']}}" alt="figure 3">\n  <small><translate>Figure 3. Axes and domains</translate></small>\n</div>\n\n<h4><translate>How was maps developed?</translate></h4>\n\n<blockquote>\n    <h6><translate>IWG Catalytic mHealth Grant Mechanism</translate></h6>\n    <p><translate>The IWG Catalytic mHealth Grant Mechanism is a UNFâWHO collaboration funded by the Norwegian Agency for Development Cooperation (Norad), and is part of the UN Secretary Generalâs Every Woman Every Child initiative. This grant mechanism has served as a strategic investment for accelerating mHealth innovations that focus on strengthening health systems in developing countries in order to improve RMNCH. Between 2011 and 2015, the programme supported the scaling up of 26 mHealth projects by providing funding, technical assistance and joint learning opportunities.</translate></p>\n</blockquote>\n\n<p><translate>Development of the MAPS Toolkit was initiated within the context of the World Health Organization (WHO) and United Nations Foundation (UNF)-led Innovation Working Group (IWG) Catalytic mHealth Grant Mechanism initiative, which provides financial, technical and joint learning support to RMNCH projects. The team developed MAPS over several years, engaging with numerous mHealth projects and drawing on the experience of experts in the mHealth, implementation science, and maternal and child health fields. Additionally, Toolkit authors facilitated technical workshops and conducted field research at country level, using key informant interviews to explore and understand the different factors affecting the scaling up and sustainability of projects. The network of IWG mHealth project grantees played a fundamental role in informing and validating the Toolkit throughout its development.</translate></p>\n\n<p><translate>The development of MAPS included:</translate></p>\n\n<ul>\n  <li><translate>joint learning and technical assistance workshops with IWG grantee mHealth projects and technical experts;</translate></li>\n  <li><translate>literature review;</translate></li>\n  <li><translate>site visits and interviews with mHealth projects and key partners;</translate></li>\n  <li><translate>consultations with technical experts in the areas of mHealth, health information systems, health policy, implementation research, health financing, health systems and RMNCH;</translate></li>\n  <li><translate>review panel;</translate></li>\n  <li><translate>pre-testing.</translate></li>\n</ul>\n\n<translate>Additional information regarding the development of the Toolkit is provided in Annex 1.</translate>\n\n<h4><translate>What does the toolkit contain?</translate></h4>\n\n<p><translate>The Toolkit has six chapters pertaining to the axes of scale. Each chapter is divided into three sections to meet the assessment and planning needs of projects.</translate></p>\n\n<p><translate><b>A. Thematic overview:</b> This section provides definitions and descriptions of key concepts, and highlights their relevance to scaling up and sustainability. It also includes diagrams to illustrate the conceptual framework underlying the Toolkit.</translate></p>\n\n<p><translate><b>B. Self-assessment:</b> This section presents a series of SAQs, which represent a set of tangible indicators based on the concepts outlined in the thematic overview.</translate></p>\n\n<p><translate><b>C. Planning and guidance:</b> The final section in each chapter builds on the SAQs by offering examples and resources to help project teams plan their future efforts and undertake corrective actions. These are highlighted using three features:</translate></p>\n\n<ol>\n  <li><translate><b>Tips and considerations:</b> Harnesses the collective experiences of projects vetted through the IWG mHealth catalytic programme and implementers in the field to offer suggestions and considerations.</translate></li>\n\n  <li><translate><b>Lessons from the field:</b> Specific examples demonstrating how different implementers have approached and addressed some of the major challenges to scaling up. This includes experiences from a variety of projects (see Annex 2 for brief descriptions of the projects).</translate></li>\n\n  <li><translate><b>Resources:</b> Provides links to relevant websites, reports and other tools that project teams may find useful.</translate></li>\n</ol>\n\n<h4><translate>Who is maps for?</translate></h4>\n\n<blockquote>\n    <h6><translate>mHEALTH STRATEGY</translate></h6>\n    <p><translate>The application of a technology for a defined health purpose (e.g. text message to deliver messages for antenatal care follow-up) in order to address specific health system challenges.</translate></p>\n</blockquote>\n\n<p><translate>MAPS was designed specifically for managers and/or project teams that are already deploying an mHealth product and aiming to increase its impact through scaling up; the mHealth product has already undergone an initial proof-of-concept or has been âsuccessfully testedâ. The Toolkit is not intended for organizations that are in the early stages of designing an mHealth product, although certain pieces of information may prove useful for such teams.</translate></p>\n\n<p><translate>Projects using MAPS should meet the following basic criteria:</translate></p>\n\n<ul>\n  <li><translate>The project uses software and hardware technologies developed in-house, or as provided by an external company, for the purposes of improving health.</translate></li>\n  <li><translate>The mHealth project can describe the use of the technology as an <b>mHealth strategy</b>.</translate></li>\n  <li><translate>The project team has plans to increase scale by using the endgames discussed above, i.e. government adoption, commercial adoption or a hybrid model.</translate></li>\n</ul>\n'},"./src/Common/Thematic/static/0-2.html":function(t,e){t.exports='<h4><translate>How do I conduct the self-assessment?</translate></h4>\n\n<p><translate>The mHealth project manager and other relevant members of the project team should use the Toolkit to conduct a process of self-assessment. There are two suggested approaches for completing and responding to the self-assessment questions (SAQs):</translate></p>\n\n<ul>\n  <li><translate><b>Individual assessment:</b> Different members of the team complete different sections. While the project manager will probably be able to answer the questions in most areas, certain sections will require input from specialists with a particular skill set within the project; e.g. the financial manager for Axis 3 (Financial health) and the information technology team for Axis 4 (Technology &amp; architecture). Once MAPS has been completed, it is recommended that project managers hold a meeting with the entire team to review the results.</translate></li>\n  <li><translate><b>Team assessment:</b> The whole team completes each section in turn. This could involve a series of meetings organized over the course of a month, with the entire team tackling one or two chapters during each meeting.</translate></li>\n</ul>\n\n<p><translate>Since every team has different needs, dynamics and organizational structures, project managers should choose the approach that makes most sense to them. Regardless of the route chosen, the self-assessment process will create a space for critical internal reflection, and for team discussions about future course corrections.</translate></p>\n\n<p><translate>The Toolkit should take approximately 1.5â2 hours to complete in its entirety. Determining the next steps needed to address any project shortfalls highlighted by MAPS may be a more extensive process.</translate></p>\n\n<h4><translate>When should I use the toolkit?</translate></h4>\n\n<p><translate>The Toolkit is first and foremost intended to be used as a baseline assessment of where a project stands, and to inform planning for advancement through the scaling-up process. Projects are also strongly encouraged to use the Toolkit periodically after the initial assessment to help the project track its progress, ensure it is on the intended path, and continue to make adjustments throughout its life cycle. During repeated use of the Toolkit, projects may choose to focus on a select number of chapters based on their priority areas.</translate></p>\n\n<h4><translate>How do I respond to the self-assessment questions (SAQs)?</translate></h4>\n\n<p><translate>Each SAQ has a series of sub-statements that capture the particular activities, considerations and procedures reflecting the relevant topic. Each sub-statement is accompanied by a set of response options. Some questions have the basic response options of <b>No</b> and <b>Yes</b>. However, the majority of the SAQs have four response options: <b>No</b>, <b>In progress</b>, <b>Performed</b> and <b>Documented</b>.</translate></p>\n\n<p><translate>Projects should use the guidelines shown in Table 1 to select the most appropriate response for each of the four options. The table includes examples showing how particular project experiences would align with the various response options.</translate></p>\n\n<p><translate>In addition, a small number of questions have the option <b>Not applicable</b> (N/A), which means that the particular item does not apply to a project due to the context or the product. Finally, a few questions have a unique set of response options that are self-explanatory based on the content provided.</translate></p>\n\n<p class="title-table"><translate>Table 1. Guidelines to selecting the most appropriate response (example from SAQ 14-1)</translate></p>\n\n<table border="0" cellpadding="0" cellspacing="0">\n\t<thead>\n\t\t<tr>\n\t\t  <th><translate>RESPONSE OPTION</translate></th>\n\t\t  <th><translate>DEFINITION OF RESPONSE OPTION</translate></th>\n      <th><span><translate>EXAMPLE OF INTERPRETATION FOR SAQ 14-1. (PROCEDURES FOR ADDRESSING LACK OF/INCONSISTENCIES IN ELECTRICITY HAVE BEEN ESTABLISHED)</translate></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t  <tr>\n\t    <td><b><translate>No</translate></b></td>\n\t    <td><translate>You have not addressed this item at all.</translate></td>\n      <td><translate>You have not considered the issues associated with electricity coverage at all.</translate></td>\n\t  </tr>\n    <tr>\n\t    <td><b><translate>In progress</translate></b></td>\n\t    <td><translate>You have begun to address this item, but further steps are needed.</translate></td>\n      <td><translate>You have gathered information about the access to and the consistency of electricity in the settings where the product will be scaled up, but you have not yet decided on how you will deal with these issues.</translate></td>\n\t  </tr>\n    <tr>\n\t    <td><b><</b>>Performed</</b>></b></td>\n\t    <td><translate>You have addressed this item fully, leaving no remaining uncertainties.</translate></td>\n      <td><translate>You have decided that you will provide health workers with solar chargers to enable them to charge their mobile phones when in the field.</translate></td>\n\t  </tr>\n    <tr>\n\t    <td><b><</b>>Documented</</b>></b></td>\n\t    <td><translate>There is written documentation or evidence demonstrating that this item has been completed. This may include a report, or involve the development of standard operating procedures (SOPs).</translate></td>\n      <td><translate>You have documented the information needed for the provision of solar chargers, including how many chargers will be necessary for each group of health workers, the name of the vendor that will supply the chargers, and the total cost.</translate></td>\n\t  </tr>\n\t</tbody>\n</table>\n\n<h4><translate>How do I score the toolkit?</translate></h4>\n\n<blockquote>\n  <h6><translate>Standard operating procedures (SOPs)</translate></h6>\n  <p><translate>Written instructions intended to document the steps required for project staff to perform a particular activity.</translate></p>\n</blockquote>\n\n<p><translate>After completing the MAPS Toolkit, you will be able to calculate scores on three levels:</translate></p>\n\n<ol>\n  <li><translate>the overall score (total score combining all axes)</translate></li>\n  <li><translate>axis scores (a separate score for each of the six axes of scale)</translate></li>\n  <li><translate>domain scores (specific scores for the domains within each axis of scale).</translate></li>\n</ol>\n\n<p><translate>The scoring mechanisms allow project teams to use quantitative terms to describe their overall progress through the process of scaling up, as well as their internal strengths and weaknesses. The opportunity to compare scores across axes and domains will help project teams determine which areas need further development.</translate></p>\n\n<p><translate><b>Allocation of points:</b> Points are allocated at the level of the sub-statements within each question. Each response option is worth a specific point value, as indicated in the check boxes. For example, No = 0 points, In progress = 1 point, Performed = 2 points, and Documented = 3 points.</translate></p>\n\n<p><translate>Therefore, each question is worth a certain number of points depending on the number of sub-statements accompanying the question. The maximum number of points that can be allocated is indicated beside each question and each domain title (see Figure 4).</translate></p>\n\n<p><translate><b>Scorecards:</b> Six scorecards â one for each axis of scale â are provided to help users calculate their scores. The specific steps entailed in the scoring process are detailed in these scorecards.</translate></p>\n\n<p><translate><b>Final scorecard:</b> Ultimately, the calculations will yield a percentage for each axis of scale as well as for each domain. The final scorecard will allow users to compare scores across the axes of scale and the domains. As the Toolkit is used by more projects, we will gain a greater understanding of the range of scores and their implications. This will eventually allow projects to categorize their progress as they increase their scale, and allow users to compare their scores to other similar projects and to a defined average.</translate></p>\n\n<div class="image-wrapper center-block">\n  <img src="{{vm.images[\'sample-saq\']}}" alt="figure 4">\n  <small><translate>Figure 4. Sample SAQ</translate></small>\n</div>\n\n<h4><translate>What should I do with the results?</translate></h4>\n\n<p><translate>The results obtained from the SAQs can be applied in several different ways. First, the axis and domain scores help to shed light on the particular areas that may require additional consideration, activities and strategies from project managers and teams. Projects may consult the tips, lessons from the field, and resources provided in the planning and guidance section of each axis in order to plan efforts to address problem areas. In addition, since the Toolkit can be used periodically, projects can employ it to assess and correct the course of their progress regarding scaling up and the pursuit of their endgame.</translate></p>\n'},"./src/Common/Thematic/static/0.html":function(t,e){t.exports=""},"./src/Common/Thematic/static/1-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-1\']}}" alt="Domain 1 icon">\n    <h3><translate>Domain 1: Parameters of scale</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Health System Contraints</translate></h6>\n    <p><translate>âThe specific challenges and barriers that impede optimal health promotion, prevention and careâ. Constraints take the form of failures in availability, cost, efficiency, quality, utilization, information and/or acceptability that impede optimal provision of specific health interventions.</translate></p>\n</blockquote>\n\n<p><translate>Project teams should begin by specifying the basic foundational elements that will guide the scaling-up process, which includes setting goals and defining the endgame for the mHealth product. To outline the mHealth product goals for scaling up, project teams should articulate the health outcomes and priorities (e.g. reduce stock-outs of contraceptives, improve coverage of routine immunization among children under 5 years) and the health system constraints (e.g. delays in care, low demand for services) that are being targeted by the mHealth product. Delineating the health system problem areas that are a focus of the mHealth product will strengthen the projectâs capacity to articulate âvalueâ and appeal to potential partners and attract financing.</translate></p>\n\n<p><translate>Next, project teams should detail how they wish to measure their goal of scaling up. This involves two steps:</translate></p>\n\n<ol>\n    <li><translate>Define the metrics (e.g. growth, adoption, or expansion of geo-political area, as described in Table 2).</translate></li>\n    <li><translate>Specify the quantifiable target or targets (e.g. 100 000 users or 40 clinics).</translate></li>\n</ol>\n\n<p><translate>For the second step, project teams should keep in mind the need to gather adequate data to estimate the denominator for each of their targets. The project team will need to estimate the total potential numbers of health workers, clinics, client beneficiaries, etc., that represent the target population that can be reached (i.e. the eligible population) with the mHealth product, in order to have a complete picture of current and future impact.</translate></p>\n\n<p class="title-table"><translate>Table 2. Metrics for measuring success of scaling up</translate></p>\n\n<table border="0" cellpadding="0" cellspacing="0">\n\t<thead>\n\t\t<tr>\n\t\t  <th><translate>UNIT OF SCALE</translate></th>\n\t\t  <th><translate>DESCRIPTION</translate></th>\n\t\t  <th><translate>EXAMPLE</translate></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t  <tr>\n\t    <td><translate>Growth (client)</translate></td>\n\t    <td><translate>Increase in number of users or client beneficiaries</translate></td>\n\t    <td><translate>FHI 360: Goal of scale-up is to achieve 300 000 unique users for Mobile for Reproductive Health (m4RH) in the United Republic of Tanzania</translate></td>\n\t  </tr>\n    <tr>\n\t    <td><translate>Adoption (institutional)</translate></td>\n\t    <td><translate>Increase in number of institutions that have adopted the product</translate></td>\n\t    <td><translate>Kenya Medical Research Institute: Goal of scale-up is to increase the number of health-care facilities using Texting to Improve Testing (TextIT) in Kenya to 20</translate></td>\n\t  </tr>\n    <tr>\n\t    <td><translate>Expansion (geo-political)</translate></td>\n\t    <td><translate>Increase in number of districts, regions or countries of deployment</translate></td>\n\t    <td><translate>John Snow, Inc., Malawi: Goal of scale-up is to achieve nationwide coverage of cStock to all 29 districts in Malawi</translate></td>\n\t  </tr>\n\t</tbody>\n</table>\n\n<p><translate>Specifying the <b><em>endgame</em></b>, or the long-term approach that will be used to scale up and sustain the product, is also important. The two primary endgames for mHealth are government adoption and commercial adoption.</translate></p>\n\n<p><translate><b>Government adoption: </b>The integration of the mHealth product into a regional or national health system to be supported largely by the public sector. With this strategy, the mHealth product is adapted for and integrated into the structure and systems of the ministry of health (MOH) or equivalent institution, and is absorbed into practice as a routine âstandard of careâ. Here, a proportion of the costs related to technology, training and support are reflected in the MOH operational budget.11 For example, the John Snow, Inc. (JSI) cStock initiative in Malawi is a short messaging service (SMS)-based logistics management and information system (LMIS) for health products. It has been endorsed formally by the Malawi MOH and achieved nationwide coverage in 2014. This initiative reflects a government adoption endgame strategy.</translate></p>\n\n<p><translate><b>Commercial adoption:</b> Development of the product to be commercially viable. Here, the mHealth product (as a ready-to-use technology or service with defined functionality) is available to end-users through financing from private partners or payment schemes. An example is Changamkaâs Linda Jamii micro health insurance programme for maternal health care, which has been supported through a partnership with Safaricom in Kenya.</translate></p>\n\n<p><translate><b>Hybrid models</b> that entail elements of both the public and private sectors also exist. Recent years have seen a growing trend in publicâprivate partnerships, which involve an arrangement between a government entity and a private company, and which result in shared costs while maintaining an orientation towards health system goals.</translate></p>\n\n<p><translate>Pilot mHealth projects will over time need to work to shift from a support model that relies mostly on grant funding functioning independently of ministries of health or the commercial sector financial models, to become mHealth programmes that are guided by their endgames goals.</translate></p>\n'},"./src/Common/Thematic/static/1-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-2\']}}" alt="Domain 2 icon">\n    <h3><translate>Domain 2: Contextual Environment</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Enabling environment</translate></h6>\n    <p><translate>The attitudes, actions, policies and practices that stimulate and support effective and efficient functioning of organizations, individuals, and programmes or projects.</translate></p>\n</blockquote>\n\n<p><translate>The second step of scaling up involves conducting a thorough assessment of the contextual elements that may facilitate or impede implementation in the areas in which scaling up will occur. Commonly referred to as the <b>enabling environment</b>, policy frameworks are the: (1) regulations surrounding country health priorities and (2) national health information systems (HIS) and information and communication technology (ICT), including eHealth/mHealth. An understanding of the <b><em>policy environment</em></b> will help project teams identify how their product may fit in and gain traction, particularly among public sector partners.</translate></p>\n\n<p><translate>The <b><em>technical environment</em></b> shapes an mHealth projectâs prospects of being scaled up. Assessment of network coverage and electricity throughout the areas in which scaling up will occur, in terms of both reach and reliability, will have fundamental implications for the operational procedures required throughout the process of scaling up â impacting the fidelity of the product in real-world use. Project teams should consider how potential infrastructural constraints may complicate the wider use of the product, and determine strategies to overcome such challenges.</translate></p>\n\n<p><translate>Lastly, project teams should assess the <b><em>mHealth landscape</em></b> in the targeted regions by investigating other deployed mHealth products, reviewing their target market, functionality and success. Such considerations will help the project team to define the similarities, differences and potential advantages of their own compared with other local projects, thus paving the way for strategic planning and alignments.</translate></p>\n'},"./src/Common/Thematic/static/1-2.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-3\']}}" alt="Domain 3 icon">\n    <h3><translate>Domain 3: Scientific Basis</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Stages of Evaluation</translate></h6>\n    <p><translate>The four different stages of evaluation for mHealth products answer the following questions:</translate></p>\n    <p>\n      <b><translate>Functionality</translate></b><br>\n      <translate>Does the technology work as intended?</translate>\n    </p>\n    <p>\n      <b><translate>Functionality</translate></b><br>\n      <translate>Does the technology work as intended?</translate>\n    </p>\n    <p>\n      <b><translate>Usability</translate></b><br>\n      <translate>Can the mHealth product be used effectively by the intended users?</translate>\n    </p>\n    <p>\n      <b><translate>Efficacy</translate></b><br>\n      <translate>Does the mHealth product demonstrate the intended effect in an ideal or controlled setting?</translate>\n    </p>\n    <p>\n      <b><translate>Effectiveness</translate></b><br>\n      <translate>Does the mHealth product demonstrate the intended effect in a non-controlled setting?</translate>\n    </p>\n</blockquote>\n\n<p><translate>The final piece of groundwork involves reviewing the effect of the mHealth product on known health system challenge areas and the effect on health interventions. This will help to identify the extent to which additional evaluation activities are needed. Project teams should be able to demonstrate:</translate></p>\n\n<ul>\n  <li><translate>that the mHealth product is aligned with scientifically validated health interventions;</translate></li>\n  <li><translate>general evidence of the effect of the mHealth product on identifiable problems;</translate></li>\n  <li><translate>context-specific evidence supporting the appropriateness of the tool for a certain setting (e.g. the content has been adapted and validated for local use).</translate></li>\n</ul>\n\n<p><translate>The mHealth project team should be able to reference the specific scientific basis for the health intervention that is associated with the mHealth strategy. This may include, for example, the validity of the specific information content contained in the mHealth product, or the alignment of the mHealth product with medical guidelines such as a vaccination schedule or family planning methods.</translate></p>\n\n<p><translate>The second element requires consideration of <b><em>existing evidence</em></b> and whether it adequately supports the four <b>stages of evaluation</b> to assess the mHealth productâs <b>functionality</b>, <b>usability</b>, <b>efficacy</b> and <b>effectiveness</b>. The pilot stage of introducing an mHealth product will often demonstrate its functionality, usability and efficacy. Gathering evidence of effectiveness, however, is far more challenging and may not be possible until the product reaches a certain degree of scale.</translate></p>\n\n<p><translate>It is important to note that these stages of evaluation do not refer to gathering evidence on the health intervention itself (e.g. the effect of antenatal care [ANC] visits on reducing the risk of maternal mortality), as it is assumed that such evidence is already in place. As such, mHealth products should be viewed as tools that enhance the delivery of health interventions that are already validated (e.g. providing SMS reminders for ANC visits improves uptake of ANC services).</translate></p>\n\n<p><translate>Demonstrating evidence for the mHealth product also requires support for key components of its strategy, including its content, key activities and operational features (e.g. the timing and frequency of the activities). These elements should be drawn ideally from reliable evidence-based sources. If sufficient evidence supporting the product is lacking, then additional evaluation activities are advised before initiating the scaling-up process.</translate></p>\n\n<p><translate>In addition to the general evidence supporting the mHealth product, local validation of the product in the setting or settings in which it will be scaled up is essential. Evidence of the effectiveness of a product in one location does not guarantee that it will take hold in another area with different sociocultural, geographic and institutional characteristics. Thus, formative research and assessment of the cultural context of the specific setting are needed to ensure the product will be appropriate to the new setting. For example, the product would need to reflect the specific needs as well as workflows and information flows of targeted end-user health workers; and when clients are involved, the product should address cultural beliefs, motivations and barriers to accessing services and following treatment guidelines.</translate></p>\n'},"./src/Common/Thematic/static/1.html":function(t,e){t.exports='<p class="lead"><translate>Groundwork: The initial steps of specifying the key components of the projectâs approach to scaling up, assessing relevant contextual influences, and taking stock of the scientific basis for the product</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-1\']}}" alt="graph">\n  <p><translate>Before initiating the complex process of scaling up, a project must have a solid foundation, including scope, goals and basis of need. Axis 1: Groundwork describes three domains that need to be addressed before a project should move through the next axes. These cover: (a) the scaling-up goals and endgame, (b) the contextual environment of the target setting, and (c) the underlying scientific basis for the mHealth product itself. Describing these domains will lay the groundwork for subsequent strategic planning decisions along the entire scaling-up pathway.</translate></p>\n</div>\n'},"./src/Common/Thematic/static/2-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-4\']}}" alt="Domain 4 icon">\n    <h3><translate>Domain 4: Strategic Engagement</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Core patterns</translate></h6>\n    <p><translate>Those that are essential to the pursuit of the projectâs endgame. For example, government adoption calls for close partnering with the ministry of health or other government entities, while commercial adoption will require projects to place a stronger emphasis on private sector partners, such as a mobile network operator (MNO) or technology vendors.</translate></p>\n    <h6><translate>Value patterns</translate></h6>\n    <p><translate>The promoted utility of the product for a given stakeholder.</translate></p>\n</blockquote>\n\n<p><translate>When engaging with strategic partners, the first step involves <b><em>identification of partners</em></b> that have the diversity of expertise and services to complement project needs. Such decisions demand careful reflection on the types of competencies held by the project team itself, and the areas requiring external guidance or resources. Collaborations often involve one or two <b>core partners</b> that are critical to pursuing the chosen endgame strategy. A range of additional strategic partners will fill important roles; examples include local community-based organizations (CBOs) to provide implementation support, and research partners to assist with monitoring and evaluation.24 Additional partners will also include local stakeholders, e.g. community councils or leaders, whose approval is critical to build the credibility needed to scale up the programme.</translate></p>\n\n<p><translate>A central feature of establishing partnerships involves <b><em>fostering buy-in</em></b> for scaling up the mHealth product. This will involve critically assessing each potential partnerâs notion of value, and then determining the <b>value proposition</b> of the product for each one. For example, government officials will be more inclined to adopt and integrate an mHealth product that offers efficiency and coverage improvements relative to the status quo approaches, and that addresses priorities in the national health strategy. MNOs may define value as a product that has potential to increase financial revenue through enhancing brand awareness or attracting new customer segments. Project teams must make an effort to link the anticipated outcomes of the mHealth product to the organizational goals of their partners, thereby fostering greater buy-in and paving the way to mutually beneficial collaborations. Table 3 outlines additional examples of partnersâ distinct notions of value.</translate></p>\n\n<p class="title-table"><translate>Table 3. Examples of value propositions</translate></p>\n\n<table border="0" cellpadding="0" cellspacing="0">\n\t<thead>\n\t\t<tr>\n\t\t  <th><translate>POTENTIAL PARTNER</translate></th>\n\t\t  <th><translate>NOTION OF VALUE</translate></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t  <tr>\n\t    <td><translate>MOH or other government entity</translate></td>\n\t    <td><translate>Relevance to national health strategy, value for money, health, system benefits, reduced health expenditure</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>MNO</translate></td>\n      <td><translate>Return on investment, brand awareness, new customer segments</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>Field-level NGO/CBO</translate></td>\n      <td><translate>Alignment with mission, clinical outcome, cost-effectiveness, problem-solving</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>End-users</translate></td>\n      <td><translate>Perceived benefit, usability</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>Donors</translate></td>\n      <td><translate>Potential for health outcome or population benefit, sustainability</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>Academia</translate></td>\n      <td><translate>Notable outcomes, potential for publication</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>Insurers</translate></td>\n      <td><translate>Reduced health expenditures</translate></td>\n\t  </tr>\n\t</tbody>\n</table>\n'},"./src/Common/Thematic/static/2-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-5\']}}" alt="Domain 5 icon">\n    <h3><translate>Domain 5: Partnership Sustainability</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Champions</translate></h6>\n    <p><translate>Charismatic opinion leaders who advocate for a particular programme, policy or technology. Champions are characterized by their âpassion, persistence and persuasivenessâ.</translate></p>\n</blockquote>\n\n<p><translate>Once partnerships have been established, it is critical that project teams establish mechanisms to help sustain the partnership over the long term. One particularly effective strategy includes cultivating <b><em>champions</em></b> in different partner organizations. By advocating for the mHealth product internally, champions will help to increase the commitment of their organizations to its scaling up, and help to maintain momentum when challenges emerge. It is critical that champions are aware of their scope of work during the scaling-up process; this may require the project team to provide training, orientation, clear mandates, support for organizing meetings and/or relevant policy support, as needed.</translate></p>\n\n<p><translate>Another key element that underpins partnership sustainability is the establishment of effective <b><em>governance</em></b> structures. Mechanisms for ensuring an inclusive planning process should be established formally early on; this is likely to involve a representative steering committee or decision-making board, a regular schedule of meetings, and mechanisms for transparency and accountability. The committee or board will help to build trust among key partners, foster a sense of ownership and ideally preclude disagreements or power struggles down the line. Another imperative of good governance involves the documentation of partnership terms. This includes formal collaboration agreements (e.g. a memorandum of understanding or MoU) to define the distribution of roles and responsibilities within a partnership, and contracts for vendor relationships.</translate></p>\n'},"./src/Common/Thematic/static/2.html":function(t,e){t.exports='<p class="lead"><translate>Partnerships: Collaborations with external groups to support the process of scaling up, including strategies for identifying, developing and sustaining fruitful partnerships</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-2\']}}" alt="graph">\n  <p><translate>Strong, sustainable partnerships are essential for successfully scaling up an mHealth product, and for determining its capacity to make lasting improvements in the health system. Since mHealth represents the intersection of the health, technology and business sectors, increasing its scale will involve a wide range of external groups. Successful partnerships will bring together diverse skills, services, strategies, lessons learnt, audiences and ideas; all with a common goal in mind.23 However, the process of achieving and maintaining dedicated, productive collaborations is no easy task. Strategic decision-making is required at many stages throughout the partnershipâs development to avoid the fault lines that threaten a projectâs trajectory.</translate></p>\n</div>\n'},"./src/Common/Thematic/static/3-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-6\']}}" alt="Domain 6 icon">\n    <h3><translate>Domain 6: Strategic Engagement</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Programme Costs</translate></h6>\n    <p><b><translate>Recurring fixed costs</translate></b><br>\n      <translate>Overhead expenses that are not dependent on the scale of the operation (e.g. general administrative costs, rent).</translate></p>\n    <p><b><translate>Variable costs</translate></b><br>\n      <translate>Costs that change according to the level of scale (e.g. training, maintenance, community mobilization activities).</translate></p>\n    <p><b><translate>Capital costs</translate></b><br>\n      <translate>Fixed, one-off expenses that are necessary to bring a project to operational status (e.g. software development, purchase of office space, equipment, licenses).</translate></p>\n</blockquote>\n\n<p><translate>The first step to managing a projectâs financial health is to understand the costs of operating at the current level of implementation, and then to forecast future costs. Project teams must consider the costs of the mHealth product from a programme perspective, a user perspective and a health system perspective in order to fully capture the costs that will be associated with scaling up.</translate></p>\n\n<p><translate>In terms of <b><em>programme cost</em></b>, strong financial management entails the ability to track expenditures, categorize costs and estimate how costs during scaling up will vary from pilot phase costs. The project team should differentiate between <b>recurring fixed costs</b>, <b>variable costs</b> and one-time <b>capital costs</b>, and create a budget that reflects these categories. Furthermore, projects should attempt to quantify any in-kind contributions they may receive from other organizations, and identify cost-share opportunities (i.e. differentiating between costs that will be covered by the project team itself and costs that may be covered by other stakeholders). Project teams should also keep in mind that drafting a budget should not be a one-off event. Budgets should be revisited regularly since funding, assumptions and activities can all change. Regular review will assist project teams to plan appropriately for increasing their scale and managing resources efficiently.</translate></p>\n\n<p><translate>Next, the project team must consider <b><em>end-user cost</em></b>, or the cost incurred by the user, which includes technology costs (e.g. mobile devices, airtime) and non-technology costs (e.g. costs associated with seeking services promoted by the mHealth product, or cost savings resulting from receiving information through a mobile device). These end-user costs have implications for the feasibility of scaling up, and calculating them will help project teams anticipate any economic barriers to widespread user adoption.</translate></p>\n\n<p><translate>Finally, from the perspective of <b><em>health system cost</em></b>, it will be important for the project team to collaborate with stakeholders in the health sector. This will help them anticipate changes in the demand for services that may follow when the product is scaled up. Such changes will have a ripple effect and are likely to affect the workload of health workers and additional providers (e.g. clinicians may need more time for additional antenatal care visits) as well as the supplies and commodities required to meet increased demand. By capturing these anticipated changes within the health system and service/care delivery, project teams will build a more precise picture of the costs and benefits of scaling up.</translate></p>\n\n<p><translate>Once the project team has defined these three levels of cost, they may harness this knowledge as the basis for <b><em>forecasting</em></b> the economic costs of scaling up. Forecasting first and foremost requires an analysis of the total cost of ownership (TCO), which estimates the total cost of the product, including raw materials, supplies, labour and other related overheads. Yet forecasting does not simply involve extracting figures from a budget. Instead, it calls for judicious and creative thinking to address several concerns. These include determining the key cost drivers, which are factors that cause programme, end-user or health system costs to change, such as mobile phone penetration and user demand. In addition, project teams must identify where cost savings could be achieved, and think through the assumptions and corresponding risks that could affect projects. Considerations like these will help project teams construct a more realistic view of the costs of scaling up, and prepare them better to avoid financial setbacks that may emerge over time.</translate></p>\n'},"./src/Common/Thematic/static/3-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-7\']}}" alt="Domain 7 icon">\n    <h3><translate>Domain 7: Financial Model</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>Value chain analysis</translate></h6>\n    <p><translate>An evaluation of the relationships between relevant stakeholders based on the productâs value proposition (âthe promoted utility of the productâ) from each stakeholderâs perspective.</translate></p>\n    <h6><translate>Payers</translate></h6>\n    <p><translate>Payers are entities that are willing and able to pay for or reimburse specific products or services. This differs from a funder, which provides financing to set up or grow programmes. For example, MNOs who subsidize SMS costs can be considered as payers of the mHealth product.</translate></p>\n</blockquote>\n\n<p><translate>The development of a strong financial model is the second step in ensuring the financial health of an mHealth product. This process begins with value chain analysis for relevant stakeholders. A sustainable financial model requires all stakeholders to derive some type of benefit or utility from their investments in order to incentivize the contribution of resources. A value chain analysis is a useful exercise for exploring and documenting the interests of potential payers. The perceived utility of the product, or value proposition, may be financial (e.g. increased revenue) or non-financial (e.g. improved brand recognition, more efficient delivery of services). An understanding of these key interests will help the project teams design a sustainable financial model within which all stakeholders believe that the benefits they get from contributing to scaling up outweigh the benefits they could get by investing resources elsewhere.</translate></p>\n\n<p><translate>Next, project teams must develop a comprehensive business plan to guide project operations. In addition to articulating the value proposition, key components of an effective mHealth business plan include a goals statement, a resource mobilization plan, a marketing plan and a product improvement strategy. Just like the budget, the business plan should be a dynamic document that is revisited regularly and modified as the funding situation, policy context and other parameters change over time. A clear business plan will not only help to attract long-term financing partners from the public and private sectors, but will also serve as an internal management and planning tool to keep the project on track to meet its targets for scaling up.</translate></p>\n\n<p><translate>Finally, to ensure the sustainability of funding, project teams will be required to seek out and secure different types of funders and payers (e.g. end-users, grants, government support, private sector support or publicâprivate partnerships) to reduce over-reliance on a single payer. In addition to identifying key payers, projects should identify and engage alternative payers to cover themselves in the event that primary payer partnerships come to an end. In this way, project teams may build contingency plans to increase the likelihood of financial sustainability.</translate></p>\n'},"./src/Common/Thematic/static/3.html":function(t,e){t.exports='<p class="lead"><translate>Financial health: The projection of scale-up costs, and the development of a financial plan for securing and managing funds over the long term</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-3\']}}" alt="graph">\n  <p><translate>Sustainable financing is fundamental to the capacity of an mHealth project to increase its scale, yet it is often the most difficult part of the process. The considerations and skills involved in developing sustainable financing mechanisms are complex, and require project team members with robust financial skill sets to plan for and execute viable financial models. When thinking through financial health, project teams should first begin with a thorough assessment of the diverse types of costs associated with scaling up, especially those that are not readily observable. In addition, project teams must create a business model that adds value to all stakeholders, and attracts reliable financing streams to sustain project activities.</translate></p>\n</div>\n'},"./src/Common/Thematic/static/4-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-8\']}}" alt="Domain 8 icon">\n    <h3><translate>Domain 8: Data</translate></h3>\n</div>\n\n<p><translate>The most basic concern regarding technology is to ensure the mHealth system supports data needs in terms of access, transmission, storage and security, throughout all levels of implementation. <b><em>Data accessibility and quality</em></b> may be enhanced by different features of the mHealth application. These include a robust <b>dashboard</b> and automated data quality assurance measures that assess the data for inconsistencies, errors or missing elements (e.g. validation rules built into the application). Having mechanisms within the system to minimize data errors is of utmost importance.</translate></p>\n\n<p><translate>In addition to improving data quality, project teams can also enhance the capacity of the data centre to support <b><em>data transmission and storage</em></b>. They will need to consider data flow (determined by the latency of the data centre), connectivity and throughput (determined by the bandwidth for data transmission) and storage capacity (determined by features of the data storage system). If the system is able to support all of these features at increasing levels of scale, then it will pass the decisive <b>stress test</b>.</translate></p>\n\n<blockquote class="full-block">\n    <div>\n      <h6><translate>DATA DASHBOARD</translate></h6>\n      <p><translate>A user interface that organizes and presents information and data in a way that is easy to read. User-friendly dashboards facilitate real-time system tracking and decision-making.</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>DATA DICTIONARY</translate></h6>\n      <p><translate>A description about a data set that details features such as meaning, relationships to other data, origin, usage and the format of specific data elements.</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>DATA PRIVACY</translate></h6>\n      <p><translate>The capacity to guarantee that patientsâ personal data will be protected against intentional and unintentional exposure.</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>DATA QUALITY ASSURANCE</translate></h6>\n      <p><translate>Mechanisms for evaluating data within the mHealth system for inconsistencies, errors or missing elements.</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>LATENCY</translate></h6>\n      <p><translate>The amount of time or delay for data to travel from the source (mobile device) to the data centre. Latency, along with bandwidth, determines the speed of a network connection.</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>STRESS TEST</translate></h6>\n      <p><translate>An assessment of how well the entire mHealth system functions when tested by extreme conditions (e.g. maximum data requests).</translate></p>\n    </div>\n\n    <div>\n      <h6><translate>ARCHITECTURE</translate></h6>\n      <p><translate>A description of how the different pieces of a technology and/or information system work together.</translate></p>\n    </div>\n</blockquote>\n\n<p><translate>Lastly, robust <b><em>data security</em></b> is a key element of an effective mHealth system, and may be facilitated through both hardware- and software-based mechanisms. <b>Data privacy</b> (a related concept) is also required to enforce measures to protect client data against being exposed accidentally or accessed by unauthorized individuals. Since patient privacy is an important legal issue, the product must adhere to any related national policies. This may have implications for data collection and processing within the mHealth product.</translate></p>\n'},"./src/Common/Thematic/static/4-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-9\']}}" alt="Domain 9 icon">\n    <h3><translate>Domain 9: Interoperability</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>INTEROPERABILITY</translate></h6>\n    <p><translate>The ability of different information technology systems and software applications to communicate, exchange data and use the information that has been exchanged. Interoperability is enabled by the use of common data standards.</translate></p>\n    <h6><translate>DATA STANDARDS</translate></h6>\n    <p><translate>Methods, protocols, terminologies and specifications for the collection, exchange, storage and retrieval of information associated with health-care applications.</translate></p>\n</blockquote>\n\n<p><translate>Interoperability is being increasingly recognized as a crucial element of large-scale deployments, particularly those that aim for national health system adoption. The capacity of an mHealth product to transmit and receive information from external systems and/or applications will greatly increase the value of the mHealth service and its potential for scalability as an <b><em>integrated system</em></b>. For example, interoperability with the national health management information system (HMIS) allows data collected by an mHealth product to be accessed and used by the MOH, which adds value to the product from the ministryâs perspective. This type of interoperability is a critical approach for integrating with heath system structures.</translate></p>\n\n<p><translate>Interoperability is gained by an application adhering to data (semantic) and technology standards, which prescribe the representations, definitions and formats for common data, to allow for different components of a system to share information and function together. There are three stages in the pursuit of interoperability: (1) recognizing which <b><em>data standards</em></b> must be adhered to; (2) using those standards in the mHealth product; and (3) demonstrating that the two systems can interoperate. Projects will encounter a number of different data and technology standards as they scale up; some common examples are described in Table 4.</translate></p>\n\n<p class="title-table"><translate>Table 4: Data standards</translate></p>\n\n<table border="0" cellpadding="0" cellspacing="0">\n\t<thead>\n\t\t<tr>\n\t\t  <th><translate>TYPE OF STANDARD</translate></th>\n\t\t  <th><translate>DESCRIPTION</translate></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t  <tr>\n\t    <td><translate>HL7 (Health Level 7)</translate></td>\n\t    <td><translate>Interoperability standards that facilitate the exchange of health data, particularly clinical data</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>CD-10 (International Classification of Diseases and Related Health Problems)</translate></td>\n      <td><translate>A medical classification list published by WHO and used worldwide as a diagnostic tool and for epidemiologic and health management purposes</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>SNOMED CT (Systematized Nomeclature of Medicine â Clinical Terms)</translate></td>\n      <td><translate>A comprehensive collection of clinical terms that provides the basic terminology for electronic health records</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>INN (International Nonproprietary Name)</translate></td>\n      <td><translate>A set of generic names designated by WHO to identify pharmaceutical substances and ingredients</translate></td>\n\t  </tr>\n    <tr>\n      <td><translate>ISO (International Organization for Standardization)</translate></td>\n      <td><translate>An independent entity that publishes worldwide industry standards, including classifications of technology and medical devices</translate></td>\n\t  </tr>\n\t</tbody>\n</table>\n'},"./src/Common/Thematic/static/4-2.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-10\']}}" alt="Domain 10 icon">\n    <h3><translate>Domain 10: Adaptability</translate></h3>\n</div>\n\n<p><translate>Another key feature of scalable technology is the extent to which various components are able to accommodate changes and improvements in response to needs that emerge during the scale-up process. The <b><em>adaptability of technology</em></b> involves changes in the usage of the product across different types of users and/or different health domains. This capacity to adapt to new health system needs requires processes to be defined and documentation to be in place for local developers.</translate></p>\n\n<p><translate>The <b><em>adaptability of content</em></b> responds to the need to align an mHealth product with new sociocultural contexts, or to translate the content into new languages. Content adaptability is also important for products whose target population includes illiterate users, since information will need to be available via multimedia or interactive voice response (IVR). <b><em>Transferability</em></b> is a related concept that describes the capacity of an mHealth product to function across different types of mobile devices and operating systems. Ensuring hardware and system compatibility with technologies that are adaptable to a variety of needs will greatly facilitate the scaling up and sustainability of an mHealth product in new settings.</translate></p>\n'},"./src/Common/Thematic/static/4.html":function(t,e){t.exports='<p class="lead"><translate>Technology &amp; architecture: Steps taken to optimize the mHealth product for scaling up based on its anticipated user base, purpose, integration with information systems and compatibility with other components of the information systems architecture</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-4\']}}" alt="graph">\n  <p><translate>During the process of scaling up, several components of an mHealth product and its associated technologies will emerge. The challenges associated with technology and architecture tend to be unique to eHealth and mHealth deployments. These concerns involve the capacity of the technology to meet the demands of increasing volumes of data, to interoperate with external systems, and to adapt to changing conditions and needs.</translate></p>\n</div>\n'},"./src/Common/Thematic/static/5-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-11\']}}" alt="Domain 11 icon">\n    <h3><translate>Domain 11: Personnel</translate></h3>\n</div>\n\n<blockquote>\n    <h6><translate>End-users</translate></h6>\n    <p><translate>Health workers or other clients who interact directly with the technology.</translate></p>\n    <h6><translate>Secondary users</translate></h6>\n    <p><translate>Individuals who derive benefit\nfrom end-usersâ input into mHealth products, but do not themselves directly enter data (e.g. supervisors).</translate></p>\n</blockquote>\n\n<p><translate>Project teams must be careful not to underestimate the human resources required to successfully scale up and sustain mHealth products. Accurate projections are needed to determine the appropriate increases in staff numbers and capacities. Human resource investments including recruitment and capacity-building should involve general project staff, staff working directly with the mHealth product and staff in partner organizations. To meet changing needs, <b><em>workforce development</em></b> calls for strategic planning to increase personnel capacity, redefine roles and responsibilities, and implement new staff policies to align with anticipated changes in workflow. In addition to recruiting new staff, project teams should consider staff retention and knowledge management. Opportunities for promotion, benefits and incentive schemes will help build a stable team with the required training, experience and collective goals.</translate></p>\n\n<p><translate>Another central consideration related to personnel involves defining the main <b><em>leadership</em></b> roles that will support operations as they scale up. In addition to having appropriate expertise, leaders need to possess authority and credibility with core partners.25 Key leadership positions reflect the evolving needs of a project and generally include:</translate></p>\n\n<ul>\n    <li><translate>a director or advisor to provide strategic oversight</translate></li>\n    <li><translate>a manager to support organizational and personnel needs</translate></li>\n    <li><translate>a systems administrator to manage the technology</translate></li>\n    <li><translate>a financial manager to assess financial requirements, and track expenditures, profits and losses.</translate></li>\n</ul>\n'},"./src/Common/Thematic/static/5-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-12\']}}" alt="Domain 12 icon">\n    <h3><translate>Domain 11: Training and support</translate></h3>\n</div>\n\n<p><translate>Project leaders and staff also need appropriate training, supervision and support. <b><em>User training</em></b>, which involves end-users and secondary users, must be tailored specifically to the needs and levels of experience of the participants. It is widely recognized that effective engagement with health workers and other end-users is the key to successful adoption of mHealth products. Training programmes should also aim to foster a sense of perceived value of the product among end-users. The scaling-up process will be hampered if health workers fail to see the benefits of the application on their workload, or if they feel overwhelmed by the complexity of the technology.</translate></p>\n\n<p><translate>End-usersâ adoption of the product will also be influenced by the availability and quality of routine <b><em>supervision</em></b> for monitoring their activities and addressing any concerns or confusion that may emerge. Effective supervision needs an organizational structure and human resource management to oversee work in the field. This should also be accompanied by the allocation of resources to routine meetings (e.g. to cover the cost of transport and food). In addition, end-users should be trained on the steps to be taken when a question or point of confusion emerges.</translate></p>\n\n<p><translate>Furthermore, <b><em>user and technical support</em></b> systems must be in place for identifying and troubleshooting hardware and software problems during implementation. Project leaders should assemble a technical support team with a strong understanding of user needs and operating constraints based in the local setting. There are many advantages to having a local first-line technical support team: it will minimize costs (compared with paying for external support), create local ownership of the project, and promote sustainability. However, it is also critical to have higher-level support available for technical issues that require greater expertise.</translate></p>\n'},"./src/Common/Thematic/static/5-2.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-12\']}}" alt="Domain 12 icon">\n    <h3><translate>Domain 12: Outreach and sensitization</translate></h3>\n</div>\n\n<p><translate>In addition to user training, operations will benefit from outreach and sensitization activities with the stakeholder and community groups involved in the scaling-up process. <b><em>Stakeholder outreach</em></b> should engage the staff of implementing organizations (e.g. CBOs and NGOs), as well as government representatives, as appropriate. Furthermore, it is essential that project teams pursue <b><em>community mobilization</em></b> activities to sensitize the communities that will benefit from the services provided by the product. Such activities involve raising awareness of the benefits of the product, familiarizing community members with its purpose and related procedures, and engaging with the community council or other leadership body to obtain any necessary approval for implementing the product.</translate></p>\n'},"./src/Common/Thematic/static/5-3.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-13\']}}" alt="Domain 13 icon">\n    <h3><translate>Domain 13: Contingency planning</translate></h3>\n</div>\n\n<p><translate>Finally, successful scaling up will call for appropriate contingency planning, or procedures to maintain the continuity of use of the product in the event of infrastructure or programme obstacles. First, procedures must be established to address <b><em>technical constraints</em></b> related to connectivity and electricity (see Axis 1: Groundwork), for users to operate the application during network shortages, power outages or other unforeseen issues. In addition, promoting the <b><em>retention of devices</em></b> requires strategic planning and the adoption of procedures to prevent loss, theft, breakage and the misuse of mobile devices. In many settings, it will be necessary for these procedures to be vetted by the community or other local stakeholders to ensure they are appropriate.</translate></p>\n'},"./src/Common/Thematic/static/5.html":function(t,e){t.exports='<p class="lead"><translate>Operations: Organizational and programmatic measures for supporting implementation, use and maintenance of the product throughout the scaling-up process</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-5\']}}" alt="graph">\n  <p><translate>Effective and reliable operations are essential for successful scaling up, and require human inputs and organizational procedures to respond to evolving conditions. As an mHealth product matures and increases its scale, it is critical that the size, structure and competencies of the project team continue to support operations at several levels. This requires a diversity of skill sets to address challenges such as systematic troubleshooting, management of devices, adaptations to the constraints of the technical environment, and other programmatic measures to orient communities and local partners.</translate></p>\n</div>\n'},"./src/Common/Thematic/static/6-0.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-15\']}}" alt="Domain 15 icon">\n    <h3><translate>Domain 15: Process monitoring</translate></h3>\n</div>\n\n<p><translate>The first component of mHealth M&amp;E is the routine monitoring of implementation to track programme processes and address any challenges that emerge during the scaling-up process. This involves monitoring programme fidelity, which requires that adequate resources â both financial and human â are in place from the start. A portion of the project budget should be allocated to these continuous monitoring activities. While the exact amount will vary, donor organizations such as the United Kingdomâs Department for International Development (DFID) suggest allocating 10% of the project budget to M&amp;E. Next, projects should develop the overall plan for checking process indicators, such as a Performance Monitoring Plan (PMP), to guide ongoing data collection. This plan should define appropriate performance indicators, data sources, instruments, and the methods and schedule for data collection.</translate></p>\n\n<p><translate>After determining the most appropriate way to collect monitoring data, the project team should determine the specific procedures and tools that will be used for analysing the data in order to identify implementation-related challenges. This process monitoring data will contribute to the optimization of the scaling-up process because it will provide information that can be used as a basis for making adjustments and course corrections.</translate></p>\n\n<p><translate>A process of continuous quality improvement can be fostered by the inclusion of user-friendly dashboards and scorecards to benchmark progress and indicate where to implement relevant course-correction procedures. In addition, explicit structures must be defined for the collection of user feedback and for addressing implementation-related challenges.</translate></p>\n'},"./src/Common/Thematic/static/6-1.html":function(t,e){t.exports='<div class="title-domain">\n    <img src="{{vm.images[\'icon-domain-16\']}}" alt="Domain 16 icon">\n    <h3><translate>Domain 16: Evaluation research</translate></h3>\n</div>\n\n<p><translate>The second element of M&amp;E for scaling up mHealth products is <b><em>evaluation research</em></b>, which involves using rigorous and systematic methods to assess the productâs effects. Evaluation research differs from routine monitoring in that it tracks the outcomes of expanded implementation efforts rather than programme processes. The development of appropriate evaluation systems for meeting these goals involves several different activities. First, evaluation research calls for the allocation of significant funding, which will vary based on the study design selected and whether an external evaluator is used. Second, there is the need to ensure that the findings will be relevant for core partners and other stakeholders. Provided that stakeholders, especially government and other investment partners, require rigorous evaluations to facilitate decision-making for supporting mHealth products, project teams must closely assess stakeholdersâ evidence priorities and reporting requirements early on.</translate></p>\n\n<p><translate>Third, an evaluation framework (such as a theory of change or a logical framework) must be devopeloped that details the links among the mHealth product inputs, activities, outputs and outcomes or impacts. This evaluation requires quality data streams from both system-generated and human-collected data. The data collection methods need to be aligned with stakeholder priorities and with the evaluation framework. Finally, evaluation preparatory activities involve applying for and securing ethical approval for research activities.</translate></p>\n\n<p><translate>In considering evidence in relation to relevant stakeholders, projects will want to articulate the types of <b><em>evidence claims</em></b> that are needed at various levels of the health system. The mHealth product may affect three areas: (1) the <b>health system</b>; (2) <b>provider/health service delivery</b> performance; and (3) <b>individual health status</b>. Furthermore, cost-effectiveness analyses demonstrate value for money and cost-savings of the product over standard care.</translate></p>\n\n<p><translate>Next, for each of the specified outcomes, project teams will need to define key components of the evaluation process, including indicators (e.g. number of monthly antenatal care [ANC] visits), data sources (e.g. DHIS2 reporting records), data collection methods (e.g. household interviews) and comparator groups (e.g. number of monthly ANC visits prior to implementation of the mHealth product).</translate></p>\n\n<p><translate>Finally, project teams should consider opportunities for the <b><em>dissemination</em></b> of their evaluation findings, both in terms of local dissemination (e.g. press briefings) and wider dissemination (e.g. poster sessions at conferences). Once the evaluation results become available, project teams must ensure these are presented in formats that are appropriate and accessible to stakeholders.</translate></p>\n'},"./src/Common/Thematic/static/6.html":function(t,e){t.exports='<p class="lead"><translate>Monitoring &amp; evaluation: Decisions and activities that enable effective process monitoring and in-depth outcome evaluation, based on project and stakeholder needs</translate></p>\n\n<div class="graph">\n  <img src="{{vm.images[\'graph-6\']}}" alt="graph">\n  <p><translate>Effective and reliable operations are essential for successful scaling up, and require human inputs and organizational procedures to respond to evolving conditions. As an mHealth product matures and increases its scale, it is critical that the size, structure and competencies of the project team continue to support operations at several levels. This requires a diversity of skill sets to address challenges such as systematic troubleshooting, management of devices, adaptations to the constraints of the technical environment, and other programmatic measures to orient communities and local partners.</translate></p>\n</div>\n'},"./src/Common/Thematic/thematicComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/Thematic/Thematic.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/Thematic/ThematicController.js")).default.thematicFactory(),template:r.default,controllerAs:"vm",name:"thematic",bindings:{axis:"<",domain:"<",buttonclass:"@",buttontext:"@",buttontitle:"@",buttonicon:"@"}};e.default=i},"./src/Common/TopBar/TopBarController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),o=u(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),i=u(n("./node_modules/babel-runtime/helpers/createClass.js")),a=u(n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),s=u(n("./node_modules/babel-runtime/helpers/inherits.js")),l=u(n("./src/Common/TopBarBheaviour.js")),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/user.js"));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,n,i){(0,o.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return s.$onInit=s.onInit.bind(s),s.$onDestroy=s.onDestroy.bind(s),s.axis=0,s.domain=0,s.setAxisDomain=s.setAxisDomain.bind(s),s}return(0,s.default)(e,t),(0,i.default)(e,[{key:"onInit",value:function(){this.commonInit(),this.watchers(),this.unsubscribe=this.$ngRedux.connect(this.mapState,c)(this)}},{key:"onDestroy",value:function(){this.commonOnDestroy(),this.unsubscribe()}},{key:"watchers",value:function(){this.scope.$watch(function(t){return t.vm.state.params},this.setAxisDomain)}},{key:"setAxisDomain",value:function(t){this.axis=t.axisId?parseInt(t.axisId,10):0,this.domain=t.domainId?parseInt(t.domainId,10):0}}],[{key:"topBarControllerFactory",value:function(){function t(t,n,r){return new e(t,n,r)}return n("./src/Common/TopBar/topBar.scss"),t.$inject=["$state","$scope","$ngRedux"],t}}]),e}(l.default);e.default=d},"./src/Common/TopBar/topBar.html":function(t,e){t.exports='<md-toolbar class="main-toolbar toolbar-global">\n  <div class="md-toolbar-tools">\n\n    <div>\n      <md-button\n        ui-sref="landing"\n        aria-label="Digital Health Atlas"\n        class="app-title"\n        md-no-ink\n        flex="noshrink">\n        <span class="logo">\n          <translate>Digital Health Atlas</translate>\n        </span>\n      </md-button>\n    </div>\n\n    <div>\n      <md-button aria-label="Dashboard"\n                 title="Dashboard"\n                 class="view-selector"\n                 ui-sref="dashboard"\n                 ng-show="vm.profileValid"\n                 md-no-ink>\n        <md-icon class="material-icons">apps</md-icon>\n        <translate>Dashboard</translate>\n      </md-button>\n    </div>\n\n    <div>\n      <md-button aria-label="My Projects"\n                 title="My Projects"\n                 class="view-selector"\n                 ui-sref="my-projects"\n                 ng-show="vm.profileValid"\n                 md-no-ink>\n        <md-icon class="material-icons ">toc</md-icon>\n        <translate>My Projects</translate>\n      </md-button>\n    </div>\n\n    <div>\n      <md-button aria-label="Planning and Guidance"\n                 title="Planning and Guidance"\n                 class="view-selector"\n                 ui-sref="cms"\n                 ng-show="vm.profileValid"\n                 md-no-ink>\n        <md-icon class="material-icons ">import_contacts</md-icon>\n        <translate>Planning &amp; Guidance</translate>\n      </md-button>\n    </div>\n\n    <thematic\n      axis="vm.axis"\n      domain="vm.domain"\n      ng-show="vm.profileValid"\n      buttontitle="{{\'MAPS Toolkit\' | translate}}"\n      buttonclass="md-primary"\n      buttonicon="help_outline"\n      buttontext="{{\'Toolkit\' | translate}}">\n    </thematic>\n\n    <div flex></div>\n\n    <div class="language-badge" ng-show="vm.userLanguage">\n      <div class="country-flag" style="{{\'background-image: url(\' + vm.userLanguage.flag +\')\'}}">\n      </div>\n    </div>\n\n    <div>\n      <searchbar compact-mode="true" ng-if="vm.profileValid"></searchbar>\n    </div>\n\n    <div>\n      <md-button class="landing-link"\n                 ui-sref-active="active"\n                 ui-sref="login"\n                 aria-label="Login"\n                 ng-show="vm.currentState !== \'login\' && !vm.token"\n                 md-no-ink>\n        <translate>Login</translate>\n      </md-button>\n    </div>\n\n    <div>\n      <md-button class="landing-link"\n                 ui-sref-active="active"\n                 ui-sref="signup"\n                 aria-label="Singup"\n                 ng-show="vm.currentState !== \'signup\' && !vm.token"\n                 md-no-ink >\n        <translate>Sign Up</translate>\n      </md-button>\n    </div>\n\n    <md-menu md-position-mode="target-right target" ng-if="vm.token">\n      <md-button class="md-icon-button" aria-label="User" ng-click="vm.openMenu($mdOpenMenu, $event)" md-no-ink>\n        <md-icon md-menu-origin class="material-icons ">person</md-icon>\n      </md-button>\n\n      <md-menu-content class="user-menu" width="4">\n        <md-menu-item>\n          <div class="user-name">\n            <md-icon class="material-icons" md-menu-align-target>account_circle</md-icon>\n            <span ng-hide ="vm.profile.name">{{vm.profile.email}}</span>\n            <span ng-show ="vm.profile.name">{{vm.profile.name}}</span>\n          </div>\n        </md-menu-item>\n        <md-menu-item>\n          <div class="user-role">\n            <md-icon class="material-icons" md-menu-align-target>verified_user</md-icon>\n            <span>\n              <translate>Role: {{vm.writeUserRole()}}</translate>\n            </span>\n          </div>\n        </md-menu-item>\n        <md-menu-divider></md-menu-divider>\n        <md-menu-item>\n          <md-button ui-sref="editProfile">\n            <md-icon class="material-icons"><i class="material-icons">settings</i></md-icon>\n            <translate>Edit my Profile</translate>\n          </md-button>\n        </md-menu-item>\n        <md-menu-item>\n          <md-button ng-click="vm.logout()">\n            <md-icon class="material-icons">exit_to_app</md-icon>\n            <translate>Logout</translate>\n          </md-button>\n        </md-menu-item>\n        <md-menu-divider></md-menu-divider>\n        <div ng-show="vm.profile.country">\n        <span class="label">\n          <translate>Country</translate>\n        </span>\n          <md-menu-item>\n            <div class="user-lang" layout="row" layout-align="start center">\n            <span class="country-flag">\n                <img ng-src="{{vm.profile.country.flag}}" alt="{{vm.profile.country.prettyName}}">\n            </span>\n              <span class="country-label">\n              {{vm.profile.country.prettyName}}\n            </span>\n            </div>\n          </md-menu-item>\n        </div>\n        <span class="label">\n          <translate>Site Language</translate>\n        </span>\n        <md-menu-item>\n          <div class="user-lang" layout="row" layout-align="start center">\n            <span class="country-flag">\n                <img ng-src="{{vm.userLanguage.flag}}" alt="{{vm.userLanguage.name}}">\n            </span>\n            <span class="country-label">\n              {{vm.userLanguage.name}}\n            </span>\n          </div>\n        </md-menu-item>\n      </md-menu-content>\n    </md-menu>\n\n    <div>\n      <md-button class="add-new-project" ui-sref="newProject"\n                 aria-label="Add new project"\n                 ng-show="vm.profileValid"\n                 md-no-ink>\n        <md-icon class="material-icons">add</md-icon>\n        <translate>New Project</translate>\n      </md-button>\n    </div>\n\n  </div>\n</md-toolbar>\n'},"./src/Common/TopBar/topBar.scss":function(t,e,n){},"./src/Common/TopBar/topBarComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/TopBar/topBar.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/TopBar/TopBarController.js")).default.topBarControllerFactory(),template:r.default,controllerAs:"vm",name:"topBar",bindings:{viewMode:"<",showFullNavigation:"<",showSubBar:"<"}};e.default=i},"./src/Common/TopBarBheaviour.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n("./node_modules/babel-runtime/regenerator/index.js")),o=l(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=l(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=l(n("./node_modules/babel-runtime/helpers/createClass.js")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/user.js"));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e,n,r){(0,i.default)(this,t),this.EE=window.EE,this.state=e,this.scope=n,this.$ngRedux=r,this.commonInit=this.commonInit.bind(this),this.commonOnDestroy=this.commonOnDestroy.bind(this)}return(0,a.default)(t,[{key:"commonInit",value:function(){this.writeUserRole=this.writeUserRole.bind(this),this.currentState=this.state.current.name}},{key:"commonOnDestroy",value:function(){}},{key:"mapState",value:function(t){var e=s.getProfile(t),n=s.getUserLanguage(t);return{profile:e,profileValid:!!(e&&e.country&&e.organisation&&e.name),token:t.user.token,userLanguage:n}}},{key:"writeUserRole",value:function(){var t=null;if(this.profile)switch(this.profile.account_type){case"I":t="Implementer";break;case"G":t="Government";break;case"D":t="Financial Investor";break;case"Y":t="Inventory"}return t}},{key:"openMenu",value:function(t,e){var n=window.document.querySelector(".md-open-menu-container.md-leave");n&&(n.style.top=null,n.style.right=null,n.style.left=null,n.style.bottom=null),t(e)}},{key:"logout",value:function(){var t=(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.go("landing");case 2:this.doLogout();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}();e.default=c},"./src/Common/TrixComponent/TrixComponent.html":function(t,e){t.exports='<div>\n  <div class="trix-wrapper">\n    <trix-editor ng-blur="vm.blur()"></trix-editor>\n  </div>\n\n  <div class="counter-wrapper" ng-class="{\'has-error\' : vm.showError}">\n    <span class="error-message" ng-show="vm.required && vm.charCounter === 0"><translate>This is required</translate></span>\n    <span class="error-message" ng-show="vm.charCounter > vm.charLimit"><translate>Maximum amount of character reached</translate></span>\n    <span class="char-counter">{{vm.charCounter}}</span>\n    <span class="char-separator"> | </span>\n    <span class="char-limit">{{vm.charLimit}}</span>\n  </div>\n</div>\n'},"./src/Common/TrixComponent/TrixComponent.scss":function(t,e,n){},"./src/Common/TrixComponent/TrixComponentController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),o=i(n("./node_modules/babel-runtime/helpers/createClass.js"));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n){(0,r.default)(this,t),this.scope=e,this.element=n,this.$onInit=this.onInit.bind(this),this.$postLink=this.postLink.bind(this),this.updateValue=this.updateValue.bind(this)}return(0,o.default)(t,[{key:"onInit",value:function(){n("./src/Common/TrixComponent/TrixComponent.scss"),n("./node_modules/trix/dist/trix.js"),this.charCounter=0,this.valid=!1,this.showError=!1,this.watchers(),this.required=this.element[0].hasAttribute("required")}},{key:"watchers",value:function(){var t=this;this.scope.$watch(function(){return t.value},function(e){!1===e&&t.editorInstance.editor.loadHTML("")})}},{key:"postLink",value:function(){var t=this;this.editorInstance=this.element[0].querySelector("trix-editor"),this.editorInstance.setAttribute("placeholder",this.placeholder),this.editorInstance.addEventListener("trix-change",this.updateValue),this.editorInstance.addEventListener("trix-initialize",function(){t.editorInstance.editor.loadHTML(t.value)})}},{key:"blur",value:function(){this.showError=!this.valid}},{key:"updateValue",value:function(){var t=this,e=this.editorInstance.editor.getDocument().toString();this.scope.$evalAsync(function(){t.charCounter=e.length-1,t.valid=!t.charLimit||t.charCounter<t.charLimit,t.valid=t.valid&&t.charCounter>0,t.value=t.editorInstance.editor.element.value})}}],[{key:"factory",value:function(){function e(e,n){return new t(e,n)}return e.$inject=["$scope","$element"],e}}]),t}();e.default=a},"./src/Common/TrixComponent/trixComponent.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/TrixComponent/TrixComponentController.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i={template:o(n("./src/Common/TrixComponent/TrixComponent.html")).default,controller:r.default.factory(),controllerAs:"vm",name:"trixComponent",bindings:{value:"=?",placeholder:"@?",charLimit:"<?",valid:"=",showError:"<?"}};e.default=i},"./src/Common/UUIDLoad/UUIDLoad.html":function(t,e){t.exports='<div class="email-confirm-wrapper" layout="column" layout-align="start center" ng-style="vm.style">\n\n    <div >\n        <md-content layout="column" layout-align="center center">\n            <div ng-hide="vm.errorMessage">\n                <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n                <div>\n                    <translate>Loading project</translate>\n                </div>\n            </div>\n\n            <div ng-show="vm.errorMessage">\n                <translate>Project not found or server not available</translate>\n            </div>\n\n        </md-content>\n    </div>\n\n    <disclaimer></disclaimer>\n</div>\n'},"./src/Common/UUIDLoad/UUIDLoad.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./src/Common/UUIDLoad/UUIDLoad.html"));function o(t){return t&&t.__esModule?t:{default:t}}var i={controller:o(n("./src/Common/UUIDLoad/UUIDLoadController.js")).default.uuidLoadFactory(),template:r.default,controllerAs:"vm",name:"uuidLoad"};e.default=i},"./src/Common/UUIDLoad/UUIDLoad.scss":function(t,e,n){},"./src/Common/UUIDLoad/UUIDLoadController.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n("./node_modules/babel-runtime/regenerator/index.js")),o=d(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=d(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),a=d(n("./node_modules/babel-runtime/helpers/createClass.js")),s=u(n("./src/store/modules/system.js")),l=u(n("./src/store/modules/user.js")),c=n("./src/Utilities.js");function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,n){(0,i.default)(this,t),this.EE=window.EE,this.state=e,this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.unsubscribe=n.connect(this.mapState,s)(this)}return(0,a.default)(t,[{key:"onInit",value:function(){this.style={height:(0,c.calculateHeight)()},this.errorMessage=!1,this.handleProjectLoad()}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"mapState",value:function(t){return{search:s.getSearchResult(t),profile:l.getProfile(t)}}},{key:"handleProjectLoad",value:function(){var t=(0,o.default)(r.default.mark(function t(){var e,n,o,i,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.params.projectUUID,n={all:!0},t.next=4,this.searchProjects(e,n);case 4:if(o=this.search.slice().pop(),i=!(!o||!o.id)&&o.id,a="public-dashboard",!1!==i){t.next=10;break}return this.errorMessage=!0,t.abrupt("return");case 10:this.profile&&this.profile.member&&(this.profile.member.indexOf(i)>-1||this.profile.viewer.indexOf(i)>-1)&&(a="dashboard"),this.state.go(a,{appName:i});case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}],[{key:"uuidLoadFactory",value:function(){function e(e,n){return new t(e,n)}return n("./src/Common/UUIDLoad/UUIDLoad.scss"),e.$inject=["$state","$ngRedux"],e}}]),t}();e.default=h},"./src/Common/common.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Components=e.EE=void 0;var r=A(n("./node_modules/angular/index.js")),o=A(n("./node_modules/ng-file-upload/index.js")),i=A(n("./src/Common/ProjectComponent/projectComponent.js")),a=A(n("./src/Common/Searchbar/searchbarComponent.js")),s=A(n("./src/Common/Login/loginComponent.js")),l=A(n("./src/Common/Reset/resetComponent.js")),c=A(n("./src/Common/Signup/signupComponent.js")),u=A(n("./src/Common/Axis/axisComponent.js")),d=A(n("./src/Common/Donors/donorsComponent.js")),h=A(n("./src/Common/EditProfile/editProfileComponent.js")),p=A(n("./src/Common/CountryMap/countrymap.js")),m=A(n("./src/Common/EmailConfirmation/emailConfirmation.js")),f=A(n("./src/Common/Disclaimer/disclaimerComponent.js")),g=A(n("./src/Common/UUIDLoad/UUIDLoad.js")),v=A(n("./src/Common/TermsOfUse/TermsOfUse.js")),y=A(n("./src/Common/TopBar/topBarComponent.js")),b=A(n("./src/Common/SubBar/subBarComponent.js")),w=A(n("./src/Common/CountryTopBar/countryTopBarComponent.js")),x=A(n("./src/Common/CountryPartners/countryPartnersComponent.js")),_=A(n("./src/Common/OrganisationAutocomplete/organisationComponent.js")),C=A(n("./src/Common/TrixComponent/trixComponent.js")),k=A(n("./src/Common/Thematic/thematicComponent.js")),T=A(n("./src/Common/EE.js"));function A(t){return t&&t.__esModule?t:{default:t}}window.EE||T.default.initialize();r.default.module("Components",[o.default]).component(i.default.name,i.default).component(a.default.name,a.default).component(s.default.name,s.default).component(l.default.name,l.default).component(c.default.name,c.default).component(u.default.name,u.default).component(d.default.name,d.default).component(h.default.name,h.default).component(p.default.name,p.default).component(m.default.name,m.default).component(f.default.name,f.default).component(g.default.name,g.default).component(y.default.name,y.default).component(b.default.name,b.default).component(w.default.name,w.default).component(x.default.name,x.default).component(_.default.name,_.default).component(C.default.name,C.default).component(k.default.name,k.default).component(v.default.name,v.default),e.EE=T.default,e.Components="Components"},"./src/MapsToolkit/Resource/template sync recursive \\.html$":function(t,e,n){var r={"./1-1-1.html":"./src/MapsToolkit/Resource/template/1-1-1.html","./1-1-2.html":"./src/MapsToolkit/Resource/template/1-1-2.html","./1-1-3.html":"./src/MapsToolkit/Resource/template/1-1-3.html","./1-2-1.html":"./src/MapsToolkit/Resource/template/1-2-1.html","./10-1-1.html":"./src/MapsToolkit/Resource/template/10-1-1.html","./10-1-2.html":"./src/MapsToolkit/Resource/template/10-1-2.html","./10-1-3.html":"./src/MapsToolkit/Resource/template/10-1-3.html","./10-1-4.html":"./src/MapsToolkit/Resource/template/10-1-4.html","./10-2-1.html":"./src/MapsToolkit/Resource/template/10-2-1.html","./10-2-2.html":"./src/MapsToolkit/Resource/template/10-2-2.html","./10-2-3.html":"./src/MapsToolkit/Resource/template/10-2-3.html","./10-3-1.html":"./src/MapsToolkit/Resource/template/10-3-1.html","./10-3-2.html":"./src/MapsToolkit/Resource/template/10-3-2.html","./11-1-1.html":"./src/MapsToolkit/Resource/template/11-1-1.html","./11-1-2.html":"./src/MapsToolkit/Resource/template/11-1-2.html","./11-1-3.html":"./src/MapsToolkit/Resource/template/11-1-3.html","./11-1-4.html":"./src/MapsToolkit/Resource/template/11-1-4.html","./11-1-5.html":"./src/MapsToolkit/Resource/template/11-1-5.html","./11-1-6.html":"./src/MapsToolkit/Resource/template/11-1-6.html","./11-1-7.html":"./src/MapsToolkit/Resource/template/11-1-7.html","./11-2-1.html":"./src/MapsToolkit/Resource/template/11-2-1.html","./11-2-2.html":"./src/MapsToolkit/Resource/template/11-2-2.html","./11-2-3.html":"./src/MapsToolkit/Resource/template/11-2-3.html","./11-2-4.html":"./src/MapsToolkit/Resource/template/11-2-4.html","./12-1a-1.html":"./src/MapsToolkit/Resource/template/12-1a-1.html","./12-1a-2.html":"./src/MapsToolkit/Resource/template/12-1a-2.html","./12-1a-3.html":"./src/MapsToolkit/Resource/template/12-1a-3.html","./12-1a-4.html":"./src/MapsToolkit/Resource/template/12-1a-4.html","./12-1a-5.html":"./src/MapsToolkit/Resource/template/12-1a-5.html","./12-1b-1.html":"./src/MapsToolkit/Resource/template/12-1b-1.html","./12-1b-2.html":"./src/MapsToolkit/Resource/template/12-1b-2.html","./12-1b-3.html":"./src/MapsToolkit/Resource/template/12-1b-3.html","./12-1b-4.html":"./src/MapsToolkit/Resource/template/12-1b-4.html","./12-2-1.html":"./src/MapsToolkit/Resource/template/12-2-1.html","./12-2-2.html":"./src/MapsToolkit/Resource/template/12-2-2.html","./12-2-3.html":"./src/MapsToolkit/Resource/template/12-2-3.html","./12-3-1.html":"./src/MapsToolkit/Resource/template/12-3-1.html","./12-3-2.html":"./src/MapsToolkit/Resource/template/12-3-2.html","./12-3-3.html":"./src/MapsToolkit/Resource/template/12-3-3.html","./13-1-1.html":"./src/MapsToolkit/Resource/template/13-1-1.html","./13-1-2.html":"./src/MapsToolkit/Resource/template/13-1-2.html","./13-1-3.html":"./src/MapsToolkit/Resource/template/13-1-3.html","./13-2-1.html":"./src/MapsToolkit/Resource/template/13-2-1.html","./13-2-2.html":"./src/MapsToolkit/Resource/template/13-2-2.html","./14-1-1.html":"./src/MapsToolkit/Resource/template/14-1-1.html","./14-1-2.html":"./src/MapsToolkit/Resource/template/14-1-2.html","./14-1-3.html":"./src/MapsToolkit/Resource/template/14-1-3.html","./14-2-1.html":"./src/MapsToolkit/Resource/template/14-2-1.html","./14-2-2.html":"./src/MapsToolkit/Resource/template/14-2-2.html","./14-2-3.html":"./src/MapsToolkit/Resource/template/14-2-3.html","./15-1a-1.html":"./src/MapsToolkit/Resource/template/15-1a-1.html","./15-1a-2.html":"./src/MapsToolkit/Resource/template/15-1a-2.html","./15-1b-1.html":"./src/MapsToolkit/Resource/template/15-1b-1.html","./15-1b-2.html":"./src/MapsToolkit/Resource/template/15-1b-2.html","./15-1b-3.html":"./src/MapsToolkit/Resource/template/15-1b-3.html","./15-2-1.html":"./src/MapsToolkit/Resource/template/15-2-1.html","./15-2-2.html":"./src/MapsToolkit/Resource/template/15-2-2.html","./15-2-3.html":"./src/MapsToolkit/Resource/template/15-2-3.html","./15-2-4.html":"./src/MapsToolkit/Resource/template/15-2-4.html","./16-1a-1.html":"./src/MapsToolkit/Resource/template/16-1a-1.html","./16-1a-2.html":"./src/MapsToolkit/Resource/template/16-1a-2.html","./16-1a-3.html":"./src/MapsToolkit/Resource/template/16-1a-3.html","./16-1b-1.html":"./src/MapsToolkit/Resource/template/16-1b-1.html","./16-1b-2.html":"./src/MapsToolkit/Resource/template/16-1b-2.html","./16-1b-3.html":"./src/MapsToolkit/Resource/template/16-1b-3.html","./16-1c-1.html":"./src/MapsToolkit/Resource/template/16-1c-1.html","./16-1c-2.html":"./src/MapsToolkit/Resource/template/16-1c-2.html","./16-2a-1.html":"./src/MapsToolkit/Resource/template/16-2a-1.html","./16-2a-2.html":"./src/MapsToolkit/Resource/template/16-2a-2.html","./16-2a-3.html":"./src/MapsToolkit/Resource/template/16-2a-3.html","./16-2a-4.html":"./src/MapsToolkit/Resource/template/16-2a-4.html","./16-2b-1.html":"./src/MapsToolkit/Resource/template/16-2b-1.html","./16-2b-2.html":"./src/MapsToolkit/Resource/template/16-2b-2.html","./16-2b-3.html":"./src/MapsToolkit/Resource/template/16-2b-3.html","./16-2b-4.html":"./src/MapsToolkit/Resource/template/16-2b-4.html","./16-2c-1.html":"./src/MapsToolkit/Resource/template/16-2c-1.html","./16-2c-2.html":"./src/MapsToolkit/Resource/template/16-2c-2.html","./16-2c-3.html":"./src/MapsToolkit/Resource/template/16-2c-3.html","./16-2c-4.html":"./src/MapsToolkit/Resource/template/16-2c-4.html","./16-2c-5.html":"./src/MapsToolkit/Resource/template/16-2c-5.html","./16-3-1.html":"./src/MapsToolkit/Resource/template/16-3-1.html","./16-3-2.html":"./src/MapsToolkit/Resource/template/16-3-2.html","./2-1-1.html":"./src/MapsToolkit/Resource/template/2-1-1.html","./2-1-2.html":"./src/MapsToolkit/Resource/template/2-1-2.html","./2-1-3.html":"./src/MapsToolkit/Resource/template/2-1-3.html","./2-2-1.html":"./src/MapsToolkit/Resource/template/2-2-1.html","./2-2-2.html":"./src/MapsToolkit/Resource/template/2-2-2.html","./2-2-3.html":"./src/MapsToolkit/Resource/template/2-2-3.html","./2-2-4.html":"./src/MapsToolkit/Resource/template/2-2-4.html","./2-3-1.html":"./src/MapsToolkit/Resource/template/2-3-1.html","./2-3-2.html":"./src/MapsToolkit/Resource/template/2-3-2.html","./2-3-3.html":"./src/MapsToolkit/Resource/template/2-3-3.html","./2-3-4.html":"./src/MapsToolkit/Resource/template/2-3-4.html","./3-1a-1.html":"./src/MapsToolkit/Resource/template/3-1a-1.html","./3-1a-2.html":"./src/MapsToolkit/Resource/template/3-1a-2.html","./3-1a-3.html":"./src/MapsToolkit/Resource/template/3-1a-3.html","./3-1a-4.html":"./src/MapsToolkit/Resource/template/3-1a-4.html","./3-1b-1.html":"./src/MapsToolkit/Resource/template/3-1b-1.html","./3-1b-2.html":"./src/MapsToolkit/Resource/template/3-1b-2.html","./3-2-1.html":"./src/MapsToolkit/Resource/template/3-2-1.html","./3-2-2.html":"./src/MapsToolkit/Resource/template/3-2-2.html","./3-2-3.html":"./src/MapsToolkit/Resource/template/3-2-3.html","./3-2-4.html":"./src/MapsToolkit/Resource/template/3-2-4.html","./3-2-5.html":"./src/MapsToolkit/Resource/template/3-2-5.html","./3-2-6.html":"./src/MapsToolkit/Resource/template/3-2-6.html","./4-1a-1.html":"./src/MapsToolkit/Resource/template/4-1a-1.html","./4-1a-2.html":"./src/MapsToolkit/Resource/template/4-1a-2.html","./4-1a-3.html":"./src/MapsToolkit/Resource/template/4-1a-3.html","./4-1b-1.html":"./src/MapsToolkit/Resource/template/4-1b-1.html","./4-1b-2.html":"./src/MapsToolkit/Resource/template/4-1b-2.html","./4-1b-3.html":"./src/MapsToolkit/Resource/template/4-1b-3.html","./4-1b-4.html":"./src/MapsToolkit/Resource/template/4-1b-4.html","./4-1b-5.html":"./src/MapsToolkit/Resource/template/4-1b-5.html","./4-1b-6.html":"./src/MapsToolkit/Resource/template/4-1b-6.html","./4-1b-7.html":"./src/MapsToolkit/Resource/template/4-1b-7.html","./4-1b-8.html":"./src/MapsToolkit/Resource/template/4-1b-8.html","./4-1b-9.html":"./src/MapsToolkit/Resource/template/4-1b-9.html","./4-2-1.html":"./src/MapsToolkit/Resource/template/4-2-1.html","./4-2-2.html":"./src/MapsToolkit/Resource/template/4-2-2.html","./4-2-3.html":"./src/MapsToolkit/Resource/template/4-2-3.html","./4-2-4.html":"./src/MapsToolkit/Resource/template/4-2-4.html","./5-1a-1.html":"./src/MapsToolkit/Resource/template/5-1a-1.html","./5-1a-2.html":"./src/MapsToolkit/Resource/template/5-1a-2.html","./5-1a-3.html":"./src/MapsToolkit/Resource/template/5-1a-3.html","./5-1b-1.html":"./src/MapsToolkit/Resource/template/5-1b-1.html","./5-1b-2.html":"./src/MapsToolkit/Resource/template/5-1b-2.html","./5-1b-3.html":"./src/MapsToolkit/Resource/template/5-1b-3.html","./5-1b-4.html":"./src/MapsToolkit/Resource/template/5-1b-4.html","./5-1b-5.html":"./src/MapsToolkit/Resource/template/5-1b-5.html","./5-1c-1.html":"./src/MapsToolkit/Resource/template/5-1c-1.html","./5-1c-2.html":"./src/MapsToolkit/Resource/template/5-1c-2.html","./5-1c-3.html":"./src/MapsToolkit/Resource/template/5-1c-3.html","./5-1c-4.html":"./src/MapsToolkit/Resource/template/5-1c-4.html","./5-1c-5.html":"./src/MapsToolkit/Resource/template/5-1c-5.html","./5-2a-1.html":"./src/MapsToolkit/Resource/template/5-2a-1.html","./5-2a-2.html":"./src/MapsToolkit/Resource/template/5-2a-2.html","./5-2a-3.html":"./src/MapsToolkit/Resource/template/5-2a-3.html","./5-2a-4.html":"./src/MapsToolkit/Resource/template/5-2a-4.html","./5-2b-1.html":"./src/MapsToolkit/Resource/template/5-2b-1.html","./5-2b-2.html":"./src/MapsToolkit/Resource/template/5-2b-2.html","./5-2b-3.html":"./src/MapsToolkit/Resource/template/5-2b-3.html","./6-1-1.html":"./src/MapsToolkit/Resource/template/6-1-1.html","./6-1-2.html":"./src/MapsToolkit/Resource/template/6-1-2.html","./6-1-3.html":"./src/MapsToolkit/Resource/template/6-1-3.html","./6-1-4.html":"./src/MapsToolkit/Resource/template/6-1-4.html","./6-1-5.html":"./src/MapsToolkit/Resource/template/6-1-5.html","./6-1-6.html":"./src/MapsToolkit/Resource/template/6-1-6.html","./6-2-1.html":"./src/MapsToolkit/Resource/template/6-2-1.html","./6-2-2.html":"./src/MapsToolkit/Resource/template/6-2-2.html","./6-3-1.html":"./src/MapsToolkit/Resource/template/6-3-1.html","./6-3-2.html":"./src/MapsToolkit/Resource/template/6-3-2.html","./6-3-3.html":"./src/MapsToolkit/Resource/template/6-3-3.html","./6-4-1.html":"./src/MapsToolkit/Resource/template/6-4-1.html","./6-4-2.html":"./src/MapsToolkit/Resource/template/6-4-2.html","./6-4-3.html":"./src/MapsToolkit/Resource/template/6-4-3.html","./6-4-4.html":"./src/MapsToolkit/Resource/template/6-4-4.html","./7-1-1.html":"./src/MapsToolkit/Resource/template/7-1-1.html","./7-1-2.html":"./src/MapsToolkit/Resource/template/7-1-2.html","./7-1-3.html":"./src/MapsToolkit/Resource/template/7-1-3.html","./7-1-4.html":"./src/MapsToolkit/Resource/template/7-1-4.html","./7-2-1.html":"./src/MapsToolkit/Resource/template/7-2-1.html","./7-2-2.html":"./src/MapsToolkit/Resource/template/7-2-2.html","./7-2-3.html":"./src/MapsToolkit/Resource/template/7-2-3.html","./7-2-4.html":"./src/MapsToolkit/Resource/template/7-2-4.html","./7-3-1.html":"./src/MapsToolkit/Resource/template/7-3-1.html","./7-3-2.html":"./src/MapsToolkit/Resource/template/7-3-2.html","./7-3-3.html":"./src/MapsToolkit/Resource/template/7-3-3.html","./7-3-4.html":"./src/MapsToolkit/Resource/template/7-3-4.html","./8-1-1.html":"./src/MapsToolkit/Resource/template/8-1-1.html","./8-1-2.html":"./src/MapsToolkit/Resource/template/8-1-2.html","./8-1-3.html":"./src/MapsToolkit/Resource/template/8-1-3.html","./8-2-1.html":"./src/MapsToolkit/Resource/template/8-2-1.html","./8-2-2.html":"./src/MapsToolkit/Resource/template/8-2-2.html","./8-2-3.html":"./src/MapsToolkit/Resource/template/8-2-3.html","./8-2-4.html":"./src/MapsToolkit/Resource/template/8-2-4.html","./8-2-5.html":"./src/MapsToolkit/Resource/template/8-2-5.html","./8-2-6.html":"./src/MapsToolkit/Resource/template/8-2-6.html","./8-3a-1.html":"./src/MapsToolkit/Resource/template/8-3a-1.html","./8-3a-2.html":"./src/MapsToolkit/Resource/template/8-3a-2.html","./8-3a-3.html":"./src/MapsToolkit/Resource/template/8-3a-3.html","./8-3a-4.html":"./src/MapsToolkit/Resource/template/8-3a-4.html","./8-3b-1.html":"./src/MapsToolkit/Resource/template/8-3b-1.html","./8-3b-2.html":"./src/MapsToolkit/Resource/template/8-3b-2.html","./9-1-1.html":"./src/MapsToolkit/Resource/template/9-1-1.html","./9-1-2.html":"./src/MapsToolkit/Resource/template/9-1-2.html","./9-1-3.html":"./src/MapsToolkit/Resource/template/9-1-3.html","./9-2-1.html":"./src/MapsToolkit/Resource/template/9-2-1.html","./9-2-2.html":"./src/MapsToolkit/Resource/template/9-2-2.html","./9-2-3.html":"./src/MapsToolkit/Resource/template/9-2-3.html"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/MapsToolkit/Resource/template sync recursive \\.html$"},"./src/MapsToolkit/Resource/template/1-1-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) The health outcomes and the specific health interventions for which the mHealth product is targeted have been detailed. This may include health outcomes/priorities that occur at the following life stages (examples of specific outcomes or health interventions are given in brackets):*\n  </translate>\n</p>\n\n<ul>\n  <li>\n    <translate>\n      Adolescence/before pregnancy (e.g. family planning, prevention of sexually transmitted infections)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Pregnancy (e.g. ANC, pregnancy complications)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Birth (e.g. transport, skilled attendance at birth)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Postpartum mother and postnatal newborn (e.g. postnatal care, newborn illnesses)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Maternal health and infancy/childhood (e.g. exclusive breastfeeding, routine immunizations, growth monitoring and nutrition).\n    </translate>\n  </li>\n</ul>\n"},"./src/MapsToolkit/Resource/template/1-1-2.html":function(t,e){t.exports="<p>\n  <translate>\n    i) The health outcomes and the specific health interventions for which the mHealth product is targeted have been detailed. This may include health outcomes/priorities that occur at the following life stages (examples of specific outcomes or health interventions are given in brackets):*\n  </translate>\n</p>\n\n<ul>\n  <li>\n    <translate>\n      Adolescence/before pregnancy (e.g. family planning, prevention of sexually transmitted infections)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Pregnancy (e.g. ANC, pregnancy complications)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Birth (e.g. transport, skilled attendance at birth)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Postpartum mother and postnatal newborn (e.g. postnatal care, newborn illnesses)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Maternal health and infancy/childhood (e.g. exclusive breastfeeding, routine immunizations, growth monitoring and nutrition).\n    </translate>\n  </li>\n</ul>\n"},"./src/MapsToolkit/Resource/template/1-1-3.html":function(t,e){t.exports="<p>\n  <translate>\n    i) The health outcomes and the specific health interventions for which the mHealth product is targeted have been detailed. This may include health outcomes/priorities that occur at the following life stages (examples of specific outcomes or health interventions are given in brackets):*\n  </translate>\n</p>\n\n<ul>\n  <li>\n    <translate>\n      Adolescence/before pregnancy (e.g. family planning, prevention of sexually transmitted infections)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Pregnancy (e.g. ANC, pregnancy complications)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Birth (e.g. transport, skilled attendance at birth)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Postpartum mother and postnatal newborn (e.g. postnatal care, newborn illnesses)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Maternal health and infancy/childhood (e.g. exclusive breastfeeding, routine immunizations, growth monitoring and nutrition).\n    </translate>\n  </li>\n</ul>\n"},"./src/MapsToolkit/Resource/template/1-2-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) The health outcomes and the specific health interventions for which the mHealth product is targeted have been detailed. This may include health outcomes/priorities that occur at the following life stages (examples of specific outcomes or health interventions are given in brackets):*\n  </translate>\n</p>\n\n<ul>\n  <li>\n    <translate>\n      Adolescence/before pregnancy (e.g. family planning, prevention of sexually transmitted infections)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Pregnancy (e.g. ANC, pregnancy complications)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Birth (e.g. transport, skilled attendance at birth)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Postpartum mother and postnatal newborn (e.g. postnatal care, newborn illnesses)\n    </translate>\n  </li>\n  <li>\n    <translate>\n      Maternal health and infancy/childhood (e.g. exclusive breastfeeding, routine immunizations, growth monitoring and nutrition).\n    </translate>\n  </li>\n</ul>\n"},"./src/MapsToolkit/Resource/template/10-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Processes for updating and replicating the application with new user groups have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Processes for adapting the application so it may address new health domains have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Documentation for guiding the adaptation of technology is available\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-1-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The application can be modified by locally available developers\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Processes for translating the content into a new language have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Processes for making the content accessible to illiterate users have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Processes for modifying the content based on a new cultural context have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-3-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The application can run on different types of mobile devices (e.g. basic phone, feature phone, smartphone, personal data assistant [PDA], tablet)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/10-3-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The application is compatible with different types of operating systems (e.g. Android, Windows phone, iOS, Java)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Future personnel needs have been projected based on the scope-goals of scaling up\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The job descriptions of existing project team members have been restructured or adjusted to meet the needs of scaling up\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Mechanisms for expanding human resource capacity have been developed, as needed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The roles and responsibilities of all project team members have been defined and communicated for scaling up\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) Strategies for project team member retention have been developed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-6.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vi) Mechanisms are in place to maintain institutional knowledge in light of project team member turnover\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-1-7.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vii) New policies have been created to respond to estimated changes in workload and salary structures while scaling up\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) An advisor/director to provide strategic oversight has been appointed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) A manager for supporting organizational and personnel needs has been appointed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) A systems administrator for managing the technology has been appointed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/11-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) A financial manager for tracking costs and expenditures has been appointed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Initial training is in place for end-users of the application (e.g. health workers using the product, and clients)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Operational guides (e.g. standard operating procedures [SOPs], job aid) with instructions for managing the application is available and accessible to all project team members\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Refresher training for end-users of the application is in place\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1a-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Training for secondary users (e.g. district-level managers and supervisors) is in place\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1a-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) The resources required for conducting the training are available\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The training programme has taken account of usersâ literacy and relevant content knowledge\r\n  </translate>\r\n\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) An appropriate delivery mechanism for training (e.g. internal versus external training; training-of-trainers) based on needs and project resources has been established\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Training curriculum and/or other tools to ensure capacity for end-users are available\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-1b-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Mechanisms are in place for quality assurance of the training programme (e.g. checkpoints for competency and certification)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) An organizational structure for providing supportive field supervision and monitoring of end-usersâ activities is in place\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Required resources have been allocated for routine field supervision or monitoring end-usersâ interactions with the system\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) End-users have been trained on how to get their questions and problems addressed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-3-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) A local first-line technical support team has been identified and trained appropriately to provide troubleshooting\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-3-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) There is a procedure in place to connect the local technical support team to a higher level of support when needed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/12-3-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) There are strategies in place for providing user support through peer assistance (e.g. having champions within the health workforce cadre)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/13-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Orientation for implementing partners (e.g. NGOs, CBOs) that will be involved directly in the scaling-up implementation has been established\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/13-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Orientation for government representatives has been established through meetings, workshops or other face-to-face mechanisms\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/13-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Efforts to engage with local community leaders and/or community council members have been made in order to obtain approval for introducing the mHealth product\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/13-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Efforts to spread awareness of the mHealth product and its value have been made\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/13-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The community has been encouraged to provide their feedback on concerns and issues related to the mHealth product through specific feedback events\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Procedures for addressing lack of/inconsistencies in connectivity have been established (e.g. provision of several SIM cards so health workers can use different networks when necessary)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Procedures for addressing lack of/inconsistencies in electricity have been established (e.g. provision of solar chargers, setting up charging stations in communities)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Information regarding these strategies is included within the standard operating procedures (SOPs)/job aids provided to end-users and secondary users\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Procedures for preventing loss/theft of mobile devices have been developed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Policies (and contracts, if appropriate) for replacing lost or damaged mobile devices have been developed and vetted with appropriate stakeholders\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/14-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Methods for preventing the misuse of mobile devices are in place (e.g. preventing specific weblinks or application usage)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Sufficient funds are earmarked and applied to general monitoring activities (e.g. 10% of the project budget)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Appropriate internal staff have been identified to manage and support monitoring activities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) A Performance Monitoring Plan (PMP) or the equivalent, which defines data collection procedures and intervals, has been developed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Performance indicators and information sources have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-1b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Appropriate instruments for measuring the indicators have been identified\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Processes for regular analysis and interpretation of monitoring data have been defined (including frequency of meetings, who will participate, etc.)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Dashboards and scorecards are in place to track implementation progress of the system\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Processes for collecting user feedback and addressing implementation-related challenges have been developed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/15-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Protocol for making course corrections for implementation activities based on monitoring data is in place\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Sufficient funds are available for designing and conducting rigorous studies of the outcomes of scaling up the product\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Appropriate internal staff have been identified for managing and supporting evaluation activities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) External organization(s) have been recruited to assist with evaluation research, as needed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The specific evidence priorities and reporting needs of each key stakeholder can be articulated\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) A framework (e.g. theory of change, logical framework) describing the links among the productâs inputs, activities, outputs and outcomes, and impacts has been developed\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Ethical approval has been granted to carry out the planned evaluation study\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1c-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Procedures for accessing system-generated data from the mHealth platform for evaluation and reporting purposes have been established\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-1c-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Methods for assembling human-collected data and accessing it for evaluation and reporting purposes have been established\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Health systems-level outcomes have been articulated\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Provider/health service delivery-level outcomes have been articulated\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Client-level outcomes have been articulated\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2a-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Population health outcomes/impacts have been articulated\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Indicators for measuring the specified outcomes have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Data sources pertaining to each indicator have been defined\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Data collection methods (quantitative and qualitative, as needed) are appropriate and sufficient to capture evidence priorities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/16-2b-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Frequency of data collection and comparators have been defined\r\n  </translate>\r\n</p>\r\n<em>\r\n  <translate>\r\n    Comparators may involve a comparison/control group or, if the study design is pre- and post-, then comparators may involve the baseline characteristics.\r\n  </translate>\r\n</em>\r\n"},"./src/MapsToolkit/Resource/template/16-2c-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The functionality of the technology has been demonstrated (Does the technology work as intended?)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-2c-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The usability of the product has been demonstrated (Can the product be used effectively by intended users?)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-2c-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) The efficacy of the product has been demonstrated (Does the product have the effect that was intended in an ideal/controlled setting?)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-2c-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The effectiveness of the product has been demonstrated (Does the product have the effect that was intended in a non-research setting?)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-2c-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) The cost-effectiveness and/or cost-utility of the product has been demonstrated (Does the product offer a greater value for impact compared to existing alternatives?)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-3-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Opportunities for local dissemination (e.g. community briefings) have been identified\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/16-3-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Opportunities for wider dissemination have been identified (e.g. publications, poster sessions, websites)\r\n  </translate>\r\n</p>\r\n"},"./src/MapsToolkit/Resource/template/2-1-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) We can describe how the product fits into national health or health system priority area(s)\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-1-2.html":function(t,e){t.exports="<p>\n  <translate>\n    ii) We can describe how the product fits into the principles and/or guidelines of the national eHealth/mHealth strategy if one exists (or the national health policy priorities related to the health information system (HIS), if a national eHealth/mHealth strategy does not exist)\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-1-3.html":function(t,e){t.exports="<p>\n  <translate>\n    iii) We actively participate in existing eHealth/mHealth working groups (e.g. a community of practice) or eHealth/mHealth national-level meetings\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-2-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) We have assessed the reach of network coverage, and can articulate it in terms of daily operational requirements for the mHealth product and deployments\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-2-2.html":function(t,e){t.exports="<p>\n  <translate>\n    ii) We have assessed the reliability of network coverage, and can articulate it in terms of which networks offer needed coverage for which users\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-2-3.html":function(t,e){t.exports="<p>\n  <translate>\n    iii) We have assessed the reach of electricity, and can articulate it in terms of the functional requirements of the users\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-2-4.html":function(t,e){t.exports="<p>\n  <translate>\n    iv) We have assessed the reliability of electricity, and can articulate it in terms of the offline/online requirements of the users and the server(s)\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-3-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) We have assessed other mHealth projects in the local settings(s) or in the country (via working on the ground and/or via reviewing online repositories)\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-3-2.html":function(t,e){t.exports="<p>\n  <translate>\n    ii) We can articulate our productâs differences and similarities in comparison with other projects\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-3-3.html":function(t,e){t.exports="<p>\n  <translate>\n    iii) We can articulate our productâs advantages in comparison with other projects in the mHealth landscape, and the added value of our product\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/2-3-4.html":function(t,e){t.exports="<p>\n  <translate>\n    iv) We have developed strategies for either aligning with or differentiating ourselves from those other projects at this stage or in the future\n  </translate>\n</p>\n"},"./src/MapsToolkit/Resource/template/3-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The functionality of the technology has been demonstrated (Does the technology work as intended?)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The usability of the mHealth product has been demonstrated by carrying out user testing with anticipated user groups (Can the mHealth product be used effectively by intended users?)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-1a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) The efficacy of the mHealth product has been demonstrated (Does the mHealth product have the effect that was intended in an ideal/controlled setting?)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-1a-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The effectiveness of the mHealth product has been demonstrated (Does the mHealth product have the effect that was intended in a non-research setting?)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The content and key activities are drawn from evidence-based guidelines (e.g. WHO guidelines) or national operational procedures (e.g. from existing MOH documentation), and we are able to list these sources\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Operational procedures for the mHealth strategy (e.g. timing, frequency or actions defining the mHealth activities) have been informed by credible external sources and/or a pilot study, and we are able to list these sources\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Formative research has been conducted in this setting to assess needs (e.g. using qualitative methods such as focus group discussions)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) A pilot study has been conducted in this setting (or in settings that are similar in terms of sociocultural, geographic and institutional features)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have assessed local health system constraints in relation to the mHealth product\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We have assessed the availability and capacity of local health services in relation to the mHealth product\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) We have assessed how the mHealth product will integrate with existing workflow, behaviours and needs of health workers or other health system staff\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/3-2-6.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vi) We have assessed local sociocultural norms (including gender norms), and can describe them in terms of barriers and opportunities for the use and scaling up of the mHealth product\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We can clearly define our project teamâs internal competencies, and based on these considerations, can identify our external need for partners\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have decided on the types of individuals and institutions that we will need to partner with to meet those needs\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have determined the stages in the scaling-up process or timing when those outside partners are relevant or necessary\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) MOH/government entities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Financing partner(s)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) MNOs or aggregator\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Implementation partner(s) (e.g. NGO, CBO)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) Technology partner(s) (e.g. software developer)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-6.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vi) Service provider(s) (e.g. hardware vendor)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-7.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vii) Marketing/communications partner\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-8.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    viii) Evaluation or research partner\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-1b-9.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ix) Partner/advisor for health content\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We are able to articulate the value proposition (i.e. the advantages of the mHealth product compared with alternatives) specifically to each partner\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have communicated the ways in which the mHealth product is aligned with partner priorities (e.g. evidence, cost-effectiveness, financial returns, brand equity)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have communicated the relevance of the mHealth product to local health needs and government priorities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/4-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We have communicated the relevance of the mHealth product to global health concerns (e.g. Millennium Development Goals, Sustainable Development Goals, universal health coverage, etc.) or multicountry donor initiatives\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have identified the areas in which champions will be valuable to scaling up\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have developed relationships with those champions\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have identified the times at which support from champions will be most essential\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Champion(s) have decision-making capabilities and authority\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Champion(s) have stability in current position\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Champion(s) have organizational support and relevant resources (e.g. financial, political, in-kind human resources)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1b-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Champion(s) are aware of their responsibilities and scope of work during the scaling-up process\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1b-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) Champion(s) have demonstrated their commitment to the product and ability to advocate for it through previous efforts\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1c-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) Champion(s) have decision-making capabilities and authority\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1c-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Champion(s) have stability in current position\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1c-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Champion(s) have organizational support and relevant resources (e.g. financial, political, in-kind human resources)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1c-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\niv) Champion(s) are aware of their responsibilities and scope of work during the scaling-up process\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-1c-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) Champion(s) have demonstrated their commitment to the product and ability to advocate for it through previous efforts\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) A steering committee or decision-making board that is representative of partners, as appropriate, has been created\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) There is a regular schedule of meetings among committee/board representatives\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Terms of reference have been established to guide the structure and decision-making processes of the committee/board, and these terms are understood by all\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2a-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) Mechanisms are in place to consistently elicit feedback from partners\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2b-1.html":function(t,e){t.exports="<p>\n  <translate>\n    i) Agreement has been reached on the project vision\n  </translate>\n</p>"},"./src/MapsToolkit/Resource/template/5-2b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) Agreement has been reached on the scope and goals of scaling up (as specified in SAQ 1-1)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/5-2b-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) Agreement has been reached on the general approach and timeline of activities for scaling up (e.g. joint workplan)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) A mechanism for tracking expenditures, according to the phase of implementation, is in place\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have captured costs according to the phases of implementation (i.e. development, pilot, scaling up)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have categorized costs in terms of one-time capital costs, recurring costs and variable costs\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We have quantified in-kind contributions and other intangible assets (e.g. office space, Internet)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) We have explored cost-share opportunities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-1-6.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    vi) A protocol is in place to regularly revisit and revise budgets as funding, assumptions and/or activities change\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\ni) We have considered technology costs incurred by users (e.g. mobile device, airtime, etc.)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have considered non-technology costs incurred by users (e.g. care-seeking and/or engagement)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-3-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have estimated increased demand for care as a result of the mHealth project activities and the resulting additional workload on providers (e.g. time spent filling out electronic registers, etc.)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-3-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have estimated the increased cost of health workersâ time as a result of mHealth project activities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-3-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have estimated the additional costs of commodities, equipment and/or supplies as a result of the mHealth project activities\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-4-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have identified the total cost of ownership (including hardware, software, equipment, training, support, marketing, staff, etc.) over the next five years, to reach our projected units of scale (Factor 1-1.)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-4-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have identified key drivers of cost associated with scaling up the project\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-4-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have identified areas for achieving economies of scale or other means of cost savings\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/6-4-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We have outlined the key assumptions and corresponding risks in forecasting economic costs\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have completed a value chain analysis to identify the key interests of potential payer12\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have quantified the tangible/monetary costs and benefits of the status quo (e.g. cost of materials)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have quantified the intangible/non-monetary costs and benefits of the status quo (e.g. efficiency, access to care)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-1-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We can articulate our projectâs value proposition to each potential payer\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have conducted a comprehensive analysis of the resources necessary for reaching the goals of scaling up (Factor 1-1.)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\nii) We have consulted with partners and other local stakeholders to develop our resource mobilization plan\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have developed a marketing plan that can be sustained over time\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The business plan is available in a format that can be shared with partners\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-3-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have explored diverse funding streams (including opportunities with non-health sectors), and chosen the most strategic option(s) for our project\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-3-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have identified payers and alternative payers at each level of the value chain\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-3-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have developed plans to engage with main and alternative payers\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/7-3-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) We have identified and mitigated risks for a transition plan for changing from one payer to another\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The application includes data quality assurance measures, such as validation rules and logic checks, to reduce data entry errors and increase accuracy\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) A user-appropriate dashboard allows the data to be accessed and monitored in real time\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) There is a process in place for extracting and exporting the data that are appropriate to its users\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The processing capacity (i.e. the capacity to handle requests or deliver them through the data centre) is appropriate for the anticipated scope of scale\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The latency of the data centre based on its location is appropriate for the anticipated scope of scale\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) The bandwidth for data transmission is sufficient for the anticipated scope of scale\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) The data storage system has been configured to accommodate anticipated increases in data volume\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-5.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    v) The project operations adhere to government requirements on data storage/hosting\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-2-6.html":function(t,e){t.exports="<p>\r\n  <translate>\r\nvi) The system as a whole has successfully passed a stress test\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3a-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) There is a secure connection to the server\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3a-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) There are security mechanisms in place for accessing the data (e.g authentication process)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3a-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) There are security mechanisms for using the device (e.g. passcode)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3a-4.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iv) A protocol is in place for responding to breaches in compliance and guaranteeing accountability\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3b-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\ni) The mHealth product meets relevant national eHealth security standards for data collection, transmission and storage\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/8-3b-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The mHealth product adheres to national data privacy policies and standards for protecting client data (e.g. HIPAA in the United States)*\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-1-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) We have identified the types of systems with which the mHealth product will need to interoperate (e.g. DHIS2, eLMIS, HRIS)*\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-1-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) We have identified the types of applications/software/functions with which the mHealth product will ideally interoperate (e.g. mobile money applications)\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-1-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) We have designed the application with the use of data dictionaries in order to adhere to data standards used by the appropriate systems\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-2-1.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    i) The mHealth product meets the data standards (e.g. HL7) used by the government health information systems (e.g. DHIS2, eLMIS)*\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-2-2.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    ii) The mHealth product adheres to clinical terminology standards where appropriate (e.g. ICD-10, SNOMED CT)*\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Resource/template/9-2-3.html":function(t,e){t.exports="<p>\r\n  <translate>\r\n    iii) The mHealth product adheres to other terminology standards where appropriate (e.g. INN)*\r\n  </translate>\r\n</p>"},"./src/MapsToolkit/Scorecard/images sync recursive \\.svg$":function(t,e,n){var r={"./icon-axis1.svg":"./src/MapsToolkit/Scorecard/images/icon-axis1.svg","./icon-axis2.svg":"./src/MapsToolkit/Scorecard/images/icon-axis2.svg","./icon-axis3.svg":"./src/MapsToolkit/Scorecard/images/icon-axis3.svg","./icon-axis4.svg":"./src/MapsToolkit/Scorecard/images/icon-axis4.svg","./icon-axis5.svg":"./src/MapsToolkit/Scorecard/images/icon-axis5.svg","./icon-axis6.svg":"./src/MapsToolkit/Scorecard/images/icon-axis6.svg"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id="./src/MapsToolkit/Scorecard/images sync recursive \\.svg$"},"./src/MapsToolkit/Scorecard/images/icon-axis1.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis1.svg"},"./src/MapsToolkit/Scorecard/images/icon-axis2.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis2.svg"},"./src/MapsToolkit/Scorecard/images/icon-axis3.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis3.svg"},"./src/MapsToolkit/Scorecard/images/icon-axis4.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis4.svg"},"./src/MapsToolkit/Scorecard/images/icon-axis5.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis5.svg"},"./src/MapsToolkit/Scorecard/images/icon-axis6.svg":function(t,e,n){t.exports=n.p+"public/fonts/icon-axis6.svg"},"./src/Storage.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n("./node_modules/babel-runtime/core-js/json/stringify.js")),o=a(n("./node_modules/babel-runtime/helpers/classCallCheck.js")),i=a(n("./node_modules/babel-runtime/helpers/createClass.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,o.default)(this,t),this.storage=window.localStorage}return(0,i.default)(t,[{key:"set",value:function(t,e){if("string"!=typeof t)throw new TypeError("this.storage key should be a string!");var n="string"==typeof e?e:(0,r.default)(e);this.storage.setItem(t,n)}},{key:"get",value:function(t){try{return JSON.parse(this.storage.getItem(t))}catch(e){return this.storage.getItem(t)}}},{key:"remove",value:function(t){this.storage.removeItem(t)}},{key:"clear",value:function(){this.storage.clear()}},{key:"check",value:function(){console.log("this.storage contains:\n");var t={};for(var e in this.storage)console.log(e+": "+this.storage.getItem(e)),t[e]=this.storage.getItem(e);return t}}]),t}();e.default=s},"./src/plugins/axios.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n("./node_modules/babel-runtime/core-js/promise.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n("./node_modules/axios/index.js")).default.create();i.setAuthToken=function(t){i.defaults.headers.common.Authorization="Token "+t},i.unSetAuthToken=function(){i.defaults.headers.common.Authorization=null},i.setLanguageHeader=function(t){i.defaults.headers.common["Accept-Language"]=t},i.setShowPopUp=function(t){i.popUpFunction=t},i.setHandleAuthProblem=function(t){i.authProblemFunction=t},i.interceptors.request.use(function(t){return t},function(t){return console.error(t),i.popUpFunction(),r.default.reject(t)}),i.interceptors.response.use(function(t){return t},function(t){return t&&t.response&&(401===t.response.status||403===t.response.status?i.authProblemFunction():i.popUpFunction()),r.default.reject(t)}),e.default=i},"./src/plugins/language.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrentLanguage=e.setLanguage=e.getLanguage=e.configureDates=e.setDateLocaleProvider=e.setScope=e.setCatalog=e.config=void 0;var r=s(n("./node_modules/babel-runtime/regenerator/index.js")),o=s(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),i=s(n("./src/plugins/axios.js")),a=s(n("./node_modules/moment/moment.js"));function s(t){return t&&t.__esModule?t:{default:t}}n("./node_modules/moment/locale/fr.js"),n("./node_modules/moment/locale/pt.js"),n("./node_modules/moment/locale/es.js");var l,c,u=window.navigator,d=u.languages&&u.languages[0]||u.language||u.userLanguage,h=e.config={gettextCatalog:{},language:d,scope:{},mdDateLocaleProvider:{}};e.setCatalog=function(t){h.gettextCatalog=t},e.setScope=function(t){h.scope=t},e.setDateLocaleProvider=function(t){h.mdDateLocaleProvider=t},e.configureDates=(l=(0,o.default)(r.default.mark(function t(e){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.default.locale(e),n=(0,a.default)(),h.mdDateLocaleProvider.months=n.localeData().months(),h.mdDateLocaleProvider.shortMonths=n.localeData().monthsShort(),h.mdDateLocaleProvider.days=n.localeData().weekdays(),h.mdDateLocaleProvider.shortDays=n.localeData().weekdaysShort(),window.moment=n;case 7:case"end":return t.stop()}},t,void 0)})),function(t){return l.apply(this,arguments)}),e.getLanguage=(c=(0,o.default)(r.default.mark(function t(){var n,o;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.default.setLanguageHeader(h.language),t.next=3,i.default.get("/translation/json/");case 3:n=t.sent,o=n.data,h.gettextCatalog.setCurrentLanguage(h.language),h.gettextCatalog.setStrings(h.language,o.catalog),e.configureDates(h.language),h.scope.$digest();case 9:case"end":return t.stop()}},t,void 0)})),function(){return c.apply(this,arguments)}),e.setLanguage=function(t){return h.language=t,e.getLanguage()},e.getCurrentLanguage=function(){return h.language}},"./src/store/modules/countries.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.csvExport=e.getCurrentCountryProjects=e.getCurrentCountryDistrictProjects=e.getCurrentCountryMapData=e.getCurrentCountryFacilityList=e.getCurrentCountrySecondSubLevel=e.getCurrentCountryFirstSubLevel=e.getCurrentCountrySubLevelNames=e.getCountriesLib=e.getCountryCoverPicture=e.getCountryCoverPage=e.getCurrentCountry=e.getCountryFields=e.getCountriesList=e.getCountry=e.mapData=void 0;var r,o=g(n("./node_modules/babel-runtime/core-js/promise.js")),i=g(n("./node_modules/babel-runtime/core-js/object/freeze.js")),a=g(n("./node_modules/babel-runtime/regenerator/index.js")),s=g(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),l=g(n("./node_modules/babel-runtime/helpers/extends.js"));e.csvExport=(r=(0,s.default)(a.default.mark(function t(e){var n,r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.post("/api/projects/csv-export/",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)});e.loadCountries=function(){var t=this;return e=(0,s.default)(a.default.mark(function e(n,r){var o,i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==r().countries.list.length){t.next=8;break}return t.next=4,c.default.get("/api/countries/");case 4:o=t.sent,(i=o.data).sort(function(t,e){return t.name.localeCompare(e.name)}),n({type:"SET_COUNTRIES_LIST",countries:i});case 8:case"end":return t.stop()}},e,t)})),function(t,n){return e.apply(this,arguments)};var e},e.loadCountryFields=function(t){var e=this;return n=(0,s.default)(a.default.mark(function n(r,o){var i,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=o().countries.countryFields.filter(function(e){return e.country===t}))&&0!==i.length){e.next=8;break}return e.next=4,c.default.get("/api/country-fields/"+t+"/");case 4:s=e.sent,(l=s.data).sort(function(t,e){return t.id-e.id}),r({type:"UPDATE_COUNTRY_FIELDS_LIST",fields:l});case 8:case"end":return e.stop()}},n,e)})),function(t,e){return n.apply(this,arguments)};var n},e.loadCountryMapData=function(){var t=this;return n=(0,s.default)(a.default.mark(function n(r,o){var s,l,u,d;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=o(),!(l=e.getCurrentCountry(s))||!l.code){t.next=10;break}if(y[l.code]){t.next=10;break}return t.next=7,c.default.get("/static/country-geodata/"+l.code+".json");case 7:u=t.sent,d=u.data,y[l.code]=(0,i.default)(d);case 10:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.loadCountryLandingPageInfo=function(){var t=this;return n=(0,s.default)(a.default.mark(function n(r,o){var i,s,l;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.getCurrentCountry(o()))||!i.code){t.next=7;break}return t.next=4,c.default.get("/api/landing/"+i.code.toUpperCase()+"/");case 4:s=t.sent,l=s.data,r({type:"SET_COUNTRY_COVER_DATA",cover:l});case 7:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.loadCurrentCountryDistrictsProject=function(){var t=this;return n=(0,s.default)(a.default.mark(function n(r,o){var i,s,l;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.getCurrentCountry(o()))||!i.id){t.next=7;break}return t.next=4,c.default.get("/api/projects/by-view/map/"+i.id+"/");case 4:s=t.sent,l=s.data,r({type:"SET_CURRENT_COUNTRY_DISTRICT_PROJECTS",projects:l});case 7:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.loadCountryProjectsOrAll=function(t){var e=this;return n=(0,s.default)(a.default.mark(function n(r){var o,i,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=["/api/projects/by-view/list/"],t&&o.push(t+"/"),e.next=4,c.default.get(o.join(""));case 4:i=e.sent,s=i.data,r({type:"SET_CURRENT_COUNTRY_PROJECTS",projects:s});case 7:case"end":return e.stop()}},n,e)})),function(t){return n.apply(this,arguments)};var n},e.loadCurrentCountryProjects=function(){var t=this;return n=(0,s.default)(a.default.mark(function n(r,o){var i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(i=e.getCurrentCountry(o()))&&r(e.loadCountryProjectsOrAll(i.id));case 2:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.setCurrentCountry=function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i=(0,s.default)(a.default.mark(function i(s,l){var c,u;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=l().countries.currentCountry,!t||t===c){n.next=9;break}return s({type:"SET_CURRENT_COUNTRY",country:t}),(u={}).countryFields=s(e.loadCountryFields(t)),u.mapData=s(e.loadCountryMapData()),u.landingPage=s(e.loadCountryLandingPageInfo()),u.districts=s(e.loadCurrentCountryDistrictsProject()),n.abrupt("return",o.default.all(r.map(function(t){return u[t]})));case 9:return n.abrupt("return",o.default.resolve());case 10:case"end":return n.stop()}},i,n)})),function(t,e){return i.apply(this,arguments)};var i},e.setCurrentCountryFromCode=function(t){var n=this;return r=(0,s.default)(a.default.mark(function r(o,i){var s;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(s=i().countries.list.find(function(e){return e.code.toLocaleLowerCase()===t.toLocaleLowerCase()}))&&s.id?o(e.setCurrentCountry(s.id,["landingPage"])):o({type:"UNSET_CURRENT_COUNTRY"});case 2:case"end":return n.stop()}},r,n)})),function(t,e){return r.apply(this,arguments)};var r},e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments[1];switch(e.type){case"SET_COUNTRIES_LIST":return(0,l.default)({},t,{list:e.countries});case"SET_CURRENT_COUNTRY":return(0,l.default)({},t,{currentCountry:e.country});case"UNSET_CURRENT_COUNTRY":return(0,l.default)({},t,{currentCountry:null,currentCountryCoverPage:{}});case"SET_COUNTRY_COVER_DATA":return(0,l.default)({},t,{currentCountryCoverPage:e.cover});case"UPDATE_COUNTRY_FIELDS_LIST":return(0,l.default)({},t,{countryFields:(0,u.default)(e.fields,t.countryFields,"id")});case"SET_CURRENT_COUNTRY_PROJECTS":return(0,l.default)({},t,{currentCountryProjects:e.projects});case"SET_CURRENT_COUNTRY_DISTRICT_PROJECTS":return(0,l.default)({},t,{currentCountryDistrictsProjects:e.projects});default:return t}};var c=g(n("./src/plugins/axios.js")),u=g(n("./node_modules/lodash/unionBy.js")),d=g(n("./node_modules/lodash/forEach.js")),h=n("./node_modules/reselect/lib/index.js"),p=n("./src/store/modules/projects.js"),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/system.js")),f=n("./src/plugins/language.js");function g(t){return t&&t.__esModule?t:{default:t}}var v={list:[],countryFields:[],currentCountryDistricts:[],currentCountry:null,currentCountryCoverPage:{},currentCountryProjects:[],currentCountryDistrictsProjects:[]},y=e.mapData={},b=(e.getCountry=function(t,e){return t.countries.list.find(function(t){return t.id===e})},e.getCountriesList=(0,h.createSelector)(function(t){return t.countries.list},function(t){return t?t.map(function(t){var e=t.code.toLocaleLowerCase();return(0,l.default)({},t,{code:e,flag:"/static/flags/"+e+".png",prettyName:t.name.split("-").join(" ")})}):[]}));e.getCountryFields=function(t){return t.countries.countryFields.filter(function(e){return e.country===t.countries.currentCountry}).map(function(t){return(0,l.default)({},t)})},e.getCurrentCountry=function(t){return(0,l.default)({},b(t).find(function(e){return e.id===t.countries.currentCountry}))},e.getCountryCoverPage=function(t){var e=(0,l.default)({},t.countries.currentCountryCoverPage),n=m.getLandingPageDefaults(t);return(0,d.default)(n,function(t,n){var r=e[n];null!==r&&void 0!==r&&""!==r||(e[n]=t)}),e.partners=e.default_partners.concat(e.partner_logos),e},e.getCountryCoverPicture=function(t){var n=e.getCountryCoverPage(t);return n.cover?{background:"url("+n.cover+") 0 0","background-size":"cover","background-repeat":"no-repeat"}:null},e.getCountriesLib=function(t){var e={};return t.countries.list&&t.countries.list.forEach(function(t){e[t.id]=t.name}),e},e.getCurrentCountrySubLevelNames=function(t){var n=e.getCurrentCountry(t),r=m.getSubLevelTypes(t);try{var o=r.find(function(t){return t.name===n.map_data.first_sub_level.name}),i=r.find(function(t){return t.name===n.map_data.second_sub_level.name});return[o=o?o.displayName:n.map_data.first_sub_level.name,i=i?i.displayName:n.map_data.second_sub_level.name]}catch(t){return["",""]}},e.getCurrentCountryFirstSubLevel=function(t){var n=(0,f.getCurrentLanguage)(),r=e.getCurrentCountry(t);return r&&r.map_data&&r.map_data.first_sub_level?r.map_data.first_sub_level.elements.map(function(t){return{id:t.name,name:t["name:"+n]||t["name:en"]||t.name}}):[]},e.getCurrentCountrySecondSubLevel=function(t){var n=(0,f.getCurrentLanguage)(),r=e.getCurrentCountry(t);return r&&r.map_data&&r.map_data.second_sub_level?r.map_data.second_sub_level.elements.map(function(t){return{id:t.name,name:t["name:"+n]||t["name:en"]||t.name}}):[]},e.getCurrentCountryFacilityList=function(t){var n=e.getCurrentCountry(t);return n&&n.map_data&&n.map_data.facilities?n.map_data.facilities:[]},e.getCurrentCountryMapData=function(t){var n=e.getCurrentCountry(t);return n.mapData=y[n.code],n.districts=e.getCurrentCountryFirstSubLevel(t),n},e.getCurrentCountryDistrictProjects=function(t){var e={},n=t.countries.currentCountryDistrictsProjects;for(var r in n)e[r]=n[r].map(function(e){return e=(0,l.default)({},e,(0,p.isMemberOrViewer)(t,e))});return e},e.getCurrentCountryProjects=function(t){return t.countries.currentCountryProjects.map(function(e){return e=(0,l.default)({},e,(0,p.isMemberOrViewer)(t,e))})}},"./src/store/modules/projects.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchProjects=e.postProjectSaveActions=e.saveCountryFields=e.saveTeamViewers=e.checkCurrentProjectValidity=e.getSimilarProject=e.getCoverageData=e.getMapsDomainData=e.getMapsAxisData=e.getCurrentVersionDate=e.getCurrentVersion=e.getCoverageVersion=e.getToolkitVersion=e.getViewers=e.getTeam=e.getNewProjectForEditing=e.getCurrentDraftProjectForEditing=e.getCurrentEdits=e.getCurrentPublishedProjectForEditing=e.getCurrentProjectForEditing=e.getProjectCountryFields=e.getStoredCountryFields=e.getCurrentDraftInViewMode=e.getCurrentDraft=e.getCurrentPublished=e.parseProjectForViewMode=e.convertCountryFieldsAnswer=e.getCurrentPublicProjectDetails=e.getCurrentPublicProject=e.getCurrentProject=e.getCurrentProjectIfExist=e.getVanillaProject=e.getEmptyProject=e.getUserDefaultProject=e.getUserProjects=e.getProjectStructure=e.getFlatProjectStructure=e.getDraftedProjects=e.getPublishedProjects=e.getSavedProjectList=e.getCurrentProjectId=e.isMemberOrViewer=void 0;var r,o,i,a,s=E(n("./node_modules/babel-runtime/core-js/object/keys.js")),l=E(n("./node_modules/babel-runtime/core-js/json/stringify.js")),c=E(n("./node_modules/babel-runtime/helpers/slicedToArray.js")),u=E(n("./node_modules/babel-runtime/regenerator/index.js")),d=E(n("./node_modules/babel-runtime/core-js/promise.js")),h=E(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),p=E(n("./node_modules/babel-runtime/core-js/object/assign.js")),m=E(n("./node_modules/babel-runtime/helpers/typeof.js")),f=E(n("./node_modules/babel-runtime/helpers/toConsumableArray.js")),g=E(n("./node_modules/babel-runtime/helpers/extends.js"));e.saveTeamViewers=(r=(0,h.default)(u.default.mark(function t(e){var n,r=e.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={team:o.map(function(t){return t.id}),viewers:i.map(function(t){return t.id})},t.next=3,v.default.put("/api/projects/"+r+"/groups/",n);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)}),e.saveCountryFields=(o=(0,h.default)(u.default.mark(function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments[1],i=arguments[2],a=arguments[3];return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=r.map(function(t){var e=t.country,n=t.question,r=t.type;return{country:e,answer:t.answer,type:r,question:n,project:i}}),a="published"===a?"publish":"draft",t.prev=2,t.next=5,v.default.post("/api/country-fields/"+o+"/"+i+"/"+a+"/",{fields:r});case 5:return e=t.sent,n=e.data,t.abrupt("return",n.fields);case 10:return t.prev=10,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",!1);case 14:case"end":return t.stop()}},t,this,[[2,10]])})),function(){return o.apply(this,arguments)}),e.postProjectSaveActions=(i=(0,h.default)(u.default.mark(function t(n,r,o,i,a,s){var l,h,p,m,f,g,v,y,b,w,x;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=C.getProfile(a).id,h=e.getStoredCountryFields(a)(!0),p=e.saveCountryFields(h,n.draft.country,n.id,s),m=e.saveTeamViewers(n,r,o),t.next=6,d.default.all([m,p]);case 6:if(f=t.sent,g=(0,c.default)(f,2),v=g[0],y=g[1],b=v.team.some(function(t){return t===l})?[n.id]:[],w=v.viewers.some(function(t){return t===l})?[n.id]:[],!1!==y){t.next=16;break}return(x=new Error).response={custom:!0,message:"Failed to save country fields"},t.abrupt("return",d.default.reject(x));case 16:return"published"===s&&(n.published.fields=y),n.draft.fields=y,i({type:"UPDATE_SAVE_PROJECT",project:n}),i({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:v}),i(C.updateTeamViewers(b,w)),i(_.loadCurrentCountryProjects()),i(_.loadCurrentCountryDistrictsProject()),t.abrupt("return",d.default.resolve(n));case 24:case"end":return t.stop()}},t,this)})),function(t,e,n,r,o,a){return i.apply(this,arguments)}),e.searchProjects=(a=(0,h.default)(u.default.mark(function t(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.post("/api/search/projects/",{health_topic:o,location:i,organisation:a,project_name:s,query:e,technology_platform:l});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)});e.loadUserProjects=function(){var t=this;return n=(0,h.default)(u.default.mark(function n(r,o){var i,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(i=o()).user.profile||e.getSavedProjectList(i)){t.next=9;break}return t.next=5,v.default.get("/api/projects/member-of/");case 5:a=t.sent,(s=a.data).sort(function(t,e){return e.id-t.id}),r({type:"SET_PROJECT_LIST",projects:s});case 9:return t.abrupt("return",d.default.resolve());case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",d.default.reject(t.t0));case 16:case"end":return t.stop()}},n,t,[[0,12]])})),function(t,e){return n.apply(this,arguments)};var n},e.loadProjectDetails=function(){var t=this;return e=(0,h.default)(u.default.mark(function e(n,r){var o,i,a,s,l,h,p,m,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=r().projects.currentProject)||-1===o){t.next=15;break}return i=v.default.get("/api/projects/"+o+"/toolkit/versions/"),a=v.default.get("/api/projects/"+o+"/coverage/versions/"),s=v.default.get("/api/projects/"+o+"/groups/"),t.next=8,d.default.all([i,a,s]);case 8:l=t.sent,h=(0,c.default)(l,3),p=h[0],m=h[1],f=h[2],n({type:"SET_PROJECT_INFO",info:{toolkitVersions:p.data,coverageVersions:m.data}}),n({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:f.data});case 15:return t.abrupt("return",d.default.resolve());case 18:return t.prev=18,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",d.default.reject(t.t0));case 22:case"end":return t.stop()}},e,t,[[0,18]])})),function(t,n){return e.apply(this,arguments)};var e},e.setCurrentProject=function(t){var n=this;return r=(0,h.default)(u.default.mark(function r(o,i){var a,s,l,c,h,p,m,f;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=parseInt(t,10))||-1===t||t===i().projects.currentProject){n.next=22;break}if(o({type:"SET_CURRENT_PROJECT",id:t}),!(a=e.getCurrentProjectIfExist(i()))){n.next=9;break}return s=o(_.setCurrentCountry(a.country,["mapData"])),l=o(e.loadProjectDetails()),c=o(k.loadToolkitData()),n.abrupt("return",d.default.all([s,l,c]));case 9:return n.next=11,v.default.get("/api/projects/"+t+"/");case 11:if(h=n.sent,p=h.data,!C.getProfile(i())){n.next=19;break}return n.next=17,v.default.get("/api/projects/"+t+"/groups/");case 17:m=n.sent,o({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:m.data});case 19:o({type:"SET_CURRENT_PUBLIC_PROJECT_DETAIL",project:p}),n.next=23;break;case 22:-1===t&&(o({type:"SET_CURRENT_PROJECT",id:t}),f={id:-1,draft:{fields:[]},public:{}},o({type:"SET_PROJECT_TEAM_VIEWERS",teamViewers:{team:[],viewers:[]}}),o({type:"UPDATE_SAVE_PROJECT",project:f}));case 23:return n.abrupt("return",d.default.resolve());case 24:case"end":return n.stop()}},r,n)})),function(t,e){return r.apply(this,arguments)};var r},e.snapShotProject=function(){var t=this;return n=(0,h.default)(u.default.mark(function n(r,o){var i;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=o().projects.currentProject,t.next=3,v.default.post("/api/projects/"+i+"/version/");case 3:return t.next=5,r(e.loadProjectDetails());case 5:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.loadProjectStructure=function(t){var n=this;return r=(0,h.default)(u.default.mark(function r(o,i){var a,s,l,c;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=i(),s=e.getProjectStructure(a),!(0,b.default)(s)&&!t){n.next=9;break}return n.next=5,v.default.get("/api/projects/structure/");case 5:return l=n.sent,c=l.data,n.next=9,o({type:"SET_PROJECT_STRUCTURE",structure:c});case 9:case"end":return n.stop()}},r,n)})),function(t,e){return r.apply(this,arguments)};var r},e.processForm=function(t){var e=t.organisation?t.organisation.name:"",n=t.organisation?t.organisation.id:null;return t=(0,g.default)({},t,(0,A.retainNationalOrDistrictCoverage)(t)),t=(0,g.default)({},t,{organisation_name:e,organisation:n},(0,A.createDateFields)(t),(0,A.convertObjectArrayToStringArray)(t),(0,A.parseOutInteroperabilityLinks)(t),{coverageType:void 0,platforms:(0,A.parsePlatformCollection)(t)},(0,A.extractIdFromObjects)(t),(0,A.handleNationalLevelCoverage)(t),{coverage:(0,A.handleCoverage)(t.coverage),coverage_second_level:(0,A.handleCoverage)(t.coverage_second_level)}),t=(0,g.default)({},t,(0,A.retainOnlyIds)(t)),t=(0,g.default)({},t,(0,A.removeEmptyChildObjects)(t)),(0,A.removeKeysWithoutValues)(t)},e.saveDraft=function(t,n,r){var o=this;return i=(0,h.default)(u.default.mark(function i(a,s){var l,c,h,p;return u.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.processForm(t),l=t.id?"put":"post",c=t.id?"/api/projects/draft/"+t.id+"/":"/api/projects/draft/",o.prev=3,o.next=6,v.default[l](c,t);case 6:return h=o.sent,p=h.data,o.abrupt("return",e.postProjectSaveActions(p,n,r,a,s(),"draft"));case 11:return o.prev=11,o.t0=o.catch(3),console.log(o.t0),o.abrupt("return",d.default.reject(o.t0));case 15:case"end":return o.stop()}},i,o,[[3,11]])})),function(t,e){return i.apply(this,arguments)};var i},e.discardDraft=function(){var t=this;return n=(0,h.default)(u.default.mark(function n(r,o){var i,a,s,l,c;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getCurrentPublishedProjectForEditing(o()),a=e.processForm(i),s=e.getStoredCountryFields(o())(!1),t.next=5,v.default.put("/api/projects/draft/"+i.id+"/",a);case 5:return l=t.sent,c=l.data,t.next=9,e.saveCountryFields(s,c.draft.country,c.id,"published");case 9:return c.draft.fields=t.sent,r({type:"UPDATE_SAVE_PROJECT",project:c}),t.abrupt("return",d.default.resolve(c));case 12:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.publish=function(t,n,r){var o=this;return i=(0,h.default)(u.default.mark(function i(a,s){var l,c;return u.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.processForm(t),o.prev=1,o.next=4,v.default.put("/api/projects/publish/"+t.id+"/",t);case 4:return l=o.sent,c=l.data,o.abrupt("return",e.postProjectSaveActions(c,n,r,a,s(),"published"));case 9:return o.prev=9,o.t0=o.catch(1),console.log(o.t0),o.abrupt("return",d.default.reject(o.t0));case 13:case"end":return o.stop()}},i,o,[[1,9]])})),function(t,e){return i.apply(this,arguments)};var i},e.searchDuplicateProjectName=function(t){var n=this;return r=(0,h.default)(u.default.mark(function r(o){var i;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.searchProjects(t);case 2:i=n.sent,o({type:"SET_SIMILAR_NAME_LIST",list:i});case 4:case"end":return n.stop()}},r,n)})),function(t){return r.apply(this,arguments)};var r},e.clearSimilarNameList=function(){var t=this;return e=(0,h.default)(u.default.mark(function e(n){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_SIMILAR_NAME_LIST",list:[]});case 1:case"end":return t.stop()}},e,t)})),function(t){return e.apply(this,arguments)};var e},e.updateProjectCountryFields=function(t){var n=t.id,r=t.answer,o=t.question,i=t.type,a=t.country,s=t.schema_id;return function(t,c){var u=e.getCurrentProjectId(c());switch(i){case 3:r=!0===r?"true":"false";break;case 5:r=(0,l.default)(r)}var d={id:n,answer:r,question:o,type:i,country:a,schema_id:s=s||n};t({type:"UPDATE_COUNTRY_FIELD_ANSWER",projectId:u,countryField:d})}},e.updateEditedProject=function(t){return function(e,n){var r={},o=n().projects.editedProject;(0,s.default)(t).forEach(function(e){var n=(0,w.default)(o[e],t[e]);n||(r[e]=t[e])}),(0,s.default)(r).length>0&&e({type:"EDITED_PROJECT_UPDATE",update:r})}},e.resetEditedProject=function(){return function(t){t({type:"EDITED_PROJECT_RESET"})}},e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editedProject:{}},e=arguments[1];switch(e.type){case"SET_PROJECT_LIST":var n=e.projects.slice();return(0,g.default)({},t,{list:n});case"SET_SIMILAR_NAME_LIST":var r=e.list.slice();return(0,g.default)({},t,{similarProjectNames:r});case"UPDATE_SAVE_PROJECT":var o=[].concat((0,f.default)(t.list)),i=o.findIndex(function(t){return t.id===e.project.id});return-1!==i?o.splice(i,1,(0,g.default)({},e.project)):o.push((0,g.default)({},e.project)),(0,g.default)({},t,{list:o});case"UPDATE_COUNTRY_FIELD_ANSWER":var a=[].concat((0,f.default)(t.list)),s=a.findIndex(function(t){return t.id===e.projectId}),l=[].concat((0,f.default)(a[s].draft.fields)),c=l.findIndex(function(t){return t.schema_id===e.countryField.schema_id});return-1!==c?l.splice(c,1,(0,g.default)({},e.countryField)):l.push((0,g.default)({},e.countryField)),a[s].draft.fields=l,(0,g.default)({},t,{list:a});case"SET_CURRENT_PROJECT":var u=e.id;return(0,g.default)({},t,{currentProject:u});case"SET_CURRENT_PUBLIC_PROJECT_DETAIL":var d=e.project;return(0,g.default)({},t,{currentPublicProject:d});case"SET_PROJECT_STRUCTURE":var h=e.structure;return(0,g.default)({},t,{structure:h});case"SET_PROJECT_INFO":var p=e.info.toolkitVersions,m=e.info.coverageVersions,v=e.info.teamViewers;return(0,g.default)({},t,{toolkitVersions:p,coverageVersions:m,teamViewers:v});case"SET_PROJECT_TEAM_VIEWERS":var y=e.teamViewers;return(0,g.default)({},t,{teamViewers:y});case"CLEAR_USER_PROJECTS":return{structure:t.structure};case"EDITED_PROJECT_UPDATE":return(0,g.default)({},t,{editedProject:(0,g.default)({},t.editedProject,e.update)});case"EDITED_PROJECT_RESET":return(0,g.default)({},t,{editedProject:{}});default:return t}};var v=E(n("./src/plugins/axios.js")),y=E(n("./node_modules/lodash/forOwn.js")),b=E(n("./node_modules/lodash/isEmpty.js")),w=E(n("./node_modules/lodash/isEqual.js")),x=n("./src/store/static_data/project_definition.js"),_=M(n("./src/store/modules/countries.js")),C=M(n("./src/store/modules/user.js")),k=M(n("./src/store/modules/toolkit.js")),T=n("./node_modules/reselect/lib/index.js"),A=n("./src/store/project_utils.js"),j=M(n("./src/store/modules/system.js"));function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}e.isMemberOrViewer=function(t,e){var n=C.getProfile(t);if(n&&n.member&&n.viewer){var r=n.member.indexOf(e.id)>-1,o=!r&&n.viewer.indexOf(e.id)>-1;return{isMember:r,isViewer:o,isTeam:r||o}}return{isMember:!1,isViewer:!1,isTeam:!1}},e.getCurrentProjectId=function(t){return t.projects.currentProject},e.getSavedProjectList=(0,T.createSelector)(function(t){return t.projects.list},function(t){return e.getVanillaProject(t)},function(t,e){if(t)return t.filter(function(t){return-1!==t.id}).map(function(t){return(0,g.default)({},t,{draft:(0,g.default)({},e,{donors:[],implementing_partners:[]},t.draft)})})}),e.getPublishedProjects=function(t){return t.projects.list?e.getSavedProjectList(t).map(function(n){return n=(0,g.default)({},n.published,e.isMemberOrViewer(t,n))}):[]},e.getDraftedProjects=function(t){return t.projects.list?e.getSavedProjectList(t).map(function(n){return n=(0,g.default)({},n.draft,e.isMemberOrViewer(t,n))}):[]},e.getFlatProjectStructure=function(t){var e=t.projects.structure;if(e){var n=[];e.strategies.forEach(function(t){t.subGroups.forEach(function(t){n=[].concat((0,f.default)(n),(0,f.default)(t.strategies.map(function(t){return(0,g.default)({},t)})))})});var r=[];e.health_focus_areas.forEach(function(t){r=[].concat((0,f.default)(r),(0,f.default)(t.health_focus_areas))});var o=[];return e.hsc_challenges.forEach(function(t){o=[].concat((0,f.default)(o),(0,f.default)(t.challenges))}),(0,g.default)({},e,{strategies:n,health_focus_areas:r,hsc_challenges:o})}return{}},e.getProjectStructure=(0,T.createSelector)(function(t){return t.projects.structure},function(t){return(0,g.default)({},t)}),e.getUserProjects=function(t){var n=e.getFlatProjectStructure(t);return t.projects.list?e.getSavedProjectList(t).map(function(r){var o=r.public_id,i=!!o;r=i?(0,g.default)({},r.published):(0,g.default)({},r.draft);var a=_.getCountry(t,r.country);return r=(0,g.default)({},r,e.isMemberOrViewer(t,r),{isPublished:i,public_id:o,country_name:a?a.name:""},(0,A.convertIdArrayToObjectArray)(r,n,A.dashFieldConvertToObject))}):[]},e.getUserDefaultProject=function(t){var e=t&&t.projects?t.projects.list:null;return e&&e[0]&&-1!==e[0].id?""+e[0].id:null},e.getEmptyProject=function(){return(0,g.default)({},x.project_definition)},e.getVanillaProject=function(t){var n=e.getEmptyProject(),r=e.getProjectStructure(t),o=C.getProfile(t);return o&&(n.country=o.country?o.country.id:null,n.organisation=o.organisation?o.organisation:null),r&&(n.interoperability_links=r.interoperability_links),(0,g.default)({},n)},e.getCurrentProjectIfExist=function(t){return e.getUserProjects(t).find(function(e){return e.id===t.projects.currentProject})},e.getCurrentProject=function(t){var n=e.getCurrentProjectIfExist(t);return n||(n=e.getCurrentPublicProject(t))||(n=e.getVanillaProject(t)),(0,g.default)({},n)},e.getCurrentPublicProject=function(t){var e=t.projects.currentPublicProject?t.projects.currentPublicProject:{};if(e&&e.id&&(e=e.published&&e.published.name?e.published:e.draft),null===e)return null;var n=e.country?_.getCountry(t,e.country):void 0;return(0,g.default)({},e,{country_name:n?n.name:e.country_name,isPublic:!0})},e.getCurrentPublicProjectDetails=function(t,n){var r=n?e.getCurrentDraft(t):e.getCurrentPublished(t),o=n?"draft":"published";return r||((r=t.projects.currentPublicProject?t.projects.currentPublicProject[o]:void 0)?(r.hasPublishedVersion=!(!t.projects.currentPublicProject.published||!t.projects.currentPublicProject.published.name),r.disableDraft=!t.projects.currentPublicProject.draft,e.parseProjectForViewMode(t,r)):(0,g.default)({},e.getVanillaProject(t)))},e.convertCountryFieldsAnswer=function(t){return t.map(function(t){switch((t=(0,g.default)({},t)).type){case 2:t.answer=parseInt(t.answer,10);break;case 3:t.answer="true"===t.answer;break;case 5:t.answer=JSON.parse(t.answer)}return t})},e.parseProjectForViewMode=function(t,n){var r=e.getEmptyProject(),o=e.getFlatProjectStructure(t),i=_.getCountry(t,n.country);return n=(0,g.default)({},r,n),n=(0,g.default)({},n,{country_name:i?i.name:""},(0,A.convertIdArrayToObjectArray)(n,o,A.dashFieldConvertToObject),{coverageType:(0,A.setCoverageType)(n.coverage,n.national_level_deployment),coverage_second_level:n.coverage_second_level?n.coverage_second_level:[{}],coverage:n.coverage?n.coverage:[{}]}),(0,g.default)({},n,(0,A.convertIdArrayToObjectArray)(n,o,[{key:"platforms.strategies",structure_key:"strategies"}]),{hasPublishedVersion:void 0===n.hasPublishedVersion||n.hasPublishedVersion})},e.getCurrentPublished=function(t){var n=e.getPublishedProjects(t).find(function(e){return e.id===t.projects.currentProject});if(n)return e.parseProjectForViewMode(t,n)},e.getCurrentDraft=function(t){var n=e.getDraftedProjects(t).find(function(e){return e.id===t.projects.currentProject});if(n)return(0,g.default)({},n,{hasPublishedVersion:!!e.getPublishedProjects(t).find(function(e){return e.id===t.projects.currentProject})})},e.getCurrentDraftInViewMode=function(t){var n=e.getCurrentDraft(t);if(n)return e.parseProjectForViewMode(t,n)},e.getStoredCountryFields=function(t){return function(n){var r=n?e.getCurrentDraft(t):e.getCurrentPublished(t);if(void 0===r){var o=t.projects.list.find(function(t){return-1===t.id});o&&(r=o.draft)}return r?r.fields:[]}},e.getProjectCountryFields=function(t){return function(n){var r=_.getCountryFields(t),o=e.convertCountryFieldsAnswer(e.getStoredCountryFields(t)(n)),i=r.map(function(t){var e=o.find(function(e){return e.schema_id===t.id});return(0,g.default)({},t,{answer:e?e.answer:t.answer})});return[].concat((0,f.default)(i))}},e.getCurrentProjectForEditing=function(t,n){var r=e.getFlatProjectStructure(t);return n||(n=e.getVanillaProject(t)),n.start_date=(0,A.convertDate)(n.start_date),n.implementation_dates=(0,A.convertDate)(n.implementation_dates),n.end_date=(0,A.convertDate)(n.end_date),n=(0,A.convertStringArrayToObjectArray)(n),n=(0,A.fillEmptyCollectionsWithDefault)(n),"object"!==(0,m.default)(n.organisation)&&(n.organisation={id:n.organisation,name:n.organisation_name}),(n=(0,g.default)({},n,e.isMemberOrViewer(t,n),(0,A.convertIdArrayToObjectArray)(n,r,A.fieldToConvertToObject),(0,A.handleInteroperabilityLinks)(n,r))).forceSetCoverage?n.forceSetCoverage=void 0:n.coverageType=(0,A.setCoverageType)(n.coverage,n.national_level_deployment),(0,g.default)({},x.project_definition,n)},e.getCurrentPublishedProjectForEditing=function(t){var n=e.getPublishedProjects(t).find(function(e){return e.id===t.projects.currentProject});if(n)return e.getCurrentProjectForEditing(t,n)},e.getCurrentEdits=function(t){var e=t.projects.editedProject;return(0,g.default)({},e,{forceSetCoverage:!!e.coverageType})},e.getCurrentDraftProjectForEditing=function(t){var n=(0,g.default)({},e.getCurrentDraft(t),e.getCurrentEdits(t));return e.getCurrentProjectForEditing(t,n)},e.getNewProjectForEditing=function(t){var n=e.getVanillaProject(t);return(0,g.default)({},n,e.getCurrentEdits(t))},e.getTeam=function(t){return t.projects.teamViewers?t.projects.teamViewers.team.map(function(e){return t.system.profiles.find(function(t){return t.id===e})}):[]},e.getViewers=function(t){return t.projects.teamViewers?t.projects.teamViewers.viewers.map(function(e){return t.system.profiles.find(function(t){return t.id===e})}):[]},e.getToolkitVersion=function(t){var e=t.projects.toolkitVersions;return e?e.slice():[]},e.getCoverageVersion=function(t){var e=t.projects.coverageVersions;return e?e.slice():[]},e.getCurrentVersion=function(t){return e.getToolkitVersion(t).length},e.getCurrentVersionDate=function(t){var n=e.getToolkitVersion(t).slice(-1)[0];return n?n.modified:null},e.getMapsAxisData=function(t){var n={labels:j.getAxis(t).map(function(t){return t.name}),data:[]},r=e.getToolkitVersion(t),o=k.getToolkitData(t),i=(0,A.getTodayString)();if(r.length>0&&(n.data=r.map(function(t){return{date:t.modified.split("T")[0],axis1:t.data[0].axis_score/100,axis2:t.data[1].axis_score/100,axis3:t.data[2].axis_score/100,axis4:t.data[3].axis_score/100,axis5:t.data[4].axis_score/100,axis6:t.data[5].axis_score/100}})),6===o.length){var a={axis1:o[0].axis_score/100,axis2:o[1].axis_score/100,axis3:o[2].axis_score/100,axis4:o[3].axis_score/100,axis5:o[4].axis_score/100,axis6:o[5].axis_score/100,date:i};n.data.push(a)}return n},e.getMapsDomainData=function(t){var n=j.getDomains(t),r=j.getAxis(t),o={labels:r.map(function(t){return t.name})},i=e.getToolkitVersion(t),a=k.getToolkitData(t),s=(0,A.getTodayString)();return r.forEach(function(t,e){if(o[t.name]={labels:n.filter(function(e){return e.axis===t.id}).map(function(t){return t.name}),data:[]},i.length>0&&(o[t.name].data=i.map(function(t){var n={};return n.date=t.modified.split("T")[0],t.data[e].domains.forEach(function(t,e){n["axis"+(e+1)]=t.domain_percentage/100}),n})),a.length>0){var r={date:s};a[e].domains.forEach(function(t,e){r["axis"+(e+1)]=t.domain_percentage/100}),o[t.name].data.push(r)}}),o},e.getCoverageData=function(t){var n=e.getCoverageVersion(t),r=e.getCurrentProject(t),o=r.coverage?r.coverage.slice():[];o.push((0,p.default)({},r.national_level_deployment)),n.push({data:o});var i=(0,A.getTodayString)();return n.reduce(function(t,e,n){return t.data[n]={},t.data[n].date=e.modified?e.modified.split("T")[0]:i,e.data.forEach(function(e){(0,y.default)(e,function(e,r){var o=["clients","facilities","health_workers"].indexOf(r);if(o>-1){var i="axis"+(o+1);t.data[n][i]=(t.data[n][i]||0)+e}})}),t},{labels:[],data:[]})},e.getSimilarProject=function(t){var n=e.getPublishedProjects(t);return t.projects.similarProjectNames?t.projects.similarProjectNames.map(function(t){return(t=(0,p.default)({},t)).isOwn=n.some(function(e){return e.id===t.id}),t}):[]},e.checkCurrentProjectValidity=function(t){var e=t.projects.currentPublicProject;return e&&""===e.public_id&&null===e.draft?{isValid:!1,id:e.id}:{isValid:!0}}},"./src/store/modules/system.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addOrganisation=e.searchOrganisation=e.getSubLevelTypes=e.getDomainsForThematic=e.getThematicOverview=e.getQuestions=e.getDomains=e.getAxis=e.getLandingPageDefaults=e.getSearchFilters=e.getLanguages=e.getSearchResult=e.getUserProfiles=void 0;var r,o,i=p(n("./node_modules/babel-runtime/regenerator/index.js")),a=p(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),s=p(n("./node_modules/babel-runtime/helpers/toConsumableArray.js")),l=p(n("./node_modules/babel-runtime/helpers/extends.js"));e.searchOrganisation=(r=(0,a.default)(i.default.mark(function t(e){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.get("/api/organisations/?name="+e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)}),e.addOrganisation=(o=(0,a.default)(i.default.mark(function t(e){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.post("/api/organisations/",{name:e});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)});e.loadUserProfiles=function(){var t=this;return e=(0,a.default)(i.default.mark(function e(n){var r,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.get("/api/userprofiles/");case 2:r=t.sent,o=r.data,n({type:"SET_USER_PROFILES",profiles:o});case 5:case"end":return t.stop()}},e,t)})),function(t){return e.apply(this,arguments)};var e},e.loadStaticData=function(){var t=this;return e=(0,a.default)(i.default.mark(function e(n){var r,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.get("/api/static-data/");case 2:r=t.sent,o=r.data,n({type:"SET_AXIS",axis:o.axis}),n({type:"SET_DOMAINS",domains:o.domains}),n({type:"SET_LANDING_PAGE_DEFAULTS",landing_page_defaults:o.landing_page_defaults}),n({type:"SET_LANGUAGES",languages:o.languages}),n({type:"SET_SEARCH_FILTERS",search_filters:o.search_filters}),n({type:"SET_THEMATIC_OVERVIEW",thematic_overview:o.thematic_overview}),n({type:"SET_TOOLKIT_QUESTIONS",toolkit_questions:o.toolkit_questions}),n({type:"SET_SUB_LEVEL_TYPES",sub_level_types:o.sub_level_types});case 12:case"end":return t.stop()}},e,t)})),function(t){return e.apply(this,arguments)};var e},e.searchProjects=function(t,e){var n=this;return r=(0,a.default)(i.default.mark(function r(o){var a,s,l,u,d;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(s in a={query:t},e)l=e[s],a[l.name]=l.value;return n.next=4,c.default.post("/api/search/projects/",a);case 4:u=n.sent,d=u.data,o({type:"SET_PROJECT_SEARCH_RESULT",projects:d});case 7:case"end":return n.stop()}},r,n)})),function(t){return r.apply(this,arguments)};var r},e.unsetSearchedProjects=function(){return function(t){t({type:"UNSET_PROJECT_SEARCH_RESULT"})}},e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments[1];switch(e.type){case"SET_USER_PROFILES":return(0,l.default)({},t,{profiles:e.profiles});case"SET_PROJECT_SEARCH_RESULT":return(0,l.default)({},t,{projectSearch:e.projects});case"UNSET_PROJECT_SEARCH_RESULT":return(0,l.default)({},t,{projectSearch:[]});case"SET_AXIS":return(0,l.default)({},t,{axis:e.axis});case"SET_DOMAINS":return(0,l.default)({},t,{domains:e.domains});case"SET_LANDING_PAGE_DEFAULTS":return(0,l.default)({},t,{landing_page_defaults:e.landing_page_defaults});case"SET_LANGUAGES":return(0,l.default)({},t,{languages:e.languages});case"SET_SEARCH_FILTERS":return(0,l.default)({},t,{search_filters:e.search_filters});case"SET_THEMATIC_OVERVIEW":return(0,l.default)({},t,{thematic_overview:e.thematic_overview});case"SET_TOOLKIT_QUESTIONS":return(0,l.default)({},t,{toolkit_questions:e.toolkit_questions});case"SET_SUB_LEVEL_TYPES":return(0,l.default)({},t,{sub_level_types:e.sub_level_types});default:return t}};var c=p(n("./src/plugins/axios.js")),u=h(n("./src/store/modules/projects.js")),d=h(n("./src/store/modules/countries.js"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m={profiles:[],search_filters:[],languages:[],projectSearch:[],thematic_overview:[],axis:[],domains:[],landing_page_defaults:{},toolkit_questions:[],sub_level_types:[]};e.getUserProfiles=function(t){return t.system.profiles?t.system.profiles.slice():[]},e.getSearchResult=function(t){return(t.system.projectSearch?t.system.projectSearch:[]).map(function(e){var n=d.getCountry(t,e.country);return(0,l.default)({},e,u.isMemberOrViewer(t,e),{country_name:n?n.name:""})})},e.getLanguages=function(t){return t.system.languages.map(function(t){return(0,l.default)({},t,{flag:"/static/flags/"+t.flag})})},e.getSearchFilters=function(t){return[].concat((0,s.default)(t.system.search_filters))},e.getLandingPageDefaults=function(t){return(0,l.default)({},t.system.landing_page_defaults)},e.getAxis=function(t){return[].concat((0,s.default)(t.system.axis))},e.getDomains=function(t){return[].concat((0,s.default)(t.system.domains))},e.getQuestions=function(t){return[].concat((0,s.default)(t.system.toolkit_questions))},e.getThematicOverview=function(t){var e=t.system.thematic_overview;return e.categories.map(function(t){return(0,l.default)({},t,{domains:e.sub_categories.filter(function(e){return e.category===t.id})})})},e.getDomainsForThematic=function(t){var n=e.getAxis(t),r=e.getDomains(t),o=e.getThematicOverview(t);return[].concat((0,s.default)(o.map(function(t){return{name:t.name,domains:t.domains}})),(0,s.default)(n.map(function(t){return{name:t.name,domains:r.filter(function(e){return e.axis===t.id}).map(function(t){return{name:t.name}})}})))},e.getSubLevelTypes=function(t){return[].concat((0,s.default)(t.system.sub_level_types.map(function(t){return(0,l.default)({},t)})))}},"./src/store/modules/toolkit.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getAxisDetail=e.getDomainStructure=e.getStructure=e.getToolkitData=void 0;var r=u(n("./node_modules/babel-runtime/regenerator/index.js")),o=u(n("./node_modules/babel-runtime/core-js/promise.js")),i=u(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),a=u(n("./node_modules/babel-runtime/helpers/extends.js"));e.loadToolkitData=h,e.saveAnswer=function(t){var e=this;return n=(0,i.default)(r.default.mark(function n(i,a){var s,c,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(s=a().projects.currentProject)){e.next=9;break}return e.next=5,l.default.post("/api/projects/"+s+"/toolkit/score/",t);case 5:c=e.sent,u=c.data,i({type:"UPDATE_TOOLKIT_DATA",data:u}),i(h());case 9:return e.abrupt("return",o.default.resolve());case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",o.default.reject(e.t0));case 16:case"end":return e.stop()}},n,e,[[0,12]])})),function(t,e){return n.apply(this,arguments)};var n},e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments[1];switch(e.type){case"SET_TOOLKIT_DATA":return(0,a.default)({},t,{toolkitData:e.data});case"UPDATE_TOOLKIT_DATA":var n=e.data,r=(0,s.default)(t.toolkitData);return r[n.axis].domains[n.domain].questions[n.question].answers[n.answer]=n.value,(0,a.default)({},t,{toolkitData:r});case"CLEAR_TOOLKIT_DATA":return(0,a.default)({},d);default:return t}};var s=u(n("./node_modules/lodash/cloneDeep.js")),l=u(n("./src/plugins/axios.js")),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("./src/store/modules/system.js"));function u(t){return t&&t.__esModule?t:{default:t}}var d={toolkitData:[]};e.getToolkitData=function(t){var e=t.toolkit.toolkitData;return e?(0,s.default)(e):[]},e.getStructure=function(t){var e=c.getAxis(t),n=c.getDomains(t),r=c.getQuestions(t);return e.map(function(t){return(0,a.default)({},t,{domains:n.filter(function(e){return e.axis===t.id}).map(function(t){return(0,a.default)({},t,{questions:r.filter(function(e){return e.domain===t.id}).map(function(t){return(0,a.default)({},t,{id:t.domain+"-"+t.question_id})})})})})})},e.getDomainStructure=function(t,n,r){var o=e.getStructure(t);return o&&o[n]&&o[n].domains[r]?o[n].domains[r]:{}},e.getAxisDetail=function(t,n){var r=c.getAxis(t).find(function(t){return t.id===n}),o=c.getDomains(t),i=e.getToolkitData(t).find(function(t){return t.id===n}),s=i?i.domains.map(function(t,e){return(0,a.default)({},t,o.find(function(e){return e.id===t.id}),{index:e})}):[];return(0,a.default)({},r,i,{domains:s})};function h(){var t,e=this;return t=(0,i.default)(r.default.mark(function t(n,i){var a,s,c;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(a=i().projects.currentProject)){t.next=8;break}return t.next=5,l.default.get("/api/projects/"+a+"/toolkit/data/");case 5:s=t.sent,c=s.data,n({type:"SET_TOOLKIT_DATA",data:c});case 8:return t.abrupt("return",o.default.resolve());case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",o.default.reject(t.t0));case 14:case"end":return t.stop()}},t,e,[[0,11]])})),function(e,n){return t.apply(this,arguments)}}},"./src/store/modules/user.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetPassword=e.verifyEmail=e.handleProfile=e.storeData=e.isSuperUser=e.getUserLanguage=e.getProfile=void 0;var r,o,i=y(n("./node_modules/babel-runtime/core-js/object/assign.js")),a=y(n("./node_modules/babel-runtime/core-js/promise.js")),s=y(n("./node_modules/babel-runtime/regenerator/index.js")),l=y(n("./node_modules/babel-runtime/helpers/asyncToGenerator.js")),c=y(n("./node_modules/babel-runtime/helpers/extends.js"));e.verifyEmail=(r=(0,l.default)(s.default.mark(function t(e){var n,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.post("/api/rest-auth/registration/verify-email/",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)}),e.resetPassword=(o=(0,l.default)(s.default.mark(function t(e){var n,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.post("/api/rest-auth/password/reset/",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)});e.loadProfile=function(){var t=this;return n=(0,l.default)(s.default.mark(function n(r,o){var i,a,l,c;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=o(),!b.get("login")||i.user.profile){t.next=10;break}return a=i.user.user_profile_id||b.get("user_profile_id"),t.next=5,u.default.get("/api/userprofiles/"+a+"/");case 5:l=t.sent,c=l.data,c=e.handleProfile(c),(0,g.setLanguage)(c.language),r({type:"SET_PROFILE",profile:c});case 10:case"end":return t.stop()}},n,t)})),function(t,e){return n.apply(this,arguments)};var n},e.doSignup=function(t){var n=this,r=t.account_type,o=t.password1,i=t.password2,c=t.email;return d=(0,l.default)(s.default.mark(function t(l){var d,h,p;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.post("/api/rest-auth/registration/",{account_type:r,password1:o,password2:i,email:c});case 3:return d=t.sent,(h=d.data).token=h.key,h.is_superuser=!1,e.storeData(h,c),l({type:"SET_USER",user:h}),t.next=11,l(e.loadProfile());case 11:return t.abrupt("return",a.default.resolve());case 14:return t.prev=14,t.t0=t.catch(0),p=t.t0.response,t.abrupt("return",a.default.reject(p.data));case 18:case"end":return t.stop()}},t,n,[[0,14]])})),function(t){return d.apply(this,arguments)};var d},e.doLogin=function(t){var n=this,r=t.username,o=t.password;return i=(0,l.default)(s.default.mark(function t(i){var l,c,d;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.post("/api/api-token-auth/",{username:r,password:o});case 3:return l=t.sent,c=l.data,e.storeData(c,r),i({type:"SET_USER",user:c}),t.next=9,i(e.loadProfile());case 9:return t.next=11,i(p.loadUserProjects());case 11:return t.abrupt("return",a.default.resolve());case 14:return t.prev=14,t.t0=t.catch(0),d=t.t0.response,t.abrupt("return",a.default.reject(d.data));case 18:case"end":return t.stop()}},t,n,[[0,14]])})),function(t){return i.apply(this,arguments)};var i},e.saveProfile=function(t){var n=this;return r=(0,l.default)(s.default.mark(function r(o,a){var l,c,d,h,f,v,y;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=a(),c=l.user.user_profile_id||b.get("user_profile_id"),d=c?"/api/userprofiles/"+c+"/":"/api/userprofiles/",h=c?"put":"post",(f=(0,i.default)({},t)).organisation=f.organisation.id,f.country=f.country.id,n.next=9,u.default[h](d,f);case 9:v=n.sent,y=v.data,y=e.handleProfile(y),(0,g.setLanguage)(y.language),o({type:"SET_PROFILE",profile:y}),o(m.loadStaticData()),o(p.loadProjectStructure(!0));case 16:case"end":return n.stop()}},r,n)})),function(t,e){return r.apply(this,arguments)};var r},e.doLogout=function(){return function(t){b.clear(),u.default.unSetAuthToken();try{t({type:"CLEAR_USER_PROJECTS"}),t({type:"CLEAR_TOOLKIT_DATA"}),t({type:"CLEAR_CMS_DATA"})}catch(t){console.warn(t)}try{t({type:"UNSET_USER"})}catch(t){console.warn(t)}}},e.updateTeamViewers=function(t,e){return function(n,r){var o=r().user.profile.member,i=r().user.profile.viewer,a=(0,d.default)(o,t),s=(0,d.default)(i,e);a.length===o.length&&s.length===i.length||n({type:"UPDATE_TEAM_VIEWER",member:a,viewer:s})}},e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case"SET_USER":return(0,c.default)({},t,e.user);case"SET_PROFILE":var n=t.profile?(0,c.default)({},t.profile,e.profile):(0,c.default)({},e.profile);return(0,c.default)({},t,{profile:n});case"UPDATE_TEAM_VIEWER":var r=t.profile||{};return r.member=e.member,r.viewer=e.viewer,(0,c.default)({},t,{profile:r});case"UNSET_USER":return{};default:return t}};var u=y(n("./src/plugins/axios.js")),d=y(n("./node_modules/lodash/union.js")),h=y(n("./src/Storage.js")),p=v(n("./src/store/modules/projects.js")),m=v(n("./src/store/modules/system.js")),f=v(n("./src/store/modules/countries.js")),g=n("./src/plugins/language.js");function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var b=new h.default;e.getProfile=function(t){if(t.user.profile){var e=f.getCountriesList(t),n=void 0;return e&&e.length>0&&(n=(0,c.default)({},e.find(function(e){return e.id===t.user.profile.country}))),(0,c.default)({},t.user.profile,{country:n})}},e.getUserLanguage=function(t){var e=m.getLanguages(t),n=t&&t.user&&t.user.profile?t.user.profile.language:void 0;return e.find(function(t){return t.code===n})},e.isSuperUser=function(t){return t.user.profile.is_superuser},e.storeData=function(t,e){b.set("token",t.token),b.set("user_profile_id",t.user_profile_id),b.set("is_superuser",t.is_superuser),b.set("email",e),b.set("login",!0),u.default.setAuthToken(t.token)},e.handleProfile=function(t){return t.email=b.get("email"),t.is_superuser=b.get("is_superuser"),t.organisation?(t.organisation_id=t.organisation,t.organisation={name:t.organisation_name||"",id:t.organisation_id}):t.organisation=null,t}},"./src/store/project_utils.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTodayString=e.dashFieldConvertToObject=e.fieldToConvertToObject=e.fieldToForceToInt=e.fieldsToMapWithId=e.fieldsToConvertToObjectArray=e.fieldsWithCustomValue=void 0;var r=m(n("./node_modules/babel-runtime/core-js/number/is-nan.js")),o=m(n("./node_modules/babel-runtime/core-js/object/keys.js")),i=m(n("./node_modules/babel-runtime/core-js/object/assign.js")),a=m(n("./node_modules/babel-runtime/helpers/extends.js"));e.concatCustom=b,e.mergeCustomAndDefault=function(t){var e={};return f.forEach(function(n){e[n]=b(t[n])}),(0,a.default)({},e)},e.parsePlatformCollection=function(t){return t.platforms.map(function(t){var e=t.id,n=t.strategies&&t.strategies.length>0?t.strategies:[];return t={},e&&(t.id=e),n&&(t.strategies=n.map(function(t){return t.id}).filter(function(t){return t})),e?t:void 0})},e.convertDate=function(t){if(t)return(0,p.default)(t,"YYYY-MM-DDTHH:mm:ss.SSSZ").toDate();return},e.convertStringArrayToObjectArray=function(t){return g.forEach(function(e){t[e]&&(t[e]=t[e].map(function(t){return"string"==typeof t?{value:t}:t}),0===t[e].length&&t[e].push({}))}),(0,i.default)({},t)},e.convertObjectArrayToStringArray=function(t){var e={};return g.forEach(function(n){t[n]&&(e[n]=t[n].map(function(t){return t.value}).filter(function(t){return t}))}),(0,a.default)({},e)},e.fillEmptyCollectionsWithDefault=function(t){return t.coverage=(0,u.default)(t.coverage)?[{}]:t.coverage,t.coverage_second_level=(0,u.default)(t.coverage_second_level)?[{}]:t.coverage_second_level,t.platforms=(0,u.default)(t.platforms)?[{}]:t.platforms,(0,a.default)({},t)},e.setCoverageType=function(t,e){var n=null;e&&(e.clients||e.facilities||e.health_workers)?n=2:t&&t.length>1?n=1:t&&Array.isArray(t)&&t[0]&&t[0].district&&(n=1);return n},e.createDateFields=function(t){var e=t.start_date?(0,p.default)(t.start_date).toJSON():null,n=t.end_date?(0,p.default)(t.end_date).toJSON():null,r=t.implementation_dates?(0,p.default)(t.implementation_dates).toJSON():null;return{start_date:e,end_date:n,implementation_dates:r}},e.deleteUndefinedAndDoubleDollarKeys=w,e.removeEmptyChildObjects=function(t){var e={};return["coverage","platforms","his_bucket","hsc_challenges","publications","links","reports"].forEach(function(n){t[n]&&(e[n]=t[n].filter(function(t){return"number"==typeof t||((t=w(t=(0,a.default)({},t))).hasOwnProperty("available")&&delete t.available,(0,o.default)(t).length>0)}))}),(0,a.default)({},e)},e.removeKeysWithoutValues=function(t){var e={};for(var n in t){var r=t[n];(null!==r&&void 0!==r&&""!==r||(0,l.default)(r)&&(0,h.default)(r).some(function(t){return!(0,c.default)(t)}))&&(e[n]=r)}return e},e.retainNationalOrDistrictCoverage=function(t){var e=null,n=null;1===t.coverageType?n=t.coverage.map(function(t){return(0,a.default)({},t)}):e=(0,a.default)({},t.national_level_deployment);return{national_level_deployment:e,coverage:n}},e.extractIdFromObjects=function(t){var e={};return v.forEach(function(n){e[n]=t[n].map(function(t){return t.id}).filter(function(t){return t})}),e},e.parseOutInteroperabilityLinks=function(t){return{interoperability_links:t.interoperability_links.filter(function(t){return t&&t.id}).map(function(t){return{id:t.id,link:t.link,selected:t.selected}})}},e.convertIdArrayToObjectArray=function(t,e,n){var r={};return n.forEach(function(n){var o=n.structure_key;if(2===(n=n.key.split(".")).length){var i=n[0];n=n[1],r[i]=t[i].map(function(t){return(t=(0,a.default)({},t))[n]&&(t[n]=x(t[n],e,n,o)),t})}else 1===n.length&&(n=n[0],r[n]=x(t[n],e,n,o))}),r},e.handleInteroperabilityLinks=function(t,e){return{interoperability_links:e.interoperability_links.map(function(e){var n=t.interoperability_links.find(function(t){return t.id===e.id}),r=n||{},o=r.selected,i=r.link;return(0,a.default)({},e,{selected:o,link:i})})}},e.retainOnlyIds=function(t){var e={};return y.forEach(function(n){e[n]=t[n].filter(function(t){return!(0,r.default)(parseInt(t,10))})}),e},e.handleNationalLevelCoverage=function(t){var e=t.national_level_deployment;return{national_level_deployment:_((0,a.default)({},e))}},e.handleCoverage=function(t){return(t=t||[]).map(function(t){return _(t)}).filter(function(t){return t})};var s=m(n("./node_modules/lodash/concat.js")),l=m(n("./node_modules/lodash/isPlainObject.js")),c=m(n("./node_modules/lodash/isNull.js")),u=m(n("./node_modules/lodash/isEmpty.js")),d=m(n("./node_modules/lodash/isNil.js")),h=m(n("./node_modules/lodash/values.js")),p=m(n("./node_modules/moment/moment.js"));function m(t){return t&&t.__esModule?t:{default:t}}var f=e.fieldsWithCustomValue=["interoperability_standards","licenses"],g=e.fieldsToConvertToObjectArray=["donors","implementing_partners"],v=e.fieldsToMapWithId=["health_focus_areas"],y=e.fieldToForceToInt=["his_bucket","hsc_challenges"];e.fieldToConvertToObject=[{key:"platforms.strategies",structure_key:"strategies"},{key:"health_focus_areas",structure_key:"health_focus_areas"}],e.dashFieldConvertToObject=[{key:"health_focus_areas",structure_key:"health_focus_areas"},{key:"platforms",structure_key:"technology_platforms"},{key:"licenses",structure_key:"licenses"},{key:"hsc_challenges",structure_key:"hsc_challenges"},{key:"his_bucket",structure_key:"his_bucket"},{key:"interoperability_standards",structure_key:"interoperability_standards"}],e.getTodayString=function(){var t=new Date;return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")};function b(t){return(0,s.default)(t.custom,t.standard).filter(function(t){return!(0,d.default)(t)&&!(0,u.default)(t)})}function w(t){var e={};return(0,o.default)(t).forEach(function(n){void 0!==t[n]&&"$$hashKey"!==n&&(e[n]=t[n])}),e}function x(t,e,n,o){return t.map(function(t){return!(0,r.default)(parseInt(t,10))?e[o].find(function(e){return e.id===t}):(0,a.default)({},t,e[o].find(function(e){return e.id===t.id}))}).filter(function(t){return t})}function _(t){if(t={district:t.district,clients:t.clients,health_workers:t.health_workers,facilities:t.facilities,facilities_list:t.facilities_list},!((0,d.default)(t.clients)&&(0,d.default)(t.health_workers)&&(0,d.default)(t.facilities)))return t.clients=(0,d.default)(t.clients)?0:t.clients,t.health_workers=(0,d.default)(t.health_workers)?0:t.health_workers,t.facilities=(0,d.default)(t.facilities)?0:t.facilities,t}},"./src/store/static_data/project_definition.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.project_definition={name:null,organisation:{id:void 0,name:""},country:null,countryName:null,coverage:[{}],coverage_second_level:[{}],coverageType:1,start_date:void 0,end_date:void 0,platforms:[{name:null,strategies:[]}],licenses:[],fields:[],donors:[{}],application:[],reports:[{}],publications:[{}],links:[{}],contact_name:null,contact_email:null,implementation_overview:null,implementation_dates:null,geographic_scope:null,interoperability_links:[],interoperability_standards:[],wiki:"",repository:"",mobile_application:"",implementing_partners:[{}],data_exchanges:[],his_bucket:[],hsc_challenges:[],health_focus_areas:[],government_investor:void 0}},"./src/webpackRequires.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.loadHtmlTemplates=function(){return n("./src/MapsToolkit/Resource/template sync recursive \\.html$")},e.loadScorecardImages=function(){return n("./src/MapsToolkit/Scorecard/images sync recursive \\.svg$")},e.loadSkeletonImages=function(){return n("./src/Common/Thematic/images sync recursive \\.svg$")},e.loadSkeletonStatic=function(){return n("./src/Common/Thematic/static sync recursive \\.html$")}}}]);