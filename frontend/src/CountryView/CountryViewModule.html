
<div id="clv-container" layout="column">

    <md-card md-whiteframe="2" class="rel">
        <div class="littleheader">COUNTRY LEVEL VIEW</div>
        <md-tabs md-border-bottom md-dynamic-height md-center-tabs="true">


            <!-- COUNTRY VIEW -->
            <md-tab label="map view">

                <div class="tab-wrap" id="map" ng-class="{'emptyy': !vm.projectsData}">

                    <md-card md-whiteframe="2" class="countrychoser">
                        <md-input-container>
                            <md-select
                                    ng-model-options="{trackBy: '$value.id'}"
                                    placeholder='Select a country'
                                    ng-model="vm.selectedCountry"
                                    ng-change="vm.updateCountry(vm.selectedCountry)">

                                <md-option ng-repeat="country in vm.countries track by $index" ng-value="{{country}}">{{country.name}}</md-option>

                            </md-select>
                        </md-input-container>
                    </md-card>

                    <countrymap big="true"></countrymap>

                </div>

            </md-tab>


            <!-- LIST VIEW -->
            <md-tab label="list view">
                <div class="tab-wrap" id="list">

                    <div class="headercont" layout="row">

                        <md-card md-whiteframe="2" class="countrychoser">
                            <md-input-container>
                                <md-select
                                        ng-model-options="{trackBy: '$value.id'}"
                                        placeholder='Select a country'
                                        ng-model="vm.selectedCountry"
                                        ng-change="vm.updateCountry(vm.selectedCountry)">

                                    <md-option ng-repeat="country in vm.countries2 track by $index" ng-value="{{country}}">{{country.name}}</md-option>

                                </md-select>
                            </md-input-container>
                        </md-card>

                        <div class="starry" flex="20">
                            <md-icon>grade</md-icon>
                            Team member
                            <md-icon>visibility</md-icon>
                            Viewer
                        </div>
                    </div>

                    <md-content class="projectcont">

                        <div class="headerrow" layout="row" layout-padding md-whiteframe="2">
                            <div flex="25">Project name</div>
                            <div flex="20">Country</div>
                            <div flex="20">Organisation name</div>
                            <div flex="20">Donors</div>
                            <div flex="20">Point of Contact</div>
                            <div flex="30">Overview of digital health implementation</div>
                            <div flex="20">Implementing partners</div>
                            <div flex="20">Geographical coverage</div>
                            <div flex="20">mHealth interventions</div>
                        </div>

                        <div
                                class="projectrow"
                                layout="row"
                                layout-padding
                                ng-repeat="project in vm.projectsData track by $index"
                                ng-class="{'member': vm.isMember(project), 'viewer': vm.isViewer(project)}">

                            <div flex="25" ui-sref="dashboard({ appName: project.id })" class="projectlink">
                                <md-icon class="member" ng-show="vm.isMember(project)">grade</md-icon>
                                <md-icon class="viewer" ng-show="vm.isViewer(project)">visibility</md-icon>
                                {{project.name}}
                            </div>
                            <div flex="20" class="cap">
                                {{vm.countriesLib[project.country]}}
                            </div>
                            <div flex="20">{{project.organisation}}</div>
                            <div flex="20">
								<span ng-repeat="donor in project.donors">
									{{(donor.value || donor) + ' '}}
								</span>
                            </div>
                            <div flex="20">{{project.contact_name}}, <a ng-href="mailto:{{project.contact_email}}">{{project.contact_email}}</a></div>
                            <div flex="30">{{project.implementation_overview}}</div>
                            <div flex="20">{{project.implementing_partners}}</div>
                            <div flex="20">{{project.geographic_coverage}}</div>
                            <div flex="20">{{project.intervention_areas.join(', ')}}</div>

                        </div>
                        <div ng-if="!vm.projectsData.length" class="projectrow" layout="row" layout-padding>
                            <div flex>There is no project to show in this country.</div>
                        </div>
                    </md-content>

                </div>
            </md-tab>
        </md-tabs>
    </md-card>

    <disclaimer></disclaimer>
</div>

