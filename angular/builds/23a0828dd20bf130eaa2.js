(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[596],{

/***/ "./src/Storage.js":
/*!************************!*\
  !*** ./src/Storage.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SessionStorage = function () {\n    function SessionStorage() {\n        _classCallCheck(this, SessionStorage);\n\n        this.storage = window.localStorage;\n    }\n\n    _createClass(SessionStorage, [{\n        key: 'set',\n        value: function set(key, value) {\n\n            if (typeof key !== 'string') {\n                throw new TypeError('this.storage key should be a string!');\n            }\n\n            var val = typeof value === 'string' ? value : JSON.stringify(value);\n\n            this.storage.setItem(key, val);\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n            try {\n                return JSON.parse(this.storage.getItem(key));\n            } catch (e) {\n                return this.storage.getItem(key);\n            }\n        }\n    }, {\n        key: 'remove',\n        value: function remove(key) {\n            this.storage.removeItem(key);\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            this.storage.clear();\n        }\n\n        // DEBUG\n\n    }, {\n        key: 'check',\n        value: function check() {\n            console.log('this.storage contains:\\n');\n            var ret = {};\n            for (var key in this.storage) {\n                console.log(key + ': ' + this.storage.getItem(key));\n                ret[key] = this.storage.getItem(key);\n            }\n            return ret;\n        }\n    }]);\n\n    return SessionStorage;\n}();\n\nexports.default = SessionStorage;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RvcmFnZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvU3RvcmFnZS5qcz83NjdlIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFNlc3Npb25TdG9yYWdlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgIH1cblxuICAgIHNldChrZXksIHZhbHVlKSB7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aGlzLnN0b3JhZ2Uga2V5IHNob3VsZCBiZSBhIHN0cmluZyEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgdmFsdWUgOlxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsKTtcblxuICAgIH1cblxuICAgIGdldChrZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gREVCVUdcbiAgICBjaGVjaygpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuc3RvcmFnZSBjb250YWluczpcXG4nKTtcbiAgICAgICAgY29uc3QgcmV0ID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coa2V5ICsgJzogJyArIHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICAgICAgICAgICAgcmV0W2tleV0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZXNzaW9uU3RvcmFnZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Storage.js\n");

/***/ }),

/***/ "./src/plugins/axios.js":
/*!******************************!*\
  !*** ./src/plugins/axios.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar instance = _axios2.default.create();\n\ninstance.setAuthToken = function (token) {\n    instance.defaults.headers.common.Authorization = 'Token ' + token;\n};\ninstance.unSetAuthToken = function () {\n    instance.defaults.headers.common.Authorization = null;\n};\n\ninstance.setLanguageHeader = function (ln) {\n    instance.defaults.headers.common['Accept-Language'] = ln;\n};\n\ninstance.setShowPopUp = function (handler) {\n    instance.popUpFunction = handler;\n};\n\ninstance.setHandleAuthProblem = function (handler) {\n    instance.authProblemFunction = handler;\n};\n\ninstance.interceptors.request.use(function (config) {\n    return config;\n}, function (error) {\n    console.error(error);\n    instance.popUpFunction();\n    return Promise.reject(error);\n});\n\ninstance.interceptors.response.use(function (response) {\n    return response;\n}, function (error) {\n    if (error && error.response) {\n        if (error.response.status === 401 || error.response.status === 403) {\n            instance.authProblemFunction();\n        } else {\n            instance.popUpFunction();\n        }\n    }\n    return Promise.reject(error);\n});\n\nexports.default = instance;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2lucy9heGlvcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcGx1Z2lucy9heGlvcy5qcz9kZTkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKCk7XG5cbmluc3RhbmNlLnNldEF1dGhUb2tlbiA9ICh0b2tlbikgPT4ge1xuICAgIGluc3RhbmNlLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSBgVG9rZW4gJHt0b2tlbn1gO1xufTtcbmluc3RhbmNlLnVuU2V0QXV0aFRva2VuID0gKCkgPT4ge1xuICAgIGluc3RhbmNlLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSBudWxsO1xufTtcblxuaW5zdGFuY2Uuc2V0TGFuZ3VhZ2VIZWFkZXIgPSAobG4pID0+IHtcbiAgICBpbnN0YW5jZS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQWNjZXB0LUxhbmd1YWdlJ10gID0gbG47XG59O1xuXG5pbnN0YW5jZS5zZXRTaG93UG9wVXAgPSBoYW5kbGVyID0+IHtcbiAgICBpbnN0YW5jZS5wb3BVcEZ1bmN0aW9uID0gaGFuZGxlcjtcbn07XG5cbmluc3RhbmNlLnNldEhhbmRsZUF1dGhQcm9ibGVtID0gaGFuZGxlciA9PiB7XG4gICAgaW5zdGFuY2UuYXV0aFByb2JsZW1GdW5jdGlvbiA9IGhhbmRsZXI7XG59O1xuXG5pbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoY29uZmlnID0+IHtcbiAgICByZXR1cm4gY29uZmlnO1xufSwgZXJyb3IgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGluc3RhbmNlLnBvcFVwRnVuY3Rpb24oKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xufSk7XG5cbmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UocmVzcG9uc2UgPT4ge1xuICAgIHJldHVybiByZXNwb25zZTtcbn0sIGVycm9yID0+IHtcbiAgICBpZiAoZXJyb3IgJiYgZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxIHx8IGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSAge1xuICAgICAgICAgICAgaW5zdGFuY2UuYXV0aFByb2JsZW1GdW5jdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UucG9wVXBGdW5jdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/plugins/axios.js\n");

/***/ }),

/***/ "./src/plugins/language.js":
/*!*********************************!*\
  !*** ./src/plugins/language.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getCurrentLanguage = exports.setLanguage = exports.getLanguage = exports.configureDates = exports.setDateLocaleProvider = exports.setScope = exports.setCatalog = exports.config = undefined;\n\nvar _axios = __webpack_require__(/*! ./axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _moment = __webpack_require__(/*! moment */ \"./node_modules/moment/moment.js\");\n\nvar _moment2 = _interopRequireDefault(_moment);\n\n__webpack_require__(/*! moment/locale/fr */ \"./node_modules/moment/locale/fr.js\");\n\n__webpack_require__(/*! moment/locale/pt */ \"./node_modules/moment/locale/pt.js\");\n\n__webpack_require__(/*! moment/locale/es */ \"./node_modules/moment/locale/es.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar navigator = window.navigator;\nvar language = navigator.languages && navigator.languages[0] || navigator.language || navigator.userLanguage;\n\nvar config = exports.config = {\n    gettextCatalog: {},\n    language: language,\n    scope: {},\n    mdDateLocaleProvider: {}\n};\n\nvar setCatalog = exports.setCatalog = function setCatalog(catalog) {\n    config.gettextCatalog = catalog;\n};\n\nvar setScope = exports.setScope = function setScope(scope) {\n    config.scope = scope;\n};\n\nvar setDateLocaleProvider = exports.setDateLocaleProvider = function setDateLocaleProvider(provider) {\n    config.mdDateLocaleProvider = provider;\n};\n\nvar configureDates = exports.configureDates = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(ln) {\n        var localised;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _moment2.default.locale(ln);\n                        localised = (0, _moment2.default)();\n\n                        config.mdDateLocaleProvider.months = localised.localeData().months();\n                        config.mdDateLocaleProvider.shortMonths = localised.localeData().monthsShort();\n                        config.mdDateLocaleProvider.days = localised.localeData().weekdays();\n                        config.mdDateLocaleProvider.shortDays = localised.localeData().weekdaysShort();\n                        window.moment = localised;\n\n                    case 7:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, undefined);\n    }));\n\n    return function configureDates(_x) {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nvar getLanguage = exports.getLanguage = function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _ref3, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n                switch (_context2.prev = _context2.next) {\n                    case 0:\n                        _axios2.default.setLanguageHeader(config.language);\n                        _context2.next = 3;\n                        return _axios2.default.get('/translation/json/');\n\n                    case 3:\n                        _ref3 = _context2.sent;\n                        data = _ref3.data;\n\n                        config.gettextCatalog.setCurrentLanguage(config.language);\n                        config.gettextCatalog.setStrings(config.language, data.catalog);\n                        exports.configureDates(config.language);\n                        config.scope.$digest();\n\n                    case 9:\n                    case 'end':\n                        return _context2.stop();\n                }\n            }\n        }, _callee2, undefined);\n    }));\n\n    return function getLanguage() {\n        return _ref2.apply(this, arguments);\n    };\n}();\n\nvar setLanguage = exports.setLanguage = function setLanguage(ln) {\n    config.language = ln;\n    return exports.getLanguage();\n};\n\nvar getCurrentLanguage = exports.getCurrentLanguage = function getCurrentLanguage() {\n    return config.language;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2lucy9sYW5ndWFnZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcGx1Z2lucy9sYW5ndWFnZS5qcz9mYTIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICcuL2F4aW9zJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCAnbW9tZW50L2xvY2FsZS9mcic7XG5pbXBvcnQgJ21vbWVudC9sb2NhbGUvcHQnO1xuaW1wb3J0ICdtb21lbnQvbG9jYWxlL2VzJztcblxuY29uc3QgbmF2aWdhdG9yID0gd2luZG93Lm5hdmlnYXRvcjtcbmNvbnN0IGxhbmd1YWdlICA9IG5hdmlnYXRvci5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yLmxhbmd1YWdlc1swXSB8fFxuICBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHxcbiAgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBnZXR0ZXh0Q2F0YWxvZzoge30sXG4gICAgbGFuZ3VhZ2UsXG4gICAgc2NvcGU6IHt9LFxuICAgIG1kRGF0ZUxvY2FsZVByb3ZpZGVyOiB7fVxufTtcblxuZXhwb3J0IGNvbnN0IHNldENhdGFsb2cgPSBjYXRhbG9nID0+IHtcbiAgICBjb25maWcuZ2V0dGV4dENhdGFsb2cgPSBjYXRhbG9nO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldFNjb3BlID0gc2NvcGUgPT4ge1xuICAgIGNvbmZpZy5zY29wZSA9IHNjb3BlO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldERhdGVMb2NhbGVQcm92aWRlciA9IHByb3ZpZGVyID0+IHtcbiAgICBjb25maWcubWREYXRlTG9jYWxlUHJvdmlkZXIgID0gcHJvdmlkZXI7XG59O1xuXG5leHBvcnQgY29uc3QgY29uZmlndXJlRGF0ZXMgPSBhc3luYyBsbiA9PiB7XG4gICAgbW9tZW50LmxvY2FsZShsbik7XG4gICAgY29uc3QgbG9jYWxpc2VkID0gbW9tZW50KCk7XG4gICAgY29uZmlnLm1kRGF0ZUxvY2FsZVByb3ZpZGVyLm1vbnRocyA9IGxvY2FsaXNlZC5sb2NhbGVEYXRhKCkubW9udGhzKCk7XG4gICAgY29uZmlnLm1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0TW9udGhzICA9IGxvY2FsaXNlZC5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQoKTtcbiAgICBjb25maWcubWREYXRlTG9jYWxlUHJvdmlkZXIuZGF5cyAgPSBsb2NhbGlzZWQubG9jYWxlRGF0YSgpLndlZWtkYXlzKCk7XG4gICAgY29uZmlnLm1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0RGF5cyAgPSBsb2NhbGlzZWQubG9jYWxlRGF0YSgpLndlZWtkYXlzU2hvcnQoKTtcbiAgICB3aW5kb3cubW9tZW50ID0gbG9jYWxpc2VkO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExhbmd1YWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGF4aW9zLnNldExhbmd1YWdlSGVhZGVyKGNvbmZpZy5sYW5ndWFnZSk7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQoJy90cmFuc2xhdGlvbi9qc29uLycpO1xuICAgIGNvbmZpZy5nZXR0ZXh0Q2F0YWxvZy5zZXRDdXJyZW50TGFuZ3VhZ2UoY29uZmlnLmxhbmd1YWdlKTtcbiAgICBjb25maWcuZ2V0dGV4dENhdGFsb2cuc2V0U3RyaW5ncyhjb25maWcubGFuZ3VhZ2UsIGRhdGEuY2F0YWxvZyk7XG4gICAgZXhwb3J0cy5jb25maWd1cmVEYXRlcyhjb25maWcubGFuZ3VhZ2UpO1xuICAgIGNvbmZpZy5zY29wZS4kZGlnZXN0KCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0TGFuZ3VhZ2UgPSBsbiA9PiB7XG4gICAgY29uZmlnLmxhbmd1YWdlID0gbG47XG4gICAgcmV0dXJuIGV4cG9ydHMuZ2V0TGFuZ3VhZ2UoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50TGFuZ3VhZ2UgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGNvbmZpZy5sYW5ndWFnZTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/plugins/language.js\n");

/***/ }),

/***/ "./src/store/modules/countries.js":
/*!****************************************!*\
  !*** ./src/store/modules/countries.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.csvExport = exports.getCurrentCountryProjects = exports.getCurrentCountryDistrictProjects = exports.getCurrentCountryMapData = exports.getCurrentCountryFacilityList = exports.getCurrentCountrySecondSubLevel = exports.getCurrentCountryFirstSubLevel = exports.getCurrentCountrySubLevelNames = exports.getCountriesLib = exports.getCountryCoverPicture = exports.getCountryCoverPage = exports.getCurrentCountry = exports.getCountryFields = exports.getCountriesList = exports.getCountry = exports.mapData = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable no-warning-comments */\n\n\nvar csvExport = exports.csvExport = function () {\n    var _ref16 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(ids) {\n        var _ref17, data;\n\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n                switch (_context10.prev = _context10.next) {\n                    case 0:\n                        _context10.next = 2;\n                        return _axios2.default.post('/api/projects/csv-export/', ids);\n\n                    case 2:\n                        _ref17 = _context10.sent;\n                        data = _ref17.data;\n                        return _context10.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context10.stop();\n                }\n            }\n        }, _callee10, this);\n    }));\n\n    return function csvExport(_x19) {\n        return _ref16.apply(this, arguments);\n    };\n}();\n\n// Reducers\n\nexports.loadCountries = loadCountries;\nexports.loadCountryFields = loadCountryFields;\nexports.loadCountryMapData = loadCountryMapData;\nexports.loadCountryLandingPageInfo = loadCountryLandingPageInfo;\nexports.loadCurrentCountryDistrictsProject = loadCurrentCountryDistrictsProject;\nexports.loadCountryProjectsOrAll = loadCountryProjectsOrAll;\nexports.loadCurrentCountryProjects = loadCurrentCountryProjects;\nexports.setCurrentCountry = setCurrentCountry;\nexports.setCurrentCountryFromCode = setCurrentCountryFromCode;\nexports.default = system;\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _unionBy = __webpack_require__(/*! lodash/unionBy */ \"./node_modules/lodash/unionBy.js\");\n\nvar _unionBy2 = _interopRequireDefault(_unionBy);\n\nvar _forEach = __webpack_require__(/*! lodash/forEach */ \"./node_modules/lodash/forEach.js\");\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _reselect = __webpack_require__(/*! reselect */ \"./node_modules/reselect/lib/index.js\");\n\nvar _projects = __webpack_require__(/*! ./projects */ \"./src/store/modules/projects.js\");\n\nvar _system = __webpack_require__(/*! ./system */ \"./src/store/modules/system.js\");\n\nvar SystemModule = _interopRequireWildcard(_system);\n\nvar _language = __webpack_require__(/*! ../../plugins/language */ \"./src/plugins/language.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar stateDefinition = {\n    list: [],\n    countryFields: [],\n    currentCountryDistricts: [],\n    currentCountry: null,\n    currentCountryCoverPage: {},\n    currentCountryProjects: [],\n    currentCountryDistrictsProjects: []\n};\n\nvar mapData = exports.mapData = {};\n\n// GETTERS\n\nvar getCountry = exports.getCountry = function getCountry(state, id) {\n    return state.countries.list.find(function (c) {\n        return c.id === id;\n    });\n};\n\nvar getCountriesList = exports.getCountriesList = (0, _reselect.createSelector)(function (state) {\n    return state.countries.list;\n}, function (countries) {\n    if (countries) {\n        return countries.map(function (c) {\n            var code = c.code.toLocaleLowerCase();\n            return _extends({}, c, {\n                code: code,\n                flag: '/static/flags/' + code + '.png',\n                prettyName: c.name.split('-').join(' ')\n            });\n        });\n    }\n    return [];\n});\nvar getCountryFields = exports.getCountryFields = function getCountryFields(state) {\n    return state.countries.countryFields.filter(function (cf) {\n        return cf.country === state.countries.currentCountry;\n    }).map(function (cf) {\n        return _extends({}, cf);\n    });\n};\n\nvar getCurrentCountry = exports.getCurrentCountry = function getCurrentCountry(state) {\n    return _extends({}, getCountriesList(state).find(function (c) {\n        return c.id === state.countries.currentCountry;\n    }));\n};\n\nvar getCountryCoverPage = exports.getCountryCoverPage = function getCountryCoverPage(state) {\n    var countryCover = _extends({}, state.countries.currentCountryCoverPage);\n    var country_default_data = SystemModule.getLandingPageDefaults(state);\n    (0, _forEach2.default)(country_default_data, function (standardValue, key) {\n        var value = countryCover[key];\n        if (value === null || value === undefined || value === '') {\n            countryCover[key] = standardValue;\n        }\n    });\n    countryCover.partners = countryCover.default_partners.concat(countryCover.partner_logos);\n    return countryCover;\n};\n\nvar getCountryCoverPicture = exports.getCountryCoverPicture = function getCountryCoverPicture(state) {\n    var country = exports.getCountryCoverPage(state);\n    if (country.cover) {\n        return {\n            background: 'url(' + country.cover + ') 0 0',\n            'background-size': 'cover',\n            'background-repeat': 'no-repeat'\n        };\n    }\n    return null;\n};\n\nvar getCountriesLib = exports.getCountriesLib = function getCountriesLib(state) {\n    var result = {};\n    if (state.countries.list) {\n        state.countries.list.forEach(function (c) {\n            result[c.id] = c.name;\n        });\n    }\n    return result;\n};\n\nvar getCurrentCountrySubLevelNames = exports.getCurrentCountrySubLevelNames = function getCurrentCountrySubLevelNames(state) {\n    var c = exports.getCurrentCountry(state);\n    var types = SystemModule.getSubLevelTypes(state);\n    try {\n        var firstSubLevelName = types.find(function (t) {\n            return t.name === c.map_data.first_sub_level.name;\n        });\n        var secondSubLevelName = types.find(function (t) {\n            return t.name === c.map_data.second_sub_level.name;\n        });\n        firstSubLevelName = firstSubLevelName ? firstSubLevelName.displayName : c.map_data.first_sub_level.name;\n        secondSubLevelName = secondSubLevelName ? secondSubLevelName.displayName : c.map_data.second_sub_level.name;\n        return [firstSubLevelName, secondSubLevelName];\n    } catch (e) {\n        return ['', ''];\n    }\n};\n\nvar getCurrentCountryFirstSubLevel = exports.getCurrentCountryFirstSubLevel = function getCurrentCountryFirstSubLevel(state) {\n    var ln = (0, _language.getCurrentLanguage)();\n    var country = exports.getCurrentCountry(state);\n    if (country && country.map_data && country.map_data.first_sub_level) {\n        return country.map_data.first_sub_level.elements.map(function (ccd) {\n            return { id: ccd.name, name: ccd['name:' + ln] || ccd['name:en'] || ccd.name };\n        });\n    }\n    return [];\n};\nvar getCurrentCountrySecondSubLevel = exports.getCurrentCountrySecondSubLevel = function getCurrentCountrySecondSubLevel(state) {\n    var ln = (0, _language.getCurrentLanguage)();\n    var country = exports.getCurrentCountry(state);\n    if (country && country.map_data && country.map_data.second_sub_level) {\n        return country.map_data.second_sub_level.elements.map(function (ccd) {\n            return { id: ccd.name, name: ccd['name:' + ln] || ccd['name:en'] || ccd.name };\n        });\n    }\n    return [];\n};\n\nvar getCurrentCountryFacilityList = exports.getCurrentCountryFacilityList = function getCurrentCountryFacilityList(state) {\n    var country = exports.getCurrentCountry(state);\n    if (country && country.map_data && country.map_data.facilities) {\n        return country.map_data.facilities;\n    }\n    return [];\n};\n\nvar getCurrentCountryMapData = exports.getCurrentCountryMapData = function getCurrentCountryMapData(state) {\n    var currentCountry = exports.getCurrentCountry(state);\n    currentCountry.mapData = mapData[currentCountry.code];\n    currentCountry.districts = exports.getCurrentCountryFirstSubLevel(state);\n    return currentCountry;\n};\n\nvar getCurrentCountryDistrictProjects = exports.getCurrentCountryDistrictProjects = function getCurrentCountryDistrictProjects(state) {\n    var result = {};\n    var districts = state.countries.currentCountryDistrictsProjects;\n    for (var d in districts) {\n        result[d] = districts[d].map(function (p) {\n            p = _extends({}, p, (0, _projects.isMemberOrViewer)(state, p));\n            return p;\n        });\n    }\n    return result;\n};\nvar getCurrentCountryProjects = exports.getCurrentCountryProjects = function getCurrentCountryProjects(state) {\n    return state.countries.currentCountryProjects.map(function (ccp) {\n        ccp = _extends({}, ccp, (0, _projects.isMemberOrViewer)(state, ccp));\n        return ccp;\n    });\n};\n\n// ACTIONS\n\nfunction loadCountries() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch, getState) {\n            var list, _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            list = getState().countries.list;\n\n                            if (!(list.length === 0)) {\n                                _context.next = 8;\n                                break;\n                            }\n\n                            _context.next = 4;\n                            return _axios2.default.get('/api/countries/');\n\n                        case 4:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            data.sort(function (a, b) {\n                                return a.name.localeCompare(b.name);\n                            });\n                            dispatch({ type: 'SET_COUNTRIES_LIST', countries: data });\n\n                        case 8:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCountryFields(id) {\n    var _this2 = this;\n\n    return function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n            var countryCountryFields, _ref4, data;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            countryCountryFields = getState().countries.countryFields.filter(function (cf) {\n                                return cf.country === id;\n                            });\n\n                            if (!(!countryCountryFields || countryCountryFields.length === 0)) {\n                                _context2.next = 8;\n                                break;\n                            }\n\n                            _context2.next = 4;\n                            return _axios2.default.get('/api/country-fields/' + id + '/');\n\n                        case 4:\n                            _ref4 = _context2.sent;\n                            data = _ref4.data;\n\n                            data.sort(function (a, b) {\n                                return a.id - b.id;\n                            });\n                            dispatch({ type: 'UPDATE_COUNTRY_FIELDS_LIST', fields: data });\n\n                        case 8:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2);\n        }));\n\n        return function (_x3, _x4) {\n            return _ref3.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCountryMapData() {\n    var _this3 = this;\n\n    return function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n            var state, country, countryData, _ref6, data;\n\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            state = getState();\n                            country = exports.getCurrentCountry(state);\n\n                            if (!(country && country.code)) {\n                                _context3.next = 10;\n                                break;\n                            }\n\n                            countryData = mapData[country.code];\n\n                            if (countryData) {\n                                _context3.next = 10;\n                                break;\n                            }\n\n                            _context3.next = 7;\n                            return _axios2.default.get('/static/country-geodata/' + country.code + '.json');\n\n                        case 7:\n                            _ref6 = _context3.sent;\n                            data = _ref6.data;\n\n                            mapData[country.code] = Object.freeze(data);\n\n                        case 10:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, _this3);\n        }));\n\n        return function (_x5, _x6) {\n            return _ref5.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCountryLandingPageInfo() {\n    var _this4 = this;\n\n    return function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n            var country, _ref8, data;\n\n            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            country = exports.getCurrentCountry(getState());\n\n                            if (!(country && country.code)) {\n                                _context4.next = 7;\n                                break;\n                            }\n\n                            _context4.next = 4;\n                            return _axios2.default.get('/api/landing/' + country.code.toUpperCase() + '/');\n\n                        case 4:\n                            _ref8 = _context4.sent;\n                            data = _ref8.data;\n\n                            dispatch({ type: 'SET_COUNTRY_COVER_DATA', cover: data });\n\n                        case 7:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, _callee4, _this4);\n        }));\n\n        return function (_x7, _x8) {\n            return _ref7.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCurrentCountryDistrictsProject() {\n    var _this5 = this;\n\n    return function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n            var country, _ref10, data;\n\n            return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                    switch (_context5.prev = _context5.next) {\n                        case 0:\n                            country = exports.getCurrentCountry(getState());\n\n                            if (!(country && country.id)) {\n                                _context5.next = 7;\n                                break;\n                            }\n\n                            _context5.next = 4;\n                            return _axios2.default.get('/api/projects/by-view/map/' + country.id + '/');\n\n                        case 4:\n                            _ref10 = _context5.sent;\n                            data = _ref10.data;\n\n                            dispatch({ type: 'SET_CURRENT_COUNTRY_DISTRICT_PROJECTS', projects: data });\n\n                        case 7:\n                        case 'end':\n                            return _context5.stop();\n                    }\n                }\n            }, _callee5, _this5);\n        }));\n\n        return function (_x9, _x10) {\n            return _ref9.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCountryProjectsOrAll(countryId) {\n    var _this6 = this;\n\n    return function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(dispatch) {\n            var url, _ref12, data;\n\n            return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                while (1) {\n                    switch (_context6.prev = _context6.next) {\n                        case 0:\n                            url = ['/api/projects/by-view/list/'];\n\n                            if (countryId) {\n                                url.push(countryId + '/');\n                            }\n                            _context6.next = 4;\n                            return _axios2.default.get(url.join(''));\n\n                        case 4:\n                            _ref12 = _context6.sent;\n                            data = _ref12.data;\n\n                            dispatch({ type: 'SET_CURRENT_COUNTRY_PROJECTS', projects: data });\n\n                        case 7:\n                        case 'end':\n                            return _context6.stop();\n                    }\n                }\n            }, _callee6, _this6);\n        }));\n\n        return function (_x11) {\n            return _ref11.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadCurrentCountryProjects() {\n    var _this7 = this;\n\n    return function () {\n        var _ref13 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(dispatch, getState) {\n            var country;\n            return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                while (1) {\n                    switch (_context7.prev = _context7.next) {\n                        case 0:\n                            country = exports.getCurrentCountry(getState());\n\n                            if (country) {\n                                dispatch(exports.loadCountryProjectsOrAll(country.id));\n                            }\n\n                        case 2:\n                        case 'end':\n                            return _context7.stop();\n                    }\n                }\n            }, _callee7, _this7);\n        }));\n\n        return function (_x12, _x13) {\n            return _ref13.apply(this, arguments);\n        };\n    }();\n}\n\nfunction setCurrentCountry(id) {\n    var _this8 = this;\n\n    var waitFor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    return function () {\n        var _ref14 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(dispatch, getState) {\n            var currentId, promiseCollection;\n            return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                while (1) {\n                    switch (_context8.prev = _context8.next) {\n                        case 0:\n                            currentId = getState().countries.currentCountry;\n\n                            if (!(id && id !== currentId)) {\n                                _context8.next = 9;\n                                break;\n                            }\n\n                            dispatch({ type: 'SET_CURRENT_COUNTRY', country: id });\n                            promiseCollection = {};\n\n                            promiseCollection.countryFields = dispatch(exports.loadCountryFields(id));\n                            promiseCollection.mapData = dispatch(exports.loadCountryMapData());\n                            promiseCollection.landingPage = dispatch(exports.loadCountryLandingPageInfo());\n                            promiseCollection.districts = dispatch(exports.loadCurrentCountryDistrictsProject());\n                            return _context8.abrupt('return', Promise.all(waitFor.map(function (name) {\n                                return promiseCollection[name];\n                            })));\n\n                        case 9:\n                            return _context8.abrupt('return', Promise.resolve());\n\n                        case 10:\n                        case 'end':\n                            return _context8.stop();\n                    }\n                }\n            }, _callee8, _this8);\n        }));\n\n        return function (_x15, _x16) {\n            return _ref14.apply(this, arguments);\n        };\n    }();\n}\n\nfunction setCurrentCountryFromCode(code) {\n    var _this9 = this;\n\n    return function () {\n        var _ref15 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(dispatch, getState) {\n            var country;\n            return regeneratorRuntime.wrap(function _callee9$(_context9) {\n                while (1) {\n                    switch (_context9.prev = _context9.next) {\n                        case 0:\n                            country = getState().countries.list.find(function (c) {\n                                return c.code.toLocaleLowerCase() === code.toLocaleLowerCase();\n                            });\n\n                            if (country && country.id) {\n                                dispatch(exports.setCurrentCountry(country.id, ['landingPage']));\n                            } else {\n                                dispatch({ type: 'UNSET_CURRENT_COUNTRY' });\n                            }\n\n                        case 2:\n                        case 'end':\n                            return _context9.stop();\n                    }\n                }\n            }, _callee9, _this9);\n        }));\n\n        return function (_x17, _x18) {\n            return _ref15.apply(this, arguments);\n        };\n    }();\n}\n\nfunction system() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : stateDefinition;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_COUNTRIES_LIST':\n            {\n                return _extends({}, state, { list: action.countries });\n            }\n        case 'SET_CURRENT_COUNTRY':\n            {\n                return _extends({}, state, { currentCountry: action.country });\n            }\n        case 'UNSET_CURRENT_COUNTRY':\n            {\n                return _extends({}, state, { currentCountry: null, currentCountryCoverPage: {} });\n            }\n        case 'SET_COUNTRY_COVER_DATA':\n            {\n                return _extends({}, state, { currentCountryCoverPage: action.cover });\n            }\n        case 'UPDATE_COUNTRY_FIELDS_LIST':\n            {\n                return _extends({}, state, { countryFields: (0, _unionBy2.default)(action.fields, state.countryFields, 'id') });\n            }\n        case 'SET_CURRENT_COUNTRY_PROJECTS':\n            {\n                return _extends({}, state, { currentCountryProjects: action.projects });\n            }\n        case 'SET_CURRENT_COUNTRY_DISTRICT_PROJECTS':\n            {\n                return _extends({}, state, { currentCountryDistrictsProjects: action.projects });\n            }\n        default:\n            return state;\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy9jb3VudHJpZXMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3N0b3JlL21vZHVsZXMvY291bnRyaWVzLmpzP2JmYTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8td2FybmluZy1jb21tZW50cyAqL1xuaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uL3BsdWdpbnMvYXhpb3MnO1xuaW1wb3J0IHVuaW9uQnkgZnJvbSAnbG9kYXNoL3VuaW9uQnknO1xuaW1wb3J0IGZvckVhY2ggZnJvbSAnbG9kYXNoL2ZvckVhY2gnO1xuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5cbmltcG9ydCB7IGlzTWVtYmVyT3JWaWV3ZXIgfSBmcm9tICcuL3Byb2plY3RzJztcbmltcG9ydCAqIGFzIFN5c3RlbU1vZHVsZSBmcm9tICcuL3N5c3RlbSc7XG5pbXBvcnQgeyBnZXRDdXJyZW50TGFuZ3VhZ2UgfSBmcm9tICcuLi8uLi9wbHVnaW5zL2xhbmd1YWdlJztcblxuY29uc3Qgc3RhdGVEZWZpbml0aW9uID0ge1xuICAgIGxpc3Q6IFtdLFxuICAgIGNvdW50cnlGaWVsZHM6IFtdLFxuICAgIGN1cnJlbnRDb3VudHJ5RGlzdHJpY3RzOiBbXSxcbiAgICBjdXJyZW50Q291bnRyeTogbnVsbCxcbiAgICBjdXJyZW50Q291bnRyeUNvdmVyUGFnZToge30sXG4gICAgY3VycmVudENvdW50cnlQcm9qZWN0czogW10sXG4gICAgY3VycmVudENvdW50cnlEaXN0cmljdHNQcm9qZWN0czogW11cbn07XG5cbmV4cG9ydCBjb25zdCBtYXBEYXRhID0ge307XG5cbi8vIEdFVFRFUlNcblxuZXhwb3J0IGNvbnN0IGdldENvdW50cnkgPSAoc3RhdGUsIGlkKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmNvdW50cmllcy5saXN0LmZpbmQoYyA9PiBjLmlkID09PSBpZCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q291bnRyaWVzTGlzdCA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHN0YXRlID0+IHN0YXRlLmNvdW50cmllcy5saXN0LFxuICAgIGNvdW50cmllcyA9PiB7XG4gICAgICAgIGlmIChjb3VudHJpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3VudHJpZXMubWFwKGM9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGMuY29kZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmMsXG4gICAgICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGZsYWc6IGAvc3RhdGljL2ZsYWdzLyR7Y29kZX0ucG5nYCxcbiAgICAgICAgICAgICAgICAgICAgcHJldHR5TmFtZTogYy5uYW1lLnNwbGl0KCctJykuam9pbignICcpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9KTtcbmV4cG9ydCBjb25zdCBnZXRDb3VudHJ5RmllbGRzID0gc3RhdGUgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5jb3VudHJpZXMuY291bnRyeUZpZWxkcy5maWx0ZXIoY2YgPT4gIGNmLmNvdW50cnkgPT09IHN0YXRlLmNvdW50cmllcy5jdXJyZW50Q291bnRyeSkubWFwKGNmID0+e1xuICAgICAgICByZXR1cm4geyAuLi5jZiB9O1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5ID0gc3RhdGUgPT4ge1xuICAgIHJldHVybiB7IC4uLmdldENvdW50cmllc0xpc3Qoc3RhdGUpLmZpbmQoYyA9PiBjLmlkID09PSBzdGF0ZS5jb3VudHJpZXMuY3VycmVudENvdW50cnkpIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q291bnRyeUNvdmVyUGFnZSA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBjb3VudHJ5Q292ZXIgPSB7IC4uLnN0YXRlLmNvdW50cmllcy5jdXJyZW50Q291bnRyeUNvdmVyUGFnZSB9O1xuICAgIGNvbnN0IGNvdW50cnlfZGVmYXVsdF9kYXRhID0gU3lzdGVtTW9kdWxlLmdldExhbmRpbmdQYWdlRGVmYXVsdHMoc3RhdGUpO1xuICAgIGZvckVhY2goY291bnRyeV9kZWZhdWx0X2RhdGEsIChzdGFuZGFyZFZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjb3VudHJ5Q292ZXJba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBjb3VudHJ5Q292ZXJba2V5XSA9IHN0YW5kYXJkVmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb3VudHJ5Q292ZXIucGFydG5lcnMgPSBjb3VudHJ5Q292ZXIuZGVmYXVsdF9wYXJ0bmVycy5jb25jYXQoY291bnRyeUNvdmVyLnBhcnRuZXJfbG9nb3MpO1xuICAgIHJldHVybiBjb3VudHJ5Q292ZXI7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q291bnRyeUNvdmVyUGljdHVyZSA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBjb3VudHJ5ID0gZXhwb3J0cy5nZXRDb3VudHJ5Q292ZXJQYWdlKHN0YXRlKTtcbiAgICBpZiAoY291bnRyeS5jb3Zlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogYHVybCgke2NvdW50cnkuY292ZXJ9KSAwIDBgLFxuICAgICAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6ICdjb3ZlcicsXG4gICAgICAgICAgICAnYmFja2dyb3VuZC1yZXBlYXQnOiAnbm8tcmVwZWF0J1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDb3VudHJpZXNMaWIgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgaWYgKHN0YXRlLmNvdW50cmllcy5saXN0KSB7XG4gICAgICAgIHN0YXRlLmNvdW50cmllcy5saXN0LmZvckVhY2goYyA9PiB7XG4gICAgICAgICAgICByZXN1bHRbYy5pZF0gPSBjLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5U3ViTGV2ZWxOYW1lcyA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBjID0gZXhwb3J0cy5nZXRDdXJyZW50Q291bnRyeShzdGF0ZSk7XG4gICAgY29uc3QgdHlwZXMgPSBTeXN0ZW1Nb2R1bGUuZ2V0U3ViTGV2ZWxUeXBlcyhzdGF0ZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IGZpcnN0U3ViTGV2ZWxOYW1lID0gdHlwZXMuZmluZCh0ID0+IHQubmFtZSA9PT0gYy5tYXBfZGF0YS5maXJzdF9zdWJfbGV2ZWwubmFtZSk7XG4gICAgICAgIGxldCBzZWNvbmRTdWJMZXZlbE5hbWUgPSB0eXBlcy5maW5kKHQgPT4gdC5uYW1lID09PSBjLm1hcF9kYXRhLnNlY29uZF9zdWJfbGV2ZWwubmFtZSk7XG4gICAgICAgIGZpcnN0U3ViTGV2ZWxOYW1lID0gZmlyc3RTdWJMZXZlbE5hbWUgPyBmaXJzdFN1YkxldmVsTmFtZS5kaXNwbGF5TmFtZSA6IGMubWFwX2RhdGEuZmlyc3Rfc3ViX2xldmVsLm5hbWU7XG4gICAgICAgIHNlY29uZFN1YkxldmVsTmFtZSA9IHNlY29uZFN1YkxldmVsTmFtZSA/IHNlY29uZFN1YkxldmVsTmFtZS5kaXNwbGF5TmFtZSA6IGMubWFwX2RhdGEuc2Vjb25kX3N1Yl9sZXZlbC5uYW1lO1xuICAgICAgICByZXR1cm4gW2ZpcnN0U3ViTGV2ZWxOYW1lLCBzZWNvbmRTdWJMZXZlbE5hbWVdO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gWycnLCAnJ107XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5Rmlyc3RTdWJMZXZlbCA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBsbiA9IGdldEN1cnJlbnRMYW5ndWFnZSgpO1xuICAgIGNvbnN0IGNvdW50cnkgPSBleHBvcnRzLmdldEN1cnJlbnRDb3VudHJ5KHN0YXRlKTtcbiAgICBpZiAoY291bnRyeSAmJiBjb3VudHJ5Lm1hcF9kYXRhICYmIGNvdW50cnkubWFwX2RhdGEuZmlyc3Rfc3ViX2xldmVsKSB7XG4gICAgICAgIHJldHVybiBjb3VudHJ5Lm1hcF9kYXRhLmZpcnN0X3N1Yl9sZXZlbC5lbGVtZW50c1xuICAgICAgICAgIC5tYXAoY2NkID0+ICh7IGlkOiBjY2QubmFtZSwgbmFtZTogY2NkW2BuYW1lOiR7bG59YF0gfHwgY2NkWyduYW1lOmVuJ10gfHwgY2NkLm5hbWUgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59O1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5U2Vjb25kU3ViTGV2ZWwgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgbG4gPSBnZXRDdXJyZW50TGFuZ3VhZ2UoKTtcbiAgICBjb25zdCBjb3VudHJ5ID0gZXhwb3J0cy5nZXRDdXJyZW50Q291bnRyeShzdGF0ZSk7XG4gICAgaWYgKGNvdW50cnkgJiYgY291bnRyeS5tYXBfZGF0YSAmJiBjb3VudHJ5Lm1hcF9kYXRhLnNlY29uZF9zdWJfbGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIGNvdW50cnkubWFwX2RhdGEuc2Vjb25kX3N1Yl9sZXZlbC5lbGVtZW50c1xuICAgICAgICAgICAgLm1hcChjY2QgPT4gKHsgaWQ6IGNjZC5uYW1lLCBuYW1lOiBjY2RbYG5hbWU6JHtsbn1gXSB8fCBjY2RbJ25hbWU6ZW4nXSB8fCBjY2QubmFtZSB9KSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50Q291bnRyeUZhY2lsaXR5TGlzdCA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBjb3VudHJ5ID0gZXhwb3J0cy5nZXRDdXJyZW50Q291bnRyeShzdGF0ZSk7XG4gICAgaWYgKGNvdW50cnkgJiYgY291bnRyeS5tYXBfZGF0YSAmJiBjb3VudHJ5Lm1hcF9kYXRhLmZhY2lsaXRpZXMpIHtcbiAgICAgICAgcmV0dXJuIGNvdW50cnkubWFwX2RhdGEuZmFjaWxpdGllcztcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5TWFwRGF0YSA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBjdXJyZW50Q291bnRyeSA9IGV4cG9ydHMuZ2V0Q3VycmVudENvdW50cnkoc3RhdGUpO1xuICAgIGN1cnJlbnRDb3VudHJ5Lm1hcERhdGEgPSBtYXBEYXRhW2N1cnJlbnRDb3VudHJ5LmNvZGVdO1xuICAgIGN1cnJlbnRDb3VudHJ5LmRpc3RyaWN0cyA9IGV4cG9ydHMuZ2V0Q3VycmVudENvdW50cnlGaXJzdFN1YkxldmVsKHN0YXRlKTtcbiAgICByZXR1cm4gY3VycmVudENvdW50cnk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudENvdW50cnlEaXN0cmljdFByb2plY3RzID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IGRpc3RyaWN0cyA9IHN0YXRlLmNvdW50cmllcy5jdXJyZW50Q291bnRyeURpc3RyaWN0c1Byb2plY3RzO1xuICAgIGZvciAoY29uc3QgZCBpbiBkaXN0cmljdHMpIHtcbiAgICAgICAgcmVzdWx0W2RdID0gZGlzdHJpY3RzW2RdLm1hcChwID0+IHtcbiAgICAgICAgICAgIHAgPSB7IC4uLnAsIC4uLmlzTWVtYmVyT3JWaWV3ZXIoc3RhdGUsIHApIH07XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRDb3VudHJ5UHJvamVjdHMgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLmNvdW50cmllcy5jdXJyZW50Q291bnRyeVByb2plY3RzLm1hcChjY3AgPT4ge1xuICAgICAgICBjY3AgPSB7IC4uLmNjcCwgLi4uaXNNZW1iZXJPclZpZXdlcihzdGF0ZSwgY2NwKSB9O1xuICAgICAgICByZXR1cm4gY2NwO1xuICAgIH0pO1xufTtcblxuLy8gQUNUSU9OU1xuXG5leHBvcnQgZnVuY3Rpb24gbG9hZENvdW50cmllcygpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0ID0gZ2V0U3RhdGUoKS5jb3VudHJpZXMubGlzdDtcbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9jb3VudHJpZXMvJyk7XG4gICAgICAgICAgICBkYXRhLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0NPVU5UUklFU19MSVNUJywgY291bnRyaWVzOiBkYXRhIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb3VudHJ5RmllbGRzKGlkKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgY291bnRyeUNvdW50cnlGaWVsZHMgPSBnZXRTdGF0ZSgpLmNvdW50cmllcy5jb3VudHJ5RmllbGRzLmZpbHRlcihjZiA9PiAgY2YuY291bnRyeSA9PT0gaWQpO1xuICAgICAgICBpZiAoIWNvdW50cnlDb3VudHJ5RmllbGRzIHx8IGNvdW50cnlDb3VudHJ5RmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvY291bnRyeS1maWVsZHMvJHtpZH0vYCk7XG4gICAgICAgICAgICBkYXRhLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DT1VOVFJZX0ZJRUxEU19MSVNUJywgZmllbGRzOiBkYXRhIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb3VudHJ5TWFwRGF0YSgpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSBleHBvcnRzLmdldEN1cnJlbnRDb3VudHJ5KHN0YXRlKTtcbiAgICAgICAgaWYgKGNvdW50cnkgJiYgY291bnRyeS5jb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudHJ5RGF0YSA9IG1hcERhdGFbY291bnRyeS5jb2RlXTtcbiAgICAgICAgICAgIGlmICghY291bnRyeURhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgL3N0YXRpYy9jb3VudHJ5LWdlb2RhdGEvJHtjb3VudHJ5LmNvZGV9Lmpzb25gKTtcbiAgICAgICAgICAgICAgICBtYXBEYXRhW2NvdW50cnkuY29kZV0gPSBPYmplY3QuZnJlZXplKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZENvdW50cnlMYW5kaW5nUGFnZUluZm8oKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgY291bnRyeSA9IGV4cG9ydHMuZ2V0Q3VycmVudENvdW50cnkoZ2V0U3RhdGUoKSk7XG4gICAgICAgIGlmIChjb3VudHJ5ICYmIGNvdW50cnkuY29kZSkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvbGFuZGluZy8ke2NvdW50cnkuY29kZS50b1VwcGVyQ2FzZSgpfS9gKTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9DT1VOVFJZX0NPVkVSX0RBVEEnLCBjb3ZlcjogZGF0YSB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkQ3VycmVudENvdW50cnlEaXN0cmljdHNQcm9qZWN0KCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSBleHBvcnRzLmdldEN1cnJlbnRDb3VudHJ5KGdldFN0YXRlKCkpO1xuICAgICAgICBpZiAoY291bnRyeSAmJiBjb3VudHJ5LmlkKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgL2FwaS9wcm9qZWN0cy9ieS12aWV3L21hcC8ke2NvdW50cnkuaWR9L2ApO1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0NVUlJFTlRfQ09VTlRSWV9ESVNUUklDVF9QUk9KRUNUUycsIHByb2plY3RzOiBkYXRhIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb3VudHJ5UHJvamVjdHNPckFsbChjb3VudHJ5SWQpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IFsnL2FwaS9wcm9qZWN0cy9ieS12aWV3L2xpc3QvJ107XG4gICAgICAgIGlmIChjb3VudHJ5SWQpIHtcbiAgICAgICAgICAgIHVybC5wdXNoKGAke2NvdW50cnlJZH0vYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQodXJsLmpvaW4oJycpKTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0NVUlJFTlRfQ09VTlRSWV9QUk9KRUNUUycsIHByb2plY3RzOiBkYXRhIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkQ3VycmVudENvdW50cnlQcm9qZWN0cygpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBjb3VudHJ5ID0gZXhwb3J0cy5nZXRDdXJyZW50Q291bnRyeShnZXRTdGF0ZSgpKTtcbiAgICAgICAgaWYgKGNvdW50cnkpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGV4cG9ydHMubG9hZENvdW50cnlQcm9qZWN0c09yQWxsKGNvdW50cnkuaWQpKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50Q291bnRyeShpZCwgd2FpdEZvciA9IFtdKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudElkID0gZ2V0U3RhdGUoKS5jb3VudHJpZXMuY3VycmVudENvdW50cnk7XG4gICAgICAgIGlmIChpZCAmJiBpZCAhPT0gY3VycmVudElkKSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfQ1VSUkVOVF9DT1VOVFJZJywgY291bnRyeTogaWQgfSk7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlQ29sbGVjdGlvbiA9IHt9O1xuICAgICAgICAgICAgcHJvbWlzZUNvbGxlY3Rpb24uY291bnRyeUZpZWxkcyA9IGRpc3BhdGNoKGV4cG9ydHMubG9hZENvdW50cnlGaWVsZHMoaWQpKTtcbiAgICAgICAgICAgIHByb21pc2VDb2xsZWN0aW9uLm1hcERhdGEgPSBkaXNwYXRjaChleHBvcnRzLmxvYWRDb3VudHJ5TWFwRGF0YSgpKTtcbiAgICAgICAgICAgIHByb21pc2VDb2xsZWN0aW9uLmxhbmRpbmdQYWdlID0gZGlzcGF0Y2goZXhwb3J0cy5sb2FkQ291bnRyeUxhbmRpbmdQYWdlSW5mbygpKTtcbiAgICAgICAgICAgIHByb21pc2VDb2xsZWN0aW9uLmRpc3RyaWN0cyA9IGRpc3BhdGNoKGV4cG9ydHMubG9hZEN1cnJlbnRDb3VudHJ5RGlzdHJpY3RzUHJvamVjdCgpKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh3YWl0Rm9yLm1hcChuYW1lID0+IHByb21pc2VDb2xsZWN0aW9uW25hbWVdKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50Q291bnRyeUZyb21Db2RlKGNvZGUpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBjb3VudHJ5ID0gZ2V0U3RhdGUoKS5jb3VudHJpZXMubGlzdC5maW5kKGMgPT4gYy5jb2RlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IGNvZGUudG9Mb2NhbGVMb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChjb3VudHJ5ICYmIGNvdW50cnkuaWQpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGV4cG9ydHMuc2V0Q3VycmVudENvdW50cnkoY291bnRyeS5pZCwgWydsYW5kaW5nUGFnZSddKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVTlNFVF9DVVJSRU5UX0NPVU5UUlknIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNzdkV4cG9ydChpZHMpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvcHJvamVjdHMvY3N2LWV4cG9ydC8nLCBpZHMpO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG4vLyBSZWR1Y2Vyc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzeXN0ZW0oc3RhdGUgPSBzdGF0ZURlZmluaXRpb24sIGFjdGlvbikge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdTRVRfQ09VTlRSSUVTX0xJU1QnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBsaXN0OiBhY3Rpb24uY291bnRyaWVzIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9DVVJSRU5UX0NPVU5UUlknOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBjdXJyZW50Q291bnRyeTogYWN0aW9uLmNvdW50cnkgfTtcbiAgICB9XG4gICAgY2FzZSAnVU5TRVRfQ1VSUkVOVF9DT1VOVFJZJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudENvdW50cnk6IG51bGwsIGN1cnJlbnRDb3VudHJ5Q292ZXJQYWdlOiB7fSB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfQ09VTlRSWV9DT1ZFUl9EQVRBJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudENvdW50cnlDb3ZlclBhZ2U6IGFjdGlvbi5jb3ZlciB9O1xuICAgIH1cbiAgICBjYXNlICdVUERBVEVfQ09VTlRSWV9GSUVMRFNfTElTVCc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGNvdW50cnlGaWVsZHM6IHVuaW9uQnkoYWN0aW9uLmZpZWxkcywgc3RhdGUuY291bnRyeUZpZWxkcywgJ2lkJykgfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX0NVUlJFTlRfQ09VTlRSWV9QUk9KRUNUUyc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGN1cnJlbnRDb3VudHJ5UHJvamVjdHM6IGFjdGlvbi5wcm9qZWN0cyB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfQ1VSUkVOVF9DT1VOVFJZX0RJU1RSSUNUX1BST0pFQ1RTJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudENvdW50cnlEaXN0cmljdHNQcm9qZWN0czogYWN0aW9uLnByb2plY3RzIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBcVFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7QUFLQTtBQUNBO0FBL0dBO0FBV0E7QUFXQTtBQWVBO0FBVUE7QUFVQTtBQVdBO0FBU0E7QUFnQkE7QUFtQkE7QUFDQTtBQTlRQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBU0E7QUFBQTtBQUNBO0FBVkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTtBQXlCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/store/modules/countries.js\n");

/***/ }),

/***/ "./src/store/modules/projects.js":
/*!***************************************!*\
  !*** ./src/store/modules/projects.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.searchProjects = exports.postProjectSaveActions = exports.saveCountryFields = exports.saveTeamViewers = exports.checkCurrentProjectValidity = exports.getSimilarProject = exports.getCoverageData = exports.getMapsDomainData = exports.getMapsAxisData = exports.getCurrentVersionDate = exports.getCurrentVersion = exports.getCoverageVersion = exports.getToolkitVersion = exports.getViewers = exports.getTeam = exports.getNewProjectForEditing = exports.getCurrentDraftProjectForEditing = exports.getCurrentEdits = exports.getCurrentPublishedProjectForEditing = exports.getCurrentProjectForEditing = exports.getProjectCountryFields = exports.getStoredCountryFields = exports.getCurrentDraftInViewMode = exports.getCurrentDraft = exports.getCurrentPublished = exports.parseProjectForViewMode = exports.convertCountryFieldsAnswer = exports.getCurrentPublicProjectDetails = exports.getCurrentPublicProject = exports.getCurrentProject = exports.getCurrentProjectIfExist = exports.getVanillaProject = exports.getEmptyProject = exports.getUserDefaultProject = exports.getUserProjects = exports.getProjectStructure = exports.getFlatProjectStructure = exports.getDraftedProjects = exports.getPublishedProjects = exports.getSavedProjectList = exports.getCurrentProjectId = exports.isMemberOrViewer = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar saveTeamViewers = exports.saveTeamViewers = function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(_ref12) {\n        var id = _ref12.id;\n        var team = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var viewers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        var data;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n                switch (_context6.prev = _context6.next) {\n                    case 0:\n                        data = {\n                            team: team.map(function (t) {\n                                return t.id;\n                            }),\n                            viewers: viewers.map(function (w) {\n                                return w.id;\n                            })\n                        };\n                        _context6.next = 3;\n                        return _axios2.default.put('/api/projects/' + id + '/groups/', data);\n\n                    case 3:\n                        return _context6.abrupt('return', data);\n\n                    case 4:\n                    case 'end':\n                        return _context6.stop();\n                }\n            }\n        }, _callee6, this);\n    }));\n\n    return function saveTeamViewers(_x11) {\n        return _ref11.apply(this, arguments);\n    };\n}();\n\nvar saveCountryFields = exports.saveCountryFields = function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n        var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var countryId = arguments[1];\n        var project = arguments[2];\n        var toUpdate = arguments[3];\n\n        var _ref15, data;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n                switch (_context7.prev = _context7.next) {\n                    case 0:\n                        fields = fields.map(function (_ref14) {\n                            var country = _ref14.country,\n                                question = _ref14.question,\n                                type = _ref14.type,\n                                answer = _ref14.answer;\n\n                            return {\n                                country: country, answer: answer, type: type, question: question, project: project\n                            };\n                        });\n                        toUpdate = toUpdate === 'published' ? 'publish' : 'draft';\n                        _context7.prev = 2;\n                        _context7.next = 5;\n                        return _axios2.default.post('/api/country-fields/' + countryId + '/' + project + '/' + toUpdate + '/', { fields: fields });\n\n                    case 5:\n                        _ref15 = _context7.sent;\n                        data = _ref15.data;\n                        return _context7.abrupt('return', data.fields);\n\n                    case 10:\n                        _context7.prev = 10;\n                        _context7.t0 = _context7['catch'](2);\n\n                        console.log(_context7.t0);\n                        return _context7.abrupt('return', false);\n\n                    case 14:\n                    case 'end':\n                        return _context7.stop();\n                }\n            }\n        }, _callee7, this, [[2, 10]]);\n    }));\n\n    return function saveCountryFields() {\n        return _ref13.apply(this, arguments);\n    };\n}();\n\nvar postProjectSaveActions = exports.postProjectSaveActions = function () {\n    var _ref16 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(data, team, viewers, dispatch, state, toUpdate) {\n        var user, countryFields, cfPromise, twPromise, _ref17, _ref18, teamViewers, fields, updateMember, updateViewer, response;\n\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n                switch (_context8.prev = _context8.next) {\n                    case 0:\n                        user = UserModule.getProfile(state).id;\n                        countryFields = exports.getStoredCountryFields(state)(true);\n                        cfPromise = exports.saveCountryFields(countryFields, data.draft.country, data.id, toUpdate);\n                        twPromise = exports.saveTeamViewers(data, team, viewers);\n                        _context8.next = 6;\n                        return Promise.all([twPromise, cfPromise]);\n\n                    case 6:\n                        _ref17 = _context8.sent;\n                        _ref18 = _slicedToArray(_ref17, 2);\n                        teamViewers = _ref18[0];\n                        fields = _ref18[1];\n                        updateMember = teamViewers.team.some(function (t) {\n                            return t === user;\n                        }) ? [data.id] : [];\n                        updateViewer = teamViewers.viewers.some(function (t) {\n                            return t === user;\n                        }) ? [data.id] : [];\n\n                        if (!(fields === false)) {\n                            _context8.next = 15;\n                            break;\n                        }\n\n                        response = {\n                            custom: true,\n                            message: 'Failed to save country fields'\n                        };\n                        return _context8.abrupt('return', Promise.reject({ response: response }));\n\n                    case 15:\n                        if (toUpdate === 'published') {\n                            data.published.fields = fields;\n                        }\n                        data.draft.fields = fields;\n                        dispatch({ type: 'UPDATE_SAVE_PROJECT', project: data });\n                        dispatch({ type: 'SET_PROJECT_TEAM_VIEWERS', teamViewers: teamViewers });\n                        dispatch(UserModule.updateTeamViewers(updateMember, updateViewer));\n                        dispatch(CountryModule.loadCurrentCountryProjects());\n                        dispatch(CountryModule.loadCurrentCountryDistrictsProject());\n                        return _context8.abrupt('return', Promise.resolve(data));\n\n                    case 23:\n                    case 'end':\n                        return _context8.stop();\n                }\n            }\n        }, _callee8, this);\n    }));\n\n    return function postProjectSaveActions(_x15, _x16, _x17, _x18, _x19, _x20) {\n        return _ref16.apply(this, arguments);\n    };\n}();\n\nvar searchProjects = exports.searchProjects = function () {\n    var _ref25 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(query) {\n        var health_topic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var location = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var organisation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        var project_name = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n        var technology_platform = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n        var _ref26, data;\n\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n                switch (_context12.prev = _context12.next) {\n                    case 0:\n                        _context12.next = 2;\n                        return _axios2.default.post('/api/search/projects/', {\n                            health_topic: health_topic,\n                            location: location,\n                            organisation: organisation,\n                            project_name: project_name,\n                            query: query,\n                            technology_platform: technology_platform\n                        });\n\n                    case 2:\n                        _ref26 = _context12.sent;\n                        data = _ref26.data;\n                        return _context12.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context12.stop();\n                }\n            }\n        }, _callee12, this);\n    }));\n\n    return function searchProjects(_x27) {\n        return _ref25.apply(this, arguments);\n    };\n}();\n\nexports.loadUserProjects = loadUserProjects;\nexports.loadProjectDetails = loadProjectDetails;\nexports.setCurrentProject = setCurrentProject;\nexports.snapShotProject = snapShotProject;\nexports.loadProjectStructure = loadProjectStructure;\nexports.processForm = processForm;\nexports.saveDraft = saveDraft;\nexports.discardDraft = discardDraft;\nexports.publish = publish;\nexports.searchDuplicateProjectName = searchDuplicateProjectName;\nexports.clearSimilarNameList = clearSimilarNameList;\nexports.updateProjectCountryFields = updateProjectCountryFields;\nexports.updateEditedProject = updateEditedProject;\nexports.resetEditedProject = resetEditedProject;\nexports.default = projects;\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _forOwn = __webpack_require__(/*! lodash/forOwn */ \"./node_modules/lodash/forOwn.js\");\n\nvar _forOwn2 = _interopRequireDefault(_forOwn);\n\nvar _isEmpty = __webpack_require__(/*! lodash/isEmpty */ \"./node_modules/lodash/isEmpty.js\");\n\nvar _isEmpty2 = _interopRequireDefault(_isEmpty);\n\nvar _isEqual = __webpack_require__(/*! lodash/isEqual */ \"./node_modules/lodash/isEqual.js\");\n\nvar _isEqual2 = _interopRequireDefault(_isEqual);\n\nvar _project_definition = __webpack_require__(/*! ../static_data/project_definition */ \"./src/store/static_data/project_definition.js\");\n\nvar _countries = __webpack_require__(/*! ./countries */ \"./src/store/modules/countries.js\");\n\nvar CountryModule = _interopRequireWildcard(_countries);\n\nvar _user = __webpack_require__(/*! ./user */ \"./src/store/modules/user.js\");\n\nvar UserModule = _interopRequireWildcard(_user);\n\nvar _toolkit = __webpack_require__(/*! ./toolkit */ \"./src/store/modules/toolkit.js\");\n\nvar ToolkitModule = _interopRequireWildcard(_toolkit);\n\nvar _reselect = __webpack_require__(/*! reselect */ \"./node_modules/reselect/lib/index.js\");\n\nvar _project_utils = __webpack_require__(/*! ../project_utils */ \"./src/store/project_utils.js\");\n\nvar _system = __webpack_require__(/*! ./system */ \"./src/store/modules/system.js\");\n\nvar SystemModule = _interopRequireWildcard(_system);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar isMemberOrViewer = exports.isMemberOrViewer = function isMemberOrViewer(state, project) {\n    var profile = UserModule.getProfile(state);\n    if (profile && profile.member && profile.viewer) {\n        var isMember = profile.member.indexOf(project.id) > -1;\n        var isViewer = !isMember && profile.viewer.indexOf(project.id) > -1;\n        return { isMember: isMember, isViewer: isViewer, isTeam: isMember || isViewer };\n    }\n    return { isMember: false, isViewer: false, isTeam: false };\n};\n\n// GETTERS\n\nvar getCurrentProjectId = exports.getCurrentProjectId = function getCurrentProjectId(state) {\n    return state.projects.currentProject;\n};\n\nvar getSavedProjectList = exports.getSavedProjectList = (0, _reselect.createSelector)(function (state) {\n    return state.projects.list;\n}, function (state) {\n    return exports.getVanillaProject(state);\n}, function (savedProjects, vanilla) {\n    if (savedProjects) {\n        return savedProjects.filter(function (p) {\n            return p.id !== -1;\n        }).map(function (pf) {\n            return _extends({}, pf, { draft: _extends({}, vanilla, { donors: [], implementing_partners: [] }, pf.draft)\n            });\n        });\n    }\n    return undefined;\n});\n\nvar getPublishedProjects = exports.getPublishedProjects = function getPublishedProjects(state) {\n    if (state.projects.list) {\n        return exports.getSavedProjectList(state).map(function (p) {\n            p = _extends({}, p.published, exports.isMemberOrViewer(state, p));\n            return p;\n        });\n    }\n    return [];\n};\n\nvar getDraftedProjects = exports.getDraftedProjects = function getDraftedProjects(state) {\n    if (state.projects.list) {\n        return exports.getSavedProjectList(state).map(function (p) {\n            p = _extends({}, p.draft, exports.isMemberOrViewer(state, p));\n            return p;\n        });\n    }\n    return [];\n};\n\nvar getFlatProjectStructure = exports.getFlatProjectStructure = function getFlatProjectStructure(state) {\n    var structure = state.projects.structure;\n    if (structure) {\n        var strategies = [];\n        structure.strategies.forEach(function (g) {\n            g.subGroups.forEach(function (sg) {\n                strategies = [].concat(_toConsumableArray(strategies), _toConsumableArray(sg.strategies.map(function (s) {\n                    return _extends({}, s);\n                })));\n            });\n        });\n        var health_focus_areas = [];\n        structure.health_focus_areas.forEach(function (hfa) {\n            health_focus_areas = [].concat(_toConsumableArray(health_focus_areas), _toConsumableArray(hfa.health_focus_areas));\n        });\n        var hsc_challenges = [];\n        structure.hsc_challenges.forEach(function (hsc) {\n            hsc_challenges = [].concat(_toConsumableArray(hsc_challenges), _toConsumableArray(hsc.challenges));\n        });\n        return _extends({}, structure, { strategies: strategies, health_focus_areas: health_focus_areas, hsc_challenges: hsc_challenges });\n    }\n    return {};\n};\n\nvar getProjectStructure = exports.getProjectStructure = (0, _reselect.createSelector)(function (state) {\n    return state.projects.structure;\n}, function (structure) {\n    return _extends({}, structure);\n});\n\nvar getUserProjects = exports.getUserProjects = function getUserProjects(state) {\n    var structure = exports.getFlatProjectStructure(state);\n    if (state.projects.list) {\n        return exports.getSavedProjectList(state).map(function (p) {\n            var public_id = p.public_id;\n            var isPublished = !!public_id;\n            p = isPublished ? _extends({}, p.published) : _extends({}, p.draft);\n            var country = CountryModule.getCountry(state, p.country);\n            p = _extends({}, p, exports.isMemberOrViewer(state, p), {\n                isPublished: isPublished,\n                public_id: public_id,\n                country_name: country ? country.name : ''\n            }, (0, _project_utils.convertIdArrayToObjectArray)(p, structure, _project_utils.dashFieldConvertToObject));\n            return p;\n        });\n    }\n    return [];\n};\n\nvar getUserDefaultProject = exports.getUserDefaultProject = function getUserDefaultProject(state) {\n    var pp = state && state.projects ? state.projects.list : null;\n    return pp && pp[0] && pp[0].id !== -1 ? '' + pp[0].id : null;\n};\n\nvar getEmptyProject = exports.getEmptyProject = function getEmptyProject() {\n    return _extends({}, _project_definition.project_definition);\n};\n\nvar getVanillaProject = exports.getVanillaProject = function getVanillaProject(state) {\n    var project = exports.getEmptyProject();\n    var structure = exports.getProjectStructure(state);\n    var profile = UserModule.getProfile(state);\n\n    if (profile) {\n        project.country = profile.country ? profile.country.id : null;\n        project.organisation = profile.organisation ? profile.organisation : null;\n    }\n    if (structure) {\n        project.interoperability_links = structure.interoperability_links;\n    }\n    return _extends({}, project);\n};\n\nvar getCurrentProjectIfExist = exports.getCurrentProjectIfExist = function getCurrentProjectIfExist(state) {\n    return exports.getUserProjects(state).find(function (p) {\n        return p.id === state.projects.currentProject;\n    });\n};\n\nvar getCurrentProject = exports.getCurrentProject = function getCurrentProject(state) {\n    var project = exports.getCurrentProjectIfExist(state);\n    if (!project) {\n        project = exports.getCurrentPublicProject(state);\n        if (!project) {\n            project = exports.getVanillaProject(state);\n        }\n    }\n    return _extends({}, project);\n};\n\nvar getCurrentPublicProject = exports.getCurrentPublicProject = function getCurrentPublicProject(state) {\n    var project = state.projects.currentPublicProject ? state.projects.currentPublicProject : {};\n    if (project && project.id) {\n        project = project.published && project.published.name ? project.published : project.draft;\n    }\n    if (project === null) {\n        // This can happen if the draft is missing\n        return null;\n    }\n    var country = project.country ? CountryModule.getCountry(state, project.country) : undefined;\n    return _extends({}, project, { country_name: country ? country.name : project.country_name, isPublic: true });\n};\n\nvar getCurrentPublicProjectDetails = exports.getCurrentPublicProjectDetails = function getCurrentPublicProjectDetails(state, isDraft) {\n    var project = isDraft ? exports.getCurrentDraft(state) : exports.getCurrentPublished(state);\n    var type = isDraft ? 'draft' : 'published';\n    if (project) {\n        return project;\n    }\n    project = state.projects.currentPublicProject ? state.projects.currentPublicProject[type] : undefined;\n    if (project) {\n        project.hasPublishedVersion = !!(state.projects.currentPublicProject.published && state.projects.currentPublicProject.published.name);\n        project.disableDraft = !state.projects.currentPublicProject.draft;\n        return exports.parseProjectForViewMode(state, project);\n    }\n    return _extends({}, exports.getVanillaProject(state));\n};\n\nvar convertCountryFieldsAnswer = exports.convertCountryFieldsAnswer = function convertCountryFieldsAnswer(fields) {\n    return fields.map(function (f) {\n        f = _extends({}, f);\n        switch (f.type) {\n            case 2:\n                f.answer = parseInt(f.answer, 10);\n                break;\n            case 3:\n                f.answer = f.answer === 'true';\n                break;\n            case 5:\n                f.answer = JSON.parse(f.answer);\n        }\n        return f;\n    });\n};\n\nvar parseProjectForViewMode = exports.parseProjectForViewMode = function parseProjectForViewMode(state, project) {\n    var base = exports.getEmptyProject();\n    var structure = exports.getFlatProjectStructure(state);\n    var country = CountryModule.getCountry(state, project.country);\n    var secondPhaseCheck = [{ key: 'platforms.strategies', structure_key: 'strategies' }];\n    project = _extends({}, base, project);\n    project = _extends({}, project, {\n        country_name: country ? country.name : ''\n    }, (0, _project_utils.convertIdArrayToObjectArray)(project, structure, _project_utils.dashFieldConvertToObject), {\n        coverageType: (0, _project_utils.setCoverageType)(project.coverage, project.national_level_deployment),\n        coverage_second_level: project.coverage_second_level ? project.coverage_second_level : [{}],\n        coverage: project.coverage ? project.coverage : [{}]\n    });\n    return _extends({}, project, (0, _project_utils.convertIdArrayToObjectArray)(project, structure, secondPhaseCheck), {\n        hasPublishedVersion: project.hasPublishedVersion !== undefined ? project.hasPublishedVersion : true\n    });\n};\n\nvar getCurrentPublished = exports.getCurrentPublished = function getCurrentPublished(state) {\n    var project = exports.getPublishedProjects(state).find(function (p) {\n        return p.id === state.projects.currentProject;\n    });\n    if (project) {\n        return exports.parseProjectForViewMode(state, project);\n    }\n    return undefined;\n};\n\nvar getCurrentDraft = exports.getCurrentDraft = function getCurrentDraft(state) {\n    var draft = exports.getDraftedProjects(state).find(function (p) {\n        return p.id === state.projects.currentProject;\n    });\n    if (draft) {\n        return _extends({}, draft, {\n            hasPublishedVersion: !!exports.getPublishedProjects(state).find(function (p) {\n                return p.id === state.projects.currentProject;\n            })\n        });\n    }\n    return undefined;\n};\n\nvar getCurrentDraftInViewMode = exports.getCurrentDraftInViewMode = function getCurrentDraftInViewMode(state) {\n    var draft = exports.getCurrentDraft(state);\n    if (draft) {\n        return exports.parseProjectForViewMode(state, draft);\n    }\n    return undefined;\n};\n\nvar getStoredCountryFields = exports.getStoredCountryFields = function getStoredCountryFields(state) {\n    return function (isDraft) {\n        var project = isDraft ? exports.getCurrentDraft(state) : exports.getCurrentPublished(state);\n        if (project === undefined) {\n            var newProject = state.projects.list.find(function (p) {\n                return p.id === -1;\n            });\n            if (newProject) {\n                project = newProject.draft;\n            }\n        }\n        return project ? project.fields : [];\n    };\n};\n\nvar getProjectCountryFields = exports.getProjectCountryFields = function getProjectCountryFields(state) {\n    return function (isDraft) {\n        var baseCountryFields = CountryModule.getCountryFields(state);\n        var countryFields = exports.convertCountryFieldsAnswer(exports.getStoredCountryFields(state)(isDraft));\n        var result = baseCountryFields.map(function (bc) {\n            var saved = countryFields.find(function (cf) {\n                return cf.schema_id === bc.id;\n            });\n            return _extends({}, bc, {\n                answer: saved ? saved.answer : bc.answer\n            });\n        });\n        return [].concat(_toConsumableArray(result));\n    };\n};\n\nvar getCurrentProjectForEditing = exports.getCurrentProjectForEditing = function getCurrentProjectForEditing(state, data) {\n    var structure = exports.getFlatProjectStructure(state);\n    if (!data) {\n        data = exports.getVanillaProject(state);\n    }\n    data.start_date = (0, _project_utils.convertDate)(data.start_date);\n    data.implementation_dates = (0, _project_utils.convertDate)(data.implementation_dates);\n    data.end_date = (0, _project_utils.convertDate)(data.end_date);\n    data = (0, _project_utils.convertStringArrayToObjectArray)(data);\n    data = (0, _project_utils.fillEmptyCollectionsWithDefault)(data);\n    if (_typeof(data.organisation) !== 'object') {\n        data.organisation = {\n            id: data.organisation,\n            name: data.organisation_name\n        };\n    }\n    data = _extends({}, data, exports.isMemberOrViewer(state, data), (0, _project_utils.convertIdArrayToObjectArray)(data, structure, _project_utils.fieldToConvertToObject), (0, _project_utils.handleInteroperabilityLinks)(data, structure));\n    if (!data.forceSetCoverage) {\n        data.coverageType = (0, _project_utils.setCoverageType)(data.coverage, data.national_level_deployment);\n    } else {\n        data.forceSetCoverage = undefined;\n    }\n    return _extends({}, _project_definition.project_definition, data);\n};\n\nvar getCurrentPublishedProjectForEditing = exports.getCurrentPublishedProjectForEditing = function getCurrentPublishedProjectForEditing(state) {\n    var project = exports.getPublishedProjects(state).find(function (p) {\n        return p.id === state.projects.currentProject;\n    });\n    if (project) {\n        return exports.getCurrentProjectForEditing(state, project);\n    }\n    return undefined;\n};\n\nvar getCurrentEdits = exports.getCurrentEdits = function getCurrentEdits(state) {\n    var edited = state.projects.editedProject;\n    return _extends({}, edited, { forceSetCoverage: !!edited.coverageType });\n};\n\nvar getCurrentDraftProjectForEditing = exports.getCurrentDraftProjectForEditing = function getCurrentDraftProjectForEditing(state) {\n    var project = _extends({}, exports.getCurrentDraft(state), exports.getCurrentEdits(state));\n    return exports.getCurrentProjectForEditing(state, project);\n};\n\nvar getNewProjectForEditing = exports.getNewProjectForEditing = function getNewProjectForEditing(state) {\n    var vanilla = exports.getVanillaProject(state);\n    return _extends({}, vanilla, exports.getCurrentEdits(state));\n};\n\nvar getTeam = exports.getTeam = function getTeam(state) {\n    if (state.projects.teamViewers) {\n        return state.projects.teamViewers.team.map(function (id) {\n            return state.system.profiles.find(function (p) {\n                return p.id === id;\n            });\n        });\n    }\n    return [];\n};\n\nvar getViewers = exports.getViewers = function getViewers(state) {\n    if (state.projects.teamViewers) {\n        return state.projects.teamViewers.viewers.map(function (id) {\n            return state.system.profiles.find(function (p) {\n                return p.id === id;\n            });\n        });\n    }\n    return [];\n};\n\nvar getToolkitVersion = exports.getToolkitVersion = function getToolkitVersion(state) {\n    var data = state.projects.toolkitVersions;\n    return data ? data.slice() : [];\n};\nvar getCoverageVersion = exports.getCoverageVersion = function getCoverageVersion(state) {\n    var data = state.projects.coverageVersions;\n    return data ? data.slice() : [];\n};\n\nvar getCurrentVersion = exports.getCurrentVersion = function getCurrentVersion(state) {\n    return exports.getToolkitVersion(state).length;\n};\n\nvar getCurrentVersionDate = exports.getCurrentVersionDate = function getCurrentVersionDate(state) {\n    var version = exports.getToolkitVersion(state);\n    var last = version.slice(-1)[0];\n    return last ? last.modified : null;\n};\n\nvar getMapsAxisData = exports.getMapsAxisData = function getMapsAxisData(state) {\n    var axis = SystemModule.getAxis(state);\n    var chartAxis = { labels: axis.map(function (a) {\n            return a.name;\n        }), data: [] };\n    var toolkitVersion = exports.getToolkitVersion(state);\n    var toolkitData = ToolkitModule.getToolkitData(state);\n    var todayString = (0, _project_utils.getTodayString)();\n    if (toolkitVersion.length > 0) {\n        // Data from versions\n        chartAxis.data = toolkitVersion.map(function (version) {\n            return {\n                date: version.modified.split('T')[0],\n                axis1: version.data[0].axis_score / 100,\n                axis2: version.data[1].axis_score / 100,\n                axis3: version.data[2].axis_score / 100,\n                axis4: version.data[3].axis_score / 100,\n                axis5: version.data[4].axis_score / 100,\n                axis6: version.data[5].axis_score / 100\n            };\n        });\n    }\n\n    // Current data (from tooltip)\n\n    if (toolkitData.length === 6) {\n        var lastAxisData = {\n            axis1: toolkitData[0].axis_score / 100,\n            axis2: toolkitData[1].axis_score / 100,\n            axis3: toolkitData[2].axis_score / 100,\n            axis4: toolkitData[3].axis_score / 100,\n            axis5: toolkitData[4].axis_score / 100,\n            axis6: toolkitData[5].axis_score / 100,\n            date: todayString\n        };\n        chartAxis.data.push(lastAxisData);\n    }\n    return chartAxis;\n};\n\nvar getMapsDomainData = exports.getMapsDomainData = function getMapsDomainData(state) {\n    var domains = SystemModule.getDomains(state);\n    var axes = SystemModule.getAxis(state);\n    var chartData = { labels: axes.map(function (a) {\n            return a.name;\n        }) };\n    var toolkitVersion = exports.getToolkitVersion(state);\n    var toolkitData = ToolkitModule.getToolkitData(state);\n    var todayString = (0, _project_utils.getTodayString)();\n    axes.forEach(function (axis, axInd) {\n        chartData[axis.name] = { labels: domains.filter(function (d) {\n                return d.axis === axis.id;\n            }).map(function (df) {\n                return df.name;\n            }), data: [] };\n        if (toolkitVersion.length > 0) {\n            chartData[axis.name].data = toolkitVersion.map(function (version) {\n                var ret = {};\n                ret.date = version.modified.split('T')[0];\n                version.data[axInd].domains.forEach(function (domain, domainInd) {\n                    ret['axis' + (domainInd + 1)] = domain.domain_percentage / 100;\n                });\n                return ret;\n            });\n        }\n        if (toolkitData.length > 0) {\n            var current = { date: todayString };\n            toolkitData[axInd].domains.forEach(function (dom, ii) {\n                current['axis' + (ii + 1)] = dom.domain_percentage / 100;\n            });\n            chartData[axis.name].data.push(current);\n        }\n    });\n    return chartData;\n};\n\nvar getCoverageData = exports.getCoverageData = function getCoverageData(state) {\n    var coverageVersion = exports.getCoverageVersion(state);\n    var projectData = exports.getCurrentProject(state);\n\n    var coverage = projectData.coverage ? projectData.coverage.slice() : [];\n    coverage.push(Object.assign({}, projectData.national_level_deployment));\n    coverageVersion.push({ data: coverage });\n\n    var todayString = (0, _project_utils.getTodayString)();\n\n    return coverageVersion.reduce(function (ret, versionObj, vInd) {\n\n        ret.data[vInd] = {};\n        ret.data[vInd].date = versionObj.modified ? versionObj.modified.split('T')[0] : todayString;\n\n        versionObj.data.forEach(function (distrObj) {\n            (0, _forOwn2.default)(distrObj, function (val, key) {\n                var labels = ['clients', 'facilities', 'health_workers'];\n                var index = labels.indexOf(key);\n                if (index > -1) {\n                    var name = 'axis' + (index + 1);\n                    ret.data[vInd][name] = (ret.data[vInd][name] || 0) + val;\n                }\n            });\n        });\n        return ret;\n    }, { labels: [], data: [] });\n};\n\nvar getSimilarProject = exports.getSimilarProject = function getSimilarProject(state) {\n    var userProjects = exports.getPublishedProjects(state);\n    if (state.projects.similarProjectNames) {\n        return state.projects.similarProjectNames.map(function (p) {\n            p = Object.assign({}, p);\n            p.isOwn = userProjects.some(function (up) {\n                return up.id === p.id;\n            });\n            return p;\n        });\n    }\n    return [];\n};\n\nvar checkCurrentProjectValidity = exports.checkCurrentProjectValidity = function checkCurrentProjectValidity(state) {\n    var project = state.projects.currentPublicProject;\n    if (project && project.public_id === '' && project.draft === null) {\n        return { isValid: false, id: project.id };\n    }\n    return { isValid: true };\n};\n\n// ACTIONS\n\n\nfunction loadUserProjects() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch, getState) {\n            var state, _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.prev = 0;\n                            state = getState();\n\n                            if (!(state.user.profile && !exports.getSavedProjectList(state))) {\n                                _context.next = 9;\n                                break;\n                            }\n\n                            _context.next = 5;\n                            return _axios2.default.get('/api/projects/member-of/');\n\n                        case 5:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            data.sort(function (a, b) {\n                                return b.id - a.id;\n                            });\n                            dispatch({ type: 'SET_PROJECT_LIST', projects: data });\n\n                        case 9:\n                            return _context.abrupt('return', Promise.resolve());\n\n                        case 12:\n                            _context.prev = 12;\n                            _context.t0 = _context['catch'](0);\n\n                            console.log(_context.t0);\n                            return _context.abrupt('return', Promise.reject(_context.t0));\n\n                        case 16:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this, [[0, 12]]);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadProjectDetails() {\n    var _this2 = this;\n\n    return function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n            var projectId, toolkitVersionsPromise, coverageVersionsPromise, teamViewersPromise, _ref4, _ref5, toolkitVersions, coverageVersions, teamViewers;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _context2.prev = 0;\n                            projectId = getState().projects.currentProject;\n\n                            if (!(projectId && projectId !== -1)) {\n                                _context2.next = 15;\n                                break;\n                            }\n\n                            toolkitVersionsPromise = _axios2.default.get('/api/projects/' + projectId + '/toolkit/versions/');\n                            coverageVersionsPromise = _axios2.default.get('/api/projects/' + projectId + '/coverage/versions/');\n                            teamViewersPromise = _axios2.default.get('/api/projects/' + projectId + '/groups/');\n                            _context2.next = 8;\n                            return Promise.all([toolkitVersionsPromise, coverageVersionsPromise, teamViewersPromise]);\n\n                        case 8:\n                            _ref4 = _context2.sent;\n                            _ref5 = _slicedToArray(_ref4, 3);\n                            toolkitVersions = _ref5[0];\n                            coverageVersions = _ref5[1];\n                            teamViewers = _ref5[2];\n\n                            dispatch({\n                                type: 'SET_PROJECT_INFO',\n                                info: {\n                                    toolkitVersions: toolkitVersions.data,\n                                    coverageVersions: coverageVersions.data\n                                }\n                            });\n                            dispatch({ type: 'SET_PROJECT_TEAM_VIEWERS', teamViewers: teamViewers.data });\n\n                        case 15:\n                            return _context2.abrupt('return', Promise.resolve());\n\n                        case 18:\n                            _context2.prev = 18;\n                            _context2.t0 = _context2['catch'](0);\n\n                            console.log(_context2.t0);\n                            return _context2.abrupt('return', Promise.reject(_context2.t0));\n\n                        case 22:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2, [[0, 18]]);\n        }));\n\n        return function (_x3, _x4) {\n            return _ref3.apply(this, arguments);\n        };\n    }();\n}\n\nfunction setCurrentProject(id) {\n    var _this3 = this;\n\n    return function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n            var project, mapDataPromise, detailPromise, toolkitPromise, _ref7, data, profile, teamViewers, newProject;\n\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            id = parseInt(id, 10);\n\n                            if (!(id && id !== -1 && id !== getState().projects.currentProject)) {\n                                _context3.next = 22;\n                                break;\n                            }\n\n                            dispatch({ type: 'SET_CURRENT_PROJECT', id: id });\n                            project = exports.getCurrentProjectIfExist(getState());\n\n                            if (!project) {\n                                _context3.next = 9;\n                                break;\n                            }\n\n                            mapDataPromise = dispatch(CountryModule.setCurrentCountry(project.country, ['mapData']));\n                            detailPromise = dispatch(exports.loadProjectDetails());\n                            toolkitPromise = dispatch(ToolkitModule.loadToolkitData());\n                            return _context3.abrupt('return', Promise.all([mapDataPromise, detailPromise, toolkitPromise]));\n\n                        case 9:\n                            _context3.next = 11;\n                            return _axios2.default.get('/api/projects/' + id + '/');\n\n                        case 11:\n                            _ref7 = _context3.sent;\n                            data = _ref7.data;\n                            profile = UserModule.getProfile(getState());\n\n                            if (!profile) {\n                                _context3.next = 19;\n                                break;\n                            }\n\n                            _context3.next = 17;\n                            return _axios2.default.get('/api/projects/' + id + '/groups/');\n\n                        case 17:\n                            teamViewers = _context3.sent;\n\n                            dispatch({ type: 'SET_PROJECT_TEAM_VIEWERS', teamViewers: teamViewers.data });\n\n                        case 19:\n                            dispatch({ type: 'SET_CURRENT_PUBLIC_PROJECT_DETAIL', project: data });\n                            _context3.next = 23;\n                            break;\n\n                        case 22:\n                            if (id === -1) {\n                                dispatch({ type: 'SET_CURRENT_PROJECT', id: id });\n                                newProject = {\n                                    id: -1,\n                                    draft: {\n                                        fields: []\n                                    },\n                                    public: {}\n                                };\n\n                                dispatch({ type: 'SET_PROJECT_TEAM_VIEWERS', teamViewers: { team: [], viewers: [] } });\n                                dispatch({ type: 'UPDATE_SAVE_PROJECT', project: newProject });\n                            }\n\n                        case 23:\n                            return _context3.abrupt('return', Promise.resolve());\n\n                        case 24:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, _this3);\n        }));\n\n        return function (_x5, _x6) {\n            return _ref6.apply(this, arguments);\n        };\n    }();\n}\n\nfunction snapShotProject() {\n    var _this4 = this;\n\n    return function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n            var id;\n            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            id = getState().projects.currentProject;\n                            _context4.next = 3;\n                            return _axios2.default.post('/api/projects/' + id + '/version/');\n\n                        case 3:\n                            _context4.next = 5;\n                            return dispatch(exports.loadProjectDetails());\n\n                        case 5:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, _callee4, _this4);\n        }));\n\n        return function (_x7, _x8) {\n            return _ref8.apply(this, arguments);\n        };\n    }();\n}\nfunction loadProjectStructure(force) {\n    var _this5 = this;\n\n    return function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n            var state, structure, _ref10, data;\n\n            return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                    switch (_context5.prev = _context5.next) {\n                        case 0:\n                            state = getState();\n                            structure = exports.getProjectStructure(state);\n\n                            if (!((0, _isEmpty2.default)(structure) || force)) {\n                                _context5.next = 9;\n                                break;\n                            }\n\n                            _context5.next = 5;\n                            return _axios2.default.get('/api/projects/structure/');\n\n                        case 5:\n                            _ref10 = _context5.sent;\n                            data = _ref10.data;\n                            _context5.next = 9;\n                            return dispatch({ type: 'SET_PROJECT_STRUCTURE', structure: data });\n\n                        case 9:\n                        case 'end':\n                            return _context5.stop();\n                    }\n                }\n            }, _callee5, _this5);\n        }));\n\n        return function (_x9, _x10) {\n            return _ref9.apply(this, arguments);\n        };\n    }();\n}\n\nfunction processForm(form) {\n    var organisation_name = form.organisation ? form.organisation.name : '';\n    var organisation = form.organisation ? form.organisation.id : null;\n    form = _extends({}, form, (0, _project_utils.retainNationalOrDistrictCoverage)(form));\n    form = _extends({}, form, {\n        organisation_name: organisation_name,\n        organisation: organisation\n    }, (0, _project_utils.createDateFields)(form), (0, _project_utils.convertObjectArrayToStringArray)(form), (0, _project_utils.parseOutInteroperabilityLinks)(form), {\n        coverageType: undefined,\n        platforms: (0, _project_utils.parsePlatformCollection)(form)\n    }, (0, _project_utils.extractIdFromObjects)(form), (0, _project_utils.handleNationalLevelCoverage)(form), {\n        coverage: (0, _project_utils.handleCoverage)(form.coverage),\n        coverage_second_level: (0, _project_utils.handleCoverage)(form.coverage_second_level)\n    });\n    form = _extends({}, form, (0, _project_utils.retainOnlyIds)(form));\n    form = _extends({}, form, (0, _project_utils.removeEmptyChildObjects)(form));\n    return (0, _project_utils.removeKeysWithoutValues)(form);\n}\n\nfunction saveDraft(form, team, viewers) {\n    var _this6 = this;\n\n    return function () {\n        var _ref19 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(dispatch, getState) {\n            var method, url, _ref20, data;\n\n            return regeneratorRuntime.wrap(function _callee9$(_context9) {\n                while (1) {\n                    switch (_context9.prev = _context9.next) {\n                        case 0:\n                            form = exports.processForm(form);\n                            method = form.id ? 'put' : 'post';\n                            url = form.id ? '/api/projects/draft/' + form.id + '/' : '/api/projects/draft/';\n                            _context9.prev = 3;\n                            _context9.next = 6;\n                            return _axios2.default[method](url, form);\n\n                        case 6:\n                            _ref20 = _context9.sent;\n                            data = _ref20.data;\n                            return _context9.abrupt('return', exports.postProjectSaveActions(data, team, viewers, dispatch, getState(), 'draft'));\n\n                        case 11:\n                            _context9.prev = 11;\n                            _context9.t0 = _context9['catch'](3);\n\n                            console.log(_context9.t0);\n                            return _context9.abrupt('return', Promise.reject(_context9.t0));\n\n                        case 15:\n                        case 'end':\n                            return _context9.stop();\n                    }\n                }\n            }, _callee9, _this6, [[3, 11]]);\n        }));\n\n        return function (_x21, _x22) {\n            return _ref19.apply(this, arguments);\n        };\n    }();\n}\n\nfunction discardDraft() {\n    var _this7 = this;\n\n    return function () {\n        var _ref21 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(dispatch, getState) {\n            var published, form, countryFields, _ref22, data;\n\n            return regeneratorRuntime.wrap(function _callee10$(_context10) {\n                while (1) {\n                    switch (_context10.prev = _context10.next) {\n                        case 0:\n                            published = exports.getCurrentPublishedProjectForEditing(getState());\n                            form = exports.processForm(published);\n                            countryFields = exports.getStoredCountryFields(getState())(false);\n                            _context10.next = 5;\n                            return _axios2.default.put('/api/projects/draft/' + published.id + '/', form);\n\n                        case 5:\n                            _ref22 = _context10.sent;\n                            data = _ref22.data;\n                            _context10.next = 9;\n                            return exports.saveCountryFields(countryFields, data.draft.country, data.id, 'published');\n\n                        case 9:\n                            data.draft.fields = _context10.sent;\n\n                            dispatch({ type: 'UPDATE_SAVE_PROJECT', project: data });\n                            return _context10.abrupt('return', Promise.resolve(data));\n\n                        case 12:\n                        case 'end':\n                            return _context10.stop();\n                    }\n                }\n            }, _callee10, _this7);\n        }));\n\n        return function (_x23, _x24) {\n            return _ref21.apply(this, arguments);\n        };\n    }();\n}\n\nfunction publish(form, team, viewers) {\n    var _this8 = this;\n\n    return function () {\n        var _ref23 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(dispatch, getState) {\n            var _ref24, data;\n\n            return regeneratorRuntime.wrap(function _callee11$(_context11) {\n                while (1) {\n                    switch (_context11.prev = _context11.next) {\n                        case 0:\n                            form = exports.processForm(form);\n                            _context11.prev = 1;\n                            _context11.next = 4;\n                            return _axios2.default.put('/api/projects/publish/' + form.id + '/', form);\n\n                        case 4:\n                            _ref24 = _context11.sent;\n                            data = _ref24.data;\n                            return _context11.abrupt('return', exports.postProjectSaveActions(data, team, viewers, dispatch, getState(), 'published'));\n\n                        case 9:\n                            _context11.prev = 9;\n                            _context11.t0 = _context11['catch'](1);\n\n                            console.log(_context11.t0);\n                            return _context11.abrupt('return', Promise.reject(_context11.t0));\n\n                        case 13:\n                        case 'end':\n                            return _context11.stop();\n                    }\n                }\n            }, _callee11, _this8, [[1, 9]]);\n        }));\n\n        return function (_x25, _x26) {\n            return _ref23.apply(this, arguments);\n        };\n    }();\n}\n\nfunction searchDuplicateProjectName(query) {\n    var _this9 = this;\n\n    return function () {\n        var _ref27 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(dispatch) {\n            var list;\n            return regeneratorRuntime.wrap(function _callee13$(_context13) {\n                while (1) {\n                    switch (_context13.prev = _context13.next) {\n                        case 0:\n                            _context13.next = 2;\n                            return exports.searchProjects(query);\n\n                        case 2:\n                            list = _context13.sent;\n\n                            dispatch({ type: 'SET_SIMILAR_NAME_LIST', list: list });\n\n                        case 4:\n                        case 'end':\n                            return _context13.stop();\n                    }\n                }\n            }, _callee13, _this9);\n        }));\n\n        return function (_x33) {\n            return _ref27.apply(this, arguments);\n        };\n    }();\n}\n\nfunction clearSimilarNameList() {\n    var _this10 = this;\n\n    return function () {\n        var _ref28 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14(dispatch) {\n            return regeneratorRuntime.wrap(function _callee14$(_context14) {\n                while (1) {\n                    switch (_context14.prev = _context14.next) {\n                        case 0:\n                            dispatch({ type: 'SET_SIMILAR_NAME_LIST', list: [] });\n\n                        case 1:\n                        case 'end':\n                            return _context14.stop();\n                    }\n                }\n            }, _callee14, _this10);\n        }));\n\n        return function (_x34) {\n            return _ref28.apply(this, arguments);\n        };\n    }();\n}\n\nfunction updateProjectCountryFields(_ref29) {\n    var id = _ref29.id,\n        answer = _ref29.answer,\n        question = _ref29.question,\n        type = _ref29.type,\n        country = _ref29.country,\n        schema_id = _ref29.schema_id;\n\n    return function (dispatch, getState) {\n        var projectId = exports.getCurrentProjectId(getState());\n        switch (type) {\n            case 3:\n                {\n                    answer = answer === true ? 'true' : 'false';\n                    break;\n                }\n            case 5:\n                {\n                    answer = JSON.stringify(answer);\n                    break;\n                }\n        }\n        schema_id = schema_id ? schema_id : id;\n        var countryField = { id: id, answer: answer, question: question, type: type, country: country, schema_id: schema_id };\n        dispatch({ type: 'UPDATE_COUNTRY_FIELD_ANSWER', projectId: projectId, countryField: countryField });\n    };\n}\n\nfunction updateEditedProject(project) {\n    return function (dispatch, getState) {\n        var update = {};\n        var current = getState().projects.editedProject;\n        Object.keys(project).forEach(function (k) {\n            var eq = (0, _isEqual2.default)(current[k], project[k]);\n            if (!eq) {\n                update[k] = project[k];\n            }\n        });\n        if (Object.keys(update).length > 0) {\n            dispatch({ type: 'EDITED_PROJECT_UPDATE', update: update });\n        }\n    };\n}\n\nfunction resetEditedProject() {\n    return function (dispatch) {\n        dispatch({ type: 'EDITED_PROJECT_RESET' });\n    };\n}\n\n// Reducers\n\nfunction projects() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { editedProject: {} };\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_PROJECT_LIST':\n            {\n                var list = action.projects.slice();\n                return _extends({}, state, { list: list });\n            }\n        case 'SET_SIMILAR_NAME_LIST':\n            {\n                var similarProjectNames = action.list.slice();\n                return _extends({}, state, { similarProjectNames: similarProjectNames });\n            }\n        case 'UPDATE_SAVE_PROJECT':\n            {\n                var _list = [].concat(_toConsumableArray(state.list));\n                var index = _list.findIndex(function (pj) {\n                    return pj.id === action.project.id;\n                });\n                if (index !== -1) {\n                    _list.splice(index, 1, _extends({}, action.project));\n                } else {\n                    _list.push(_extends({}, action.project));\n                }\n                return _extends({}, state, { list: _list });\n            }\n        case 'UPDATE_COUNTRY_FIELD_ANSWER':\n            {\n                var _list2 = [].concat(_toConsumableArray(state.list));\n                var _index = _list2.findIndex(function (pj) {\n                    return pj.id === action.projectId;\n                });\n                var fields = [].concat(_toConsumableArray(_list2[_index].draft.fields));\n                var fieldIndex = fields.findIndex(function (f) {\n                    return f.schema_id === action.countryField.schema_id;\n                });\n                if (fieldIndex !== -1) {\n                    fields.splice(fieldIndex, 1, _extends({}, action.countryField));\n                } else {\n                    fields.push(_extends({}, action.countryField));\n                }\n                _list2[_index].draft.fields = fields;\n                return _extends({}, state, { list: _list2 });\n            }\n        case 'SET_CURRENT_PROJECT':\n            {\n                var currentProject = action.id;\n                return _extends({}, state, { currentProject: currentProject });\n            }\n        case 'SET_CURRENT_PUBLIC_PROJECT_DETAIL':\n            {\n                var currentPublicProject = action.project;\n                return _extends({}, state, { currentPublicProject: currentPublicProject });\n            }\n        case 'SET_PROJECT_STRUCTURE':\n            {\n                var structure = action.structure;\n                return _extends({}, state, { structure: structure });\n            }\n        case 'SET_PROJECT_INFO':\n            {\n                var toolkitVersions = action.info.toolkitVersions;\n                var coverageVersions = action.info.coverageVersions;\n                var teamViewers = action.info.teamViewers;\n                return _extends({}, state, { toolkitVersions: toolkitVersions, coverageVersions: coverageVersions, teamViewers: teamViewers });\n            }\n        case 'SET_PROJECT_TEAM_VIEWERS':\n            {\n                var _teamViewers = action.teamViewers;\n                return _extends({}, state, { teamViewers: _teamViewers });\n            }\n        case 'CLEAR_USER_PROJECTS':\n            {\n                return { structure: state.structure };\n            }\n        case 'EDITED_PROJECT_UPDATE':\n            {\n                return _extends({}, state, { editedProject: _extends({}, state.editedProject, action.update) });\n            }\n        case 'EDITED_PROJECT_RESET':\n            {\n                return _extends({}, state, { editedProject: {} });\n            }\n        default:\n            return state;\n\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy9wcm9qZWN0cy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc3RvcmUvbW9kdWxlcy9wcm9qZWN0cy5qcz8zMDJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICcuLi8uLi9wbHVnaW5zL2F4aW9zJztcbmltcG9ydCBmb3JPd24gZnJvbSAnbG9kYXNoL2Zvck93bic7XG5pbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbCc7XG5pbXBvcnQgeyBwcm9qZWN0X2RlZmluaXRpb24gfSBmcm9tICcuLi9zdGF0aWNfZGF0YS9wcm9qZWN0X2RlZmluaXRpb24nO1xuaW1wb3J0ICogYXMgQ291bnRyeU1vZHVsZSBmcm9tICcuL2NvdW50cmllcyc7XG5pbXBvcnQgKiBhcyBVc2VyTW9kdWxlIGZyb20gJy4vdXNlcic7XG5pbXBvcnQgKiBhcyBUb29sa2l0TW9kdWxlIGZyb20gJy4vdG9vbGtpdCc7XG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcblxuaW1wb3J0IHtcbiAgICBjb252ZXJ0RGF0ZSxcbiAgICBjb252ZXJ0T2JqZWN0QXJyYXlUb1N0cmluZ0FycmF5LFxuICAgIGNvbnZlcnRTdHJpbmdBcnJheVRvT2JqZWN0QXJyYXksXG4gICAgY3JlYXRlRGF0ZUZpZWxkcyxcbiAgICBmaWxsRW1wdHlDb2xsZWN0aW9uc1dpdGhEZWZhdWx0LFxuICAgIGdldFRvZGF5U3RyaW5nLFxuICAgIHBhcnNlUGxhdGZvcm1Db2xsZWN0aW9uLFxuICAgIHJlbW92ZUVtcHR5Q2hpbGRPYmplY3RzLFxuICAgIHJlbW92ZUtleXNXaXRob3V0VmFsdWVzLFxuICAgIHNldENvdmVyYWdlVHlwZSxcbiAgICBwYXJzZU91dEludGVyb3BlcmFiaWxpdHlMaW5rcyxcbiAgICByZXRhaW5OYXRpb25hbE9yRGlzdHJpY3RDb3ZlcmFnZSxcbiAgICBjb252ZXJ0SWRBcnJheVRvT2JqZWN0QXJyYXksXG4gICAgaGFuZGxlSW50ZXJvcGVyYWJpbGl0eUxpbmtzLFxuICAgIGV4dHJhY3RJZEZyb21PYmplY3RzLFxuICAgIHJldGFpbk9ubHlJZHMsXG4gICAgaGFuZGxlTmF0aW9uYWxMZXZlbENvdmVyYWdlLFxuICAgIGZpZWxkVG9Db252ZXJ0VG9PYmplY3QsXG4gICAgZGFzaEZpZWxkQ29udmVydFRvT2JqZWN0LCBoYW5kbGVDb3ZlcmFnZVxufSBmcm9tICcuLi9wcm9qZWN0X3V0aWxzJztcbmltcG9ydCAqIGFzIFN5c3RlbU1vZHVsZSBmcm9tICcuL3N5c3RlbSc7XG5cblxuZXhwb3J0IGNvbnN0IGlzTWVtYmVyT3JWaWV3ZXIgPSAoc3RhdGUsIHByb2plY3QpID0+IHtcbiAgICBjb25zdCBwcm9maWxlID0gVXNlck1vZHVsZS5nZXRQcm9maWxlKHN0YXRlKTtcbiAgICBpZiAocHJvZmlsZSAmJiBwcm9maWxlLm1lbWJlciAmJiBwcm9maWxlLnZpZXdlcikge1xuICAgICAgICBjb25zdCBpc01lbWJlciA9IHByb2ZpbGUubWVtYmVyLmluZGV4T2YocHJvamVjdC5pZCkgPiAtMTtcbiAgICAgICAgY29uc3QgaXNWaWV3ZXIgPSAhaXNNZW1iZXIgJiYgcHJvZmlsZS52aWV3ZXIuaW5kZXhPZihwcm9qZWN0LmlkKSA+IC0xO1xuICAgICAgICByZXR1cm4geyBpc01lbWJlciwgaXNWaWV3ZXIsIGlzVGVhbTogaXNNZW1iZXIgfHwgaXNWaWV3ZXIgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNNZW1iZXI6IGZhbHNlLCBpc1ZpZXdlcjogZmFsc2UsIGlzVGVhbTogZmFsc2UgfTtcbn07XG5cbi8vIEdFVFRFUlNcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRQcm9qZWN0SWQgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLnByb2plY3RzLmN1cnJlbnRQcm9qZWN0O1xufTtcblxuXG5leHBvcnQgY29uc3QgZ2V0U2F2ZWRQcm9qZWN0TGlzdCA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHN0YXRlID0+IHN0YXRlLnByb2plY3RzLmxpc3QsXG4gICAgc3RhdGUgPT4gZXhwb3J0cy5nZXRWYW5pbGxhUHJvamVjdChzdGF0ZSksXG4gICAgKHNhdmVkUHJvamVjdHMsIHZhbmlsbGEpID0+IHtcbiAgICAgICAgaWYgKHNhdmVkUHJvamVjdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzYXZlZFByb2plY3RzLmZpbHRlcihwID0+IHAuaWQgIT09IC0xKVxuICAgICAgICAgICAgICAgIC5tYXAocGYgPT4gKHsgLi4ucGYsIGRyYWZ0OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnZhbmlsbGEsIGRvbm9yczogW10sIGltcGxlbWVudGluZ19wYXJ0bmVyczogW10sIC4uLnBmLmRyYWZ0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG5leHBvcnQgY29uc3QgZ2V0UHVibGlzaGVkUHJvamVjdHMgPSBzdGF0ZSA9PiB7XG4gICAgaWYgKHN0YXRlLnByb2plY3RzLmxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuZ2V0U2F2ZWRQcm9qZWN0TGlzdChzdGF0ZSkubWFwKHAgPT4ge1xuICAgICAgICAgICAgcCA9IHsgLi4ucC5wdWJsaXNoZWQsIC4uLmV4cG9ydHMuaXNNZW1iZXJPclZpZXdlcihzdGF0ZSwgcCkgfTtcbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldERyYWZ0ZWRQcm9qZWN0cyA9IHN0YXRlID0+IHtcbiAgICBpZiAoc3RhdGUucHJvamVjdHMubGlzdCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5nZXRTYXZlZFByb2plY3RMaXN0KHN0YXRlKS5tYXAocCA9PiB7XG4gICAgICAgICAgICBwID0geyAuLi5wLmRyYWZ0LCAuLi5leHBvcnRzLmlzTWVtYmVyT3JWaWV3ZXIoc3RhdGUsIHApIH07XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGbGF0UHJvamVjdFN0cnVjdHVyZSA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSBzdGF0ZS5wcm9qZWN0cy5zdHJ1Y3R1cmU7XG4gICAgaWYgKHN0cnVjdHVyZSkge1xuICAgICAgICBsZXQgc3RyYXRlZ2llcyA9IFtdO1xuICAgICAgICBzdHJ1Y3R1cmUuc3RyYXRlZ2llcy5mb3JFYWNoKGcgPT4ge1xuICAgICAgICAgICAgZy5zdWJHcm91cHMuZm9yRWFjaChzZyA9PiB7XG4gICAgICAgICAgICAgICAgc3RyYXRlZ2llcyA9IFsuLi5zdHJhdGVnaWVzLCAuLi5zZy5zdHJhdGVnaWVzLm1hcChzID0+ICh7IC4uLnMgfSkpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGhlYWx0aF9mb2N1c19hcmVhcyA9IFtdO1xuICAgICAgICBzdHJ1Y3R1cmUuaGVhbHRoX2ZvY3VzX2FyZWFzLmZvckVhY2goaGZhID0+IHtcbiAgICAgICAgICAgIGhlYWx0aF9mb2N1c19hcmVhcyA9IFsuLi5oZWFsdGhfZm9jdXNfYXJlYXMsIC4uLmhmYS5oZWFsdGhfZm9jdXNfYXJlYXNdO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGhzY19jaGFsbGVuZ2VzID0gW107XG4gICAgICAgIHN0cnVjdHVyZS5oc2NfY2hhbGxlbmdlcy5mb3JFYWNoKGhzYyA9PiB7XG4gICAgICAgICAgICBoc2NfY2hhbGxlbmdlcyA9IFsuLi5oc2NfY2hhbGxlbmdlcywgLi4uaHNjLmNoYWxsZW5nZXNdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RydWN0dXJlLCBzdHJhdGVnaWVzLCBoZWFsdGhfZm9jdXNfYXJlYXMsIGhzY19jaGFsbGVuZ2VzIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQcm9qZWN0U3RydWN0dXJlID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgc3RhdGUgPT4gc3RhdGUucHJvamVjdHMuc3RydWN0dXJlLFxuICAgIHN0cnVjdHVyZSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0cnVjdHVyZSB9O1xuICAgIH0pO1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlclByb2plY3RzID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHN0cnVjdHVyZSA9IGV4cG9ydHMuZ2V0RmxhdFByb2plY3RTdHJ1Y3R1cmUoc3RhdGUpO1xuICAgIGlmIChzdGF0ZS5wcm9qZWN0cy5saXN0KSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLmdldFNhdmVkUHJvamVjdExpc3Qoc3RhdGUpLm1hcChwID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY19pZCA9IHAucHVibGljX2lkO1xuICAgICAgICAgICAgY29uc3QgaXNQdWJsaXNoZWQgPSAhIXB1YmxpY19pZDtcbiAgICAgICAgICAgIHAgPSBpc1B1Ymxpc2hlZCA/IHsgLi4ucC5wdWJsaXNoZWQgfSA6IHsgLi4ucC5kcmFmdCB9O1xuICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IENvdW50cnlNb2R1bGUuZ2V0Q291bnRyeShzdGF0ZSwgcC5jb3VudHJ5KTtcbiAgICAgICAgICAgIHAgPSB7XG4gICAgICAgICAgICAgICAgLi4ucCxcbiAgICAgICAgICAgICAgICAuLi5leHBvcnRzLmlzTWVtYmVyT3JWaWV3ZXIoc3RhdGUsIHApLFxuICAgICAgICAgICAgICAgIGlzUHVibGlzaGVkLFxuICAgICAgICAgICAgICAgIHB1YmxpY19pZCxcbiAgICAgICAgICAgICAgICBjb3VudHJ5X25hbWU6IGNvdW50cnkgPyBjb3VudHJ5Lm5hbWUgOiAnJyxcbiAgICAgICAgICAgICAgICAuLi5jb252ZXJ0SWRBcnJheVRvT2JqZWN0QXJyYXkocCwgc3RydWN0dXJlLCBkYXNoRmllbGRDb252ZXJ0VG9PYmplY3QpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlckRlZmF1bHRQcm9qZWN0ID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHBwID0gc3RhdGUgJiYgc3RhdGUucHJvamVjdHMgPyBzdGF0ZS5wcm9qZWN0cy5saXN0IDogbnVsbDtcbiAgICByZXR1cm4gcHAgJiYgcHBbMF0gJiYgcHBbMF0uaWQgIT09IC0xID8gJycgKyBwcFswXS5pZCA6IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RW1wdHlQcm9qZWN0ID0gKCkgPT4ge1xuICAgIHJldHVybiB7IC4uLnByb2plY3RfZGVmaW5pdGlvbiB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFZhbmlsbGFQcm9qZWN0ID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBleHBvcnRzLmdldEVtcHR5UHJvamVjdCgpO1xuICAgIGNvbnN0IHN0cnVjdHVyZSA9IGV4cG9ydHMuZ2V0UHJvamVjdFN0cnVjdHVyZShzdGF0ZSk7XG4gICAgY29uc3QgcHJvZmlsZSA9IFVzZXJNb2R1bGUuZ2V0UHJvZmlsZShzdGF0ZSk7XG5cbiAgICBpZiAocHJvZmlsZSkge1xuICAgICAgICBwcm9qZWN0LmNvdW50cnkgPSBwcm9maWxlLmNvdW50cnkgPyBwcm9maWxlLmNvdW50cnkuaWQgOiBudWxsO1xuICAgICAgICBwcm9qZWN0Lm9yZ2FuaXNhdGlvbiA9IHByb2ZpbGUub3JnYW5pc2F0aW9uID8gcHJvZmlsZS5vcmdhbmlzYXRpb24gOiBudWxsO1xuICAgIH1cbiAgICBpZiAoc3RydWN0dXJlKSB7XG4gICAgICAgIHByb2plY3QuaW50ZXJvcGVyYWJpbGl0eV9saW5rcyA9IHN0cnVjdHVyZS5pbnRlcm9wZXJhYmlsaXR5X2xpbmtzO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5wcm9qZWN0IH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFByb2plY3RJZkV4aXN0ID0gc3RhdGUgPT4ge1xuICAgIHJldHVybiBleHBvcnRzLmdldFVzZXJQcm9qZWN0cyhzdGF0ZSkuZmluZChwID0+IHAuaWQgPT09IHN0YXRlLnByb2plY3RzLmN1cnJlbnRQcm9qZWN0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50UHJvamVjdCA9IHN0YXRlID0+IHtcbiAgICBsZXQgcHJvamVjdCA9IGV4cG9ydHMuZ2V0Q3VycmVudFByb2plY3RJZkV4aXN0KHN0YXRlKTtcbiAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgICAgcHJvamVjdCA9IGV4cG9ydHMuZ2V0Q3VycmVudFB1YmxpY1Byb2plY3Qoc3RhdGUpO1xuICAgICAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgICAgICAgIHByb2plY3QgPSBleHBvcnRzLmdldFZhbmlsbGFQcm9qZWN0KHN0YXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyAuLi4gcHJvamVjdCB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRQdWJsaWNQcm9qZWN0ID0gc3RhdGUgPT4ge1xuICAgIGxldCBwcm9qZWN0ID0gc3RhdGUucHJvamVjdHMuY3VycmVudFB1YmxpY1Byb2plY3QgPyBzdGF0ZS5wcm9qZWN0cy5jdXJyZW50UHVibGljUHJvamVjdCA6IHt9O1xuICAgIGlmIChwcm9qZWN0ICYmIHByb2plY3QuaWQpIHtcbiAgICAgICAgcHJvamVjdCA9IHByb2plY3QucHVibGlzaGVkICYmIHByb2plY3QucHVibGlzaGVkLm5hbWUgPyBwcm9qZWN0LnB1Ymxpc2hlZCA6IHByb2plY3QuZHJhZnQ7XG4gICAgfVxuICAgIGlmIChwcm9qZWN0ID09PSBudWxsKSB7XG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgZHJhZnQgaXMgbWlzc2luZ1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY291bnRyeSA9IHByb2plY3QuY291bnRyeSA/IENvdW50cnlNb2R1bGUuZ2V0Q291bnRyeShzdGF0ZSwgcHJvamVjdC5jb3VudHJ5KSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyAuLi5wcm9qZWN0LCBjb3VudHJ5X25hbWU6IGNvdW50cnkgPyBjb3VudHJ5Lm5hbWUgOiBwcm9qZWN0LmNvdW50cnlfbmFtZSwgaXNQdWJsaWM6IHRydWUgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50UHVibGljUHJvamVjdERldGFpbHMgPSAoc3RhdGUsIGlzRHJhZnQpID0+IHtcbiAgICBsZXQgcHJvamVjdCA9IGlzRHJhZnQgPyBleHBvcnRzLmdldEN1cnJlbnREcmFmdChzdGF0ZSkgOiBleHBvcnRzLmdldEN1cnJlbnRQdWJsaXNoZWQoc3RhdGUpO1xuICAgIGNvbnN0IHR5cGUgPSBpc0RyYWZ0ID8gJ2RyYWZ0JyA6ICdwdWJsaXNoZWQnO1xuICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgIHJldHVybiBwcm9qZWN0O1xuICAgIH1cbiAgICBwcm9qZWN0ID0gc3RhdGUucHJvamVjdHMuY3VycmVudFB1YmxpY1Byb2plY3QgP1xuICAgICAgc3RhdGUucHJvamVjdHMuY3VycmVudFB1YmxpY1Byb2plY3RbdHlwZV0gOiB1bmRlZmluZWQ7XG4gICAgaWYgKHByb2plY3QpICB7XG4gICAgICAgIHByb2plY3QuaGFzUHVibGlzaGVkVmVyc2lvbiA9ICEhKHN0YXRlLnByb2plY3RzLmN1cnJlbnRQdWJsaWNQcm9qZWN0LnB1Ymxpc2hlZCAmJlxuICAgICAgICAgICAgc3RhdGUucHJvamVjdHMuY3VycmVudFB1YmxpY1Byb2plY3QucHVibGlzaGVkLm5hbWUpO1xuICAgICAgICBwcm9qZWN0LmRpc2FibGVEcmFmdCA9ICFzdGF0ZS5wcm9qZWN0cy5jdXJyZW50UHVibGljUHJvamVjdC5kcmFmdDtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMucGFyc2VQcm9qZWN0Rm9yVmlld01vZGUoc3RhdGUsIHByb2plY3QpO1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5leHBvcnRzLmdldFZhbmlsbGFQcm9qZWN0KHN0YXRlKSB9O1xufTtcblxuXG5leHBvcnQgY29uc3QgY29udmVydENvdW50cnlGaWVsZHNBbnN3ZXIgPSAoZmllbGRzKSA9PiB7XG4gICAgcmV0dXJuIGZpZWxkcy5tYXAoZiA9PiB7XG4gICAgICAgIGYgPSB7IC4uLiBmIH07XG4gICAgICAgIHN3aXRjaCAoZi50eXBlKSB7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGYuYW5zd2VyID0gcGFyc2VJbnQoZi5hbnN3ZXIsIDEwKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBmLmFuc3dlciA9IGYuYW5zd2VyID09PSAndHJ1ZSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgZi5hbnN3ZXIgPSBKU09OLnBhcnNlKGYuYW5zd2VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVByb2plY3RGb3JWaWV3TW9kZSA9IChzdGF0ZSwgcHJvamVjdCkgPT4ge1xuICAgIGNvbnN0IGJhc2UgPSBleHBvcnRzLmdldEVtcHR5UHJvamVjdCgpO1xuICAgIGNvbnN0IHN0cnVjdHVyZSA9IGV4cG9ydHMuZ2V0RmxhdFByb2plY3RTdHJ1Y3R1cmUoc3RhdGUpO1xuICAgIGNvbnN0IGNvdW50cnkgPSBDb3VudHJ5TW9kdWxlLmdldENvdW50cnkoc3RhdGUsIHByb2plY3QuY291bnRyeSk7XG4gICAgY29uc3Qgc2Vjb25kUGhhc2VDaGVjayA9IFt7IGtleTogJ3BsYXRmb3Jtcy5zdHJhdGVnaWVzJywgc3RydWN0dXJlX2tleTogJ3N0cmF0ZWdpZXMnIH1dO1xuICAgIHByb2plY3QgPSB7IC4uLmJhc2UsIC4uLnByb2plY3QgfTtcbiAgICBwcm9qZWN0ID0gIHtcbiAgICAgICAgLi4ucHJvamVjdCxcbiAgICAgICAgY291bnRyeV9uYW1lOiBjb3VudHJ5ID8gY291bnRyeS5uYW1lIDogJycsXG4gICAgICAgIC4uLmNvbnZlcnRJZEFycmF5VG9PYmplY3RBcnJheShwcm9qZWN0LCBzdHJ1Y3R1cmUsIGRhc2hGaWVsZENvbnZlcnRUb09iamVjdCksXG4gICAgICAgIGNvdmVyYWdlVHlwZTogc2V0Q292ZXJhZ2VUeXBlKHByb2plY3QuY292ZXJhZ2UsIHByb2plY3QubmF0aW9uYWxfbGV2ZWxfZGVwbG95bWVudCksXG4gICAgICAgIGNvdmVyYWdlX3NlY29uZF9sZXZlbDogcHJvamVjdC5jb3ZlcmFnZV9zZWNvbmRfbGV2ZWwgPyBwcm9qZWN0LmNvdmVyYWdlX3NlY29uZF9sZXZlbCA6IFt7fV0sXG4gICAgICAgIGNvdmVyYWdlOiBwcm9qZWN0LmNvdmVyYWdlID8gcHJvamVjdC5jb3ZlcmFnZSA6IFt7fV1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByb2plY3QsXG4gICAgICAgIC4uLmNvbnZlcnRJZEFycmF5VG9PYmplY3RBcnJheShwcm9qZWN0LCBzdHJ1Y3R1cmUsIHNlY29uZFBoYXNlQ2hlY2spLFxuICAgICAgICBoYXNQdWJsaXNoZWRWZXJzaW9uOiBwcm9qZWN0Lmhhc1B1Ymxpc2hlZFZlcnNpb24gIT09IHVuZGVmaW5lZCA/IHByb2plY3QuaGFzUHVibGlzaGVkVmVyc2lvbiA6IHRydWVcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRQdWJsaXNoZWQgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgcHJvamVjdCA9IGV4cG9ydHMuZ2V0UHVibGlzaGVkUHJvamVjdHMoc3RhdGUpLmZpbmQocD0+IHAuaWQgPT09IHN0YXRlLnByb2plY3RzLmN1cnJlbnRQcm9qZWN0KTtcbiAgICBpZiAocHJvamVjdCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5wYXJzZVByb2plY3RGb3JWaWV3TW9kZShzdGF0ZSwgcHJvamVjdCk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudERyYWZ0ID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IGRyYWZ0ID0gZXhwb3J0cy5nZXREcmFmdGVkUHJvamVjdHMoc3RhdGUpLmZpbmQocCA9PiBwLmlkID09PSBzdGF0ZS5wcm9qZWN0cy5jdXJyZW50UHJvamVjdCk7XG4gICAgaWYgKGRyYWZ0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kcmFmdCxcbiAgICAgICAgICAgIGhhc1B1Ymxpc2hlZFZlcnNpb246ICEhZXhwb3J0cy5nZXRQdWJsaXNoZWRQcm9qZWN0cyhzdGF0ZSkuZmluZChwPT4gcC5pZCA9PT0gc3RhdGUucHJvamVjdHMuY3VycmVudFByb2plY3QpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50RHJhZnRJblZpZXdNb2RlID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IGRyYWZ0ID0gZXhwb3J0cy5nZXRDdXJyZW50RHJhZnQoc3RhdGUpO1xuICAgIGlmIChkcmFmdCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5wYXJzZVByb2plY3RGb3JWaWV3TW9kZShzdGF0ZSwgZHJhZnQpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFN0b3JlZENvdW50cnlGaWVsZHMgPSBzdGF0ZSA9PiBpc0RyYWZ0ID0+IHtcbiAgICBsZXQgcHJvamVjdCA9IGlzRHJhZnQgPyBleHBvcnRzLmdldEN1cnJlbnREcmFmdChzdGF0ZSkgOiBleHBvcnRzLmdldEN1cnJlbnRQdWJsaXNoZWQoc3RhdGUpO1xuICAgIGlmIChwcm9qZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IHN0YXRlLnByb2plY3RzLmxpc3QuZmluZChwPT5wLmlkID09PSAtMSk7XG4gICAgICAgIGlmIChuZXdQcm9qZWN0KSB7XG4gICAgICAgICAgICBwcm9qZWN0ID0gbmV3UHJvamVjdC5kcmFmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvamVjdCA/IHByb2plY3QuZmllbGRzIDogW107XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvamVjdENvdW50cnlGaWVsZHMgPSBzdGF0ZSA9PiAoaXNEcmFmdCkgPT4ge1xuICAgIGNvbnN0IGJhc2VDb3VudHJ5RmllbGRzID0gQ291bnRyeU1vZHVsZS5nZXRDb3VudHJ5RmllbGRzKHN0YXRlKTtcbiAgICBjb25zdCBjb3VudHJ5RmllbGRzID0gZXhwb3J0cy5jb252ZXJ0Q291bnRyeUZpZWxkc0Fuc3dlcihleHBvcnRzLmdldFN0b3JlZENvdW50cnlGaWVsZHMoc3RhdGUpKGlzRHJhZnQpKTtcbiAgICBjb25zdCByZXN1bHQgPSBiYXNlQ291bnRyeUZpZWxkcy5tYXAoYmMgPT4ge1xuICAgICAgICBjb25zdCBzYXZlZCA9IGNvdW50cnlGaWVsZHMuZmluZChjZiA9PiBjZi5zY2hlbWFfaWQgPT09IGJjLmlkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmJjLFxuICAgICAgICAgICAgYW5zd2VyOiBzYXZlZCA/IHNhdmVkLmFuc3dlciA6IGJjLmFuc3dlclxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBbLi4ucmVzdWx0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50UHJvamVjdEZvckVkaXRpbmcgPSAoc3RhdGUsIGRhdGEpID0+IHtcbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSBleHBvcnRzLmdldEZsYXRQcm9qZWN0U3RydWN0dXJlKHN0YXRlKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgZGF0YSA9IGV4cG9ydHMuZ2V0VmFuaWxsYVByb2plY3Qoc3RhdGUpO1xuICAgIH1cbiAgICBkYXRhLnN0YXJ0X2RhdGUgPSBjb252ZXJ0RGF0ZShkYXRhLnN0YXJ0X2RhdGUpO1xuICAgIGRhdGEuaW1wbGVtZW50YXRpb25fZGF0ZXMgPSBjb252ZXJ0RGF0ZShkYXRhLmltcGxlbWVudGF0aW9uX2RhdGVzKTtcbiAgICBkYXRhLmVuZF9kYXRlID0gY29udmVydERhdGUoZGF0YS5lbmRfZGF0ZSk7XG4gICAgZGF0YSA9IGNvbnZlcnRTdHJpbmdBcnJheVRvT2JqZWN0QXJyYXkoZGF0YSk7XG4gICAgZGF0YSA9IGZpbGxFbXB0eUNvbGxlY3Rpb25zV2l0aERlZmF1bHQoZGF0YSk7XG4gICAgaWYgKHR5cGVvZiBkYXRhLm9yZ2FuaXNhdGlvbiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZGF0YS5vcmdhbmlzYXRpb24gPSB7XG4gICAgICAgICAgICBpZDogZGF0YS5vcmdhbmlzYXRpb24sXG4gICAgICAgICAgICBuYW1lOiBkYXRhLm9yZ2FuaXNhdGlvbl9uYW1lXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIC4uLmV4cG9ydHMuaXNNZW1iZXJPclZpZXdlcihzdGF0ZSwgZGF0YSksXG4gICAgICAgIC4uLmNvbnZlcnRJZEFycmF5VG9PYmplY3RBcnJheShkYXRhLCBzdHJ1Y3R1cmUsIGZpZWxkVG9Db252ZXJ0VG9PYmplY3QpLFxuICAgICAgICAuLi5oYW5kbGVJbnRlcm9wZXJhYmlsaXR5TGlua3MoZGF0YSwgc3RydWN0dXJlKVxuICAgIH07XG4gICAgaWYgKCFkYXRhLmZvcmNlU2V0Q292ZXJhZ2UpIHtcbiAgICAgICAgZGF0YS5jb3ZlcmFnZVR5cGUgPSBzZXRDb3ZlcmFnZVR5cGUoZGF0YS5jb3ZlcmFnZSwgZGF0YS5uYXRpb25hbF9sZXZlbF9kZXBsb3ltZW50KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRhdGEuZm9yY2VTZXRDb3ZlcmFnZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHsgLi4ucHJvamVjdF9kZWZpbml0aW9uLCAuLi5kYXRhIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFB1Ymxpc2hlZFByb2plY3RGb3JFZGl0aW5nID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBleHBvcnRzLmdldFB1Ymxpc2hlZFByb2plY3RzKHN0YXRlKS5maW5kKHA9PiBwLmlkID09PSBzdGF0ZS5wcm9qZWN0cy5jdXJyZW50UHJvamVjdCk7XG4gICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuZ2V0Q3VycmVudFByb2plY3RGb3JFZGl0aW5nKHN0YXRlLCBwcm9qZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50RWRpdHMgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgZWRpdGVkID0gc3RhdGUucHJvamVjdHMuZWRpdGVkUHJvamVjdDtcbiAgICByZXR1cm4geyAuLi5lZGl0ZWQsIGZvcmNlU2V0Q292ZXJhZ2U6ICEhZWRpdGVkLmNvdmVyYWdlVHlwZSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnREcmFmdFByb2plY3RGb3JFZGl0aW5nID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSB7IC4uLmV4cG9ydHMuZ2V0Q3VycmVudERyYWZ0KHN0YXRlKSwgLi4uZXhwb3J0cy5nZXRDdXJyZW50RWRpdHMoc3RhdGUpIH07XG4gICAgcmV0dXJuIGV4cG9ydHMuZ2V0Q3VycmVudFByb2plY3RGb3JFZGl0aW5nKHN0YXRlLCBwcm9qZWN0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXROZXdQcm9qZWN0Rm9yRWRpdGluZyA9IHN0YXRlID0+IHtcbiAgICBjb25zdCB2YW5pbGxhID0gZXhwb3J0cy5nZXRWYW5pbGxhUHJvamVjdChzdGF0ZSk7XG4gICAgcmV0dXJuIHsgLi4udmFuaWxsYSwgLi4uZXhwb3J0cy5nZXRDdXJyZW50RWRpdHMoc3RhdGUpIH07XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRUZWFtID0gc3RhdGUgPT4ge1xuICAgIGlmIChzdGF0ZS5wcm9qZWN0cy50ZWFtVmlld2Vycykge1xuICAgICAgICByZXR1cm4gc3RhdGUucHJvamVjdHMudGVhbVZpZXdlcnMudGVhbS5tYXAoaWQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnN5c3RlbS5wcm9maWxlcy5maW5kKHAgPT4gcC5pZCA9PT0gaWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFZpZXdlcnMgPSBzdGF0ZSA9PiB7XG4gICAgaWYgKHN0YXRlLnByb2plY3RzLnRlYW1WaWV3ZXJzKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5wcm9qZWN0cy50ZWFtVmlld2Vycy52aWV3ZXJzLm1hcChpZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuc3lzdGVtLnByb2ZpbGVzLmZpbmQocCA9PiBwLmlkID09PSBpZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRUb29sa2l0VmVyc2lvbiA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBkYXRhID0gc3RhdGUucHJvamVjdHMudG9vbGtpdFZlcnNpb25zO1xuICAgIHJldHVybiBkYXRhID8gZGF0YS5zbGljZSgpIDogW107XG59O1xuZXhwb3J0IGNvbnN0IGdldENvdmVyYWdlVmVyc2lvbiA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBkYXRhID0gc3RhdGUucHJvamVjdHMuY292ZXJhZ2VWZXJzaW9ucztcbiAgICByZXR1cm4gZGF0YSA/IGRhdGEuc2xpY2UoKSA6IFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRWZXJzaW9uID0gc3RhdGUgPT4ge1xuICAgIHJldHVybiBleHBvcnRzLmdldFRvb2xraXRWZXJzaW9uKHN0YXRlKS5sZW5ndGg7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFZlcnNpb25EYXRlID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHZlcnNpb24gPSBleHBvcnRzLmdldFRvb2xraXRWZXJzaW9uKHN0YXRlKTtcbiAgICBjb25zdCBsYXN0ID0gdmVyc2lvbi5zbGljZSgtMSlbMF07XG4gICAgcmV0dXJuIGxhc3QgPyBsYXN0Lm1vZGlmaWVkIDogbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRNYXBzQXhpc0RhdGEgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgYXhpcyA9IFN5c3RlbU1vZHVsZS5nZXRBeGlzKHN0YXRlKTtcbiAgICBjb25zdCBjaGFydEF4aXMgPSB7IGxhYmVsczogYXhpcy5tYXAoYSA9PiBhLm5hbWUpLCBkYXRhOiBbXSB9O1xuICAgIGNvbnN0IHRvb2xraXRWZXJzaW9uID0gZXhwb3J0cy5nZXRUb29sa2l0VmVyc2lvbihzdGF0ZSk7XG4gICAgY29uc3QgdG9vbGtpdERhdGEgPSBUb29sa2l0TW9kdWxlLmdldFRvb2xraXREYXRhKHN0YXRlKTtcbiAgICBjb25zdCB0b2RheVN0cmluZyA9IGdldFRvZGF5U3RyaW5nKCk7XG4gICAgaWYgKHRvb2xraXRWZXJzaW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gRGF0YSBmcm9tIHZlcnNpb25zXG4gICAgICAgIGNoYXJ0QXhpcy5kYXRhID0gdG9vbGtpdFZlcnNpb24ubWFwKHZlcnNpb24gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkYXRlOiB2ZXJzaW9uLm1vZGlmaWVkLnNwbGl0KCdUJylbMF0sXG4gICAgICAgICAgICAgICAgYXhpczE6IHZlcnNpb24uZGF0YVswXS5heGlzX3Njb3JlIC8gMTAwLFxuICAgICAgICAgICAgICAgIGF4aXMyOiB2ZXJzaW9uLmRhdGFbMV0uYXhpc19zY29yZSAvIDEwMCxcbiAgICAgICAgICAgICAgICBheGlzMzogdmVyc2lvbi5kYXRhWzJdLmF4aXNfc2NvcmUgLyAxMDAsXG4gICAgICAgICAgICAgICAgYXhpczQ6IHZlcnNpb24uZGF0YVszXS5heGlzX3Njb3JlIC8gMTAwLFxuICAgICAgICAgICAgICAgIGF4aXM1OiB2ZXJzaW9uLmRhdGFbNF0uYXhpc19zY29yZSAvIDEwMCxcbiAgICAgICAgICAgICAgICBheGlzNjogdmVyc2lvbi5kYXRhWzVdLmF4aXNfc2NvcmUgLyAxMDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgZGF0YSAoZnJvbSB0b29sdGlwKVxuXG4gICAgaWYgKHRvb2xraXREYXRhLmxlbmd0aCA9PT0gNikge1xuICAgICAgICBjb25zdCBsYXN0QXhpc0RhdGEgPSB7XG4gICAgICAgICAgICBheGlzMTogdG9vbGtpdERhdGFbMF0uYXhpc19zY29yZSAvIDEwMCxcbiAgICAgICAgICAgIGF4aXMyOiB0b29sa2l0RGF0YVsxXS5heGlzX3Njb3JlIC8gMTAwLFxuICAgICAgICAgICAgYXhpczM6IHRvb2xraXREYXRhWzJdLmF4aXNfc2NvcmUgLyAxMDAsXG4gICAgICAgICAgICBheGlzNDogdG9vbGtpdERhdGFbM10uYXhpc19zY29yZSAvIDEwMCxcbiAgICAgICAgICAgIGF4aXM1OiB0b29sa2l0RGF0YVs0XS5heGlzX3Njb3JlIC8gMTAwLFxuICAgICAgICAgICAgYXhpczY6IHRvb2xraXREYXRhWzVdLmF4aXNfc2NvcmUgLyAxMDAsXG4gICAgICAgICAgICBkYXRlOiB0b2RheVN0cmluZ1xuICAgICAgICB9O1xuICAgICAgICBjaGFydEF4aXMuZGF0YS5wdXNoKGxhc3RBeGlzRGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBjaGFydEF4aXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TWFwc0RvbWFpbkRhdGEgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgZG9tYWlucyA9IFN5c3RlbU1vZHVsZS5nZXREb21haW5zKHN0YXRlKTtcbiAgICBjb25zdCBheGVzID0gU3lzdGVtTW9kdWxlLmdldEF4aXMoc3RhdGUpO1xuICAgIGNvbnN0IGNoYXJ0RGF0YSA9IHsgbGFiZWxzOiBheGVzLm1hcChhID0+IGEubmFtZSkgfTtcbiAgICBjb25zdCB0b29sa2l0VmVyc2lvbiA9IGV4cG9ydHMuZ2V0VG9vbGtpdFZlcnNpb24oc3RhdGUpO1xuICAgIGNvbnN0IHRvb2xraXREYXRhID0gVG9vbGtpdE1vZHVsZS5nZXRUb29sa2l0RGF0YShzdGF0ZSk7XG4gICAgY29uc3QgdG9kYXlTdHJpbmcgPSBnZXRUb2RheVN0cmluZygpO1xuICAgIGF4ZXMuZm9yRWFjaCgoYXhpcywgYXhJbmQpID0+IHtcbiAgICAgICAgY2hhcnREYXRhW2F4aXMubmFtZV0gPSB7IGxhYmVsczogZG9tYWlucy5maWx0ZXIoZCA9PiBkLmF4aXMgPT09IGF4aXMuaWQpLm1hcChkZiA9PiBkZi5uYW1lKSwgZGF0YTogW10gfTtcbiAgICAgICAgaWYgKHRvb2xraXRWZXJzaW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNoYXJ0RGF0YVtheGlzLm5hbWVdLmRhdGEgPSB0b29sa2l0VmVyc2lvbi5tYXAodmVyc2lvbiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0ID0ge307XG4gICAgICAgICAgICAgICAgcmV0LmRhdGUgPSB2ZXJzaW9uLm1vZGlmaWVkLnNwbGl0KCdUJylbMF07XG4gICAgICAgICAgICAgICAgdmVyc2lvbi5kYXRhW2F4SW5kXS5kb21haW5zLmZvckVhY2goKGRvbWFpbiwgZG9tYWluSW5kKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldFsnYXhpcycgKyAoZG9tYWluSW5kICsgMSldID0gZG9tYWluLmRvbWFpbl9wZXJjZW50YWdlIC8gMTAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbGtpdERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHsgZGF0ZTogdG9kYXlTdHJpbmcgfTtcbiAgICAgICAgICAgIHRvb2xraXREYXRhW2F4SW5kXS5kb21haW5zLmZvckVhY2goKGRvbSwgaWkpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50WydheGlzJyArIChpaSArIDEpXSA9IGRvbS5kb21haW5fcGVyY2VudGFnZSAvIDEwMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2hhcnREYXRhW2F4aXMubmFtZV0uZGF0YS5wdXNoKGN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNoYXJ0RGF0YTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDb3ZlcmFnZURhdGEgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgY292ZXJhZ2VWZXJzaW9uID0gZXhwb3J0cy5nZXRDb3ZlcmFnZVZlcnNpb24oc3RhdGUpO1xuICAgIGNvbnN0IHByb2plY3REYXRhID0gIGV4cG9ydHMuZ2V0Q3VycmVudFByb2plY3Qoc3RhdGUpO1xuXG4gICAgY29uc3QgY292ZXJhZ2UgPSBwcm9qZWN0RGF0YS5jb3ZlcmFnZSA/IHByb2plY3REYXRhLmNvdmVyYWdlLnNsaWNlKCkgOiBbXTtcbiAgICBjb3ZlcmFnZS5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHByb2plY3REYXRhLm5hdGlvbmFsX2xldmVsX2RlcGxveW1lbnQpKTtcbiAgICBjb3ZlcmFnZVZlcnNpb24ucHVzaCh7IGRhdGE6IGNvdmVyYWdlIH0pO1xuXG4gICAgY29uc3QgdG9kYXlTdHJpbmcgPSBnZXRUb2RheVN0cmluZygpO1xuXG4gICAgcmV0dXJuIGNvdmVyYWdlVmVyc2lvbi5yZWR1Y2UoKHJldCwgdmVyc2lvbk9iaiwgdkluZCkgPT4ge1xuXG4gICAgICAgIHJldC5kYXRhW3ZJbmRdID0ge307XG4gICAgICAgIHJldC5kYXRhW3ZJbmRdLmRhdGUgPSB2ZXJzaW9uT2JqLm1vZGlmaWVkID8gdmVyc2lvbk9iai5tb2RpZmllZC5zcGxpdCgnVCcpWzBdIDogdG9kYXlTdHJpbmc7XG5cbiAgICAgICAgdmVyc2lvbk9iai5kYXRhLmZvckVhY2goZGlzdHJPYmogPT4ge1xuICAgICAgICAgICAgZm9yT3duKGRpc3RyT2JqLCAodmFsLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBbJ2NsaWVudHMnLCAnZmFjaWxpdGllcycsICdoZWFsdGhfd29ya2VycyddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGFiZWxzLmluZGV4T2Yoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYGF4aXMke2luZGV4ICsgMX1gO1xuICAgICAgICAgICAgICAgICAgICByZXQuZGF0YVt2SW5kXVtuYW1lXSA9IChyZXQuZGF0YVt2SW5kXVtuYW1lXSB8fCAwKSArIHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfSwgeyBsYWJlbHM6IFtdLCBkYXRhOiBbXSB9KTtcbn07XG5cblxuZXhwb3J0IGNvbnN0IGdldFNpbWlsYXJQcm9qZWN0ID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IHVzZXJQcm9qZWN0cyA9IGV4cG9ydHMuZ2V0UHVibGlzaGVkUHJvamVjdHMoc3RhdGUpO1xuICAgIGlmIChzdGF0ZS5wcm9qZWN0cy5zaW1pbGFyUHJvamVjdE5hbWVzKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5wcm9qZWN0cy5zaW1pbGFyUHJvamVjdE5hbWVzLm1hcChwID0+IHtcbiAgICAgICAgICAgIHAgPSBPYmplY3QuYXNzaWduKHt9LCBwKTtcbiAgICAgICAgICAgIHAuaXNPd24gPSB1c2VyUHJvamVjdHMuc29tZSh1cCA9PiB1cC5pZCA9PT0gcC5pZCk7XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBjaGVja0N1cnJlbnRQcm9qZWN0VmFsaWRpdHkgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgcHJvamVjdCA9IHN0YXRlLnByb2plY3RzLmN1cnJlbnRQdWJsaWNQcm9qZWN0O1xuICAgIGlmIChwcm9qZWN0ICYmIHByb2plY3QucHVibGljX2lkID09PSAnJyAmJiBwcm9qZWN0LmRyYWZ0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBpZDogcHJvamVjdC5pZCB9O1xuICAgIH1cbiAgICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlIH07XG59O1xuXG4vLyBBQ1RJT05TXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRVc2VyUHJvamVjdHMoKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS51c2VyLnByb2ZpbGUgJiYgIWV4cG9ydHMuZ2V0U2F2ZWRQcm9qZWN0TGlzdChzdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9wcm9qZWN0cy9tZW1iZXItb2YvJyk7XG4gICAgICAgICAgICAgICAgZGF0YS5zb3J0KChhLCBiKSA9PiBiLmlkIC0gYS5pZCk7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1BST0pFQ1RfTElTVCcsIHByb2plY3RzOiBkYXRhIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUHJvamVjdERldGFpbHMoKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RJZCA9IGdldFN0YXRlKCkucHJvamVjdHMuY3VycmVudFByb2plY3Q7XG4gICAgICAgICAgICBpZiAocHJvamVjdElkICYmIHByb2plY3RJZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sa2l0VmVyc2lvbnNQcm9taXNlID0gYXhpb3MuZ2V0KGAvYXBpL3Byb2plY3RzLyR7cHJvamVjdElkfS90b29sa2l0L3ZlcnNpb25zL2ApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvdmVyYWdlVmVyc2lvbnNQcm9taXNlID0gYXhpb3MuZ2V0KGAvYXBpL3Byb2plY3RzLyR7cHJvamVjdElkfS9jb3ZlcmFnZS92ZXJzaW9ucy9gKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWFtVmlld2Vyc1Byb21pc2UgPSBheGlvcy5nZXQoYC9hcGkvcHJvamVjdHMvJHtwcm9qZWN0SWR9L2dyb3Vwcy9gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBbdG9vbGtpdFZlcnNpb25zLCBjb3ZlcmFnZVZlcnNpb25zLCB0ZWFtVmlld2Vyc10gPVxuICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW3Rvb2xraXRWZXJzaW9uc1Byb21pc2UsIGNvdmVyYWdlVmVyc2lvbnNQcm9taXNlLCB0ZWFtVmlld2Vyc1Byb21pc2VdKTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdTRVRfUFJPSkVDVF9JTkZPJyxcbiAgICAgICAgICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGtpdFZlcnNpb25zOiB0b29sa2l0VmVyc2lvbnMuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyYWdlVmVyc2lvbnM6IGNvdmVyYWdlVmVyc2lvbnMuZGF0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1BST0pFQ1RfVEVBTV9WSUVXRVJTJywgdGVhbVZpZXdlcnM6IHRlYW1WaWV3ZXJzLmRhdGEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRQcm9qZWN0KGlkKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgaWQgPSBwYXJzZUludChpZCwgMTApO1xuICAgICAgICBpZiAoaWQgJiYgaWQgIT09IC0xICYmIGlkICE9PSBnZXRTdGF0ZSgpLnByb2plY3RzLmN1cnJlbnRQcm9qZWN0KSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfQ1VSUkVOVF9QUk9KRUNUJywgaWQgfSk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gZXhwb3J0cy5nZXRDdXJyZW50UHJvamVjdElmRXhpc3QoZ2V0U3RhdGUoKSk7XG4gICAgICAgICAgICBpZiAocHJvamVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcERhdGFQcm9taXNlID0gZGlzcGF0Y2goQ291bnRyeU1vZHVsZS5zZXRDdXJyZW50Q291bnRyeShwcm9qZWN0LmNvdW50cnksIFsnbWFwRGF0YSddKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsUHJvbWlzZSA9IGRpc3BhdGNoKGV4cG9ydHMubG9hZFByb2plY3REZXRhaWxzKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xraXRQcm9taXNlID0gZGlzcGF0Y2goVG9vbGtpdE1vZHVsZS5sb2FkVG9vbGtpdERhdGEoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFttYXBEYXRhUHJvbWlzZSwgZGV0YWlsUHJvbWlzZSwgdG9vbGtpdFByb21pc2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL3Byb2plY3RzLyR7aWR9L2ApO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IFVzZXJNb2R1bGUuZ2V0UHJvZmlsZShnZXRTdGF0ZSgpKTtcbiAgICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVhbVZpZXdlcnMgPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvcHJvamVjdHMvJHtpZH0vZ3JvdXBzL2ApO1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9QUk9KRUNUX1RFQU1fVklFV0VSUycsIHRlYW1WaWV3ZXJzOiB0ZWFtVmlld2Vycy5kYXRhIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0NVUlJFTlRfUFVCTElDX1BST0pFQ1RfREVUQUlMJywgcHJvamVjdDogZGF0YSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9DVVJSRU5UX1BST0pFQ1QnLCBpZCB9KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IC0xLFxuICAgICAgICAgICAgICAgIGRyYWZ0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogW11cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHB1YmxpYzoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfUFJPSkVDVF9URUFNX1ZJRVdFUlMnLCB0ZWFtVmlld2VyczogeyB0ZWFtOiBbXSwgdmlld2VyczogW10gfSB9KTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9TQVZFX1BST0pFQ1QnLCBwcm9qZWN0OiBuZXdQcm9qZWN0IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcFNob3RQcm9qZWN0KCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0U3RhdGUoKS5wcm9qZWN0cy5jdXJyZW50UHJvamVjdDtcbiAgICAgICAgYXdhaXQgYXhpb3MucG9zdChgL2FwaS9wcm9qZWN0cy8ke2lkfS92ZXJzaW9uL2ApO1xuICAgICAgICBhd2FpdCBkaXNwYXRjaChleHBvcnRzLmxvYWRQcm9qZWN0RGV0YWlscygpKTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQcm9qZWN0U3RydWN0dXJlKGZvcmNlKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBleHBvcnRzLmdldFByb2plY3RTdHJ1Y3R1cmUoc3RhdGUpO1xuICAgICAgICBpZiAoaXNFbXB0eShzdHJ1Y3R1cmUpIHx8IGZvcmNlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9wcm9qZWN0cy9zdHJ1Y3R1cmUvJyk7XG4gICAgICAgICAgICBhd2FpdCBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfUFJPSkVDVF9TVFJVQ1RVUkUnLCBzdHJ1Y3R1cmU6IGRhdGEgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRlYW1WaWV3ZXJzKHsgaWQgfSwgdGVhbSA9IFtdLCB2aWV3ZXJzID0gW10pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICB0ZWFtOiB0ZWFtLm1hcCh0ID0+IHQuaWQpLFxuICAgICAgICB2aWV3ZXJzOiB2aWV3ZXJzLm1hcCh3ID0+IHcuaWQpXG4gICAgfTtcbiAgICBhd2FpdCBheGlvcy5wdXQoYC9hcGkvcHJvamVjdHMvJHtpZH0vZ3JvdXBzL2AsIGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUNvdW50cnlGaWVsZHMoZmllbGRzID0gW10sIGNvdW50cnlJZCwgcHJvamVjdCwgdG9VcGRhdGUpIHtcbiAgICBmaWVsZHMgPSBmaWVsZHMubWFwKCh7IGNvdW50cnksIHF1ZXN0aW9uLCB0eXBlLCBhbnN3ZXIgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY291bnRyeSwgYW5zd2VyLCB0eXBlLCBxdWVzdGlvbiwgcHJvamVjdFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHRvVXBkYXRlID0gdG9VcGRhdGUgPT09ICdwdWJsaXNoZWQnID8gJ3B1Ymxpc2gnIDogJ2RyYWZ0JztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoYC9hcGkvY291bnRyeS1maWVsZHMvJHtjb3VudHJ5SWR9LyR7cHJvamVjdH0vJHt0b1VwZGF0ZX0vYCwgeyBmaWVsZHMgfSk7XG4gICAgICAgIHJldHVybiBkYXRhLmZpZWxkcztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NGb3JtKGZvcm0pIHtcbiAgICBjb25zdCBvcmdhbmlzYXRpb25fbmFtZSA9IGZvcm0ub3JnYW5pc2F0aW9uID8gZm9ybS5vcmdhbmlzYXRpb24ubmFtZSA6ICcnO1xuICAgIGNvbnN0IG9yZ2FuaXNhdGlvbiA9IGZvcm0ub3JnYW5pc2F0aW9uID8gZm9ybS5vcmdhbmlzYXRpb24uaWQgOiBudWxsO1xuICAgIGZvcm0gPSB7IC4uLmZvcm0sIC4uLnJldGFpbk5hdGlvbmFsT3JEaXN0cmljdENvdmVyYWdlKGZvcm0pIH07XG4gICAgZm9ybSA9IHtcbiAgICAgICAgLi4uZm9ybSxcbiAgICAgICAgb3JnYW5pc2F0aW9uX25hbWUsXG4gICAgICAgIG9yZ2FuaXNhdGlvbixcbiAgICAgICAgLi4uY3JlYXRlRGF0ZUZpZWxkcyhmb3JtKSxcbiAgICAgICAgLi4uY29udmVydE9iamVjdEFycmF5VG9TdHJpbmdBcnJheShmb3JtKSxcbiAgICAgICAgLi4ucGFyc2VPdXRJbnRlcm9wZXJhYmlsaXR5TGlua3MoZm9ybSksXG4gICAgICAgIGNvdmVyYWdlVHlwZTogdW5kZWZpbmVkLFxuICAgICAgICBwbGF0Zm9ybXM6IHBhcnNlUGxhdGZvcm1Db2xsZWN0aW9uKGZvcm0pLFxuICAgICAgICAuLi5leHRyYWN0SWRGcm9tT2JqZWN0cyhmb3JtKSxcbiAgICAgICAgLi4uaGFuZGxlTmF0aW9uYWxMZXZlbENvdmVyYWdlKGZvcm0pLFxuICAgICAgICBjb3ZlcmFnZTogaGFuZGxlQ292ZXJhZ2UoZm9ybS5jb3ZlcmFnZSksXG4gICAgICAgIGNvdmVyYWdlX3NlY29uZF9sZXZlbDogaGFuZGxlQ292ZXJhZ2UoZm9ybS5jb3ZlcmFnZV9zZWNvbmRfbGV2ZWwpXG4gICAgfTtcbiAgICBmb3JtID0geyAuLi5mb3JtLCAuLi5yZXRhaW5Pbmx5SWRzKGZvcm0pIH07XG4gICAgZm9ybSA9IHsgLi4uZm9ybSwgLi4ucmVtb3ZlRW1wdHlDaGlsZE9iamVjdHMoZm9ybSkgfTtcbiAgICByZXR1cm4gcmVtb3ZlS2V5c1dpdGhvdXRWYWx1ZXMoZm9ybSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwb3N0UHJvamVjdFNhdmVBY3Rpb25zKGRhdGEsIHRlYW0sIHZpZXdlcnMsIGRpc3BhdGNoLCBzdGF0ZSwgdG9VcGRhdGUpIHtcbiAgICBjb25zdCB1c2VyID0gVXNlck1vZHVsZS5nZXRQcm9maWxlKHN0YXRlKS5pZDtcbiAgICBjb25zdCBjb3VudHJ5RmllbGRzID0gZXhwb3J0cy5nZXRTdG9yZWRDb3VudHJ5RmllbGRzKHN0YXRlKSh0cnVlKTtcbiAgICBjb25zdCBjZlByb21pc2UgPSBleHBvcnRzLnNhdmVDb3VudHJ5RmllbGRzKGNvdW50cnlGaWVsZHMsIGRhdGEuZHJhZnQuY291bnRyeSwgZGF0YS5pZCwgdG9VcGRhdGUpO1xuICAgIGNvbnN0IHR3UHJvbWlzZSA9IGV4cG9ydHMuc2F2ZVRlYW1WaWV3ZXJzKGRhdGEsIHRlYW0sIHZpZXdlcnMpO1xuICAgIGNvbnN0IFt0ZWFtVmlld2VycywgZmllbGRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0d1Byb21pc2UsIGNmUHJvbWlzZV0pO1xuICAgIGNvbnN0IHVwZGF0ZU1lbWJlciA9IHRlYW1WaWV3ZXJzLnRlYW0uc29tZSh0ID0+IHQgPT09IHVzZXIpID8gW2RhdGEuaWRdIDogW107XG4gICAgY29uc3QgdXBkYXRlVmlld2VyID0gdGVhbVZpZXdlcnMudmlld2Vycy5zb21lKHQgPT4gdCA9PT0gdXNlcikgPyBbZGF0YS5pZF0gOiBbXTtcbiAgICBpZiAoZmllbGRzID09PSBmYWxzZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2F2ZSBjb3VudHJ5IGZpZWxkcydcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHsgcmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIGlmICh0b1VwZGF0ZSA9PT0gJ3B1Ymxpc2hlZCcpIHtcbiAgICAgICAgZGF0YS5wdWJsaXNoZWQuZmllbGRzID0gZmllbGRzO1xuICAgIH1cbiAgICBkYXRhLmRyYWZ0LmZpZWxkcyA9IGZpZWxkcztcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfU0FWRV9QUk9KRUNUJywgcHJvamVjdDogZGF0YSB9KTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfUFJPSkVDVF9URUFNX1ZJRVdFUlMnLCB0ZWFtVmlld2VycyB9KTtcbiAgICBkaXNwYXRjaChVc2VyTW9kdWxlLnVwZGF0ZVRlYW1WaWV3ZXJzKHVwZGF0ZU1lbWJlciwgdXBkYXRlVmlld2VyKSk7XG4gICAgZGlzcGF0Y2goQ291bnRyeU1vZHVsZS5sb2FkQ3VycmVudENvdW50cnlQcm9qZWN0cygpKTtcbiAgICBkaXNwYXRjaChDb3VudHJ5TW9kdWxlLmxvYWRDdXJyZW50Q291bnRyeURpc3RyaWN0c1Byb2plY3QoKSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEcmFmdChmb3JtLCB0ZWFtLCB2aWV3ZXJzKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgZm9ybSA9IGV4cG9ydHMucHJvY2Vzc0Zvcm0oZm9ybSk7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGZvcm0uaWQgPyAncHV0JyA6ICdwb3N0JztcbiAgICAgICAgY29uc3QgdXJsID0gZm9ybS5pZCA/IGAvYXBpL3Byb2plY3RzL2RyYWZ0LyR7Zm9ybS5pZH0vYCA6ICcvYXBpL3Byb2plY3RzL2RyYWZ0Lyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zW21ldGhvZF0odXJsLCBmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLnBvc3RQcm9qZWN0U2F2ZUFjdGlvbnMoZGF0YSwgdGVhbSwgdmlld2VycywgIGRpc3BhdGNoLCBnZXRTdGF0ZSgpLCAnZHJhZnQnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzY2FyZERyYWZ0KCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHB1Ymxpc2hlZCA9IGV4cG9ydHMuZ2V0Q3VycmVudFB1Ymxpc2hlZFByb2plY3RGb3JFZGl0aW5nKGdldFN0YXRlKCkpO1xuICAgICAgICBjb25zdCBmb3JtID0gZXhwb3J0cy5wcm9jZXNzRm9ybShwdWJsaXNoZWQpO1xuICAgICAgICBjb25zdCBjb3VudHJ5RmllbGRzID0gZXhwb3J0cy5nZXRTdG9yZWRDb3VudHJ5RmllbGRzKGdldFN0YXRlKCkpKGZhbHNlKTtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wdXQoYC9hcGkvcHJvamVjdHMvZHJhZnQvJHtwdWJsaXNoZWQuaWR9L2AsIGZvcm0pO1xuICAgICAgICBkYXRhLmRyYWZ0LmZpZWxkcyA9IGF3YWl0IGV4cG9ydHMuc2F2ZUNvdW50cnlGaWVsZHMoY291bnRyeUZpZWxkcywgZGF0YS5kcmFmdC5jb3VudHJ5LCBkYXRhLmlkLCAncHVibGlzaGVkJyk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9TQVZFX1BST0pFQ1QnLCBwcm9qZWN0OiBkYXRhIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoKGZvcm0sIHRlYW0sIHZpZXdlcnMpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBmb3JtID0gZXhwb3J0cy5wcm9jZXNzRm9ybShmb3JtKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucHV0KGAvYXBpL3Byb2plY3RzL3B1Ymxpc2gvJHtmb3JtLmlkfS9gLCBmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLnBvc3RQcm9qZWN0U2F2ZUFjdGlvbnMoZGF0YSwgdGVhbSwgdmlld2VycywgIGRpc3BhdGNoLCBnZXRTdGF0ZSgpLCAncHVibGlzaGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFByb2plY3RzKHF1ZXJ5LCBoZWFsdGhfdG9waWMgPSBmYWxzZSwgbG9jYXRpb24gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdhbmlzYXRpb24gPSBmYWxzZSwgcHJvamVjdF9uYW1lID0gdHJ1ZSwgdGVjaG5vbG9neV9wbGF0Zm9ybSA9IGZhbHNlKSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL3NlYXJjaC9wcm9qZWN0cy8nLCB7XG4gICAgICAgIGhlYWx0aF90b3BpYyxcbiAgICAgICAgbG9jYXRpb24sXG4gICAgICAgIG9yZ2FuaXNhdGlvbixcbiAgICAgICAgcHJvamVjdF9uYW1lLFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgdGVjaG5vbG9neV9wbGF0Zm9ybVxuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoRHVwbGljYXRlUHJvamVjdE5hbWUocXVlcnkpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBleHBvcnRzLnNlYXJjaFByb2plY3RzKHF1ZXJ5KTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1NJTUlMQVJfTkFNRV9MSVNUJywgbGlzdCB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTaW1pbGFyTmFtZUxpc3QoKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfU0lNSUxBUl9OQU1FX0xJU1QnLCBsaXN0OiBbXSB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvamVjdENvdW50cnlGaWVsZHMoeyBpZCwgYW5zd2VyLCBxdWVzdGlvbiwgdHlwZSwgY291bnRyeSwgc2NoZW1hX2lkIH0pIHtcbiAgICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBleHBvcnRzLmdldEN1cnJlbnRQcm9qZWN0SWQoZ2V0U3RhdGUoKSk7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgIGFuc3dlciA9IGFuc3dlciA9PT0gdHJ1ZSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICAgIGFuc3dlciA9IEpTT04uc3RyaW5naWZ5KGFuc3dlcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYV9pZCA9IHNjaGVtYV9pZCA/IHNjaGVtYV9pZCA6IGlkO1xuICAgICAgICBjb25zdCBjb3VudHJ5RmllbGQgPSB7IGlkLCBhbnN3ZXIsIHF1ZXN0aW9uLCB0eXBlLCBjb3VudHJ5LCBzY2hlbWFfaWQgfTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NPVU5UUllfRklFTERfQU5TV0VSJywgcHJvamVjdElkLCBjb3VudHJ5RmllbGQgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUVkaXRlZFByb2plY3QocHJvamVjdCkge1xuICAgIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IHt9O1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2V0U3RhdGUoKS5wcm9qZWN0cy5lZGl0ZWRQcm9qZWN0O1xuICAgICAgICBPYmplY3Qua2V5cyhwcm9qZWN0KS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXEgPSBpc0VxdWFsKGN1cnJlbnRba10sIHByb2plY3Rba10pO1xuICAgICAgICAgICAgaWYgKCFlcSkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVtrXSA9IHByb2plY3Rba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdFRElURURfUFJPSkVDVF9VUERBVEUnLCB1cGRhdGUgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRFZGl0ZWRQcm9qZWN0KCkge1xuICAgIHJldHVybiBkaXNwYXRjaCA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0VESVRFRF9QUk9KRUNUX1JFU0VUJyB9KTtcbiAgICB9O1xufVxuXG5cbi8vIFJlZHVjZXJzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByb2plY3RzKHN0YXRlID0geyBlZGl0ZWRQcm9qZWN0OiB7fSB9LCBhY3Rpb24pIHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnU0VUX1BST0pFQ1RfTElTVCc6IHtcbiAgICAgICAgY29uc3QgbGlzdCA9IGFjdGlvbi5wcm9qZWN0cy5zbGljZSgpO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbGlzdCB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfU0lNSUxBUl9OQU1FX0xJU1QnOiB7XG4gICAgICAgIGNvbnN0IHNpbWlsYXJQcm9qZWN0TmFtZXMgPSBhY3Rpb24ubGlzdC5zbGljZSgpO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgc2ltaWxhclByb2plY3ROYW1lcyB9O1xuICAgIH1cbiAgICBjYXNlICdVUERBVEVfU0FWRV9QUk9KRUNUJzoge1xuICAgICAgICBjb25zdCBsaXN0ID0gWy4uLnN0YXRlLmxpc3RdO1xuICAgICAgICBjb25zdCBpbmRleCA9IGxpc3QuZmluZEluZGV4KHBqID0+IHBqLmlkID09PSBhY3Rpb24ucHJvamVjdC5pZCk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxLCB7IC4uLmFjdGlvbi5wcm9qZWN0IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGlzdC5wdXNoKHsgLi4uYWN0aW9uLnByb2plY3QgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxpc3QgfTtcbiAgICB9XG4gICAgY2FzZSAnVVBEQVRFX0NPVU5UUllfRklFTERfQU5TV0VSJzoge1xuICAgICAgICBjb25zdCBsaXN0ID0gWy4uLnN0YXRlLmxpc3RdO1xuICAgICAgICBjb25zdCBpbmRleCA9IGxpc3QuZmluZEluZGV4KHBqID0+IHBqLmlkID09PSBhY3Rpb24ucHJvamVjdElkKTtcbiAgICAgICAgY29uc3QgZmllbGRzID0gWy4uLmxpc3RbaW5kZXhdLmRyYWZ0LmZpZWxkc107XG4gICAgICAgIGNvbnN0IGZpZWxkSW5kZXggPSBmaWVsZHMuZmluZEluZGV4KGYgPT4gZi5zY2hlbWFfaWQgPT09IGFjdGlvbi5jb3VudHJ5RmllbGQuc2NoZW1hX2lkKTtcbiAgICAgICAgaWYgKGZpZWxkSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBmaWVsZHMuc3BsaWNlKGZpZWxkSW5kZXgsIDEsIHsgLi4uYWN0aW9uLmNvdW50cnlGaWVsZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpZWxkcy5wdXNoKHsgLi4uYWN0aW9uLmNvdW50cnlGaWVsZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0W2luZGV4XS5kcmFmdC5maWVsZHMgPSBmaWVsZHM7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBsaXN0IH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9DVVJSRU5UX1BST0pFQ1QnOiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gYWN0aW9uLmlkO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudFByb2plY3QgfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX0NVUlJFTlRfUFVCTElDX1BST0pFQ1RfREVUQUlMJzoge1xuICAgICAgICBjb25zdCBjdXJyZW50UHVibGljUHJvamVjdCA9IGFjdGlvbi5wcm9qZWN0O1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY3VycmVudFB1YmxpY1Byb2plY3QgfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX1BST0pFQ1RfU1RSVUNUVVJFJzoge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhY3Rpb24uc3RydWN0dXJlO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgc3RydWN0dXJlIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9QUk9KRUNUX0lORk8nOiB7XG4gICAgICAgIGNvbnN0IHRvb2xraXRWZXJzaW9ucyA9IGFjdGlvbi5pbmZvLnRvb2xraXRWZXJzaW9ucztcbiAgICAgICAgY29uc3QgY292ZXJhZ2VWZXJzaW9ucyA9IGFjdGlvbi5pbmZvLmNvdmVyYWdlVmVyc2lvbnM7XG4gICAgICAgIGNvbnN0IHRlYW1WaWV3ZXJzID0gYWN0aW9uLmluZm8udGVhbVZpZXdlcnM7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB0b29sa2l0VmVyc2lvbnMsIGNvdmVyYWdlVmVyc2lvbnMsIHRlYW1WaWV3ZXJzIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9QUk9KRUNUX1RFQU1fVklFV0VSUyc6IHtcbiAgICAgICAgY29uc3QgdGVhbVZpZXdlcnMgPSBhY3Rpb24udGVhbVZpZXdlcnM7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB0ZWFtVmlld2VycyB9O1xuICAgIH1cbiAgICBjYXNlICdDTEVBUl9VU0VSX1BST0pFQ1RTJzoge1xuICAgICAgICByZXR1cm4geyBzdHJ1Y3R1cmU6IHN0YXRlLnN0cnVjdHVyZSB9O1xuICAgIH1cbiAgICBjYXNlICdFRElURURfUFJPSkVDVF9VUERBVEUnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBlZGl0ZWRQcm9qZWN0OiB7IC4uLnN0YXRlLmVkaXRlZFByb2plY3QsIC4uLmFjdGlvbi51cGRhdGUgfSB9O1xuICAgIH1cbiAgICBjYXNlICdFRElURURfUFJPSkVDVF9SRVNFVCc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGVkaXRlZFByb2plY3Q6IHt9IH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdGF0ZTtcblxuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFpbUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7Ozs7OztBQVNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFRQTtBQVJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBWkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7O0FBeUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFSQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQUNBO0FBREE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7O0FBcUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFIQTtBQUFBO0FBRUE7QUFGQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOzs7OztBQTNOQTtBQWtCQTtBQTRCQTtBQW9DQTtBQU9BO0FBc0NBO0FBa0RBO0FBZ0JBO0FBWUE7QUEyQkE7QUFPQTtBQU1BO0FBbUJBO0FBZ0JBO0FBU0E7QUFDQTtBQS94QkE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBb0JBO0FBQ0E7QUFEQTtBQUNBOzs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQ0E7QUFVQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBVUE7QUFYQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQ0E7QUFqQkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFvQkE7QUFyQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQWhCQTtBQWlCQTtBQWpCQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBL0JBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQWlDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFJQTtBQUpBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVFBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFSQTtBQVdBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE0QkE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUtBO0FBTEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFUQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBSUE7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFBQTtBQU5BO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFIQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQVBBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUNBO0FBY0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5FQTtBQXFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/store/modules/projects.js\n");

/***/ }),

/***/ "./src/store/modules/system.js":
/*!*************************************!*\
  !*** ./src/store/modules/system.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.addOrganisation = exports.searchOrganisation = exports.getSubLevelTypes = exports.getDomainsForThematic = exports.getThematicOverview = exports.getQuestions = exports.getDomains = exports.getAxis = exports.getLandingPageDefaults = exports.getSearchFilters = exports.getLanguages = exports.getSearchResult = exports.getUserProfiles = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable no-warning-comments */\n\n\nvar searchOrganisation = exports.searchOrganisation = function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(name) {\n        var _ref8, data;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n                switch (_context4.prev = _context4.next) {\n                    case 0:\n                        _context4.next = 2;\n                        return _axios2.default.get('/api/organisations/?name=' + name);\n\n                    case 2:\n                        _ref8 = _context4.sent;\n                        data = _ref8.data;\n                        return _context4.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context4.stop();\n                }\n            }\n        }, _callee4, this);\n    }));\n\n    return function searchOrganisation(_x4) {\n        return _ref7.apply(this, arguments);\n    };\n}();\n\nvar addOrganisation = exports.addOrganisation = function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(name) {\n        var _ref10, data;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n                switch (_context5.prev = _context5.next) {\n                    case 0:\n                        _context5.next = 2;\n                        return _axios2.default.post('/api/organisations/', { name: name });\n\n                    case 2:\n                        _ref10 = _context5.sent;\n                        data = _ref10.data;\n                        return _context5.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context5.stop();\n                }\n            }\n        }, _callee5, this);\n    }));\n\n    return function addOrganisation(_x5) {\n        return _ref9.apply(this, arguments);\n    };\n}();\n\n// Reducers\n\nexports.loadUserProfiles = loadUserProfiles;\nexports.loadStaticData = loadStaticData;\nexports.searchProjects = searchProjects;\nexports.unsetSearchedProjects = unsetSearchedProjects;\nexports.default = system;\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _projects = __webpack_require__(/*! ./projects */ \"./src/store/modules/projects.js\");\n\nvar ProjectModule = _interopRequireWildcard(_projects);\n\nvar _countries = __webpack_require__(/*! ./countries */ \"./src/store/modules/countries.js\");\n\nvar CountriesModule = _interopRequireWildcard(_countries);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar initialState = {\n    profiles: [],\n    search_filters: [],\n    languages: [],\n    projectSearch: [],\n    thematic_overview: [],\n    axis: [],\n    domains: [],\n    landing_page_defaults: {},\n    toolkit_questions: [],\n    sub_level_types: []\n};\n\n// GETTERS\n\nvar getUserProfiles = exports.getUserProfiles = function getUserProfiles(state) {\n    return state.system.profiles ? state.system.profiles.slice() : [];\n};\n\nvar getSearchResult = exports.getSearchResult = function getSearchResult(state) {\n    var search = state.system.projectSearch ? state.system.projectSearch : [];\n    return search.map(function (s) {\n        var country = CountriesModule.getCountry(state, s.country);\n        return _extends({}, s, ProjectModule.isMemberOrViewer(state, s), {\n            country_name: country ? country.name : ''\n        });\n    });\n};\n\nvar getLanguages = exports.getLanguages = function getLanguages(state) {\n    return state.system.languages.map(function (l) {\n        return _extends({}, l, { flag: '/static/flags/' + l.flag });\n    });\n};\n\nvar getSearchFilters = exports.getSearchFilters = function getSearchFilters(state) {\n    return [].concat(_toConsumableArray(state.system.search_filters));\n};\n\nvar getLandingPageDefaults = exports.getLandingPageDefaults = function getLandingPageDefaults(state) {\n    return _extends({}, state.system.landing_page_defaults);\n};\n\nvar getAxis = exports.getAxis = function getAxis(state) {\n    return [].concat(_toConsumableArray(state.system.axis));\n};\n\nvar getDomains = exports.getDomains = function getDomains(state) {\n    return [].concat(_toConsumableArray(state.system.domains));\n};\n\nvar getQuestions = exports.getQuestions = function getQuestions(state) {\n    return [].concat(_toConsumableArray(state.system.toolkit_questions));\n};\n\nvar getThematicOverview = exports.getThematicOverview = function getThematicOverview(state) {\n    var th = state.system.thematic_overview;\n    return th.categories.map(function (cat) {\n        return _extends({}, cat, { domains: th.sub_categories.filter(function (sb) {\n                return sb.category === cat.id;\n            }) });\n    });\n};\n\nvar getDomainsForThematic = exports.getDomainsForThematic = function getDomainsForThematic(state) {\n    var axis = exports.getAxis(state);\n    var domains = exports.getDomains(state);\n    var thematic_specific = exports.getThematicOverview(state);\n    return [].concat(_toConsumableArray(thematic_specific.map(function (t) {\n        return { name: t.name, domains: t.domains };\n    })), _toConsumableArray(axis.map(function (a) {\n        return {\n            name: a.name, domains: domains.filter(function (d) {\n                return d.axis === a.id;\n            }).map(function (df) {\n                return { name: df.name };\n            })\n        };\n    })));\n};\n\nvar getSubLevelTypes = exports.getSubLevelTypes = function getSubLevelTypes(state) {\n    return [].concat(_toConsumableArray(state.system.sub_level_types.map(function (t) {\n        return _extends({}, t);\n    })));\n};\n\n// ACTIONS\n\nfunction loadUserProfiles() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch) {\n            var _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.next = 2;\n                            return _axios2.default.get('/api/userprofiles/');\n\n                        case 2:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            dispatch({ type: 'SET_USER_PROFILES', profiles: data });\n\n                        case 5:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\nfunction loadStaticData() {\n    var _this2 = this;\n\n    return function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch) {\n            var _ref4, data;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _context2.next = 2;\n                            return _axios2.default.get('/api/static-data/');\n\n                        case 2:\n                            _ref4 = _context2.sent;\n                            data = _ref4.data;\n\n                            dispatch({ type: 'SET_AXIS', axis: data.axis });\n                            dispatch({ type: 'SET_DOMAINS', domains: data.domains });\n                            dispatch({\n                                type: 'SET_LANDING_PAGE_DEFAULTS',\n                                landing_page_defaults: data.landing_page_defaults\n                            });\n                            dispatch({ type: 'SET_LANGUAGES', languages: data.languages });\n                            dispatch({ type: 'SET_SEARCH_FILTERS', search_filters: data.search_filters });\n                            dispatch({ type: 'SET_THEMATIC_OVERVIEW', thematic_overview: data.thematic_overview });\n                            dispatch({ type: 'SET_TOOLKIT_QUESTIONS', toolkit_questions: data.toolkit_questions });\n                            dispatch({ type: 'SET_SUB_LEVEL_TYPES', sub_level_types: data.sub_level_types });\n\n                        case 12:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2);\n        }));\n\n        return function (_x2) {\n            return _ref3.apply(this, arguments);\n        };\n    }();\n}\n\nfunction searchProjects(query, searchFilters) {\n    var _this3 = this;\n\n    return function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dispatch) {\n            var filters, f, item, _ref6, data;\n\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            filters = {\n                                query: query\n                            };\n\n                            for (f in searchFilters) {\n                                item = searchFilters[f];\n\n                                filters[item.name] = item.value;\n                            }\n                            _context3.next = 4;\n                            return _axios2.default.post('/api/search/projects/', filters);\n\n                        case 4:\n                            _ref6 = _context3.sent;\n                            data = _ref6.data;\n\n                            dispatch({ type: 'SET_PROJECT_SEARCH_RESULT', projects: data });\n\n                        case 7:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, _this3);\n        }));\n\n        return function (_x3) {\n            return _ref5.apply(this, arguments);\n        };\n    }();\n}\n\nfunction unsetSearchedProjects() {\n    return function (dispatch) {\n        dispatch({ type: 'UNSET_PROJECT_SEARCH_RESULT' });\n    };\n}\n\nfunction system() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_USER_PROFILES':\n            {\n                return _extends({}, state, { profiles: action.profiles });\n            }\n        case 'SET_PROJECT_SEARCH_RESULT':\n            {\n                return _extends({}, state, { projectSearch: action.projects });\n            }\n        case 'UNSET_PROJECT_SEARCH_RESULT':\n            {\n                return _extends({}, state, { projectSearch: [] });\n            }\n        case 'SET_AXIS':\n            {\n                return _extends({}, state, { axis: action.axis });\n            }\n        case 'SET_DOMAINS':\n            {\n                return _extends({}, state, { domains: action.domains });\n            }\n        case 'SET_LANDING_PAGE_DEFAULTS':\n            {\n                return _extends({}, state, { landing_page_defaults: action.landing_page_defaults });\n            }\n        case 'SET_LANGUAGES':\n            {\n                return _extends({}, state, { languages: action.languages });\n            }\n        case 'SET_SEARCH_FILTERS':\n            {\n                return _extends({}, state, { search_filters: action.search_filters });\n            }\n        case 'SET_THEMATIC_OVERVIEW':\n            {\n                return _extends({}, state, { thematic_overview: action.thematic_overview });\n            }\n        case 'SET_TOOLKIT_QUESTIONS':\n            {\n                return _extends({}, state, { toolkit_questions: action.toolkit_questions });\n            }\n        case 'SET_SUB_LEVEL_TYPES':\n            {\n                return _extends({}, state, { sub_level_types: action.sub_level_types });\n            }\n        default:\n            return state;\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy9zeXN0ZW0uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3N0b3JlL21vZHVsZXMvc3lzdGVtLmpzP2FiNmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8td2FybmluZy1jb21tZW50cyAqL1xuaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uL3BsdWdpbnMvYXhpb3MnO1xuaW1wb3J0ICogYXMgUHJvamVjdE1vZHVsZSBmcm9tICcuL3Byb2plY3RzJztcbmltcG9ydCAqIGFzIENvdW50cmllc01vZHVsZSBmcm9tICcuL2NvdW50cmllcyc7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgICBwcm9maWxlczogW10sXG4gICAgc2VhcmNoX2ZpbHRlcnM6IFtdLFxuICAgIGxhbmd1YWdlczogW10sXG4gICAgcHJvamVjdFNlYXJjaDogW10sXG4gICAgdGhlbWF0aWNfb3ZlcnZpZXc6IFtdLFxuICAgIGF4aXM6IFtdLFxuICAgIGRvbWFpbnM6IFtdLFxuICAgIGxhbmRpbmdfcGFnZV9kZWZhdWx0czoge30sXG4gICAgdG9vbGtpdF9xdWVzdGlvbnM6IFtdLFxuICAgIHN1Yl9sZXZlbF90eXBlczogW11cbn07XG5cbi8vIEdFVFRFUlNcblxuZXhwb3J0IGNvbnN0IGdldFVzZXJQcm9maWxlcyA9IHN0YXRlID0+IHtcbiAgICByZXR1cm4gc3RhdGUuc3lzdGVtLnByb2ZpbGVzID8gc3RhdGUuc3lzdGVtLnByb2ZpbGVzLnNsaWNlKCkgOiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZWFyY2hSZXN1bHQgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3Qgc2VhcmNoID0gc3RhdGUuc3lzdGVtLnByb2plY3RTZWFyY2ggPyBzdGF0ZS5zeXN0ZW0ucHJvamVjdFNlYXJjaCA6IFtdO1xuICAgIHJldHVybiBzZWFyY2gubWFwKHMgPT4ge1xuICAgICAgICBjb25zdCBjb3VudHJ5ID0gQ291bnRyaWVzTW9kdWxlLmdldENvdW50cnkoc3RhdGUsIHMuY291bnRyeSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zLFxuICAgICAgICAgICAgLi4uUHJvamVjdE1vZHVsZS5pc01lbWJlck9yVmlld2VyKHN0YXRlLCBzKSxcbiAgICAgICAgICAgIGNvdW50cnlfbmFtZTogY291bnRyeSA/IGNvdW50cnkubmFtZSA6ICcnXG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TGFuZ3VhZ2VzID0gc3RhdGUgPT4ge1xuICAgIHJldHVybiBzdGF0ZS5zeXN0ZW0ubGFuZ3VhZ2VzLm1hcChsID0+ICh7IC4uLmwsIGZsYWc6IGAvc3RhdGljL2ZsYWdzLyR7bC5mbGFnfWAgfSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNlYXJjaEZpbHRlcnMgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIFsuLi5zdGF0ZS5zeXN0ZW0uc2VhcmNoX2ZpbHRlcnNdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExhbmRpbmdQYWdlRGVmYXVsdHMgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIHsgLi4uc3RhdGUuc3lzdGVtLmxhbmRpbmdfcGFnZV9kZWZhdWx0cyB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEF4aXMgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIFsuLi5zdGF0ZS5zeXN0ZW0uYXhpc107XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RG9tYWlucyA9IHN0YXRlID0+IHtcbiAgICByZXR1cm4gWy4uLnN0YXRlLnN5c3RlbS5kb21haW5zXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRRdWVzdGlvbnMgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIFsuLi5zdGF0ZS5zeXN0ZW0udG9vbGtpdF9xdWVzdGlvbnNdO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFRoZW1hdGljT3ZlcnZpZXcgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgdGggPSBzdGF0ZS5zeXN0ZW0udGhlbWF0aWNfb3ZlcnZpZXc7XG4gICAgcmV0dXJuIHRoLmNhdGVnb3JpZXMubWFwKGNhdCA9PiAoeyAuLi5jYXQsIGRvbWFpbnM6IHRoLnN1Yl9jYXRlZ29yaWVzLmZpbHRlcihzYiA9PiBzYi5jYXRlZ29yeSA9PT0gY2F0LmlkKSB9KSk7XG5cbn07XG5cblxuZXhwb3J0IGNvbnN0IGdldERvbWFpbnNGb3JUaGVtYXRpYyA9IHN0YXRlID0+IHtcbiAgICBjb25zdCBheGlzID0gZXhwb3J0cy5nZXRBeGlzKHN0YXRlKTtcbiAgICBjb25zdCBkb21haW5zID0gZXhwb3J0cy5nZXREb21haW5zKHN0YXRlKTtcbiAgICBjb25zdCB0aGVtYXRpY19zcGVjaWZpYyA9IGV4cG9ydHMuZ2V0VGhlbWF0aWNPdmVydmlldyhzdGF0ZSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgLi4udGhlbWF0aWNfc3BlY2lmaWMubWFwKHQgPT4gKHsgbmFtZTogdC5uYW1lLCBkb21haW5zOiB0LmRvbWFpbnMgfSkpLFxuICAgICAgICAuLi5heGlzLm1hcChhID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBhLm5hbWUsIGRvbWFpbnM6IGRvbWFpbnNcbiAgICAgICAgICAgICAgLmZpbHRlcihkID0+IGQuYXhpcyA9PT0gYS5pZClcbiAgICAgICAgICAgICAgLm1hcChkZiA9PiAoeyBuYW1lOiBkZi5uYW1lIH0pKVxuICAgICAgICB9KSldO1xuXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U3ViTGV2ZWxUeXBlcyA9IHN0YXRlID0+IHtcbiAgICByZXR1cm4gWy4uLnN0YXRlLnN5c3RlbS5zdWJfbGV2ZWxfdHlwZXMubWFwKHQgPT4gKHsgLi4udCB9KSldO1xufTtcblxuLy8gQUNUSU9OU1xuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFVzZXJQcm9maWxlcygpIHtcbiAgICByZXR1cm4gYXN5bmMgZGlzcGF0Y2ggPT4ge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS91c2VycHJvZmlsZXMvJyk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9VU0VSX1BST0ZJTEVTJywgcHJvZmlsZXM6IGRhdGEgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTdGF0aWNEYXRhKCkge1xuICAgIHJldHVybiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3N0YXRpYy1kYXRhLycpO1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfQVhJUycsIGF4aXM6IGRhdGEuYXhpcyB9KTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0RPTUFJTlMnLCBkb21haW5zOiBkYXRhLmRvbWFpbnMgfSk7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdTRVRfTEFORElOR19QQUdFX0RFRkFVTFRTJyxcbiAgICAgICAgICAgIGxhbmRpbmdfcGFnZV9kZWZhdWx0czogZGF0YS5sYW5kaW5nX3BhZ2VfZGVmYXVsdHNcbiAgICAgICAgfSk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9MQU5HVUFHRVMnLCBsYW5ndWFnZXM6IGRhdGEubGFuZ3VhZ2VzIH0pO1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfU0VBUkNIX0ZJTFRFUlMnLCBzZWFyY2hfZmlsdGVyczogZGF0YS5zZWFyY2hfZmlsdGVycyB9KTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1RIRU1BVElDX09WRVJWSUVXJywgdGhlbWF0aWNfb3ZlcnZpZXc6IGRhdGEudGhlbWF0aWNfb3ZlcnZpZXcgfSk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9UT09MS0lUX1FVRVNUSU9OUycsIHRvb2xraXRfcXVlc3Rpb25zOiBkYXRhLnRvb2xraXRfcXVlc3Rpb25zIH0pO1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfU1VCX0xFVkVMX1RZUEVTJywgc3ViX2xldmVsX3R5cGVzOiBkYXRhLnN1Yl9sZXZlbF90eXBlcyB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoUHJvamVjdHMocXVlcnksIHNlYXJjaEZpbHRlcnMpIHtcbiAgICByZXR1cm4gYXN5bmMgZGlzcGF0Y2ggPT4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICAgICAgcXVlcnlcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBmIGluIHNlYXJjaEZpbHRlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzZWFyY2hGaWx0ZXJzW2ZdO1xuICAgICAgICAgICAgZmlsdGVyc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvc2VhcmNoL3Byb2plY3RzLycsIGZpbHRlcnMpO1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfUFJPSkVDVF9TRUFSQ0hfUkVTVUxUJywgcHJvamVjdHM6IGRhdGEgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2V0U2VhcmNoZWRQcm9qZWN0cygpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2ggPT4ge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVTlNFVF9QUk9KRUNUX1NFQVJDSF9SRVNVTFQnIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hPcmdhbmlzYXRpb24obmFtZSkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL29yZ2FuaXNhdGlvbnMvP25hbWU9JHtuYW1lfWApO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkT3JnYW5pc2F0aW9uKG5hbWUpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvb3JnYW5pc2F0aW9ucy8nLCB7IG5hbWUgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cblxuLy8gUmVkdWNlcnNcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3lzdGVtKHN0YXRlID0gaW5pdGlhbFN0YXRlLCBhY3Rpb24pIHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnU0VUX1VTRVJfUFJPRklMRVMnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBwcm9maWxlczogYWN0aW9uLnByb2ZpbGVzIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9QUk9KRUNUX1NFQVJDSF9SRVNVTFQnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBwcm9qZWN0U2VhcmNoOiBhY3Rpb24ucHJvamVjdHMgfTtcbiAgICB9XG4gICAgY2FzZSAnVU5TRVRfUFJPSkVDVF9TRUFSQ0hfUkVTVUxUJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgcHJvamVjdFNlYXJjaDogW10gfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX0FYSVMnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBheGlzOiBhY3Rpb24uYXhpcyB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfRE9NQUlOUyc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGRvbWFpbnM6IGFjdGlvbi5kb21haW5zIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9MQU5ESU5HX1BBR0VfREVGQVVMVFMnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBsYW5kaW5nX3BhZ2VfZGVmYXVsdHM6IGFjdGlvbi5sYW5kaW5nX3BhZ2VfZGVmYXVsdHMgfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX0xBTkdVQUdFUyc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxhbmd1YWdlczogYWN0aW9uLmxhbmd1YWdlcyB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfU0VBUkNIX0ZJTFRFUlMnOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBzZWFyY2hfZmlsdGVyczogYWN0aW9uLnNlYXJjaF9maWx0ZXJzIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9USEVNQVRJQ19PVkVSVklFVyc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHRoZW1hdGljX292ZXJ2aWV3OiBhY3Rpb24udGhlbWF0aWNfb3ZlcnZpZXcgfTtcbiAgICB9XG4gICAgY2FzZSAnU0VUX1RPT0xLSVRfUVVFU1RJT05TJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgdG9vbGtpdF9xdWVzdGlvbnM6IGFjdGlvbi50b29sa2l0X3F1ZXN0aW9ucyB9O1xuICAgIH1cbiAgICBjYXNlICdTRVRfU1VCX0xFVkVMX1RZUEVTJzoge1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgc3ViX2xldmVsX3R5cGVzOiBhY3Rpb24uc3ViX2xldmVsX3R5cGVzIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7QUFpSUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOzs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7Ozs7O0FBTUE7QUFDQTtBQXhEQTtBQU9BO0FBaUJBO0FBY0E7QUFtQkE7QUFDQTtBQWhKQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBOzs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSEE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQVZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFxQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/store/modules/system.js\n");

/***/ }),

/***/ "./src/store/modules/toolkit.js":
/*!**************************************!*\
  !*** ./src/store/modules/toolkit.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getAxisDetail = exports.getDomainStructure = exports.getStructure = exports.getToolkitData = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable no-warning-comments */\n\n\nexports.loadToolkitData = loadToolkitData;\nexports.saveAnswer = saveAnswer;\nexports.default = toolkit;\n\nvar _cloneDeep = __webpack_require__(/*! lodash/cloneDeep */ \"./node_modules/lodash/cloneDeep.js\");\n\nvar _cloneDeep2 = _interopRequireDefault(_cloneDeep);\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _system = __webpack_require__(/*! ./system */ \"./src/store/modules/system.js\");\n\nvar SystemModule = _interopRequireWildcard(_system);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar initialState = {\n    toolkitData: []\n};\n\n// GETTERS\nvar getToolkitData = exports.getToolkitData = function getToolkitData(state) {\n    var data = state.toolkit.toolkitData;\n    return data ? (0, _cloneDeep2.default)(data) : [];\n};\n\nvar getStructure = exports.getStructure = function getStructure(state) {\n    var axis = SystemModule.getAxis(state);\n    var domains = SystemModule.getDomains(state);\n    var questions = SystemModule.getQuestions(state);\n    return axis.map(function (a) {\n        return _extends({}, a, { domains: domains.filter(function (d) {\n                return d.axis === a.id;\n            }).map(function (df) {\n                return _extends({}, df, { questions: questions.filter(function (q) {\n                        return q.domain === df.id;\n                    }).map(function (qf) {\n                        return _extends({}, qf, { id: qf.domain + '-' + qf.question_id });\n                    })\n                });\n            })\n        });\n    });\n};\n\nvar getDomainStructure = exports.getDomainStructure = function getDomainStructure(state, axis, domain) {\n    var structure = exports.getStructure(state);\n    return structure && structure[axis] && structure[axis].domains[domain] ? structure[axis].domains[domain] : {};\n};\n\nvar getAxisDetail = exports.getAxisDetail = function getAxisDetail(state, axisId) {\n    var axisStructure = SystemModule.getAxis(state).find(function (a) {\n        return a.id === axisId;\n    });\n    var systemDomains = SystemModule.getDomains(state);\n    var axisData = exports.getToolkitData(state).find(function (a) {\n        return a.id === axisId;\n    });\n    var domains = axisData ? axisData.domains.map(function (add, index) {\n        return _extends({}, add, systemDomains.find(function (d) {\n            return d.id === add.id;\n        }), {\n            index: index\n        });\n    }) : [];\n    return _extends({}, axisStructure, axisData, {\n        domains: domains\n    });\n};\n\n// ACTIONS\n\nfunction loadToolkitData() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch, getState) {\n            var projectId, _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.prev = 0;\n                            projectId = getState().projects.currentProject;\n\n                            if (!projectId) {\n                                _context.next = 8;\n                                break;\n                            }\n\n                            _context.next = 5;\n                            return _axios2.default.get('/api/projects/' + projectId + '/toolkit/data/');\n\n                        case 5:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            dispatch({ type: 'SET_TOOLKIT_DATA', data: data });\n\n                        case 8:\n                            return _context.abrupt('return', Promise.resolve());\n\n                        case 11:\n                            _context.prev = 11;\n                            _context.t0 = _context['catch'](0);\n                            return _context.abrupt('return', Promise.reject(_context.t0));\n\n                        case 14:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this, [[0, 11]]);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\nfunction saveAnswer(answer) {\n    var _this2 = this;\n\n    return function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n            var projectId, _ref4, data;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _context2.prev = 0;\n                            projectId = getState().projects.currentProject;\n\n                            if (!projectId) {\n                                _context2.next = 9;\n                                break;\n                            }\n\n                            _context2.next = 5;\n                            return _axios2.default.post('/api/projects/' + projectId + '/toolkit/score/', answer);\n\n                        case 5:\n                            _ref4 = _context2.sent;\n                            data = _ref4.data;\n\n                            dispatch({ type: 'UPDATE_TOOLKIT_DATA', data: data });\n                            dispatch(loadToolkitData());\n\n                        case 9:\n                            return _context2.abrupt('return', Promise.resolve());\n\n                        case 12:\n                            _context2.prev = 12;\n                            _context2.t0 = _context2['catch'](0);\n\n                            console.log(_context2.t0);\n                            return _context2.abrupt('return', Promise.reject(_context2.t0));\n\n                        case 16:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2, [[0, 12]]);\n        }));\n\n        return function (_x3, _x4) {\n            return _ref3.apply(this, arguments);\n        };\n    }();\n}\n\n// Reducers\n\nfunction toolkit() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_TOOLKIT_DATA':\n            {\n                return _extends({}, state, { toolkitData: action.data });\n            }\n        case 'UPDATE_TOOLKIT_DATA':\n            {\n                var r = action.data;\n                var data = (0, _cloneDeep2.default)(state.toolkitData);\n                data[r.axis].domains[r.domain].questions[r.question].answers[r.answer] = r.value;\n                return _extends({}, state, { toolkitData: data });\n            }\n        case 'CLEAR_TOOLKIT_DATA':\n            {\n                return _extends({}, initialState);\n            }\n        default:\n            return state;\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy90b29sa2l0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9zdG9yZS9tb2R1bGVzL3Rvb2xraXQuanM/NDQ2MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby13YXJuaW5nLWNvbW1lbnRzICovXG5pbXBvcnQgY2xvbmVEZWVwIGZyb20gJ2xvZGFzaC9jbG9uZURlZXAnO1xuaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uL3BsdWdpbnMvYXhpb3MnO1xuaW1wb3J0ICogYXMgU3lzdGVtTW9kdWxlIGZyb20gJy4vc3lzdGVtJztcblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICAgIHRvb2xraXREYXRhOiBbXVxufTtcblxuLy8gR0VUVEVSU1xuZXhwb3J0IGNvbnN0IGdldFRvb2xraXREYXRhID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBzdGF0ZS50b29sa2l0LnRvb2xraXREYXRhO1xuICAgIHJldHVybiBkYXRhID8gY2xvbmVEZWVwKGRhdGEpIDogW107XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U3RydWN0dXJlID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IGF4aXMgPSBTeXN0ZW1Nb2R1bGUuZ2V0QXhpcyhzdGF0ZSk7XG4gICAgY29uc3QgZG9tYWlucyA9IFN5c3RlbU1vZHVsZS5nZXREb21haW5zKHN0YXRlKTtcbiAgICBjb25zdCBxdWVzdGlvbnMgPSBTeXN0ZW1Nb2R1bGUuZ2V0UXVlc3Rpb25zKHN0YXRlKTtcbiAgICByZXR1cm4gYXhpcy5tYXAoYSA9PiAoeyAuLi5hLCBkb21haW5zOiBkb21haW5zXG4gICAgICAgICAgLmZpbHRlcihkID0+IGQuYXhpcyA9PT0gYS5pZClcbiAgICAgICAgICAubWFwKGRmID0+ICh7IC4uLmRmLCBxdWVzdGlvbnM6IHF1ZXN0aW9uc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIocSA9PiBxLmRvbWFpbiA9PT0gZGYuaWQpXG4gICAgICAgICAgICAgICAgLm1hcChxZiA9PiAoeyAuLi4gcWYsIGlkOiBgJHtxZi5kb21haW59LSR7cWYucXVlc3Rpb25faWR9YCB9KSlcbiAgICAgICAgICB9KSlcbiAgICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RG9tYWluU3RydWN0dXJlID0gKHN0YXRlLCBheGlzLCBkb21haW4pID0+IHtcbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSBleHBvcnRzLmdldFN0cnVjdHVyZShzdGF0ZSk7XG4gICAgcmV0dXJuIHN0cnVjdHVyZSAmJiBzdHJ1Y3R1cmVbYXhpc10gJiYgc3RydWN0dXJlW2F4aXNdLmRvbWFpbnNbZG9tYWluXSA/IHN0cnVjdHVyZVtheGlzXS5kb21haW5zW2RvbWFpbl0gOiB7fTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRBeGlzRGV0YWlsID0gKHN0YXRlLCBheGlzSWQpID0+IHtcbiAgICBjb25zdCBheGlzU3RydWN0dXJlID0gU3lzdGVtTW9kdWxlLmdldEF4aXMoc3RhdGUpLmZpbmQoYSA9PiBhLmlkID09PSBheGlzSWQpO1xuICAgIGNvbnN0IHN5c3RlbURvbWFpbnMgPSBTeXN0ZW1Nb2R1bGUuZ2V0RG9tYWlucyhzdGF0ZSk7XG4gICAgY29uc3QgYXhpc0RhdGEgPSBleHBvcnRzLmdldFRvb2xraXREYXRhKHN0YXRlKS5maW5kKGEgPT4gYS5pZCA9PT0gYXhpc0lkKTtcbiAgICBjb25zdCBkb21haW5zID0gYXhpc0RhdGEgPyBheGlzRGF0YS5kb21haW5zLm1hcCgoYWRkLCBpbmRleCkgPT4gKHtcbiAgICAgICAgLi4uYWRkLFxuICAgICAgICAuLi5zeXN0ZW1Eb21haW5zLmZpbmQoZCA9PiBkLmlkID09PSBhZGQuaWQpLFxuICAgICAgICBpbmRleFxuICAgIH0pKSA6IFtdO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmF4aXNTdHJ1Y3R1cmUsXG4gICAgICAgIC4uLmF4aXNEYXRhLFxuICAgICAgICBkb21haW5zXG4gICAgfTtcbn07XG5cblxuLy8gQUNUSU9OU1xuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFRvb2xraXREYXRhKCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBnZXRTdGF0ZSgpLnByb2plY3RzLmN1cnJlbnRQcm9qZWN0O1xuICAgICAgICAgICAgaWYgKHByb2plY3RJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL3Byb2plY3RzLyR7cHJvamVjdElkfS90b29sa2l0L2RhdGEvYCk7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1RPT0xLSVRfREFUQScsIGRhdGEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2F2ZUFuc3dlcihhbnN3ZXIpIHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdElkID0gZ2V0U3RhdGUoKS5wcm9qZWN0cy5jdXJyZW50UHJvamVjdDtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoYC9hcGkvcHJvamVjdHMvJHtwcm9qZWN0SWR9L3Rvb2xraXQvc2NvcmUvYCwgYW5zd2VyKTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfVE9PTEtJVF9EQVRBJywgZGF0YSB9KTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChsb2FkVG9vbGtpdERhdGEoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuXG4vLyBSZWR1Y2Vyc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b29sa2l0KHN0YXRlID0gaW5pdGlhbFN0YXRlLCBhY3Rpb24pIHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnU0VUX1RPT0xLSVRfREFUQSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHRvb2xraXREYXRhOiBhY3Rpb24uZGF0YSB9O1xuICAgIH1cbiAgICBjYXNlICdVUERBVEVfVE9PTEtJVF9EQVRBJzoge1xuICAgICAgICBjb25zdCByID0gYWN0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBjbG9uZURlZXAoc3RhdGUudG9vbGtpdERhdGEpO1xuICAgICAgICBkYXRhW3IuYXhpc10uZG9tYWluc1tyLmRvbWFpbl0ucXVlc3Rpb25zW3IucXVlc3Rpb25dLmFuc3dlcnNbci5hbnN3ZXJdID0gci52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHRvb2xraXREYXRhOiBkYXRhIH07XG4gICAgfVxuICAgIGNhc2UgJ0NMRUFSX1RPT0xLSVRfREFUQSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5pdGlhbFN0YXRlIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFrREE7QUFlQTtBQXFCQTtBQUNBO0FBeEZBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUZBO0FBQUE7QUFGQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUhBO0FBQUE7QUFLQTtBQUdBO0FBSEE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBVUE7QUFYQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/store/modules/toolkit.js\n");

/***/ }),

/***/ "./src/store/modules/user.js":
/*!***********************************!*\
  !*** ./src/store/modules/user.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.resetPassword = exports.verifyEmail = exports.handleProfile = exports.storeData = exports.isSuperUser = exports.getUserLanguage = exports.getProfile = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint-disable no-warning-comments */\n\n\nvar verifyEmail = exports.verifyEmail = function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(key) {\n        var _ref14, data;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n                switch (_context5.prev = _context5.next) {\n                    case 0:\n                        _context5.next = 2;\n                        return _axios2.default.post('/api/rest-auth/registration/verify-email/', key);\n\n                    case 2:\n                        _ref14 = _context5.sent;\n                        data = _ref14.data;\n                        return _context5.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context5.stop();\n                }\n            }\n        }, _callee5, this);\n    }));\n\n    return function verifyEmail(_x7) {\n        return _ref13.apply(this, arguments);\n    };\n}();\n\nvar resetPassword = exports.resetPassword = function () {\n    var _ref15 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(emailObj) {\n        var _ref16, data;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n                switch (_context6.prev = _context6.next) {\n                    case 0:\n                        _context6.next = 2;\n                        return _axios2.default.post('/api/rest-auth/password/reset/', emailObj);\n\n                    case 2:\n                        _ref16 = _context6.sent;\n                        data = _ref16.data;\n                        return _context6.abrupt('return', data);\n\n                    case 5:\n                    case 'end':\n                        return _context6.stop();\n                }\n            }\n        }, _callee6, this);\n    }));\n\n    return function resetPassword(_x8) {\n        return _ref15.apply(this, arguments);\n    };\n}();\n\n// Reducers\n\nexports.loadProfile = loadProfile;\nexports.doSignup = doSignup;\nexports.doLogin = doLogin;\nexports.saveProfile = saveProfile;\nexports.doLogout = doLogout;\nexports.updateTeamViewers = updateTeamViewers;\nexports.default = user;\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _union = __webpack_require__(/*! lodash/union */ \"./node_modules/lodash/union.js\");\n\nvar _union2 = _interopRequireDefault(_union);\n\nvar _Storage = __webpack_require__(/*! ../../Storage */ \"./src/Storage.js\");\n\nvar _Storage2 = _interopRequireDefault(_Storage);\n\nvar _projects = __webpack_require__(/*! ./projects */ \"./src/store/modules/projects.js\");\n\nvar ProjectModule = _interopRequireWildcard(_projects);\n\nvar _system = __webpack_require__(/*! ./system */ \"./src/store/modules/system.js\");\n\nvar SystemModule = _interopRequireWildcard(_system);\n\nvar _countries = __webpack_require__(/*! ./countries */ \"./src/store/modules/countries.js\");\n\nvar CountryModule = _interopRequireWildcard(_countries);\n\nvar _language = __webpack_require__(/*! ../../plugins/language */ \"./src/plugins/language.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar storage = new _Storage2.default();\n\n// GETTERS\n\nvar getProfile = exports.getProfile = function getProfile(state) {\n    if (state.user.profile) {\n        var countries = CountryModule.getCountriesList(state);\n        var country = undefined;\n        if (countries && countries.length > 0) {\n            country = _extends({}, countries.find(function (c) {\n                return c.id === state.user.profile.country;\n            }));\n        }\n        return _extends({}, state.user.profile, { country: country });\n    }\n    return undefined;\n};\n\nvar getUserLanguage = exports.getUserLanguage = function getUserLanguage(state) {\n    var languages = SystemModule.getLanguages(state);\n    var language = state && state.user && state.user.profile ? state.user.profile.language : undefined;\n    return languages.find(function (l) {\n        return l.code === language;\n    });\n};\n\nvar isSuperUser = exports.isSuperUser = function isSuperUser(state) {\n    return state.user.profile.is_superuser;\n};\n\n// ACTIONS\n\nvar storeData = exports.storeData = function storeData(data, email) {\n    storage.set('token', data.token);\n    storage.set('user_profile_id', data.user_profile_id);\n    storage.set('is_superuser', data.is_superuser);\n    storage.set('email', email);\n    storage.set('login', true);\n    _axios2.default.setAuthToken(data.token);\n};\n\nvar handleProfile = exports.handleProfile = function handleProfile(data) {\n    data.email = storage.get('email');\n    data.is_superuser = storage.get('is_superuser');\n    if (data.organisation) {\n        data.organisation_id = data.organisation;\n        data.organisation = {\n            name: data.organisation_name || '',\n            id: data.organisation_id\n        };\n    } else {\n        data.organisation = null;\n    }\n    return data;\n};\n\nfunction loadProfile() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch, getState) {\n            var state, profileId, _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            state = getState();\n\n                            if (!(storage.get('login') && !state.user.profile)) {\n                                _context.next = 10;\n                                break;\n                            }\n\n                            profileId = state.user.user_profile_id || storage.get('user_profile_id');\n                            _context.next = 5;\n                            return _axios2.default.get('/api/userprofiles/' + profileId + '/');\n\n                        case 5:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            data = exports.handleProfile(data);\n                            (0, _language.setLanguage)(data.language);\n                            dispatch({ type: 'SET_PROFILE', profile: data });\n\n                        case 10:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\nfunction doSignup(_ref3) {\n    var _this2 = this;\n\n    var account_type = _ref3.account_type,\n        password1 = _ref3.password1,\n        password2 = _ref3.password2,\n        email = _ref3.email;\n\n    return function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch) {\n            var _ref5, data, response;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _context2.prev = 0;\n                            _context2.next = 3;\n                            return _axios2.default.post('/api/rest-auth/registration/', { account_type: account_type, password1: password1, password2: password2, email: email });\n\n                        case 3:\n                            _ref5 = _context2.sent;\n                            data = _ref5.data;\n\n                            data.token = data.key;\n                            data.is_superuser = false;\n                            exports.storeData(data, email);\n                            dispatch({ type: 'SET_USER', user: data });\n                            _context2.next = 11;\n                            return dispatch(exports.loadProfile());\n\n                        case 11:\n                            return _context2.abrupt('return', Promise.resolve());\n\n                        case 14:\n                            _context2.prev = 14;\n                            _context2.t0 = _context2['catch'](0);\n                            response = _context2.t0.response;\n                            return _context2.abrupt('return', Promise.reject(response.data));\n\n                        case 18:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2, [[0, 14]]);\n        }));\n\n        return function (_x3) {\n            return _ref4.apply(this, arguments);\n        };\n    }();\n}\n\nfunction doLogin(_ref7) {\n    var _this3 = this;\n\n    var username = _ref7.username,\n        password = _ref7.password;\n\n    return function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dispatch) {\n            var _ref9, data, response;\n\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            _context3.prev = 0;\n                            _context3.next = 3;\n                            return _axios2.default.post('/api/api-token-auth/', { username: username, password: password });\n\n                        case 3:\n                            _ref9 = _context3.sent;\n                            data = _ref9.data;\n\n                            exports.storeData(data, username);\n                            dispatch({ type: 'SET_USER', user: data });\n                            _context3.next = 9;\n                            return dispatch(exports.loadProfile());\n\n                        case 9:\n                            _context3.next = 11;\n                            return dispatch(ProjectModule.loadUserProjects());\n\n                        case 11:\n                            return _context3.abrupt('return', Promise.resolve());\n\n                        case 14:\n                            _context3.prev = 14;\n                            _context3.t0 = _context3['catch'](0);\n                            response = _context3.t0.response;\n                            return _context3.abrupt('return', Promise.reject(response.data));\n\n                        case 18:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, _this3, [[0, 14]]);\n        }));\n\n        return function (_x4) {\n            return _ref8.apply(this, arguments);\n        };\n    }();\n}\n\nfunction saveProfile(profile) {\n    var _this4 = this;\n\n    return function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n            var state, id, url, action, p, _ref12, data;\n\n            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            state = getState();\n                            id = state.user.user_profile_id || storage.get('user_profile_id');\n                            url = id ? '/api/userprofiles/' + id + '/' : '/api/userprofiles/';\n                            action = id ? 'put' : 'post';\n                            p = Object.assign({}, profile);\n\n                            p.organisation = p.organisation.id;\n                            p.country = p.country.id;\n                            _context4.next = 9;\n                            return _axios2.default[action](url, p);\n\n                        case 9:\n                            _ref12 = _context4.sent;\n                            data = _ref12.data;\n\n                            data = exports.handleProfile(data);\n                            (0, _language.setLanguage)(data.language);\n                            dispatch({ type: 'SET_PROFILE', profile: data });\n                            dispatch(SystemModule.loadStaticData());\n                            dispatch(ProjectModule.loadProjectStructure(true));\n\n                        case 16:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, _callee4, _this4);\n        }));\n\n        return function (_x5, _x6) {\n            return _ref11.apply(this, arguments);\n        };\n    }();\n}\n\nfunction doLogout() {\n    return function (dispatch) {\n        storage.clear();\n        _axios2.default.unSetAuthToken();\n        try {\n            dispatch({ type: 'CLEAR_USER_PROJECTS' });\n            dispatch({ type: 'CLEAR_TOOLKIT_DATA' });\n            dispatch({ type: 'CLEAR_CMS_DATA' });\n        } catch (e) {\n            console.warn(e);\n        }\n        try {\n            dispatch({ type: 'UNSET_USER' });\n        } catch (e) {\n            console.warn(e);\n        }\n    };\n}\n\nfunction updateTeamViewers(team, viewer) {\n    return function (dispatch, getState) {\n        var originalTeam = getState().user.profile.member;\n        var originalViewer = getState().user.profile.viewer;\n        var newTeam = (0, _union2.default)(originalTeam, team);\n        var newViewer = (0, _union2.default)(originalViewer, viewer);\n        if (newTeam.length !== originalTeam.length || newViewer.length !== originalViewer.length) {\n            dispatch({ type: 'UPDATE_TEAM_VIEWER', member: newTeam, viewer: newViewer });\n        }\n    };\n}\n\nfunction user() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_USER':\n            {\n                return _extends({}, state, action.user);\n            }\n        case 'SET_PROFILE':\n            {\n                var profile = state.profile ? _extends({}, state.profile, action.profile) : _extends({}, action.profile);\n                return _extends({}, state, { profile: profile });\n            }\n        case 'UPDATE_TEAM_VIEWER':\n            {\n                var _profile = state.profile || {};\n                _profile.member = action.member;\n                _profile.viewer = action.viewer;\n                return _extends({}, state, { profile: _profile });\n            }\n        case 'UNSET_USER':\n            {\n                return {};\n            }\n        default:\n            return state;\n\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy91c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9zdG9yZS9tb2R1bGVzL3VzZXIuanM/NTY2MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby13YXJuaW5nLWNvbW1lbnRzICovXG5pbXBvcnQgYXhpb3MgZnJvbSAnLi4vLi4vcGx1Z2lucy9heGlvcyc7XG5pbXBvcnQgdW5pb24gZnJvbSAnbG9kYXNoL3VuaW9uJztcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4uLy4uL1N0b3JhZ2UnO1xuaW1wb3J0ICogYXMgUHJvamVjdE1vZHVsZSBmcm9tICcuL3Byb2plY3RzJztcbmltcG9ydCAqIGFzIFN5c3RlbU1vZHVsZSBmcm9tICcuL3N5c3RlbSc7XG5pbXBvcnQgKiBhcyBDb3VudHJ5TW9kdWxlIGZyb20gJy4vY291bnRyaWVzJztcbmltcG9ydCB7IHNldExhbmd1YWdlIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9sYW5ndWFnZSc7XG5cbmNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgpO1xuXG4vLyBHRVRURVJTXG5cbmV4cG9ydCBjb25zdCBnZXRQcm9maWxlID0gc3RhdGUgPT4ge1xuICAgIGlmIChzdGF0ZS51c2VyLnByb2ZpbGUpIHtcbiAgICAgICAgY29uc3QgY291bnRyaWVzID0gQ291bnRyeU1vZHVsZS5nZXRDb3VudHJpZXNMaXN0KHN0YXRlKTtcbiAgICAgICAgbGV0IGNvdW50cnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChjb3VudHJpZXMgJiYgY291bnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvdW50cnkgPSB7IC4uLmNvdW50cmllcy5maW5kKGMgPT4gYy5pZCA9PT0gc3RhdGUudXNlci5wcm9maWxlLmNvdW50cnkpIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUudXNlci5wcm9maWxlLCBjb3VudHJ5IH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlckxhbmd1YWdlID0gc3RhdGUgPT4ge1xuICAgIGNvbnN0IGxhbmd1YWdlcyA9IFN5c3RlbU1vZHVsZS5nZXRMYW5ndWFnZXMoc3RhdGUpO1xuICAgIGNvbnN0IGxhbmd1YWdlID0gc3RhdGUgJiYgc3RhdGUudXNlciAmJiBzdGF0ZS51c2VyLnByb2ZpbGUgPyBzdGF0ZS51c2VyLnByb2ZpbGUubGFuZ3VhZ2UgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGxhbmd1YWdlcy5maW5kKGwgPT4gbC5jb2RlID09PSBsYW5ndWFnZSk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNTdXBlclVzZXIgPSBzdGF0ZSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlLnVzZXIucHJvZmlsZS5pc19zdXBlcnVzZXI7XG59O1xuXG4vLyBBQ1RJT05TXG5cbmV4cG9ydCBjb25zdCBzdG9yZURhdGEgPSAoZGF0YSwgZW1haWwpID0+IHtcbiAgICBzdG9yYWdlLnNldCgndG9rZW4nLCBkYXRhLnRva2VuKTtcbiAgICBzdG9yYWdlLnNldCgndXNlcl9wcm9maWxlX2lkJywgZGF0YS51c2VyX3Byb2ZpbGVfaWQpO1xuICAgIHN0b3JhZ2Uuc2V0KCdpc19zdXBlcnVzZXInLCBkYXRhLmlzX3N1cGVydXNlcik7XG4gICAgc3RvcmFnZS5zZXQoJ2VtYWlsJywgZW1haWwpO1xuICAgIHN0b3JhZ2Uuc2V0KCdsb2dpbicsIHRydWUpO1xuICAgIGF4aW9zLnNldEF1dGhUb2tlbihkYXRhLnRva2VuKTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVQcm9maWxlID0gKGRhdGEpID0+IHtcbiAgICBkYXRhLmVtYWlsID0gc3RvcmFnZS5nZXQoJ2VtYWlsJyk7XG4gICAgZGF0YS5pc19zdXBlcnVzZXIgPSBzdG9yYWdlLmdldCgnaXNfc3VwZXJ1c2VyJyk7XG4gICAgaWYgKGRhdGEub3JnYW5pc2F0aW9uKSB7XG4gICAgICAgIGRhdGEub3JnYW5pc2F0aW9uX2lkID0gZGF0YS5vcmdhbmlzYXRpb247XG4gICAgICAgIGRhdGEub3JnYW5pc2F0aW9uID0ge1xuICAgICAgICAgICAgbmFtZTogZGF0YS5vcmdhbmlzYXRpb25fbmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGlkOiBkYXRhLm9yZ2FuaXNhdGlvbl9pZFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGF0YS5vcmdhbmlzYXRpb24gPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn07XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQcm9maWxlKCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHN0b3JhZ2UuZ2V0KCdsb2dpbicpICYmICFzdGF0ZS51c2VyLnByb2ZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVJZCA9IHN0YXRlLnVzZXIudXNlcl9wcm9maWxlX2lkIHx8IHN0b3JhZ2UuZ2V0KCd1c2VyX3Byb2ZpbGVfaWQnKTtcbiAgICAgICAgICAgIGxldCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgL2FwaS91c2VycHJvZmlsZXMvJHtwcm9maWxlSWR9L2ApO1xuICAgICAgICAgICAgZGF0YSA9IGV4cG9ydHMuaGFuZGxlUHJvZmlsZShkYXRhKTtcbiAgICAgICAgICAgIHNldExhbmd1YWdlKGRhdGEubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1BST0ZJTEUnLCBwcm9maWxlOiBkYXRhIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2lnbnVwKHsgYWNjb3VudF90eXBlLCBwYXNzd29yZDEsIHBhc3N3b3JkMiwgZW1haWwgfSkge1xuICAgIHJldHVybiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvcmVzdC1hdXRoL3JlZ2lzdHJhdGlvbi8nLFxuICAgICAgICAgICAgICB7IGFjY291bnRfdHlwZSwgcGFzc3dvcmQxLCBwYXNzd29yZDIsIGVtYWlsIH0pO1xuICAgICAgICAgICAgZGF0YS50b2tlbiA9IGRhdGEua2V5O1xuICAgICAgICAgICAgZGF0YS5pc19zdXBlcnVzZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGV4cG9ydHMuc3RvcmVEYXRhKGRhdGEsIGVtYWlsKTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9VU0VSJywgdXNlcjogZGF0YSB9KTtcbiAgICAgICAgICAgIGF3YWl0IGRpc3BhdGNoKGV4cG9ydHMubG9hZFByb2ZpbGUoKSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHsgcmVzcG9uc2UgfSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTG9naW4oeyB1c2VybmFtZSwgcGFzc3dvcmQgfSkge1xuICAgIHJldHVybiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvYXBpLXRva2VuLWF1dGgvJywgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSk7XG4gICAgICAgICAgICBleHBvcnRzLnN0b3JlRGF0YShkYXRhLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfVVNFUicsIHVzZXI6IGRhdGEgfSk7XG4gICAgICAgICAgICBhd2FpdCBkaXNwYXRjaChleHBvcnRzLmxvYWRQcm9maWxlKCkpO1xuICAgICAgICAgICAgYXdhaXQgZGlzcGF0Y2goUHJvamVjdE1vZHVsZS5sb2FkVXNlclByb2plY3RzKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoICh7IHJlc3BvbnNlIH0pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUHJvZmlsZShwcm9maWxlKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBpZCA9IHN0YXRlLnVzZXIudXNlcl9wcm9maWxlX2lkIHx8IHN0b3JhZ2UuZ2V0KCd1c2VyX3Byb2ZpbGVfaWQnKTtcbiAgICAgICAgY29uc3QgdXJsID0gaWQgPyBgL2FwaS91c2VycHJvZmlsZXMvJHtpZH0vYCA6ICcvYXBpL3VzZXJwcm9maWxlcy8nO1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBpZCA/ICdwdXQnIDogJ3Bvc3QnO1xuICAgICAgICBjb25zdCBwID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvZmlsZSk7XG4gICAgICAgIHAub3JnYW5pc2F0aW9uID0gcC5vcmdhbmlzYXRpb24uaWQ7XG4gICAgICAgIHAuY291bnRyeSA9IHAuY291bnRyeS5pZDtcbiAgICAgICAgbGV0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3NbYWN0aW9uXSh1cmwsIHApO1xuICAgICAgICBkYXRhID0gZXhwb3J0cy5oYW5kbGVQcm9maWxlKGRhdGEpO1xuICAgICAgICBzZXRMYW5ndWFnZShkYXRhLmxhbmd1YWdlKTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1BST0ZJTEUnLCBwcm9maWxlOiBkYXRhIH0pO1xuICAgICAgICBkaXNwYXRjaChTeXN0ZW1Nb2R1bGUubG9hZFN0YXRpY0RhdGEoKSk7XG4gICAgICAgIGRpc3BhdGNoKFByb2plY3RNb2R1bGUubG9hZFByb2plY3RTdHJ1Y3R1cmUodHJ1ZSkpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0xvZ291dCgpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2ggPT4ge1xuICAgICAgICBzdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgIGF4aW9zLnVuU2V0QXV0aFRva2VuKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9VU0VSX1BST0pFQ1RTJyB9KTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0NMRUFSX1RPT0xLSVRfREFUQScgfSk7XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9DTVNfREFUQScgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVU5TRVRfVVNFUicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUZWFtVmlld2Vycyh0ZWFtLCB2aWV3ZXIpIHtcbiAgICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRlYW0gPSBnZXRTdGF0ZSgpLnVzZXIucHJvZmlsZS5tZW1iZXI7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVmlld2VyID0gZ2V0U3RhdGUoKS51c2VyLnByb2ZpbGUudmlld2VyO1xuICAgICAgICBjb25zdCBuZXdUZWFtID0gdW5pb24ob3JpZ2luYWxUZWFtLCB0ZWFtKTtcbiAgICAgICAgY29uc3QgbmV3Vmlld2VyID0gdW5pb24ob3JpZ2luYWxWaWV3ZXIsIHZpZXdlcik7XG4gICAgICAgIGlmIChuZXdUZWFtLmxlbmd0aCAhPT0gb3JpZ2luYWxUZWFtLmxlbmd0aCB8fCBuZXdWaWV3ZXIubGVuZ3RoICE9PSBvcmlnaW5hbFZpZXdlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9URUFNX1ZJRVdFUicsIG1lbWJlcjogbmV3VGVhbSwgdmlld2VyOiBuZXdWaWV3ZXIgfSk7XG4gICAgICAgIH1cblxuICAgIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlFbWFpbChrZXkpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvcmVzdC1hdXRoL3JlZ2lzdHJhdGlvbi92ZXJpZnktZW1haWwvJywga2V5KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoZW1haWxPYmopIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvcmVzdC1hdXRoL3Bhc3N3b3JkL3Jlc2V0LycsIGVtYWlsT2JqKTtcbiAgICByZXR1cm4gZGF0YTtcbn1cblxuXG4vLyBSZWR1Y2Vyc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VyKHN0YXRlID0ge30sIGFjdGlvbikge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdTRVRfVVNFUic6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIC4uLmFjdGlvbi51c2VyIH07XG4gICAgfVxuICAgIGNhc2UgJ1NFVF9QUk9GSUxFJzoge1xuICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSA/IHsgLi4uc3RhdGUucHJvZmlsZSwgLi4uYWN0aW9uLnByb2ZpbGUgfSA6IHsgLi4uYWN0aW9uLnByb2ZpbGUgfTtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHByb2ZpbGUgfTtcbiAgICB9XG4gICAgY2FzZSAnVVBEQVRFX1RFQU1fVklFV0VSJzoge1xuICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSB8fCB7fTtcbiAgICAgICAgcHJvZmlsZS5tZW1iZXIgPSBhY3Rpb24ubWVtYmVyO1xuICAgICAgICBwcm9maWxlLnZpZXdlciA9IGFjdGlvbi52aWV3ZXI7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBwcm9maWxlIH07XG4gICAgfVxuICAgIGNhc2UgJ1VOU0VUX1VTRVInOiB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuXG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBOztBQWdLQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7Ozs7OztBQUtBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7QUFNQTtBQUNBO0FBL0dBO0FBYUE7QUFrQkE7QUFnQkE7QUFrQkE7QUFxQkE7QUEwQkE7QUFDQTtBQS9LQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQVdBO0FBWEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQVNBO0FBVEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFxQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/store/modules/user.js\n");

/***/ }),

/***/ "./src/store/static_data/project_definition.js":
/*!*****************************************************!*\
  !*** ./src/store/static_data/project_definition.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar project_definition = exports.project_definition = {\n    name: null,\n    organisation: {\n        id: undefined,\n        name: ''\n    },\n    country: null,\n    countryName: null,\n    coverage: [{}],\n    coverage_second_level: [{}],\n    coverageType: 1,\n    start_date: undefined,\n    end_date: undefined,\n    platforms: [{\n        name: null,\n        strategies: []\n    }],\n    licenses: [],\n    fields: [],\n    donors: [{}],\n    application: [],\n    reports: [{}],\n    publications: [{}],\n    links: [{}],\n    contact_name: null,\n    contact_email: null,\n    implementation_overview: null,\n    implementation_dates: null,\n    geographic_scope: null,\n    interoperability_links: [],\n    interoperability_standards: [],\n    wiki: '',\n    repository: '',\n    mobile_application: '',\n    implementing_partners: [{}],\n    data_exchanges: [],\n    his_bucket: [],\n    hsc_challenges: [],\n    health_focus_areas: [],\n    government_investor: undefined\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvc3RhdGljX2RhdGEvcHJvamVjdF9kZWZpbml0aW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9zdG9yZS9zdGF0aWNfZGF0YS9wcm9qZWN0X2RlZmluaXRpb24uanM/Y2M4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgcHJvamVjdF9kZWZpbml0aW9uID0ge1xuICAgIG5hbWU6IG51bGwsXG4gICAgb3JnYW5pc2F0aW9uOiB7XG4gICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgIG5hbWU6ICcnXG4gICAgfSxcbiAgICBjb3VudHJ5OiBudWxsLFxuICAgIGNvdW50cnlOYW1lOiBudWxsLFxuICAgIGNvdmVyYWdlOiBbe31dLFxuICAgIGNvdmVyYWdlX3NlY29uZF9sZXZlbDogW3t9XSxcbiAgICBjb3ZlcmFnZVR5cGU6IDEsXG4gICAgc3RhcnRfZGF0ZTogdW5kZWZpbmVkLFxuICAgIGVuZF9kYXRlOiB1bmRlZmluZWQsXG4gICAgcGxhdGZvcm1zOiBbe1xuICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICBzdHJhdGVnaWVzOiBbXVxuICAgIH1dLFxuICAgIGxpY2Vuc2VzOiBbXSxcbiAgICBmaWVsZHM6W10sXG4gICAgZG9ub3JzOiBbe31dLFxuICAgIGFwcGxpY2F0aW9uOiBbXSxcbiAgICByZXBvcnRzOiBbe31dLFxuICAgIHB1YmxpY2F0aW9uczogW3t9XSxcbiAgICBsaW5rczogW3t9XSxcbiAgICBjb250YWN0X25hbWU6IG51bGwsXG4gICAgY29udGFjdF9lbWFpbDogbnVsbCxcbiAgICBpbXBsZW1lbnRhdGlvbl9vdmVydmlldzogbnVsbCxcbiAgICBpbXBsZW1lbnRhdGlvbl9kYXRlczogbnVsbCxcbiAgICBnZW9ncmFwaGljX3Njb3BlOiBudWxsLFxuICAgIGludGVyb3BlcmFiaWxpdHlfbGlua3M6IFtdLFxuICAgIGludGVyb3BlcmFiaWxpdHlfc3RhbmRhcmRzOiBbXSxcbiAgICB3aWtpOiAnJyxcbiAgICByZXBvc2l0b3J5OiAnJyxcbiAgICBtb2JpbGVfYXBwbGljYXRpb246ICcnLFxuICAgIGltcGxlbWVudGluZ19wYXJ0bmVyczpbe31dLFxuICAgIGRhdGFfZXhjaGFuZ2VzOiBbXSxcbiAgICBoaXNfYnVja2V0OiBbXSxcbiAgICBoc2NfY2hhbGxlbmdlczogW10sXG4gICAgaGVhbHRoX2ZvY3VzX2FyZWFzOiBbXSxcbiAgICBnb3Zlcm5tZW50X2ludmVzdG9yOiB1bmRlZmluZWRcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/store/static_data/project_definition.js\n");

/***/ })

}]);