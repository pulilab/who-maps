<md-toolbar class="md-medium-tall toolbar-project md-whiteframe-1dp" ng-if="vm.showSubBar()">
  <div class="md-toolbar-tools md-toolbar-tools-bottom" ng-hide="!vm.state.params.appName">

    <div class="large project-name">
      <div>{{vm.currentProject.name}} ({{vm.currentProject.country_name}})</div>
      <md-icon class="material-icons viewerIcon" ng-show="vm.currentProject.isViewer">visibility</md-icon>
      <md-icon class="material-icons memberIcon" ng-show="vm.currentProject.isMember">grade</md-icon>
    </div>

    <div flex></div>

    <div class="project-info" layout="row">
      <div class="info-block" ng-show="vm.currentProject.isPublished">
        <h6>
          {{vm.translate('SUB_BAR.PUBLIC_ID_LABEL')}}
        </h6>
        <span>{{vm.currentProject.public_id}}</span>
      </div>
      <div class="info-block">
        <h6>
          {{vm.translate('SUB_BAR.VERSION_LABEL')}}
        </h6>
        <span ng-show="vm.currentProject.isPublished">
          {{vm.lastVersion}}.
          {{vm.lastVersionDate ? ('(' + (vm.lastVersionDate | date: medium) + ')') : '' }}
        </span>
        <span ng-hide="vm.currentProject.isPublished">
          {{vm.translate('SUB_BAR.DRAFT_VERSION_LABEL')}}
        </span>
      </div>
      <div class="info-block">
        <h6>
          {{vm.translate('SUB_BAR.ORGANISATION_LABEL')}}
        </h6>
        <span>{{vm.currentProject.organisation_name}}</span>
      </div>
      <div class="info-block" ng-if="vm.currentProject.contact_name">
        <h6>
          {{vm.translate('SUB_BAR.CONTACT_PERSON_LABEL')}}
        </h6>
        <span>{{vm.currentProject.contact_name}}</span>
        <md-button class="contact-button" ng-href="mailto:{{vm.currentProject.contact_email}}"  md-no-ink>
          <md-icon class="material-icons">
            mail_outline
          </md-icon>
          {{vm.translate('SUB_BAR.EMAIL_LABEL')}}
        </md-button>
      </div>

    </div>
  </div>
  <div class="md-toolbar-tools md-toolbar-tools-mainmenu">
    <div class="project-mainmenu">
      <md-button ui-sref="dashboard"
                 ui-sref-active="active" md-no-ink>
        <md-tooltip md-autohide md-direction="top">
          {{vm.translate('SUB_BAR.DASHBOARD_BUTTON_TOOLTIP')}}
        </md-tooltip>
        {{vm.translate('SUB_BAR.DASHBOARD_BUTTON')}}
      </md-button>

      <md-button ui-sref="editProject" ng-disabled="!vm.hasProfile()" ng-if="vm.currentProject.isMember && !vm.viewMode" ui-sref-active="active" md-no-ink>
        <md-tooltip md-autohide md-direction="top">
          {{vm.translate('SUB_BAR.EDIT_PROJECT_BUTTON_TOOLTIP')}}
        </md-tooltip>
        {{vm.translate('SUB_BAR.EDIT_PROJECT_BUTTON')}}
      </md-button>

      <md-button ui-sref="maps" ng-show="vm.userType !== 'G'" ng-if="!vm.viewMode" ng-disabled="!vm.hasProfile()" ui-sref-active="active" md-no-ink>
        <md-tooltip md-autohide md-direction="top">
          {{vm.translate('SUB_BAR.MAPS_TOOLKIT_BUTTON_TOOLTIP')}}
        </md-tooltip>
        <span ng-show="vm.currentProject.isViewer">
        {{vm.translate('SUB_BAR.MAPS_TOOLKIT_BUTTON_AS_VIEWER')}}
        </span>
        <span ng-show="vm.currentProject.isMember">
        {{vm.translate('SUB_BAR.MAPS_TOOLKIT_BUTTON_AS_MEMBER')}}
        </span>
      </md-button>

      <md-button ui-sref="summary" ng-show="vm.userType !== 0" ng-if="!vm.viewMode" ng-disabled="!vm.hasProfile()" ui-sref-active="active" md-no-ink>
        <md-tooltip md-autohide md-direction="top">
          {{vm.translate('SUB_BAR.SCORE_BUTTON_TOOLTIP')}}
        </md-tooltip>
        {{vm.translate('SUB_BAR.SCORE_BUTTON')}}
      </md-button>

      <div class="project-submenu">
        <md-menu md-position-mode="target-left target">
          <md-button ng-click="vm.openMenu($mdOpenMenu, $event)" ng-show="vm.currentProject.isPublished" class="share-link" aria-label="Share" md-no-ink>
            <!-- <md-icon class="material-icons">share</md-icon> -->
            {{vm.translate('SUB_BAR.SHARE_LINK_MODULE.SHARE_PUBLIC_LINK_BUTTON')}}
          </md-button>
          <md-menu-content class="share-url">
            <md-menu-item>
              <span class="share-title">
                {{vm.translate('SUB_BAR.SHARE_LINK_MODULE.SHARE_PUBLIC_LINK_TEXT')}}
              </span>
            </md-menu-item>
            <md-menu-item>
              <input readonly class="share-url-box" ng-model="vm.shareUrl.url" />
            </md-menu-item>
            <md-menu-item>
              <div class="share-button-container" >
                <md-button ng-hide="vm.shareUrl.copyClicked"
                           data-clipboard-target='.share-url-box'
                           class="md-primary md-raised share-copy"
                           md-prevent-menu-close="md-prevent-menu-close" >
                  {{vm.translate('SUB_BAR.SHARE_LINK_MODULE.COPY_URL_BUTTON')}}
                </md-button>
                <md-button ng-show="vm.shareUrl.copyClicked"
                           class="md-raised share-copy share-copied">
                  <md-icon>check</md-icon>
                  {{vm.translate('SUB_BAR.SHARE_LINK_MODULE.COPIED_CONFIRMATION')}}
                </md-button>
                <md-button class="share-cancel">
                  {{vm.translate('SUB_BAR.SHARE_LINK_MODULE.CLOSE_BUTTON')}}
                </md-button>
              </div>
            </md-menu-item>
          </md-menu-content>
        </md-menu>
      </div>
    </div>
  </div>

</md-toolbar>
