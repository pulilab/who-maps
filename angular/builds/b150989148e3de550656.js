webpackJsonp([7],{1256:function(t,e,r){t.exports=r.p+"public/fonts/dha-logo.svg"},1613:function(t,e,r){t.exports={default:r(1614),__esModule:!0}},1614:function(t,e,r){r(298),r(104),r(118),r(1615),r(1621),t.exports=r(14).Set},1615:function(t,e,r){"use strict";var n=r(1616);t.exports=r(1617)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},1616:function(t,e,r){"use strict";var n=r(47).f,i=r(161),a=r(658),o=r(83),s=r(657),u=r(160),l=r(653),c=r(297),f=r(682),h=r(683),d=r(57),p=r(294).fastKey,A=d?"_s":"size",v=function(t,e){var r,n=p(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,c){var f=t(function(t,n){s(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[A]=0,void 0!=n&&l(n,r,t[c],t)});return a(f.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[A]=0},delete:function(t){var e=this,r=v(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[A]--}return!!r},forEach:function(t){s(this,f,"forEach");for(var e,r=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!v(this,t)}}),d&&n(f.prototype,"size",{get:function(){return u(this[A])}}),f},def:function(t,e,r){var n,i,a=v(t,e);return a?a.v=r:(t._l=a={i:i=p(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=a),n&&(n.n=a),t[A]++,"F"!==i&&(t._i[i]=a)),t},getEntry:v,setStrong:function(t,e,r){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?f(0,r.k):"values"==e?f(0,r.v):f(0,[r.k,r.v]):(t._t=void 0,f(1))},r?"entries":"values",!r,!0),h(e)}}},1617:function(t,e,r){"use strict";var n=r(30),i=r(41),a=r(294),o=r(84),s=r(66),u=r(658),l=r(653),c=r(657),f=r(65),h=r(119),d=r(47).f,p=r(1618)(0),A=r(57);t.exports=function(t,e,r,v,y,g){var m=n[t],k=m,b=y?"set":"add",w=k&&k.prototype,x={};return A&&"function"==typeof k&&(g||w.forEach&&!o(function(){(new k).entries().next()}))?(k=e(function(e,r){c(e,k,t,"_c"),e._c=new m,void 0!=r&&l(r,y,e[b],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!g||"clear"!=t)&&s(k.prototype,t,function(r,n){if(c(this,k,t),!e&&g&&!f(r))return"get"==t&&void 0;var i=this._c[t](0===r?0:r,n);return e?this:i})}),"size"in w&&d(k.prototype,"size",{get:function(){return this._c.size}})):(k=v.getConstructor(e,t,y,b),u(k.prototype,r),a.NEED=!0),h(k,t),x[t]=k,i(i.G+i.W+i.F,x),g||v.setStrong(k,t,y),k}},1618:function(t,e,r){var n=r(83),i=r(296),a=r(103),o=r(162),s=r(1619);t.exports=function(t,e){var r=1==t,u=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var A,v,y=a(e),g=i(y),m=n(s,p,3),k=o(g.length),b=0,w=r?d(e,k):u?d(e,0):void 0;k>b;b++)if((h||b in g)&&(A=g[b],v=m(A,b,y),t))if(r)w[b]=v;else if(v)switch(t){case 3:return!0;case 5:return A;case 6:return b;case 2:w.push(A)}else if(c)return!1;return f?-1:l||c?c:w}}},1619:function(t,e,r){var n=r(1620);t.exports=function(t,e){return new(n(t))(e)}},1620:function(t,e,r){var n=r(65),i=r(687),a=r(22)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},1621:function(t,e,r){var n=r(41);n(n.P+n.R,"Set",{toJSON:r(1622)("Set")})},1622:function(t,e,r){var n=r(163),i=r(1623);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},1623:function(t,e,r){var n=r(653);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},675:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(15)),a=n(r(56)),o=n(r(290)),s=n(r(16)),u=n(r(10)),l=n(r(11)),c=n(r(100)),f=n(r(0)),h=n(r(676)),d=function(){function t(e){(0,u.default)(this,t),this.onInit(),this.makePDF=this.makePDF.bind(this,e)}return(0,l.default)(t,[{key:"onInit",value:function(){this.logo=r(1256),this.exportDate=(0,f.default)().format("Do MMM, YYYY")}},{key:"printDate",value:function(t){return(0,f.default)(t).format("Do MMM, YYYY")}},{key:"setData",value:function(t,e,r){this.projectList=t,this.country=e,this.isAllCountry=e&&!1===e.id,this.countryFlag=r}},{key:"makePDF",value:function(){var t=(0,s.default)(i.default.mark(function t(e){var n,s,u,l,f,d,p,A=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.e(13).then(r.bind(null,1634)),s=r.e(12).then(r.bind(null,1635)),t.next=4,a.default.all([n,s]);case 4:u=t.sent,l=(0,o.default)(u,2),f=l[0],d=l[1],f.vfs=d.pdfMake.vfs,this.pdfMake=f.createPdf,p={content:[{table:{widths:["50%","50%"],headerRows:2,body:[[{text:e.getString("Digital Health Atlas"),fillColor:"#1A237E",color:"#FFFFFF",colSpan:2,style:"mainHeader",margin:[5,0,0,0]},""],[{text:this.country.name.toUpperCase(),fillColor:"#EEEEEE",color:"#000000",style:"headerSecondRow",margin:[5,0,0,0]},{text:e.getString("List exported on "+this.exportDate),fillColor:"#EEEEEE",color:"#000000",style:"headerSecondRowRight",margin:[0,0,5,0]}]]},layout:"noBorders",margin:[0,10]}],defaultStyle:{font:"Roboto",fontSize:10},pageSize:"A4",margin:[40,40,40,40],pageOrientation:"landscape",styles:{mainHeader:{bold:!0,fontSize:16},headerSecondRow:{alignment:"left",fontSize:12,bold:!0},headerSecondRowRight:{alignment:"right",fontSize:12},tableHeader:{bold:!0,fontSize:14},subHeader:{bold:!0,fontSize:10,color:"#8A8A8A"}},images:h.default},(0,c.default)(this.projectList,function(t,r){var n=t.country_name.replace("-"," ").toUpperCase();p.content.push({margin:[0,10],table:{widths:[118,118,118,118,118,118],headerRows:1,body:[[{text:r+1+". "+(t.name||""),fillColor:"#EEEEEE",style:"tableHeader",colSpan:A.isAllCountry?4:5},"","","",A.isAllCountry?{text:e.getString("UUID: "+(t.uuid||"")),style:"subHeader"}:"",A.isAllCountry?n:{text:e.getString("UUID: "+(t.uuid||"")),style:"subHeader"}],[[{text:e.getString("Date of:"),style:"subHeader"},A.printDate(t.implementation_dates)],[{text:e.getString("Organisation name:"),style:"subHeader"},t.organisation_name||""],[{text:e.getString("Donors:"),style:"subHeader"},t.donors.join(", ")],[{text:e.getString("Implementing partners:"),style:"subHeader"},t.implementing_partners||""],[{text:e.getString("Health Focus Area:"),style:"subHeader"},t.health_focus_areas?t.health_focus_areas.join(", "):""],[{text:e.getString("Point of contact:"),style:"subHeader"},(t.contact_name||"")+" - "+(t.contact_email||"")]],[{stack:[{text:e.getString("Overview of digital health implementation:"),style:"subHeader"},{text:t.implementation_overview||""}],colSpan:3},"","",{stack:[{text:e.getString("Geographical coverage:"),style:"subHeader"},t.geographic_scope||""],colSpan:3},"",""]]}})}),this.pdfMake(p).download("clv-searchable-export.pdf");case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();e.default=d,t.exports=e.default},676:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={blackSquare:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAZCAYAAAC/zUevAAAEDWlDQ1BJQ0MgUHJvZmlsZQAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VVBg/m8AAABFSURBVEgN7dKxDQAwCANBk/13hhT5GUjxSJFLosOVpO9bnbO6/S33E1xBCSUQIO2EEgiQdkIJBEg7oQQCpJ1QAgHyi04MPosBMXfgJ8EAAAAASUVORK5CYII=",lightBlueSquare:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAZCAYAAAC/zUevAAAEDWlDQ1BJQ0MgUHJvZmlsZQAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VVBg/m8AAABISURBVEgN7dKxDQAgCERRZP8t7WwcQRKSPwMWn+ZKyOPWPvfF8OTw/l7vEXxBCSUQIO2EEgiQdkIJBEg7oQQCpJ1QAgHyi04UvuAD7UMtw/MAAAAASUVORK5CYII=",digitalHealthAtlas:"data:image/png;base64,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"},t.exports=e.default},680:function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(15)),o=i(r(16)),s=i(r(686)),u=i(r(1613)),l=i(r(656)),c=i(r(164)),f=i(r(290)),h=i(r(10)),d=i(r(11)),p=i(r(654)),A=i(r(100)),v=i(r(167)),y=i(r(655)),g=i(r(0)),m=i(r(675)),k=n(r(46)),b=n(r(20)),w=function(){function t(e,r,n,i,a){(0,h.default)(this,t),this.scope=e,this.filter=r,this.state=n,this.gettextCatalog=a,this.pdfExport=new m.default(a),this.$onInit=this.onInit.bind(this),this.$onDestroy=this.onDestroy.bind(this),this.generateFilters=this.generateFilters.bind(this),this.prepareFiltersCheckboxes=this.prepareFiltersCheckboxes.bind(this),this.watchers=this.watchers.bind(this),this.mapState=this.mapState.bind(this),this.checkIfFilterIsApplied=this.checkIfFilterIsApplied.bind(this),this.unsubscribe=i.connect(this.mapState,k)(this)}return(0,d.default)(t,[{key:"mapState",value:function(t){var e=k.getCurrentCountryMapData(t),r=k.getCurrentCountryDistrictProjects(t),n=(0,v.default)(this.selectedCountry)?k.getCurrentCountry(t):this.selectedCountry,i=k.getCurrentCountryProjects(t),a=(0,p.default)(i),o=this.filterNLDProjects(i,r);return{countryDistrictProjects:r,userProfile:b.getProfile(t),countries:k.getCountriesList(t),countriesLib:k.getCountriesLib(t),selectedCountry:n,mapData:e,districtProjects:r,projectsData:i,countryProjects:a,nationalLevelCoverage:o}}},{key:"onInit",value:function(){this.header=this.generateHeader(),this.lastFilter=null,this.showOnlyApproved=!1,this.filterBit=0,this.watchers(),this.showAllCountries={id:!1,name:"Show all countries"}}},{key:"onDestroy",value:function(){this.unsubscribe()}},{key:"watchers",value:function(){this.scope.$watchCollection(function(t){return t.vm.countryProjects},this.generateFilters),this.scope.$watch(function(t){return t.vm.filters},this.checkIfFilterIsApplied,!0),this.scope.$watch(function(t){return t.vm.selectedCountry},this.updateCountry.bind(this),!0),this.scope.$watchGroup([function(t){return t.vm.showOnlyApproved},function(t){return t.vm.filterBit}],this.applyFilters.bind(this)),this.scope.$watch(function(t){return t.vm.currentTab},this.handleTabSwitch.bind(this))}},{key:"checkIfFilterIsApplied",value:function(t,e){if(t&&e){var r=e.map(function(t){return t.open}),n=t.map(function(t){return t.open});r.every(function(t,e){return t===n[e]})&&Array.isArray(this.countryProjects)&&(this.filterBit+=1)}}},{key:"handleTabSwitch",value:function(t,e){0===t&&1===e&&!1===this.selectedCountry.id&&this.loadCountryProjectsOrAll(this.mapData.id)}},{key:"applyFilters",value:function(t){var e=this,r=(0,f.default)(t,1)[0],n=(r=this.selectedCountry.project_approval&&r)?this.countryProjects.filter(function(t){return t.approved}):this.countryProjects,i=[],a=[],o=function(t){var e=t.items.filter(function(t){return t.value}).map(function(t){return t.name});a=[].concat((0,c.default)(a),(0,c.default)(e));var r=function(t){return e.indexOf(t)>-1};if(e&&e.length>0){var o=!0,s=!1,u=void 0;try{for(var f,h=(0,l.default)(n);!(o=(f=h.next()).done);o=!0){var d=f.value;t.filterMappingFn(d).some(r)&&(i.includes(d)||i.push(d))}}catch(t){s=!0,u=t}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}}},s=!0,u=!1,h=void 0;try{for(var d,p=(0,l.default)(this.filters);!(s=(d=p.next()).done);s=!0){o(d.value)}}catch(t){u=!0,h=t}finally{try{!s&&p.return&&p.return()}finally{if(u)throw h}}this.scope.$evalAsync(function(){a&&a.length>0?e.projectsData=i:e.projectsData=n,e.nationalLevelCoverage=e.filterNLDProjects(e.projectsData),e.districtProjects=e.filterDLDProjects(e.projectsData)})}},{key:"generateHeader",value:function(){return{name:{up:!1,down:!1},country:{up:!1,down:!1},organisation_name:{up:!1,down:!1},donors:{up:!1,down:!1},contact_name:{up:!1,down:!1},implementation_overview:{up:!1,down:!1},implementing_partners:{up:!1,down:!1},geographic_scope:{up:!1,down:!1},health_focus_areas:{up:!1,down:!1}}}},{key:"prepareFiltersCheckboxes",value:function(t){var e=new u.default,r=!0,n=!1,i=void 0;try{for(var a,o=(0,l.default)(this.countryProjects);!(r=(a=o.next()).done);r=!0){var c=a.value,f=[];f=(f=t instanceof Function?t(c):c[t])||[];var h=!0,d=!1,p=void 0;try{for(var A,v=(0,l.default)(f);!(h=(A=v.next()).done);h=!0){var y=A.value;e.add(y)}}catch(t){d=!0,p=t}finally{try{!h&&v.return&&v.return()}finally{if(d)throw p}}}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return(e=(0,s.default)(e)).map(function(t){return{value:!1,name:t}})}},{key:"generateFilters",value:function(t){if(t&&Array.isArray(t)){var e=this.gettextCatalog,r={name:e.getString("Digital Health Interventions"),filterMappingFn:function(t){return Array.isArray(t.digital_strategies)?t.digital_strategies:[]},open:!1,items:this.prepareFiltersCheckboxes("digital_strategies")},n={name:e.getString("Health Focus Areas"),filterMappingFn:function(t){return Array.isArray(t.health_focus_areas)?t.health_focus_areas:[]},open:!1,items:this.prepareFiltersCheckboxes("health_focus_areas")},i={name:e.getString("Health Information Systems"),filterMappingFn:function(t){return Array.isArray(t.his_bucket)?t.his_bucket:[]},open:!1,items:this.prepareFiltersCheckboxes("his_bucket")},a={name:e.getString("Health System Challenges"),filterMappingFn:function(t){return Array.isArray(t.hsc_challenges)?t.hsc_challenges:[]},open:!1,items:this.prepareFiltersCheckboxes("hsc_challenges")},o={name:e.getString("Software"),filterMappingFn:function(t){return Array.isArray(t.platforms)?t.platforms:[]},open:!1,items:this.prepareFiltersCheckboxes("platforms")};this.filters=[r,n,i,a,o]}}},{key:"filterNLDProjects",value:function(t){var e=[];for(var r in this.countryDistrictProjects)e=e.concat(this.countryDistrictProjects[r]);return e=(0,s.default)(new u.default(e)),e=e.map(function(t){return t.id}),t.filter(function(t){return-1===e.indexOf(t.id)})}},{key:"filterDLDProjects",value:function(t){var e={},r=t.map(function(t){return t.id});for(var n in this.countryDistrictProjects){var i=this.countryDistrictProjects[n].filter(function(t){return r.indexOf(t.id)>-1});i&&i.length>0&&(e[n]=i)}return e}},{key:"updateCountry",value:function(t,e){e&&t.id!==e.id&&(t.id?this.setCurrentCountry(t.id):this.setCurrentCountry(null),this.loadCountryProjectsOrAll(t.id)),0===this.projectsData.length&&this.loadCountryProjectsOrAll(t.id),t.id&&this.projectsData.some(function(e){return e.country!==t.id})&&this.loadCountryProjectsOrAll(t.id)}},{key:"exportPDF",value:function(){this.pdfExport.setData(this.projectsData,this.selectedCountry),this.pdfExport.makePDF()}},{key:"exportCSV",value:function(){var t=(0,o.default)(a.default.mark(function t(){var e,r,n,i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,y.default)(this.projectsData,function(t){return t.id}),t.next=3,k.csvExport(e);case 3:r=t.sent,n=encodeURI("data:text/csv;charset=utf-8,"+r),(i=document.createElement("a")).setAttribute("href",n),i.setAttribute("download","clv-export-"+(0,g.default)().format("MMMM-Do-YYYY-h-mm-ss ")+".csv"),i.setAttribute("target","_blank"),document.body.appendChild(i),i.click();case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"orderTable",value:function(t){(0,A.default)(this.header,function(t){t.up=!1,t.down=!1}),this.header[t].down=!0;var e=null,r="-"+t;t!==this.lastFilter&&(e=t,r=t,this.header[t].down=!1,this.header[t].up=!0),this.lastFilter=e,this.projectsData=this.filter("orderBy")(this.projectsData,r)}},{key:"printImplementingPartners",value:function(t){var e=t.implementing_partners;return e.length>0?e.join(", ").trim():""}}],[{key:"factory",value:function(){function e(e,r,n,i,a){return new t(e,r,n,i,a)}return e.$inject=["$scope","$filter","$state","$ngRedux","gettextCatalog"],e}}]),t}();e.default=w,t.exports=e.default}});