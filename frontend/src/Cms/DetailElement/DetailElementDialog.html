<md-dialog aria-label="detail-dialog" class="detail-dialog">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h3 class="md-title">{{vm.itemType(vm.content)}}</h3>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="vm.cancel()">
        <md-icon aria-label="Close dialog">close</md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <md-dialog-content>
    <div class="md-dialog-content" ng-class="vm.content.type">
      <div class="content">

        <!-- Lessons & tips / Resources -->
        <div class="cms-content-wrapper" ng-if="vm.content.type !== 3" layout="column">
          <div class="content-header">
            <div class="name md-display-1">
              {{vm.content.name}}
            </div>

            <div class="created">
              {{vm.prettifyDate(vm.content)}}
              <span class="sep">|</span>
              <!-- visible if user is able to edit -->
              <span ng-show="vm.isAuthor()">
                <cms-add-new-content to-edit="vm.content"></cms-add-new-content>
                <md-button class="edit-button" md-no-ink ng-click="vm.delete()">
                  <md-icon>clear</md-icon> Delete
                </md-button>
                <span class="sep">|</span>
              </span>
              <!-- / -->
              <cms-report-button item="vm.content"></cms-report-button>
            </div>
          </div>

          <div layout="row">
            <div class="cover">
              <a href="{{vm.content.cover}}" target="_blank">
                <img ng-src="{{vm.content.cover}}"  ng-if="vm.content.cover" />
              </a>
              <span class="no-cover" ng-if="!vm.content.cover"></span>
            </div>

            <div class="body" ng-if="!vm.editMode" ng-bind-html="vm.content.body"></div>
            <div class="body edit-mode" ng-if="vm.editMode">
              <trix-component placeholder="Start typing here..." valid="vm.modified.valid" value="vm.modified.body" char-limit="2500"></trix-component>
              <md-button class="md-primary md-raised" ng-click="vm.update()" ng-disabled="!vm.modified.valid">
                <md-icon>done</md-icon> Save
              </md-button>
              <md-button ng-click="vm.edit()">
                <md-icon>undo</md-icon> Cancel
              </md-button>
            </div>
          </div>
        </div>
        <!-- /end -->

        <!-- Experiences -->
        <div class="cms-content-wrapper experiences" ng-if="vm.content.type === 3" layout="column">
          <div class="comment-header" layout="row">
            <div class="avatar">
              <img ng-src="{{vm.content.cover}}" ng-if="vm.content.cover" />
              <span class="no-avatar" ng-if="!vm.content.cover"></span>
            </div>

            <div class="comment-info">
              <div class="name md-display-1">
                {{vm.content.name}}
              </div>

              <div class="created">
                {{vm.prettifyDate(vm.content)}}
                <span class="sep">|</span>
                <!-- visible if user is able to edit -->
                <span ng-show="vm.isAuthor()">
                  <md-button class="edit-button" md-no-ink ng-click="vm.edit()">
                    <md-icon>create</md-icon> Edit
                  </md-button>
                  <md-button class="edit-button" md-no-ink ng-click="vm.delete()">
                    <md-icon>clear</md-icon> Delete
                  </md-button>
                  <span class="sep">|</span>
                </span>
                <!-- / -->
                <cms-report-button item="vm.content"></cms-report-button>
              </div>
            </div>
          </div>

          <div class="body" ng-if="!vm.editMode" ng-bind-html="vm.content.body"></div>
          <div class="body edit-mode" ng-if="vm.editMode">
            <trix-component placeholder="Start typing here..." valid="vm.modified.valid" value="vm.modified.body" char-limit="2500"></trix-component>
            <md-button class="md-primary md-raised" ng-click="vm.update()" ng-disabled="!vm.modified.valid">
              <md-icon>done</md-icon> Save
            </md-button>
            <md-button ng-click="vm.edit()" >
              <md-icon>undo</md-icon> Cancel
            </md-button>
          </div>
        </div>
        <!-- /end -->
      </div>

      <div class="comment-wrapper" ng-show="vm.content.comments.length > 0">
        <h3 class="md-title">Comments ({{vm.content.comments.length}})</h3>

        <a ng-click="vm.scrollToAddNewComment()" class="goto-comment">
          <md-icon aria-label="Go to Add comment">comment</md-icon>
          Add comment
        </a>

        <cms-comment-widget comment="comment" type="vm.content.type" ng-repeat="comment in vm.content.comments"></cms-comment-widget>
      </div>

      <div class="add-new-comment" id="add-new-comment">
        <h3 class="md-title">Add new comment</h3>
        <trix-component placeholder="Start typing here..." valid="vm.newComment.valid" value="vm.newComment.text" char-limit="2500"></trix-component>
        <md-button ng-click="vm.addComment()" ng-disabled="!vm.newComment.valid" class="md-primary md-raised add-comment">
          Add  comment
        </md-button>
      </div>
    </div>
  </md-dialog-content>

  <!-- <md-dialog-actions layout="row">
  </md-dialog-actions> -->
</md-dialog>
