<md-grid-list
        md-cols="11"
        md-gutter="0px"
        md-row-height="51px"
        md-on-layout="vm.layoutDone()"
>

    <md-grid-tile
            md-colspan="9"
            md-rowspan="1" >
        <div class="header" layout="row" layout-align="start center">
            <h2 class="md-title text-uppercase">Common <span class="text-lowercase">m</span>HEALTH &amp; ICT Applications</h2>
        </div>
    </md-grid-tile>

    <md-grid-tile md-colspan="2" md-rowspan="1" class="empty"> </md-grid-tile>

    <md-grid-tile md-colspan="{{tile.colSpan}}" md-rowspan="{{tile.rowSpan}}" ng-repeat="tile in vm.applicationRow" ng-if="!tile.disabled" ng-hide="!vm.layoutReady && !tile.isMain">
        <div class="tile" ng-class="tile.classGenerator(tile)">

            <div ng-if="tile.isHeader">
                <div class="app-number">{{vm.labelGenerator(tile)}}</div>
                <div class="app-button">
                    <md-button md-no-ink class="md-button-override"  ng-click="tile.clickHandler(tile)">
                        <span>{{tile.content}}</span>
                        <md-icon class="material-icons" ng-show="tile.subApplications.length > 0 && vm.editMode"></md-icon>
                    </md-button>
                </div>
            </div>

            <div ng-if="tile.isInput" ng-click="tile.clickHandler(tile)" >

                <div ng-if="vm.editMode && tile.bubbleDrawn && tile.activated"   class="bubble-shape">
                    <div class="app-number white-number">{{vm.labelGenerator(tile)}}</div>
                    <md-input-container md-no-float class="" >
                        <input aria-label="tile content" placeholder="Add text here"
                               id="appBubble_{{vm.labelGenerator(tile)}}"
                               ng-model="tile.content"
                               ng-change="vm.changeHandler(tile)"
                               ng-blur="vm.blurHandler(tile)"
                               ng-model-options="{updateOn: 'blur'}"
                               ng-keydown="vm.inputHandler(tile, $event)"
                        />
                    </md-input-container>
                    <span class="app-delete" ng-click="vm.confirmDeleteBubble(tile)"><span>&times;</span></span>
                </div>

                <div ng-if="!vm.editMode && tile.content && tile.activated" class="bubble-shape">
                    <div class="app-number white-number">{{vm.labelGenerator(tile)}}</div>
                    <div class="app-text" >{{tile.content}}</div>
                </div>

                <div ng-if="vm.editMode && !tile.bubbleDrawn " layout="row" layout-align="center center">
                    <span class="bubble bubble-allowed" ng-if="tile.activated">
                    </span>
                    <span class="bubble bubble-notallowed" ng-if="!tile.activated"></span>
                </div>
            </div>

            <div ng-if="tile.isSelect && tile.rowEnabled">
                <div ng-if="!vm.editMode">
                    <span ng-repeat="tax in tile.content">
                        <span class="md-tax-text md-small">
                            {{tax}}
                        </span>
                    </span>
                </div>
                <div ng-if="vm.editMode" >

                    <ssmenu
                            ng-if="vm.editMode"
                            ng-model="tile.content"
                            sub-options="taxonomy"
                            options="vm.selectedConstraints"
                            aria-label="taxonomy-option"
                            multiple="true"
                            sub-header="name"
                            data-placeholder="Select item(s)"
                            md-container-class="small"
                            replace-comma="true"
                            searchable="false"
                            on-close-callback="tile.saveTaxonomy">
                        class="small">
                    </ssmenu>
                </div>
            </div>

        </div>
    </md-grid-tile>

</md-grid-list>
