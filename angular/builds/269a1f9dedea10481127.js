(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[612],{

/***/ "./src/store/modules/cms.js":
/*!**********************************!*\
  !*** ./src/store/modules/cms.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getAxisAndDomainName = exports.getDomain = exports.getAxisName = exports.getDomainStructureForCms = exports.getCmsData = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.loadCmsData = loadCmsData;\nexports.addContent = addContent;\nexports.updateContent = updateContent;\nexports.saveOrUpdateContent = saveOrUpdateContent;\nexports.deleteContent = deleteContent;\nexports.reportContent = reportContent;\nexports.reportComment = reportComment;\nexports.deleteComment = deleteComment;\nexports.addNewComment = addNewComment;\nexports.updateComment = updateComment;\nexports.default = cms;\n\nvar _axios = __webpack_require__(/*! ../../plugins/axios */ \"./src/plugins/axios.js\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _findIndex = __webpack_require__(/*! lodash/findIndex */ \"./node_modules/lodash/findIndex.js\");\n\nvar _findIndex2 = _interopRequireDefault(_findIndex);\n\nvar _system = __webpack_require__(/*! ./system */ \"./src/store/modules/system.js\");\n\nvar SystemModule = _interopRequireWildcard(_system);\n\nvar _user = __webpack_require__(/*! ./user */ \"./src/store/modules/user.js\");\n\nvar UserModule = _interopRequireWildcard(_user);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } /* eslint-disable no-warning-comments */\n\n\nvar initialState = {\n    data: []\n};\n\n// GETTERS\n\nvar getCmsData = exports.getCmsData = function getCmsData(state) {\n    return [].concat(_toConsumableArray(state.cms.data));\n};\n\nvar getDomainStructureForCms = exports.getDomainStructureForCms = function getDomainStructureForCms(state) {\n    var axes = SystemModule.getAxis(state);\n    var domains = SystemModule.getDomains(state);\n    return axes.map(function (a) {\n        return _extends({}, a, { domains: domains.filter(function (d) {\n                return d.axis === a.id;\n            }) });\n    });\n};\n\nvar getAxisName = exports.getAxisName = function getAxisName(state, index) {\n    var axes = SystemModule.getAxis(state);\n    return axes[index].name;\n};\n\nvar getDomain = exports.getDomain = function getDomain(state, id) {\n    var domains = SystemModule.getDomains(state);\n    return domains.find(function (domain) {\n        return domain.id === id;\n    });\n};\n\nvar getAxisAndDomainName = exports.getAxisAndDomainName = function getAxisAndDomainName(state, domainId) {\n    var domain = exports.getDomain(state, domainId);\n    var axes = exports.getDomainStructureForCms(state);\n    var axis = axes.find(function (ax) {\n        return ax.domains.some(function (dom) {\n            return dom.id === domain.id;\n        });\n    });\n    return {\n        axisName: axis.name, domainName: domain.name\n    };\n};\n\n// ACTIONS\n\nfunction loadCmsData() {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(dispatch) {\n            var _ref2, data;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.next = 2;\n                            return _axios2.default.get('/api/cms/');\n\n                        case 2:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n\n                            data = data.map(function (d) {\n                                d.searchOccurrences = 0;\n                                return d;\n                            });\n                            dispatch({ type: 'SET_CMS_DATA', data: data });\n\n                        case 6:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\nfunction addContent(resource) {\n    var _this2 = this;\n\n    return function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dispatch) {\n            var _ref4, data;\n\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _context2.next = 2;\n                            return _axios2.default.post('/api/cms/', resource);\n\n                        case 2:\n                            _ref4 = _context2.sent;\n                            data = _ref4.data;\n\n                            data.searchOccurrences = 0;\n                            dispatch({ type: 'ADD_CMS_ENTRY', item: data });\n\n                        case 6:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2);\n        }));\n\n        return function (_x2) {\n            return _ref3.apply(this, arguments);\n        };\n    }();\n}\n\nfunction updateContent(resource, id) {\n    var _this3 = this;\n\n    return function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dispatch) {\n            var _ref6, data;\n\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            _context3.next = 2;\n                            return _axios2.default.put('/api/cms/' + id + '/', resource);\n\n                        case 2:\n                            _ref6 = _context3.sent;\n                            data = _ref6.data;\n\n                            data.searchOccurrences = 0;\n                            dispatch({ type: 'UPDATE_CMS_ENTRY', item: data });\n\n                        case 6:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, _this3);\n        }));\n\n        return function (_x3) {\n            return _ref5.apply(this, arguments);\n        };\n    }();\n}\n\nfunction saveOrUpdateContent(resource) {\n    return function (dispatch, getState) {\n        var state = getState();\n        resource = _extends({}, resource);\n        var profile = UserModule.getProfile(state);\n        resource.author = profile.id;\n        var id = resource.id || false;\n        if (resource.cover && resource.cover.type.indexOf('image') === -1) {\n            delete resource.cover;\n        }\n        if (resource.cover) {\n            var formData = new FormData();\n            for (var key in resource) {\n                formData.append(key, resource[key]);\n            }\n            resource = formData;\n        }\n\n        if (id) {\n            dispatch(exports.updateContent(resource, id));\n        } else {\n            dispatch(exports.addContent(resource));\n        }\n    };\n}\n\nfunction deleteContent(_ref7) {\n    var _this4 = this;\n\n    var id = _ref7.id;\n\n    return function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(dispatch) {\n            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            _context4.next = 2;\n                            return _axios2.default.delete('/api/cms/' + id + '/');\n\n                        case 2:\n                            dispatch({ type: 'DELETE_CMS_ENTRY', id: id });\n\n                        case 3:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, _callee4, _this4);\n        }));\n\n        return function (_x4) {\n            return _ref8.apply(this, arguments);\n        };\n    }();\n}\n\nfunction reportContent(resource) {\n    var _this5 = this;\n\n    return function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(dispatch) {\n            return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                    switch (_context5.prev = _context5.next) {\n                        case 0:\n                            _context5.next = 2;\n                            return _axios2.default.patch('/api/cms/' + resource.id + '/');\n\n                        case 2:\n                            resource.state = 2;\n                            dispatch({ type: 'UPDATE_CMS_ENTRY', item: resource });\n\n                        case 4:\n                        case 'end':\n                            return _context5.stop();\n                    }\n                }\n            }, _callee5, _this5);\n        }));\n\n        return function (_x5) {\n            return _ref9.apply(this, arguments);\n        };\n    }();\n}\n\nfunction reportComment(resource) {\n    var _this6 = this;\n\n    return function () {\n        var _ref10 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(dispatch) {\n            return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                while (1) {\n                    switch (_context6.prev = _context6.next) {\n                        case 0:\n                            _context6.next = 2;\n                            return _axios2.default.patch('/api/comment/' + resource.id + '/');\n\n                        case 2:\n                            resource.state = 2;\n                            dispatch({ type: 'UPDATE_COMMENT', comment: resource });\n\n                        case 4:\n                        case 'end':\n                            return _context6.stop();\n                    }\n                }\n            }, _callee6, _this6);\n        }));\n\n        return function (_x6) {\n            return _ref10.apply(this, arguments);\n        };\n    }();\n}\n\nfunction deleteComment(comment) {\n    var _this7 = this;\n\n    return function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(dispatch) {\n            return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                while (1) {\n                    switch (_context7.prev = _context7.next) {\n                        case 0:\n                            _context7.next = 2;\n                            return _axios2.default.delete('/api/comment/' + comment.id + '/');\n\n                        case 2:\n                            dispatch({ type: 'DELETE_COMMENT', comment: comment });\n\n                        case 3:\n                        case 'end':\n                            return _context7.stop();\n                    }\n                }\n            }, _callee7, _this7);\n        }));\n\n        return function (_x7) {\n            return _ref11.apply(this, arguments);\n        };\n    }();\n}\n\nfunction addNewComment(comment, _ref12) {\n    var _this8 = this;\n\n    var id = _ref12.id;\n\n    return function () {\n        var _ref13 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(dispatch, getState) {\n            var _ref14, data;\n\n            return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                while (1) {\n                    switch (_context8.prev = _context8.next) {\n                        case 0:\n                            comment.post = id;\n                            comment.user = getState().user.profile.id;\n                            _context8.next = 4;\n                            return _axios2.default.post('/api/comment/', comment);\n\n                        case 4:\n                            _ref14 = _context8.sent;\n                            data = _ref14.data;\n\n                            dispatch({ type: 'ADD_COMMENT', comment: data });\n\n                        case 7:\n                        case 'end':\n                            return _context8.stop();\n                    }\n                }\n            }, _callee8, _this8);\n        }));\n\n        return function (_x8, _x9) {\n            return _ref13.apply(this, arguments);\n        };\n    }();\n}\n\nfunction updateComment(comment) {\n    var _this9 = this;\n\n    return function () {\n        var _ref15 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(dispatch) {\n            var _ref16, data;\n\n            return regeneratorRuntime.wrap(function _callee9$(_context9) {\n                while (1) {\n                    switch (_context9.prev = _context9.next) {\n                        case 0:\n                            _context9.next = 2;\n                            return _axios2.default.put('/api/comment/' + comment.id + '/', comment);\n\n                        case 2:\n                            _ref16 = _context9.sent;\n                            data = _ref16.data;\n\n                            dispatch({ type: 'UPDATE_COMMENT', comment: data });\n\n                        case 5:\n                        case 'end':\n                            return _context9.stop();\n                    }\n                }\n            }, _callee9, _this9);\n        }));\n\n        return function (_x10) {\n            return _ref15.apply(this, arguments);\n        };\n    }();\n}\n\n// Reducers\n\nfunction cms() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case 'SET_CMS_DATA':\n            {\n                return _extends({}, state, { data: action.data });\n            }\n        case 'ADD_CMS_ENTRY':\n            {\n                return _extends({}, state, { data: [].concat(_toConsumableArray(state.data), [action.item]) });\n            }\n        case 'UPDATE_CMS_ENTRY':\n            {\n                var current = [].concat(_toConsumableArray(state.data));\n                var index = (0, _findIndex2.default)(current, function (i) {\n                    return i.id === action.item.id;\n                });\n                current.splice(index, 1, action.item);\n                return _extends({}, state, { data: current });\n            }\n        case 'DELETE_CMS_ENTRY':\n            {\n                var _current = [].concat(_toConsumableArray(state.data));\n                var _index = (0, _findIndex2.default)(_current, function (i) {\n                    return i.id === action.id;\n                });\n                _current.splice(_index, 1);\n                return _extends({}, state, { data: _current });\n            }\n        case 'ADD_COMMENT':\n            {\n                var _current2 = [].concat(_toConsumableArray(state.data));\n                var _index2 = (0, _findIndex2.default)(_current2, function (i) {\n                    return i.id === action.comment.post;\n                });\n                var item = _current2[_index2];\n                item.comments.push(action.comment);\n                _current2.splice(_index2, 1, item);\n                return _extends({}, state, { data: _current2 });\n            }\n        case 'UPDATE_COMMENT':\n            {\n                var _current3 = [].concat(_toConsumableArray(state.data));\n                var _index3 = (0, _findIndex2.default)(_current3, function (i) {\n                    return i.id === action.comment.post;\n                });\n                var _item = _current3[_index3];\n                var commentIndex = (0, _findIndex2.default)(_item.comments, function (com) {\n                    return com.id === action.comment.id;\n                });\n                _item.comments.splice(commentIndex, 1, action.comment);\n                _current3.splice(_index3, 1, _item);\n                return _extends({}, state, { data: _current3 });\n            }\n        case 'DELETE_COMMENT':\n            {\n                var _current4 = [].concat(_toConsumableArray(state.data));\n                var _index4 = (0, _findIndex2.default)(_current4, function (i) {\n                    return i.id === action.comment.post;\n                });\n                var _item2 = _current4[_index4];\n                var _commentIndex = (0, _findIndex2.default)(_item2.comments, function (com) {\n                    return com.id === action.comment.id;\n                });\n                _item2.comments.splice(_commentIndex, 1);\n                _current4.splice(_index4, 1, _item2);\n                return _extends({}, state, { data: _current4 });\n            }\n        case 'CLEAR_CMS_DATA':\n            {\n                return _extends({}, initialState);\n            }\n        default:\n            return state;\n    }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RvcmUvbW9kdWxlcy9jbXMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3N0b3JlL21vZHVsZXMvY21zLmpzPzgzY2QiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8td2FybmluZy1jb21tZW50cyAqL1xuaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uL3BsdWdpbnMvYXhpb3MnO1xuaW1wb3J0IGZpbmRJbmRleCBmcm9tICdsb2Rhc2gvZmluZEluZGV4JztcbmltcG9ydCAqIGFzIFN5c3RlbU1vZHVsZSBmcm9tICcuL3N5c3RlbSc7XG5pbXBvcnQgKiBhcyBVc2VyTW9kdWxlIGZyb20gJy4vdXNlcic7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgICBkYXRhOiBbXVxufTtcblxuLy8gR0VUVEVSU1xuXG5leHBvcnQgY29uc3QgZ2V0Q21zRGF0YSA9IHN0YXRlID0+IHtcbiAgICByZXR1cm4gWy4uLnN0YXRlLmNtcy5kYXRhXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXREb21haW5TdHJ1Y3R1cmVGb3JDbXMgPSBzdGF0ZSA9PiB7XG4gICAgY29uc3QgYXhlcyA9IFN5c3RlbU1vZHVsZS5nZXRBeGlzKHN0YXRlKTtcbiAgICBjb25zdCBkb21haW5zID0gU3lzdGVtTW9kdWxlLmdldERvbWFpbnMoc3RhdGUpO1xuICAgIHJldHVybiBheGVzLm1hcChhID0+ICh7IC4uLmEsIGRvbWFpbnM6IGRvbWFpbnMuZmlsdGVyKGQgPT4gZC5heGlzID09PSBhLmlkKSB9KSk7XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRBeGlzTmFtZSA9IChzdGF0ZSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBheGVzID0gU3lzdGVtTW9kdWxlLmdldEF4aXMoc3RhdGUpO1xuICAgIHJldHVybiBheGVzW2luZGV4XS5uYW1lO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldERvbWFpbiA9IChzdGF0ZSwgaWQpID0+IHtcbiAgICBjb25zdCBkb21haW5zID0gU3lzdGVtTW9kdWxlLmdldERvbWFpbnMoc3RhdGUpO1xuICAgIHJldHVybiBkb21haW5zLmZpbmQoZG9tYWluID0+IHtcbiAgICAgICAgcmV0dXJuIGRvbWFpbi5pZCA9PT0gaWQ7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QXhpc0FuZERvbWFpbk5hbWUgPSAoc3RhdGUsIGRvbWFpbklkKSA9PiB7XG4gICAgY29uc3QgZG9tYWluID0gZXhwb3J0cy5nZXREb21haW4oc3RhdGUsIGRvbWFpbklkKTtcbiAgICBjb25zdCBheGVzID0gZXhwb3J0cy5nZXREb21haW5TdHJ1Y3R1cmVGb3JDbXMoc3RhdGUpO1xuICAgIGNvbnN0IGF4aXMgPSBheGVzLmZpbmQoYXggPT4ge1xuICAgICAgICByZXR1cm4gYXguZG9tYWlucy5zb21lKGRvbSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZG9tLmlkID09PSBkb21haW4uaWQ7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGF4aXNOYW1lOiBheGlzLm5hbWUsIGRvbWFpbk5hbWU6IGRvbWFpbi5uYW1lXG4gICAgfTtcbn07XG5cbi8vIEFDVElPTlNcblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDbXNEYXRhKCkge1xuICAgIHJldHVybiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gICAgICAgIGxldCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9jbXMvJyk7XG4gICAgICAgIGRhdGEgPSBkYXRhLm1hcChkID0+IHtcbiAgICAgICAgICAgIGQuc2VhcmNoT2NjdXJyZW5jZXMgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIH0pO1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfQ01TX0RBVEEnLCBkYXRhIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb250ZW50KHJlc291cmNlKSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvY21zLycsIHJlc291cmNlKTtcbiAgICAgICAgZGF0YS5zZWFyY2hPY2N1cnJlbmNlcyA9IDA7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0FERF9DTVNfRU5UUlknLCBpdGVtOiBkYXRhIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb250ZW50KHJlc291cmNlLCBpZCkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gpID0+IHtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wdXQoYC9hcGkvY21zLyR7aWR9L2AsIHJlc291cmNlKTtcbiAgICAgICAgZGF0YS5zZWFyY2hPY2N1cnJlbmNlcyA9IDA7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DTVNfRU5UUlknLCBpdGVtOiBkYXRhIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlT3JVcGRhdGVDb250ZW50KHJlc291cmNlKSB7XG4gICAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgICAgICByZXNvdXJjZSA9IHsgLi4ucmVzb3VyY2UgfTtcbiAgICAgICAgY29uc3QgcHJvZmlsZSA9IFVzZXJNb2R1bGUuZ2V0UHJvZmlsZShzdGF0ZSk7XG4gICAgICAgIHJlc291cmNlLmF1dGhvciA9IHByb2ZpbGUuaWQ7XG4gICAgICAgIGNvbnN0IGlkID0gcmVzb3VyY2UuaWQgfHwgZmFsc2U7XG4gICAgICAgIGlmIChyZXNvdXJjZS5jb3ZlciAmJiByZXNvdXJjZS5jb3Zlci50eXBlLmluZGV4T2YoJ2ltYWdlJykgPT09IC0xKSB7XG4gICAgICAgICAgICBkZWxldGUgcmVzb3VyY2UuY292ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc291cmNlLmNvdmVyKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCByZXNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc291cmNlID0gZm9ybURhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGV4cG9ydHMudXBkYXRlQ29udGVudChyZXNvdXJjZSwgaWQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGV4cG9ydHMuYWRkQ29udGVudChyZXNvdXJjZSkpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNvbnRlbnQoeyBpZCB9KSB7XG4gICAgcmV0dXJuIGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKGAvYXBpL2Ntcy8ke2lkfS9gKTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnREVMRVRFX0NNU19FTlRSWScsIGlkIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXBvcnRDb250ZW50KHJlc291cmNlKSB7XG4gICAgcmV0dXJuIGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgICAgICAgYXdhaXQgYXhpb3MucGF0Y2goYC9hcGkvY21zLyR7cmVzb3VyY2UuaWR9L2ApO1xuICAgICAgICByZXNvdXJjZS5zdGF0ZSA9IDI7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DTVNfRU5UUlknLCBpdGVtOiByZXNvdXJjZSB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwb3J0Q29tbWVudChyZXNvdXJjZSkge1xuICAgIHJldHVybiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gICAgICAgIGF3YWl0IGF4aW9zLnBhdGNoKGAvYXBpL2NvbW1lbnQvJHtyZXNvdXJjZS5pZH0vYCk7XG4gICAgICAgIHJlc291cmNlLnN0YXRlID0gMjtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnVVBEQVRFX0NPTU1FTlQnLCBjb21tZW50OiByZXNvdXJjZSB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ29tbWVudChjb21tZW50KSB7XG4gICAgcmV0dXJuIGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKGAvYXBpL2NvbW1lbnQvJHtjb21tZW50LmlkfS9gKTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnREVMRVRFX0NPTU1FTlQnLCBjb21tZW50IH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXdDb21tZW50KGNvbW1lbnQsIHsgaWQgfSkge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgICAgIGNvbW1lbnQucG9zdCA9IGlkO1xuICAgICAgICBjb21tZW50LnVzZXIgPSBnZXRTdGF0ZSgpLnVzZXIucHJvZmlsZS5pZDtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL2NvbW1lbnQvJywgY29tbWVudCk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0FERF9DT01NRU5UJywgY29tbWVudDogZGF0YSB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29tbWVudChjb21tZW50KSB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnB1dChgL2FwaS9jb21tZW50LyR7Y29tbWVudC5pZH0vYCwgY29tbWVudCk7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1VQREFURV9DT01NRU5UJywgY29tbWVudDogZGF0YSB9KTtcbiAgICB9O1xufVxuXG5cbi8vIFJlZHVjZXJzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNtcyhzdGF0ZSA9IGluaXRpYWxTdGF0ZSwgYWN0aW9uKSB7XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ1NFVF9DTVNfREFUQSc6IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGRhdGE6IGFjdGlvbi5kYXRhIH07XG4gICAgfVxuICAgIGNhc2UgJ0FERF9DTVNfRU5UUlknOiB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBkYXRhOiBbLi4uc3RhdGUuZGF0YSwgYWN0aW9uLml0ZW1dIH07XG4gICAgfVxuICAgIGNhc2UgJ1VQREFURV9DTVNfRU5UUlknOiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBbLi4uc3RhdGUuZGF0YV07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KGN1cnJlbnQsIGkgPT4gaS5pZCA9PT0gYWN0aW9uLml0ZW0uaWQpO1xuICAgICAgICBjdXJyZW50LnNwbGljZShpbmRleCwgMSwgYWN0aW9uLml0ZW0pO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgZGF0YTogY3VycmVudCB9O1xuICAgIH1cbiAgICBjYXNlICdERUxFVEVfQ01TX0VOVFJZJzoge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gWy4uLnN0YXRlLmRhdGFdO1xuICAgICAgICBjb25zdCBpbmRleCA9IGZpbmRJbmRleChjdXJyZW50LCBpID0+IGkuaWQgPT09IGFjdGlvbi5pZCk7XG4gICAgICAgIGN1cnJlbnQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGRhdGE6IGN1cnJlbnQgfTtcbiAgICB9XG4gICAgY2FzZSAnQUREX0NPTU1FTlQnOiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBbLi4uc3RhdGUuZGF0YV07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KGN1cnJlbnQsIGkgPT4gaS5pZCA9PT0gYWN0aW9uLmNvbW1lbnQucG9zdCk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBjdXJyZW50W2luZGV4XTtcbiAgICAgICAgaXRlbS5jb21tZW50cy5wdXNoKGFjdGlvbi5jb21tZW50KTtcbiAgICAgICAgY3VycmVudC5zcGxpY2UoaW5kZXgsIDEsIGl0ZW0pO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgZGF0YTogY3VycmVudCB9O1xuICAgIH1cbiAgICBjYXNlICdVUERBVEVfQ09NTUVOVCc6IHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IFsuLi5zdGF0ZS5kYXRhXTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kSW5kZXgoY3VycmVudCwgaSA9PiBpLmlkID09PSBhY3Rpb24uY29tbWVudC5wb3N0KTtcbiAgICAgICAgY29uc3QgaXRlbSA9IGN1cnJlbnRbaW5kZXhdO1xuICAgICAgICBjb25zdCBjb21tZW50SW5kZXggPSBmaW5kSW5kZXgoaXRlbS5jb21tZW50cywgY29tID0+IGNvbS5pZCA9PT0gYWN0aW9uLmNvbW1lbnQuaWQpO1xuICAgICAgICBpdGVtLmNvbW1lbnRzLnNwbGljZShjb21tZW50SW5kZXgsIDEsIGFjdGlvbi5jb21tZW50KTtcbiAgICAgICAgY3VycmVudC5zcGxpY2UoaW5kZXgsIDEsIGl0ZW0pO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgZGF0YTogY3VycmVudCB9O1xuICAgIH1cbiAgICBjYXNlICdERUxFVEVfQ09NTUVOVCc6IHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IFsuLi5zdGF0ZS5kYXRhXTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kSW5kZXgoY3VycmVudCwgaSA9PiBpLmlkID09PSBhY3Rpb24uY29tbWVudC5wb3N0KTtcbiAgICAgICAgY29uc3QgaXRlbSA9IGN1cnJlbnRbaW5kZXhdO1xuICAgICAgICBjb25zdCBjb21tZW50SW5kZXggPSBmaW5kSW5kZXgoaXRlbS5jb21tZW50cywgY29tID0+IGNvbS5pZCA9PT0gYWN0aW9uLmNvbW1lbnQuaWQpO1xuICAgICAgICBpdGVtLmNvbW1lbnRzLnNwbGljZShjb21tZW50SW5kZXgsIDEpO1xuICAgICAgICBjdXJyZW50LnNwbGljZShpbmRleCwgMSwgaXRlbSk7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBkYXRhOiBjdXJyZW50IH07XG4gICAgfVxuICAgIGNhc2UgJ0NMRUFSX0NNU19EQVRBJzoge1xuICAgICAgICByZXR1cm4geyAuLi5pbml0aWFsU3RhdGUgfTtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBa0RBO0FBV0E7QUFRQTtBQVFBO0FBMkJBO0FBT0E7QUFRQTtBQVFBO0FBT0E7QUFTQTtBQVVBO0FBQ0E7QUF6SkE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTs7Ozs7OztBQUxBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakRBO0FBbURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/store/modules/cms.js\n");

/***/ })

}]);